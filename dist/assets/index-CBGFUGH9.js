(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))o(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function s(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function o(l){if(l.ep)return;l.ep=!0;const u=s(l);fetch(l.href,u)}})();const Am="modulepreload",Om=function(i){return"/"+i},Xd={},Fr=function(n,s,o){let l=Promise.resolve();if(s&&s.length>0){let m=function(y){return Promise.all(y.map(v=>Promise.resolve(v).then(x=>({status:"fulfilled",value:x}),x=>({status:"rejected",reason:x}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),p=d?.nonce||d?.getAttribute("nonce");l=m(s.map(y=>{if(y=Om(y),y in Xd)return;Xd[y]=!0;const v=y.endsWith(".css"),x=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${y}"]${x}`))return;const _=document.createElement("link");if(_.rel=v?"stylesheet":Am,v||(_.as="script"),_.crossOrigin="",_.href=y,p&&_.setAttribute("nonce",p),document.head.appendChild(_),v)return new Promise((E,A)=>{_.addEventListener("load",E),_.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${y}`)))})}))}function u(d){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=d,window.dispatchEvent(p),!p.defaultPrevented)throw d}return l.then(d=>{for(const p of d||[])p.status==="rejected"&&u(p.reason);return n().catch(u)})};function Bl(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function Im(i){if(Object.prototype.hasOwnProperty.call(i,"__esModule"))return i;var n=i.default;if(typeof n=="function"){var s=function o(){var l=!1;try{l=this instanceof o}catch{}return l?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};s.prototype=n.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(i).forEach(function(o){var l=Object.getOwnPropertyDescriptor(i,o);Object.defineProperty(s,o,l.get?l:{enumerable:!0,get:function(){return i[o]}})}),s}var ll={exports:{}},Cs={},ul={exports:{}},fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yd;function Lm(){if(Yd)return fe;Yd=1;var i=Symbol.for("react.element"),n=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),d=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),x=Symbol.iterator;function _(S){return S===null||typeof S!="object"?null:(S=x&&S[x]||S["@@iterator"],typeof S=="function"?S:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,C={};function N(S,$,ne){this.props=S,this.context=$,this.refs=C,this.updater=ne||E}N.prototype.isReactComponent={},N.prototype.setState=function(S,$){if(typeof S!="object"&&typeof S!="function"&&S!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,S,$,"setState")},N.prototype.forceUpdate=function(S){this.updater.enqueueForceUpdate(this,S,"forceUpdate")};function D(){}D.prototype=N.prototype;function F(S,$,ne){this.props=S,this.context=$,this.refs=C,this.updater=ne||E}var L=F.prototype=new D;L.constructor=F,A(L,N.prototype),L.isPureReactComponent=!0;var q=Array.isArray,W=Object.prototype.hasOwnProperty,I={current:null},z={key:!0,ref:!0,__self:!0,__source:!0};function te(S,$,ne){var pe,O={},K=null,Q=null;if($!=null)for(pe in $.ref!==void 0&&(Q=$.ref),$.key!==void 0&&(K=""+$.key),$)W.call($,pe)&&!z.hasOwnProperty(pe)&&(O[pe]=$[pe]);var ie=arguments.length-2;if(ie===1)O.children=ne;else if(1<ie){for(var se=Array(ie),Re=0;Re<ie;Re++)se[Re]=arguments[Re+2];O.children=se}if(S&&S.defaultProps)for(pe in ie=S.defaultProps,ie)O[pe]===void 0&&(O[pe]=ie[pe]);return{$$typeof:i,type:S,key:K,ref:Q,props:O,_owner:I.current}}function oe(S,$){return{$$typeof:i,type:S.type,key:$,ref:S.ref,props:S.props,_owner:S._owner}}function ye(S){return typeof S=="object"&&S!==null&&S.$$typeof===i}function Pe(S){var $={"=":"=0",":":"=2"};return"$"+S.replace(/[=:]/g,function(ne){return $[ne]})}var H=/\/+/g;function re(S,$){return typeof S=="object"&&S!==null&&S.key!=null?Pe(""+S.key):$.toString(36)}function _e(S,$,ne,pe,O){var K=typeof S;(K==="undefined"||K==="boolean")&&(S=null);var Q=!1;if(S===null)Q=!0;else switch(K){case"string":case"number":Q=!0;break;case"object":switch(S.$$typeof){case i:case n:Q=!0}}if(Q)return Q=S,O=O(Q),S=pe===""?"."+re(Q,0):pe,q(O)?(ne="",S!=null&&(ne=S.replace(H,"$&/")+"/"),_e(O,$,ne,"",function(Re){return Re})):O!=null&&(ye(O)&&(O=oe(O,ne+(!O.key||Q&&Q.key===O.key?"":(""+O.key).replace(H,"$&/")+"/")+S)),$.push(O)),1;if(Q=0,pe=pe===""?".":pe+":",q(S))for(var ie=0;ie<S.length;ie++){K=S[ie];var se=pe+re(K,ie);Q+=_e(K,$,ne,se,O)}else if(se=_(S),typeof se=="function")for(S=se.call(S),ie=0;!(K=S.next()).done;)K=K.value,se=pe+re(K,ie++),Q+=_e(K,$,ne,se,O);else if(K==="object")throw $=String(S),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(S).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.");return Q}function ke(S,$,ne){if(S==null)return S;var pe=[],O=0;return _e(S,pe,"","",function(K){return $.call(ne,K,O++)}),pe}function Te(S){if(S._status===-1){var $=S._result;$=$(),$.then(function(ne){(S._status===0||S._status===-1)&&(S._status=1,S._result=ne)},function(ne){(S._status===0||S._status===-1)&&(S._status=2,S._result=ne)}),S._status===-1&&(S._status=0,S._result=$)}if(S._status===1)return S._result.default;throw S._result}var me={current:null},G={transition:null},ae={ReactCurrentDispatcher:me,ReactCurrentBatchConfig:G,ReactCurrentOwner:I};return fe.Children={map:ke,forEach:function(S,$,ne){ke(S,function(){$.apply(this,arguments)},ne)},count:function(S){var $=0;return ke(S,function(){$++}),$},toArray:function(S){return ke(S,function($){return $})||[]},only:function(S){if(!ye(S))throw Error("React.Children.only expected to receive a single React element child.");return S}},fe.Component=N,fe.Fragment=s,fe.Profiler=l,fe.PureComponent=F,fe.StrictMode=o,fe.Suspense=m,fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ae,fe.cloneElement=function(S,$,ne){if(S==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+S+".");var pe=A({},S.props),O=S.key,K=S.ref,Q=S._owner;if($!=null){if($.ref!==void 0&&(K=$.ref,Q=I.current),$.key!==void 0&&(O=""+$.key),S.type&&S.type.defaultProps)var ie=S.type.defaultProps;for(se in $)W.call($,se)&&!z.hasOwnProperty(se)&&(pe[se]=$[se]===void 0&&ie!==void 0?ie[se]:$[se])}var se=arguments.length-2;if(se===1)pe.children=ne;else if(1<se){ie=Array(se);for(var Re=0;Re<se;Re++)ie[Re]=arguments[Re+2];pe.children=ie}return{$$typeof:i,type:S.type,key:O,ref:K,props:pe,_owner:Q}},fe.createContext=function(S){return S={$$typeof:d,_currentValue:S,_currentValue2:S,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},S.Provider={$$typeof:u,_context:S},S.Consumer=S},fe.createElement=te,fe.createFactory=function(S){var $=te.bind(null,S);return $.type=S,$},fe.createRef=function(){return{current:null}},fe.forwardRef=function(S){return{$$typeof:p,render:S}},fe.isValidElement=ye,fe.lazy=function(S){return{$$typeof:v,_payload:{_status:-1,_result:S},_init:Te}},fe.memo=function(S,$){return{$$typeof:y,type:S,compare:$===void 0?null:$}},fe.startTransition=function(S){var $=G.transition;G.transition={};try{S()}finally{G.transition=$}},fe.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},fe.useCallback=function(S,$){return me.current.useCallback(S,$)},fe.useContext=function(S){return me.current.useContext(S)},fe.useDebugValue=function(){},fe.useDeferredValue=function(S){return me.current.useDeferredValue(S)},fe.useEffect=function(S,$){return me.current.useEffect(S,$)},fe.useId=function(){return me.current.useId()},fe.useImperativeHandle=function(S,$,ne){return me.current.useImperativeHandle(S,$,ne)},fe.useInsertionEffect=function(S,$){return me.current.useInsertionEffect(S,$)},fe.useLayoutEffect=function(S,$){return me.current.useLayoutEffect(S,$)},fe.useMemo=function(S,$){return me.current.useMemo(S,$)},fe.useReducer=function(S,$,ne){return me.current.useReducer(S,$,ne)},fe.useRef=function(S){return me.current.useRef(S)},fe.useState=function(S){return me.current.useState(S)},fe.useSyncExternalStore=function(S,$,ne){return me.current.useSyncExternalStore(S,$,ne)},fe.useTransition=function(){return me.current.useTransition()},fe.version="18.2.0",fe}var Zd;function Vl(){return Zd||(Zd=1,ul.exports=Lm()),ul.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ef;function Dm(){if(ef)return Cs;ef=1;var i=Vl(),n=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,l=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function d(p,m,y){var v,x={},_=null,E=null;y!==void 0&&(_=""+y),m.key!==void 0&&(_=""+m.key),m.ref!==void 0&&(E=m.ref);for(v in m)o.call(m,v)&&!u.hasOwnProperty(v)&&(x[v]=m[v]);if(p&&p.defaultProps)for(v in m=p.defaultProps,m)x[v]===void 0&&(x[v]=m[v]);return{$$typeof:n,type:p,key:_,ref:E,props:x,_owner:l.current}}return Cs.Fragment=s,Cs.jsx=d,Cs.jsxs=d,Cs}var tf;function $m(){return tf||(tf=1,ll.exports=Dm()),ll.exports}var h=$m(),j=Vl();const Kf=Bl(j);var Wi={},cl={exports:{}},ut={},dl={exports:{}},fl={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nf;function Um(){return nf||(nf=1,(function(i){function n(G,ae){var S=G.length;G.push(ae);e:for(;0<S;){var $=S-1>>>1,ne=G[$];if(0<l(ne,ae))G[$]=ae,G[S]=ne,S=$;else break e}}function s(G){return G.length===0?null:G[0]}function o(G){if(G.length===0)return null;var ae=G[0],S=G.pop();if(S!==ae){G[0]=S;e:for(var $=0,ne=G.length,pe=ne>>>1;$<pe;){var O=2*($+1)-1,K=G[O],Q=O+1,ie=G[Q];if(0>l(K,S))Q<ne&&0>l(ie,K)?(G[$]=ie,G[Q]=S,$=Q):(G[$]=K,G[O]=S,$=O);else if(Q<ne&&0>l(ie,S))G[$]=ie,G[Q]=S,$=Q;else break e}}return ae}function l(G,ae){var S=G.sortIndex-ae.sortIndex;return S!==0?S:G.id-ae.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var d=Date,p=d.now();i.unstable_now=function(){return d.now()-p}}var m=[],y=[],v=1,x=null,_=3,E=!1,A=!1,C=!1,N=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function L(G){for(var ae=s(y);ae!==null;){if(ae.callback===null)o(y);else if(ae.startTime<=G)o(y),ae.sortIndex=ae.expirationTime,n(m,ae);else break;ae=s(y)}}function q(G){if(C=!1,L(G),!A)if(s(m)!==null)A=!0,Te(W);else{var ae=s(y);ae!==null&&me(q,ae.startTime-G)}}function W(G,ae){A=!1,C&&(C=!1,D(te),te=-1),E=!0;var S=_;try{for(L(ae),x=s(m);x!==null&&(!(x.expirationTime>ae)||G&&!Pe());){var $=x.callback;if(typeof $=="function"){x.callback=null,_=x.priorityLevel;var ne=$(x.expirationTime<=ae);ae=i.unstable_now(),typeof ne=="function"?x.callback=ne:x===s(m)&&o(m),L(ae)}else o(m);x=s(m)}if(x!==null)var pe=!0;else{var O=s(y);O!==null&&me(q,O.startTime-ae),pe=!1}return pe}finally{x=null,_=S,E=!1}}var I=!1,z=null,te=-1,oe=5,ye=-1;function Pe(){return!(i.unstable_now()-ye<oe)}function H(){if(z!==null){var G=i.unstable_now();ye=G;var ae=!0;try{ae=z(!0,G)}finally{ae?re():(I=!1,z=null)}}else I=!1}var re;if(typeof F=="function")re=function(){F(H)};else if(typeof MessageChannel<"u"){var _e=new MessageChannel,ke=_e.port2;_e.port1.onmessage=H,re=function(){ke.postMessage(null)}}else re=function(){N(H,0)};function Te(G){z=G,I||(I=!0,re())}function me(G,ae){te=N(function(){G(i.unstable_now())},ae)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(G){G.callback=null},i.unstable_continueExecution=function(){A||E||(A=!0,Te(W))},i.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):oe=0<G?Math.floor(1e3/G):5},i.unstable_getCurrentPriorityLevel=function(){return _},i.unstable_getFirstCallbackNode=function(){return s(m)},i.unstable_next=function(G){switch(_){case 1:case 2:case 3:var ae=3;break;default:ae=_}var S=_;_=ae;try{return G()}finally{_=S}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(G,ae){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var S=_;_=G;try{return ae()}finally{_=S}},i.unstable_scheduleCallback=function(G,ae,S){var $=i.unstable_now();switch(typeof S=="object"&&S!==null?(S=S.delay,S=typeof S=="number"&&0<S?$+S:$):S=$,G){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=S+ne,G={id:v++,callback:ae,priorityLevel:G,startTime:S,expirationTime:ne,sortIndex:-1},S>$?(G.sortIndex=S,n(y,G),s(m)===null&&G===s(y)&&(C?(D(te),te=-1):C=!0,me(q,S-$))):(G.sortIndex=ne,n(m,G),A||E||(A=!0,Te(W))),G},i.unstable_shouldYield=Pe,i.unstable_wrapCallback=function(G){var ae=_;return function(){var S=_;_=ae;try{return G.apply(this,arguments)}finally{_=S}}}})(fl)),fl}var rf;function Mm(){return rf||(rf=1,dl.exports=Um()),dl.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sf;function Fm(){if(sf)return ut;sf=1;var i=Vl(),n=Mm();function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,l={};function u(e,t){d(e,t),d(e+"Capture",t)}function d(e,t){for(l[e]=t,e=0;e<t.length;e++)o.add(t[e])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},x={};function _(e){return m.call(x,e)?!0:m.call(v,e)?!1:y.test(e)?x[e]=!0:(v[e]=!0,!1)}function E(e,t,r,a){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function A(e,t,r,a){if(t===null||typeof t>"u"||E(e,t,r,a))return!0;if(a)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function C(e,t,r,a,c,f,g){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=c,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=f,this.removeEmptyString=g}var N={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){N[e]=new C(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];N[t]=new C(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){N[e]=new C(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){N[e]=new C(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){N[e]=new C(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){N[e]=new C(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){N[e]=new C(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){N[e]=new C(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){N[e]=new C(e,5,!1,e.toLowerCase(),null,!1,!1)});var D=/[\-:]([a-z])/g;function F(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(D,F);N[t]=new C(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(D,F);N[t]=new C(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(D,F);N[t]=new C(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){N[e]=new C(e,1,!1,e.toLowerCase(),null,!1,!1)}),N.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){N[e]=new C(e,1,!1,e.toLowerCase(),null,!0,!0)});function L(e,t,r,a){var c=N.hasOwnProperty(t)?N[t]:null;(c!==null?c.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(A(t,r,c,a)&&(r=null),a||c===null?_(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):c.mustUseProperty?e[c.propertyName]=r===null?c.type===3?!1:"":r:(t=c.attributeName,a=c.attributeNamespace,r===null?e.removeAttribute(t):(c=c.type,r=c===3||c===4&&r===!0?"":""+r,a?e.setAttributeNS(a,t,r):e.setAttribute(t,r))))}var q=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,W=Symbol.for("react.element"),I=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),te=Symbol.for("react.strict_mode"),oe=Symbol.for("react.profiler"),ye=Symbol.for("react.provider"),Pe=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),re=Symbol.for("react.suspense"),_e=Symbol.for("react.suspense_list"),ke=Symbol.for("react.memo"),Te=Symbol.for("react.lazy"),me=Symbol.for("react.offscreen"),G=Symbol.iterator;function ae(e){return e===null||typeof e!="object"?null:(e=G&&e[G]||e["@@iterator"],typeof e=="function"?e:null)}var S=Object.assign,$;function ne(e){if($===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);$=t&&t[1]||""}return`
`+$+e}var pe=!1;function O(e,t){if(!e||pe)return"";pe=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(R){var a=R}Reflect.construct(e,[],t)}else{try{t.call()}catch(R){a=R}e.call(t.prototype)}else{try{throw Error()}catch(R){a=R}e()}}catch(R){if(R&&a&&typeof R.stack=="string"){for(var c=R.stack.split(`
`),f=a.stack.split(`
`),g=c.length-1,w=f.length-1;1<=g&&0<=w&&c[g]!==f[w];)w--;for(;1<=g&&0<=w;g--,w--)if(c[g]!==f[w]){if(g!==1||w!==1)do if(g--,w--,0>w||c[g]!==f[w]){var k=`
`+c[g].replace(" at new "," at ");return e.displayName&&k.includes("<anonymous>")&&(k=k.replace("<anonymous>",e.displayName)),k}while(1<=g&&0<=w);break}}}finally{pe=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?ne(e):""}function K(e){switch(e.tag){case 5:return ne(e.type);case 16:return ne("Lazy");case 13:return ne("Suspense");case 19:return ne("SuspenseList");case 0:case 2:case 15:return e=O(e.type,!1),e;case 11:return e=O(e.type.render,!1),e;case 1:return e=O(e.type,!0),e;default:return""}}function Q(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case z:return"Fragment";case I:return"Portal";case oe:return"Profiler";case te:return"StrictMode";case re:return"Suspense";case _e:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Pe:return(e.displayName||"Context")+".Consumer";case ye:return(e._context.displayName||"Context")+".Provider";case H:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ke:return t=e.displayName||null,t!==null?t:Q(e.type)||"Memo";case Te:t=e._payload,e=e._init;try{return Q(e(t))}catch{}}return null}function ie(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Q(t);case 8:return t===te?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function se(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Re(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function ft(e){var t=Re(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var c=r.get,f=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(g){a=""+g,f.call(this,g)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return a},setValue:function(g){a=""+g},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Bt(e){e._valueTracker||(e._valueTracker=ft(e))}function po(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),a="";return e&&(a=Re(e)?e.checked?"true":"false":e.value),e=a,e!==r?(t.setValue(e),!0):!1}function Wn(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function mo(e,t){var r=t.checked;return S({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function ru(e,t){var r=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;r=se(t.value!=null?t.value:r),e._wrapperState={initialChecked:a,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function su(e,t){t=t.checked,t!=null&&L(e,"checked",t,!1)}function go(e,t){su(e,t);var r=se(t.value),a=t.type;if(r!=null)a==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?vo(e,t.type,r):t.hasOwnProperty("defaultValue")&&vo(e,t.type,se(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function iu(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function vo(e,t,r){(t!=="number"||Wn(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Br=Array.isArray;function Hn(e,t,r,a){if(e=e.options,t){t={};for(var c=0;c<r.length;c++)t["$"+r[c]]=!0;for(r=0;r<e.length;r++)c=t.hasOwnProperty("$"+e[r].value),e[r].selected!==c&&(e[r].selected=c),c&&a&&(e[r].defaultSelected=!0)}else{for(r=""+se(r),t=null,c=0;c<e.length;c++){if(e[c].value===r){e[c].selected=!0,a&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function yo(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(s(91));return S({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ou(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(s(92));if(Br(r)){if(1<r.length)throw Error(s(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:se(r)}}function au(e,t){var r=se(t.value),a=se(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),a!=null&&(e.defaultValue=""+a)}function lu(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function uu(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function wo(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?uu(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ds,cu=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,a,c){MSApp.execUnsafeLocalFunction(function(){return e(t,r,a,c)})}:e})(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ds=Ds||document.createElement("div"),Ds.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ds.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Vr(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Wr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Dh=["Webkit","ms","Moz","O"];Object.keys(Wr).forEach(function(e){Dh.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Wr[t]=Wr[e]})});function du(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Wr.hasOwnProperty(e)&&Wr[e]?(""+t).trim():t+"px"}function fu(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var a=r.indexOf("--")===0,c=du(r,t[r],a);r==="float"&&(r="cssFloat"),a?e.setProperty(r,c):e[r]=c}}var $h=S({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _o(e,t){if(t){if($h[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(s(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(s(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(t.style!=null&&typeof t.style!="object")throw Error(s(62))}}function xo(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ko=null;function So(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var bo=null,qn=null,Kn=null;function hu(e){if(e=fs(e)){if(typeof bo!="function")throw Error(s(280));var t=e.stateNode;t&&(t=ii(t),bo(e.stateNode,e.type,t))}}function pu(e){qn?Kn?Kn.push(e):Kn=[e]:qn=e}function mu(){if(qn){var e=qn,t=Kn;if(Kn=qn=null,hu(e),t)for(e=0;e<t.length;e++)hu(t[e])}}function gu(e,t){return e(t)}function vu(){}var Eo=!1;function yu(e,t,r){if(Eo)return e(t,r);Eo=!0;try{return gu(e,t,r)}finally{Eo=!1,(qn!==null||Kn!==null)&&(vu(),mu())}}function Hr(e,t){var r=e.stateNode;if(r===null)return null;var a=ii(r);if(a===null)return null;r=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(s(231,t,typeof r));return r}var jo=!1;if(p)try{var qr={};Object.defineProperty(qr,"passive",{get:function(){jo=!0}}),window.addEventListener("test",qr,qr),window.removeEventListener("test",qr,qr)}catch{jo=!1}function Uh(e,t,r,a,c,f,g,w,k){var R=Array.prototype.slice.call(arguments,3);try{t.apply(r,R)}catch(M){this.onError(M)}}var Kr=!1,$s=null,Us=!1,Co=null,Mh={onError:function(e){Kr=!0,$s=e}};function Fh(e,t,r,a,c,f,g,w,k){Kr=!1,$s=null,Uh.apply(Mh,arguments)}function zh(e,t,r,a,c,f,g,w,k){if(Fh.apply(this,arguments),Kr){if(Kr){var R=$s;Kr=!1,$s=null}else throw Error(s(198));Us||(Us=!0,Co=R)}}function En(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function wu(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function _u(e){if(En(e)!==e)throw Error(s(188))}function Bh(e){var t=e.alternate;if(!t){if(t=En(e),t===null)throw Error(s(188));return t!==e?null:e}for(var r=e,a=t;;){var c=r.return;if(c===null)break;var f=c.alternate;if(f===null){if(a=c.return,a!==null){r=a;continue}break}if(c.child===f.child){for(f=c.child;f;){if(f===r)return _u(c),e;if(f===a)return _u(c),t;f=f.sibling}throw Error(s(188))}if(r.return!==a.return)r=c,a=f;else{for(var g=!1,w=c.child;w;){if(w===r){g=!0,r=c,a=f;break}if(w===a){g=!0,a=c,r=f;break}w=w.sibling}if(!g){for(w=f.child;w;){if(w===r){g=!0,r=f,a=c;break}if(w===a){g=!0,a=f,r=c;break}w=w.sibling}if(!g)throw Error(s(189))}}if(r.alternate!==a)throw Error(s(190))}if(r.tag!==3)throw Error(s(188));return r.stateNode.current===r?e:t}function xu(e){return e=Bh(e),e!==null?ku(e):null}function ku(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=ku(e);if(t!==null)return t;e=e.sibling}return null}var Su=n.unstable_scheduleCallback,bu=n.unstable_cancelCallback,Vh=n.unstable_shouldYield,Wh=n.unstable_requestPaint,De=n.unstable_now,Hh=n.unstable_getCurrentPriorityLevel,No=n.unstable_ImmediatePriority,Eu=n.unstable_UserBlockingPriority,Ms=n.unstable_NormalPriority,qh=n.unstable_LowPriority,ju=n.unstable_IdlePriority,Fs=null,It=null;function Kh(e){if(It&&typeof It.onCommitFiberRoot=="function")try{It.onCommitFiberRoot(Fs,e,void 0,(e.current.flags&128)===128)}catch{}}var Et=Math.clz32?Math.clz32:Jh,Gh=Math.log,Qh=Math.LN2;function Jh(e){return e>>>=0,e===0?32:31-(Gh(e)/Qh|0)|0}var zs=64,Bs=4194304;function Gr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Vs(e,t){var r=e.pendingLanes;if(r===0)return 0;var a=0,c=e.suspendedLanes,f=e.pingedLanes,g=r&268435455;if(g!==0){var w=g&~c;w!==0?a=Gr(w):(f&=g,f!==0&&(a=Gr(f)))}else g=r&~c,g!==0?a=Gr(g):f!==0&&(a=Gr(f));if(a===0)return 0;if(t!==0&&t!==a&&(t&c)===0&&(c=a&-a,f=t&-t,c>=f||c===16&&(f&4194240)!==0))return t;if((a&4)!==0&&(a|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=a;0<t;)r=31-Et(t),c=1<<r,a|=e[r],t&=~c;return a}function Xh(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Yh(e,t){for(var r=e.suspendedLanes,a=e.pingedLanes,c=e.expirationTimes,f=e.pendingLanes;0<f;){var g=31-Et(f),w=1<<g,k=c[g];k===-1?((w&r)===0||(w&a)!==0)&&(c[g]=Xh(w,t)):k<=t&&(e.expiredLanes|=w),f&=~w}}function Po(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Cu(){var e=zs;return zs<<=1,(zs&4194240)===0&&(zs=64),e}function To(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Qr(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Et(t),e[t]=r}function Zh(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<r;){var c=31-Et(r),f=1<<c;t[c]=0,a[c]=-1,e[c]=-1,r&=~f}}function Ro(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var a=31-Et(r),c=1<<a;c&t|e[a]&t&&(e[a]|=t),r&=~c}}var xe=0;function Nu(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var Pu,Ao,Tu,Ru,Au,Oo=!1,Ws=[],en=null,tn=null,nn=null,Jr=new Map,Xr=new Map,rn=[],ep="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ou(e,t){switch(e){case"focusin":case"focusout":en=null;break;case"dragenter":case"dragleave":tn=null;break;case"mouseover":case"mouseout":nn=null;break;case"pointerover":case"pointerout":Jr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xr.delete(t.pointerId)}}function Yr(e,t,r,a,c,f){return e===null||e.nativeEvent!==f?(e={blockedOn:t,domEventName:r,eventSystemFlags:a,nativeEvent:f,targetContainers:[c]},t!==null&&(t=fs(t),t!==null&&Ao(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function tp(e,t,r,a,c){switch(t){case"focusin":return en=Yr(en,e,t,r,a,c),!0;case"dragenter":return tn=Yr(tn,e,t,r,a,c),!0;case"mouseover":return nn=Yr(nn,e,t,r,a,c),!0;case"pointerover":var f=c.pointerId;return Jr.set(f,Yr(Jr.get(f)||null,e,t,r,a,c)),!0;case"gotpointercapture":return f=c.pointerId,Xr.set(f,Yr(Xr.get(f)||null,e,t,r,a,c)),!0}return!1}function Iu(e){var t=jn(e.target);if(t!==null){var r=En(t);if(r!==null){if(t=r.tag,t===13){if(t=wu(r),t!==null){e.blockedOn=t,Au(e.priority,function(){Tu(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Hs(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Lo(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var a=new r.constructor(r.type,r);ko=a,r.target.dispatchEvent(a),ko=null}else return t=fs(r),t!==null&&Ao(t),e.blockedOn=r,!1;t.shift()}return!0}function Lu(e,t,r){Hs(e)&&r.delete(t)}function np(){Oo=!1,en!==null&&Hs(en)&&(en=null),tn!==null&&Hs(tn)&&(tn=null),nn!==null&&Hs(nn)&&(nn=null),Jr.forEach(Lu),Xr.forEach(Lu)}function Zr(e,t){e.blockedOn===t&&(e.blockedOn=null,Oo||(Oo=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,np)))}function es(e){function t(c){return Zr(c,e)}if(0<Ws.length){Zr(Ws[0],e);for(var r=1;r<Ws.length;r++){var a=Ws[r];a.blockedOn===e&&(a.blockedOn=null)}}for(en!==null&&Zr(en,e),tn!==null&&Zr(tn,e),nn!==null&&Zr(nn,e),Jr.forEach(t),Xr.forEach(t),r=0;r<rn.length;r++)a=rn[r],a.blockedOn===e&&(a.blockedOn=null);for(;0<rn.length&&(r=rn[0],r.blockedOn===null);)Iu(r),r.blockedOn===null&&rn.shift()}var Gn=q.ReactCurrentBatchConfig,qs=!0;function rp(e,t,r,a){var c=xe,f=Gn.transition;Gn.transition=null;try{xe=1,Io(e,t,r,a)}finally{xe=c,Gn.transition=f}}function sp(e,t,r,a){var c=xe,f=Gn.transition;Gn.transition=null;try{xe=4,Io(e,t,r,a)}finally{xe=c,Gn.transition=f}}function Io(e,t,r,a){if(qs){var c=Lo(e,t,r,a);if(c===null)Yo(e,t,a,Ks,r),Ou(e,a);else if(tp(c,e,t,r,a))a.stopPropagation();else if(Ou(e,a),t&4&&-1<ep.indexOf(e)){for(;c!==null;){var f=fs(c);if(f!==null&&Pu(f),f=Lo(e,t,r,a),f===null&&Yo(e,t,a,Ks,r),f===c)break;c=f}c!==null&&a.stopPropagation()}else Yo(e,t,a,null,r)}}var Ks=null;function Lo(e,t,r,a){if(Ks=null,e=So(a),e=jn(e),e!==null)if(t=En(e),t===null)e=null;else if(r=t.tag,r===13){if(e=wu(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ks=e,null}function Du(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Hh()){case No:return 1;case Eu:return 4;case Ms:case qh:return 16;case ju:return 536870912;default:return 16}default:return 16}}var sn=null,Do=null,Gs=null;function $u(){if(Gs)return Gs;var e,t=Do,r=t.length,a,c="value"in sn?sn.value:sn.textContent,f=c.length;for(e=0;e<r&&t[e]===c[e];e++);var g=r-e;for(a=1;a<=g&&t[r-a]===c[f-a];a++);return Gs=c.slice(e,1<a?1-a:void 0)}function Qs(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Js(){return!0}function Uu(){return!1}function ht(e){function t(r,a,c,f,g){this._reactName=r,this._targetInst=c,this.type=a,this.nativeEvent=f,this.target=g,this.currentTarget=null;for(var w in e)e.hasOwnProperty(w)&&(r=e[w],this[w]=r?r(f):f[w]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Js:Uu,this.isPropagationStopped=Uu,this}return S(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Js)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Js)},persist:function(){},isPersistent:Js}),t}var Qn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$o=ht(Qn),ts=S({},Qn,{view:0,detail:0}),ip=ht(ts),Uo,Mo,ns,Xs=S({},ts,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zo,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ns&&(ns&&e.type==="mousemove"?(Uo=e.screenX-ns.screenX,Mo=e.screenY-ns.screenY):Mo=Uo=0,ns=e),Uo)},movementY:function(e){return"movementY"in e?e.movementY:Mo}}),Mu=ht(Xs),op=S({},Xs,{dataTransfer:0}),ap=ht(op),lp=S({},ts,{relatedTarget:0}),Fo=ht(lp),up=S({},Qn,{animationName:0,elapsedTime:0,pseudoElement:0}),cp=ht(up),dp=S({},Qn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),fp=ht(dp),hp=S({},Qn,{data:0}),Fu=ht(hp),pp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vp(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=gp[e])?!!t[e]:!1}function zo(){return vp}var yp=S({},ts,{key:function(e){if(e.key){var t=pp[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Qs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?mp[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zo,charCode:function(e){return e.type==="keypress"?Qs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Qs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),wp=ht(yp),_p=S({},Xs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zu=ht(_p),xp=S({},ts,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zo}),kp=ht(xp),Sp=S({},Qn,{propertyName:0,elapsedTime:0,pseudoElement:0}),bp=ht(Sp),Ep=S({},Xs,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),jp=ht(Ep),Cp=[9,13,27,32],Bo=p&&"CompositionEvent"in window,rs=null;p&&"documentMode"in document&&(rs=document.documentMode);var Np=p&&"TextEvent"in window&&!rs,Bu=p&&(!Bo||rs&&8<rs&&11>=rs),Vu=" ",Wu=!1;function Hu(e,t){switch(e){case"keyup":return Cp.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Jn=!1;function Pp(e,t){switch(e){case"compositionend":return qu(t);case"keypress":return t.which!==32?null:(Wu=!0,Vu);case"textInput":return e=t.data,e===Vu&&Wu?null:e;default:return null}}function Tp(e,t){if(Jn)return e==="compositionend"||!Bo&&Hu(e,t)?(e=$u(),Gs=Do=sn=null,Jn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Bu&&t.locale!=="ko"?null:t.data;default:return null}}var Rp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ku(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Rp[e.type]:t==="textarea"}function Gu(e,t,r,a){pu(a),t=ni(t,"onChange"),0<t.length&&(r=new $o("onChange","change",null,r,a),e.push({event:r,listeners:t}))}var ss=null,is=null;function Ap(e){fc(e,0)}function Ys(e){var t=tr(e);if(po(t))return e}function Op(e,t){if(e==="change")return t}var Qu=!1;if(p){var Vo;if(p){var Wo="oninput"in document;if(!Wo){var Ju=document.createElement("div");Ju.setAttribute("oninput","return;"),Wo=typeof Ju.oninput=="function"}Vo=Wo}else Vo=!1;Qu=Vo&&(!document.documentMode||9<document.documentMode)}function Xu(){ss&&(ss.detachEvent("onpropertychange",Yu),is=ss=null)}function Yu(e){if(e.propertyName==="value"&&Ys(is)){var t=[];Gu(t,is,e,So(e)),yu(Ap,t)}}function Ip(e,t,r){e==="focusin"?(Xu(),ss=t,is=r,ss.attachEvent("onpropertychange",Yu)):e==="focusout"&&Xu()}function Lp(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ys(is)}function Dp(e,t){if(e==="click")return Ys(t)}function $p(e,t){if(e==="input"||e==="change")return Ys(t)}function Up(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var jt=typeof Object.is=="function"?Object.is:Up;function os(e,t){if(jt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),a=Object.keys(t);if(r.length!==a.length)return!1;for(a=0;a<r.length;a++){var c=r[a];if(!m.call(t,c)||!jt(e[c],t[c]))return!1}return!0}function Zu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ec(e,t){var r=Zu(e);e=0;for(var a;r;){if(r.nodeType===3){if(a=e+r.textContent.length,e<=t&&a>=t)return{node:r,offset:t-e};e=a}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Zu(r)}}function tc(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?tc(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function nc(){for(var e=window,t=Wn();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Wn(e.document)}return t}function Ho(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Mp(e){var t=nc(),r=e.focusedElem,a=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&tc(r.ownerDocument.documentElement,r)){if(a!==null&&Ho(r)){if(t=a.start,e=a.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var c=r.textContent.length,f=Math.min(a.start,c);a=a.end===void 0?f:Math.min(a.end,c),!e.extend&&f>a&&(c=a,a=f,f=c),c=ec(r,f);var g=ec(r,a);c&&g&&(e.rangeCount!==1||e.anchorNode!==c.node||e.anchorOffset!==c.offset||e.focusNode!==g.node||e.focusOffset!==g.offset)&&(t=t.createRange(),t.setStart(c.node,c.offset),e.removeAllRanges(),f>a?(e.addRange(t),e.extend(g.node,g.offset)):(t.setEnd(g.node,g.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Fp=p&&"documentMode"in document&&11>=document.documentMode,Xn=null,qo=null,as=null,Ko=!1;function rc(e,t,r){var a=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Ko||Xn==null||Xn!==Wn(a)||(a=Xn,"selectionStart"in a&&Ho(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),as&&os(as,a)||(as=a,a=ni(qo,"onSelect"),0<a.length&&(t=new $o("onSelect","select",null,t,r),e.push({event:t,listeners:a}),t.target=Xn)))}function Zs(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Yn={animationend:Zs("Animation","AnimationEnd"),animationiteration:Zs("Animation","AnimationIteration"),animationstart:Zs("Animation","AnimationStart"),transitionend:Zs("Transition","TransitionEnd")},Go={},sc={};p&&(sc=document.createElement("div").style,"AnimationEvent"in window||(delete Yn.animationend.animation,delete Yn.animationiteration.animation,delete Yn.animationstart.animation),"TransitionEvent"in window||delete Yn.transitionend.transition);function ei(e){if(Go[e])return Go[e];if(!Yn[e])return e;var t=Yn[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in sc)return Go[e]=t[r];return e}var ic=ei("animationend"),oc=ei("animationiteration"),ac=ei("animationstart"),lc=ei("transitionend"),uc=new Map,cc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function on(e,t){uc.set(e,t),u(t,[e])}for(var Qo=0;Qo<cc.length;Qo++){var Jo=cc[Qo],zp=Jo.toLowerCase(),Bp=Jo[0].toUpperCase()+Jo.slice(1);on(zp,"on"+Bp)}on(ic,"onAnimationEnd"),on(oc,"onAnimationIteration"),on(ac,"onAnimationStart"),on("dblclick","onDoubleClick"),on("focusin","onFocus"),on("focusout","onBlur"),on(lc,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ls="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Vp=new Set("cancel close invalid load scroll toggle".split(" ").concat(ls));function dc(e,t,r){var a=e.type||"unknown-event";e.currentTarget=r,zh(a,t,void 0,e),e.currentTarget=null}function fc(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var a=e[r],c=a.event;a=a.listeners;e:{var f=void 0;if(t)for(var g=a.length-1;0<=g;g--){var w=a[g],k=w.instance,R=w.currentTarget;if(w=w.listener,k!==f&&c.isPropagationStopped())break e;dc(c,w,R),f=k}else for(g=0;g<a.length;g++){if(w=a[g],k=w.instance,R=w.currentTarget,w=w.listener,k!==f&&c.isPropagationStopped())break e;dc(c,w,R),f=k}}}if(Us)throw e=Co,Us=!1,Co=null,e}function Ee(e,t){var r=t[sa];r===void 0&&(r=t[sa]=new Set);var a=e+"__bubble";r.has(a)||(hc(t,e,2,!1),r.add(a))}function Xo(e,t,r){var a=0;t&&(a|=4),hc(r,e,a,t)}var ti="_reactListening"+Math.random().toString(36).slice(2);function us(e){if(!e[ti]){e[ti]=!0,o.forEach(function(r){r!=="selectionchange"&&(Vp.has(r)||Xo(r,!1,e),Xo(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ti]||(t[ti]=!0,Xo("selectionchange",!1,t))}}function hc(e,t,r,a){switch(Du(t)){case 1:var c=rp;break;case 4:c=sp;break;default:c=Io}r=c.bind(null,t,r,e),c=void 0,!jo||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),a?c!==void 0?e.addEventListener(t,r,{capture:!0,passive:c}):e.addEventListener(t,r,!0):c!==void 0?e.addEventListener(t,r,{passive:c}):e.addEventListener(t,r,!1)}function Yo(e,t,r,a,c){var f=a;if((t&1)===0&&(t&2)===0&&a!==null)e:for(;;){if(a===null)return;var g=a.tag;if(g===3||g===4){var w=a.stateNode.containerInfo;if(w===c||w.nodeType===8&&w.parentNode===c)break;if(g===4)for(g=a.return;g!==null;){var k=g.tag;if((k===3||k===4)&&(k=g.stateNode.containerInfo,k===c||k.nodeType===8&&k.parentNode===c))return;g=g.return}for(;w!==null;){if(g=jn(w),g===null)return;if(k=g.tag,k===5||k===6){a=f=g;continue e}w=w.parentNode}}a=a.return}yu(function(){var R=f,M=So(r),B=[];e:{var U=uc.get(e);if(U!==void 0){var J=$o,Y=e;switch(e){case"keypress":if(Qs(r)===0)break e;case"keydown":case"keyup":J=wp;break;case"focusin":Y="focus",J=Fo;break;case"focusout":Y="blur",J=Fo;break;case"beforeblur":case"afterblur":J=Fo;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=Mu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=ap;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=kp;break;case ic:case oc:case ac:J=cp;break;case lc:J=bp;break;case"scroll":J=ip;break;case"wheel":J=jp;break;case"copy":case"cut":case"paste":J=fp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=zu}var Z=(t&4)!==0,$e=!Z&&e==="scroll",P=Z?U!==null?U+"Capture":null:U;Z=[];for(var b=R,T;b!==null;){T=b;var V=T.stateNode;if(T.tag===5&&V!==null&&(T=V,P!==null&&(V=Hr(b,P),V!=null&&Z.push(cs(b,V,T)))),$e)break;b=b.return}0<Z.length&&(U=new J(U,Y,null,r,M),B.push({event:U,listeners:Z}))}}if((t&7)===0){e:{if(U=e==="mouseover"||e==="pointerover",J=e==="mouseout"||e==="pointerout",U&&r!==ko&&(Y=r.relatedTarget||r.fromElement)&&(jn(Y)||Y[Vt]))break e;if((J||U)&&(U=M.window===M?M:(U=M.ownerDocument)?U.defaultView||U.parentWindow:window,J?(Y=r.relatedTarget||r.toElement,J=R,Y=Y?jn(Y):null,Y!==null&&($e=En(Y),Y!==$e||Y.tag!==5&&Y.tag!==6)&&(Y=null)):(J=null,Y=R),J!==Y)){if(Z=Mu,V="onMouseLeave",P="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(Z=zu,V="onPointerLeave",P="onPointerEnter",b="pointer"),$e=J==null?U:tr(J),T=Y==null?U:tr(Y),U=new Z(V,b+"leave",J,r,M),U.target=$e,U.relatedTarget=T,V=null,jn(M)===R&&(Z=new Z(P,b+"enter",Y,r,M),Z.target=T,Z.relatedTarget=$e,V=Z),$e=V,J&&Y)t:{for(Z=J,P=Y,b=0,T=Z;T;T=Zn(T))b++;for(T=0,V=P;V;V=Zn(V))T++;for(;0<b-T;)Z=Zn(Z),b--;for(;0<T-b;)P=Zn(P),T--;for(;b--;){if(Z===P||P!==null&&Z===P.alternate)break t;Z=Zn(Z),P=Zn(P)}Z=null}else Z=null;J!==null&&pc(B,U,J,Z,!1),Y!==null&&$e!==null&&pc(B,$e,Y,Z,!0)}}e:{if(U=R?tr(R):window,J=U.nodeName&&U.nodeName.toLowerCase(),J==="select"||J==="input"&&U.type==="file")var ee=Op;else if(Ku(U))if(Qu)ee=$p;else{ee=Lp;var le=Ip}else(J=U.nodeName)&&J.toLowerCase()==="input"&&(U.type==="checkbox"||U.type==="radio")&&(ee=Dp);if(ee&&(ee=ee(e,R))){Gu(B,ee,r,M);break e}le&&le(e,U,R),e==="focusout"&&(le=U._wrapperState)&&le.controlled&&U.type==="number"&&vo(U,"number",U.value)}switch(le=R?tr(R):window,e){case"focusin":(Ku(le)||le.contentEditable==="true")&&(Xn=le,qo=R,as=null);break;case"focusout":as=qo=Xn=null;break;case"mousedown":Ko=!0;break;case"contextmenu":case"mouseup":case"dragend":Ko=!1,rc(B,r,M);break;case"selectionchange":if(Fp)break;case"keydown":case"keyup":rc(B,r,M)}var ue;if(Bo)e:{switch(e){case"compositionstart":var ce="onCompositionStart";break e;case"compositionend":ce="onCompositionEnd";break e;case"compositionupdate":ce="onCompositionUpdate";break e}ce=void 0}else Jn?Hu(e,r)&&(ce="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(ce="onCompositionStart");ce&&(Bu&&r.locale!=="ko"&&(Jn||ce!=="onCompositionStart"?ce==="onCompositionEnd"&&Jn&&(ue=$u()):(sn=M,Do="value"in sn?sn.value:sn.textContent,Jn=!0)),le=ni(R,ce),0<le.length&&(ce=new Fu(ce,e,null,r,M),B.push({event:ce,listeners:le}),ue?ce.data=ue:(ue=qu(r),ue!==null&&(ce.data=ue)))),(ue=Np?Pp(e,r):Tp(e,r))&&(R=ni(R,"onBeforeInput"),0<R.length&&(M=new Fu("onBeforeInput","beforeinput",null,r,M),B.push({event:M,listeners:R}),M.data=ue))}fc(B,t)})}function cs(e,t,r){return{instance:e,listener:t,currentTarget:r}}function ni(e,t){for(var r=t+"Capture",a=[];e!==null;){var c=e,f=c.stateNode;c.tag===5&&f!==null&&(c=f,f=Hr(e,r),f!=null&&a.unshift(cs(e,f,c)),f=Hr(e,t),f!=null&&a.push(cs(e,f,c))),e=e.return}return a}function Zn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function pc(e,t,r,a,c){for(var f=t._reactName,g=[];r!==null&&r!==a;){var w=r,k=w.alternate,R=w.stateNode;if(k!==null&&k===a)break;w.tag===5&&R!==null&&(w=R,c?(k=Hr(r,f),k!=null&&g.unshift(cs(r,k,w))):c||(k=Hr(r,f),k!=null&&g.push(cs(r,k,w)))),r=r.return}g.length!==0&&e.push({event:t,listeners:g})}var Wp=/\r\n?/g,Hp=/\u0000|\uFFFD/g;function mc(e){return(typeof e=="string"?e:""+e).replace(Wp,`
`).replace(Hp,"")}function ri(e,t,r){if(t=mc(t),mc(e)!==t&&r)throw Error(s(425))}function si(){}var Zo=null,ea=null;function ta(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var na=typeof setTimeout=="function"?setTimeout:void 0,qp=typeof clearTimeout=="function"?clearTimeout:void 0,gc=typeof Promise=="function"?Promise:void 0,Kp=typeof queueMicrotask=="function"?queueMicrotask:typeof gc<"u"?function(e){return gc.resolve(null).then(e).catch(Gp)}:na;function Gp(e){setTimeout(function(){throw e})}function ra(e,t){var r=t,a=0;do{var c=r.nextSibling;if(e.removeChild(r),c&&c.nodeType===8)if(r=c.data,r==="/$"){if(a===0){e.removeChild(c),es(t);return}a--}else r!=="$"&&r!=="$?"&&r!=="$!"||a++;r=c}while(r);es(t)}function an(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function vc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var er=Math.random().toString(36).slice(2),Lt="__reactFiber$"+er,ds="__reactProps$"+er,Vt="__reactContainer$"+er,sa="__reactEvents$"+er,Qp="__reactListeners$"+er,Jp="__reactHandles$"+er;function jn(e){var t=e[Lt];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Vt]||r[Lt]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=vc(e);e!==null;){if(r=e[Lt])return r;e=vc(e)}return t}e=r,r=e.parentNode}return null}function fs(e){return e=e[Lt]||e[Vt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function tr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(s(33))}function ii(e){return e[ds]||null}var ia=[],nr=-1;function ln(e){return{current:e}}function je(e){0>nr||(e.current=ia[nr],ia[nr]=null,nr--)}function Se(e,t){nr++,ia[nr]=e.current,e.current=t}var un={},Je=ln(un),st=ln(!1),Cn=un;function rr(e,t){var r=e.type.contextTypes;if(!r)return un;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var c={},f;for(f in r)c[f]=t[f];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=c),c}function it(e){return e=e.childContextTypes,e!=null}function oi(){je(st),je(Je)}function yc(e,t,r){if(Je.current!==un)throw Error(s(168));Se(Je,t),Se(st,r)}function wc(e,t,r){var a=e.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return r;a=a.getChildContext();for(var c in a)if(!(c in t))throw Error(s(108,ie(e)||"Unknown",c));return S({},r,a)}function ai(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||un,Cn=Je.current,Se(Je,e),Se(st,st.current),!0}function _c(e,t,r){var a=e.stateNode;if(!a)throw Error(s(169));r?(e=wc(e,t,Cn),a.__reactInternalMemoizedMergedChildContext=e,je(st),je(Je),Se(Je,e)):je(st),Se(st,r)}var Wt=null,li=!1,oa=!1;function xc(e){Wt===null?Wt=[e]:Wt.push(e)}function Xp(e){li=!0,xc(e)}function cn(){if(!oa&&Wt!==null){oa=!0;var e=0,t=xe;try{var r=Wt;for(xe=1;e<r.length;e++){var a=r[e];do a=a(!0);while(a!==null)}Wt=null,li=!1}catch(c){throw Wt!==null&&(Wt=Wt.slice(e+1)),Su(No,cn),c}finally{xe=t,oa=!1}}return null}var sr=[],ir=0,ui=null,ci=0,wt=[],_t=0,Nn=null,Ht=1,qt="";function Pn(e,t){sr[ir++]=ci,sr[ir++]=ui,ui=e,ci=t}function kc(e,t,r){wt[_t++]=Ht,wt[_t++]=qt,wt[_t++]=Nn,Nn=e;var a=Ht;e=qt;var c=32-Et(a)-1;a&=~(1<<c),r+=1;var f=32-Et(t)+c;if(30<f){var g=c-c%5;f=(a&(1<<g)-1).toString(32),a>>=g,c-=g,Ht=1<<32-Et(t)+c|r<<c|a,qt=f+e}else Ht=1<<f|r<<c|a,qt=e}function aa(e){e.return!==null&&(Pn(e,1),kc(e,1,0))}function la(e){for(;e===ui;)ui=sr[--ir],sr[ir]=null,ci=sr[--ir],sr[ir]=null;for(;e===Nn;)Nn=wt[--_t],wt[_t]=null,qt=wt[--_t],wt[_t]=null,Ht=wt[--_t],wt[_t]=null}var pt=null,mt=null,Ne=!1,Ct=null;function Sc(e,t){var r=bt(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function bc(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,pt=e,mt=an(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,pt=e,mt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Nn!==null?{id:Ht,overflow:qt}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=bt(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,pt=e,mt=null,!0):!1;default:return!1}}function ua(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ca(e){if(Ne){var t=mt;if(t){var r=t;if(!bc(e,t)){if(ua(e))throw Error(s(418));t=an(r.nextSibling);var a=pt;t&&bc(e,t)?Sc(a,r):(e.flags=e.flags&-4097|2,Ne=!1,pt=e)}}else{if(ua(e))throw Error(s(418));e.flags=e.flags&-4097|2,Ne=!1,pt=e}}}function Ec(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;pt=e}function di(e){if(e!==pt)return!1;if(!Ne)return Ec(e),Ne=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ta(e.type,e.memoizedProps)),t&&(t=mt)){if(ua(e))throw jc(),Error(s(418));for(;t;)Sc(e,t),t=an(t.nextSibling)}if(Ec(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){mt=an(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}mt=null}}else mt=pt?an(e.stateNode.nextSibling):null;return!0}function jc(){for(var e=mt;e;)e=an(e.nextSibling)}function or(){mt=pt=null,Ne=!1}function da(e){Ct===null?Ct=[e]:Ct.push(e)}var Yp=q.ReactCurrentBatchConfig;function Nt(e,t){if(e&&e.defaultProps){t=S({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}var fi=ln(null),hi=null,ar=null,fa=null;function ha(){fa=ar=hi=null}function pa(e){var t=fi.current;je(fi),e._currentValue=t}function ma(e,t,r){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===r)break;e=e.return}}function lr(e,t){hi=e,fa=ar=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(ot=!0),e.firstContext=null)}function xt(e){var t=e._currentValue;if(fa!==e)if(e={context:e,memoizedValue:t,next:null},ar===null){if(hi===null)throw Error(s(308));ar=e,hi.dependencies={lanes:0,firstContext:e}}else ar=ar.next=e;return t}var Tn=null;function ga(e){Tn===null?Tn=[e]:Tn.push(e)}function Cc(e,t,r,a){var c=t.interleaved;return c===null?(r.next=r,ga(t)):(r.next=c.next,c.next=r),t.interleaved=r,Kt(e,a)}function Kt(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var dn=!1;function va(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Nc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Gt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function fn(e,t,r){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,(ve&2)!==0){var c=a.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),a.pending=t,Kt(e,r)}return c=a.interleaved,c===null?(t.next=t,ga(a)):(t.next=c.next,c.next=t),a.interleaved=t,Kt(e,r)}function pi(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var a=t.lanes;a&=e.pendingLanes,r|=a,t.lanes=r,Ro(e,r)}}function Pc(e,t){var r=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,r===a)){var c=null,f=null;if(r=r.firstBaseUpdate,r!==null){do{var g={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};f===null?c=f=g:f=f.next=g,r=r.next}while(r!==null);f===null?c=f=t:f=f.next=t}else c=f=t;r={baseState:a.baseState,firstBaseUpdate:c,lastBaseUpdate:f,shared:a.shared,effects:a.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function mi(e,t,r,a){var c=e.updateQueue;dn=!1;var f=c.firstBaseUpdate,g=c.lastBaseUpdate,w=c.shared.pending;if(w!==null){c.shared.pending=null;var k=w,R=k.next;k.next=null,g===null?f=R:g.next=R,g=k;var M=e.alternate;M!==null&&(M=M.updateQueue,w=M.lastBaseUpdate,w!==g&&(w===null?M.firstBaseUpdate=R:w.next=R,M.lastBaseUpdate=k))}if(f!==null){var B=c.baseState;g=0,M=R=k=null,w=f;do{var U=w.lane,J=w.eventTime;if((a&U)===U){M!==null&&(M=M.next={eventTime:J,lane:0,tag:w.tag,payload:w.payload,callback:w.callback,next:null});e:{var Y=e,Z=w;switch(U=t,J=r,Z.tag){case 1:if(Y=Z.payload,typeof Y=="function"){B=Y.call(J,B,U);break e}B=Y;break e;case 3:Y.flags=Y.flags&-65537|128;case 0:if(Y=Z.payload,U=typeof Y=="function"?Y.call(J,B,U):Y,U==null)break e;B=S({},B,U);break e;case 2:dn=!0}}w.callback!==null&&w.lane!==0&&(e.flags|=64,U=c.effects,U===null?c.effects=[w]:U.push(w))}else J={eventTime:J,lane:U,tag:w.tag,payload:w.payload,callback:w.callback,next:null},M===null?(R=M=J,k=B):M=M.next=J,g|=U;if(w=w.next,w===null){if(w=c.shared.pending,w===null)break;U=w,w=U.next,U.next=null,c.lastBaseUpdate=U,c.shared.pending=null}}while(!0);if(M===null&&(k=B),c.baseState=k,c.firstBaseUpdate=R,c.lastBaseUpdate=M,t=c.shared.interleaved,t!==null){c=t;do g|=c.lane,c=c.next;while(c!==t)}else f===null&&(c.shared.lanes=0);On|=g,e.lanes=g,e.memoizedState=B}}function Tc(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var a=e[t],c=a.callback;if(c!==null){if(a.callback=null,a=r,typeof c!="function")throw Error(s(191,c));c.call(a)}}}var Rc=new i.Component().refs;function ya(e,t,r,a){t=e.memoizedState,r=r(a,t),r=r==null?t:S({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var gi={isMounted:function(e){return(e=e._reactInternals)?En(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var a=nt(),c=gn(e),f=Gt(a,c);f.payload=t,r!=null&&(f.callback=r),t=fn(e,f,c),t!==null&&(Rt(t,e,c,a),pi(t,e,c))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var a=nt(),c=gn(e),f=Gt(a,c);f.tag=1,f.payload=t,r!=null&&(f.callback=r),t=fn(e,f,c),t!==null&&(Rt(t,e,c,a),pi(t,e,c))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=nt(),a=gn(e),c=Gt(r,a);c.tag=2,t!=null&&(c.callback=t),t=fn(e,c,a),t!==null&&(Rt(t,e,a,r),pi(t,e,a))}};function Ac(e,t,r,a,c,f,g){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,f,g):t.prototype&&t.prototype.isPureReactComponent?!os(r,a)||!os(c,f):!0}function Oc(e,t,r){var a=!1,c=un,f=t.contextType;return typeof f=="object"&&f!==null?f=xt(f):(c=it(t)?Cn:Je.current,a=t.contextTypes,f=(a=a!=null)?rr(e,c):un),t=new t(r,f),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=gi,e.stateNode=t,t._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=c,e.__reactInternalMemoizedMaskedChildContext=f),t}function Ic(e,t,r,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,a),t.state!==e&&gi.enqueueReplaceState(t,t.state,null)}function wa(e,t,r,a){var c=e.stateNode;c.props=r,c.state=e.memoizedState,c.refs=Rc,va(e);var f=t.contextType;typeof f=="object"&&f!==null?c.context=xt(f):(f=it(t)?Cn:Je.current,c.context=rr(e,f)),c.state=e.memoizedState,f=t.getDerivedStateFromProps,typeof f=="function"&&(ya(e,t,f,r),c.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(t=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),t!==c.state&&gi.enqueueReplaceState(c,c.state,null),mi(e,r,c,a),c.state=e.memoizedState),typeof c.componentDidMount=="function"&&(e.flags|=4194308)}function hs(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(s(309));var a=r.stateNode}if(!a)throw Error(s(147,e));var c=a,f=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===f?t.ref:(t=function(g){var w=c.refs;w===Rc&&(w=c.refs={}),g===null?delete w[f]:w[f]=g},t._stringRef=f,t)}if(typeof e!="string")throw Error(s(284));if(!r._owner)throw Error(s(290,e))}return e}function vi(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Lc(e){var t=e._init;return t(e._payload)}function Dc(e){function t(P,b){if(e){var T=P.deletions;T===null?(P.deletions=[b],P.flags|=16):T.push(b)}}function r(P,b){if(!e)return null;for(;b!==null;)t(P,b),b=b.sibling;return null}function a(P,b){for(P=new Map;b!==null;)b.key!==null?P.set(b.key,b):P.set(b.index,b),b=b.sibling;return P}function c(P,b){return P=yn(P,b),P.index=0,P.sibling=null,P}function f(P,b,T){return P.index=T,e?(T=P.alternate,T!==null?(T=T.index,T<b?(P.flags|=2,b):T):(P.flags|=2,b)):(P.flags|=1048576,b)}function g(P){return e&&P.alternate===null&&(P.flags|=2),P}function w(P,b,T,V){return b===null||b.tag!==6?(b=nl(T,P.mode,V),b.return=P,b):(b=c(b,T),b.return=P,b)}function k(P,b,T,V){var ee=T.type;return ee===z?M(P,b,T.props.children,V,T.key):b!==null&&(b.elementType===ee||typeof ee=="object"&&ee!==null&&ee.$$typeof===Te&&Lc(ee)===b.type)?(V=c(b,T.props),V.ref=hs(P,b,T),V.return=P,V):(V=Di(T.type,T.key,T.props,null,P.mode,V),V.ref=hs(P,b,T),V.return=P,V)}function R(P,b,T,V){return b===null||b.tag!==4||b.stateNode.containerInfo!==T.containerInfo||b.stateNode.implementation!==T.implementation?(b=rl(T,P.mode,V),b.return=P,b):(b=c(b,T.children||[]),b.return=P,b)}function M(P,b,T,V,ee){return b===null||b.tag!==7?(b=$n(T,P.mode,V,ee),b.return=P,b):(b=c(b,T),b.return=P,b)}function B(P,b,T){if(typeof b=="string"&&b!==""||typeof b=="number")return b=nl(""+b,P.mode,T),b.return=P,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case W:return T=Di(b.type,b.key,b.props,null,P.mode,T),T.ref=hs(P,null,b),T.return=P,T;case I:return b=rl(b,P.mode,T),b.return=P,b;case Te:var V=b._init;return B(P,V(b._payload),T)}if(Br(b)||ae(b))return b=$n(b,P.mode,T,null),b.return=P,b;vi(P,b)}return null}function U(P,b,T,V){var ee=b!==null?b.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return ee!==null?null:w(P,b,""+T,V);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case W:return T.key===ee?k(P,b,T,V):null;case I:return T.key===ee?R(P,b,T,V):null;case Te:return ee=T._init,U(P,b,ee(T._payload),V)}if(Br(T)||ae(T))return ee!==null?null:M(P,b,T,V,null);vi(P,T)}return null}function J(P,b,T,V,ee){if(typeof V=="string"&&V!==""||typeof V=="number")return P=P.get(T)||null,w(b,P,""+V,ee);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case W:return P=P.get(V.key===null?T:V.key)||null,k(b,P,V,ee);case I:return P=P.get(V.key===null?T:V.key)||null,R(b,P,V,ee);case Te:var le=V._init;return J(P,b,T,le(V._payload),ee)}if(Br(V)||ae(V))return P=P.get(T)||null,M(b,P,V,ee,null);vi(b,V)}return null}function Y(P,b,T,V){for(var ee=null,le=null,ue=b,ce=b=0,qe=null;ue!==null&&ce<T.length;ce++){ue.index>ce?(qe=ue,ue=null):qe=ue.sibling;var we=U(P,ue,T[ce],V);if(we===null){ue===null&&(ue=qe);break}e&&ue&&we.alternate===null&&t(P,ue),b=f(we,b,ce),le===null?ee=we:le.sibling=we,le=we,ue=qe}if(ce===T.length)return r(P,ue),Ne&&Pn(P,ce),ee;if(ue===null){for(;ce<T.length;ce++)ue=B(P,T[ce],V),ue!==null&&(b=f(ue,b,ce),le===null?ee=ue:le.sibling=ue,le=ue);return Ne&&Pn(P,ce),ee}for(ue=a(P,ue);ce<T.length;ce++)qe=J(ue,P,ce,T[ce],V),qe!==null&&(e&&qe.alternate!==null&&ue.delete(qe.key===null?ce:qe.key),b=f(qe,b,ce),le===null?ee=qe:le.sibling=qe,le=qe);return e&&ue.forEach(function(wn){return t(P,wn)}),Ne&&Pn(P,ce),ee}function Z(P,b,T,V){var ee=ae(T);if(typeof ee!="function")throw Error(s(150));if(T=ee.call(T),T==null)throw Error(s(151));for(var le=ee=null,ue=b,ce=b=0,qe=null,we=T.next();ue!==null&&!we.done;ce++,we=T.next()){ue.index>ce?(qe=ue,ue=null):qe=ue.sibling;var wn=U(P,ue,we.value,V);if(wn===null){ue===null&&(ue=qe);break}e&&ue&&wn.alternate===null&&t(P,ue),b=f(wn,b,ce),le===null?ee=wn:le.sibling=wn,le=wn,ue=qe}if(we.done)return r(P,ue),Ne&&Pn(P,ce),ee;if(ue===null){for(;!we.done;ce++,we=T.next())we=B(P,we.value,V),we!==null&&(b=f(we,b,ce),le===null?ee=we:le.sibling=we,le=we);return Ne&&Pn(P,ce),ee}for(ue=a(P,ue);!we.done;ce++,we=T.next())we=J(ue,P,ce,we.value,V),we!==null&&(e&&we.alternate!==null&&ue.delete(we.key===null?ce:we.key),b=f(we,b,ce),le===null?ee=we:le.sibling=we,le=we);return e&&ue.forEach(function(Rm){return t(P,Rm)}),Ne&&Pn(P,ce),ee}function $e(P,b,T,V){if(typeof T=="object"&&T!==null&&T.type===z&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case W:e:{for(var ee=T.key,le=b;le!==null;){if(le.key===ee){if(ee=T.type,ee===z){if(le.tag===7){r(P,le.sibling),b=c(le,T.props.children),b.return=P,P=b;break e}}else if(le.elementType===ee||typeof ee=="object"&&ee!==null&&ee.$$typeof===Te&&Lc(ee)===le.type){r(P,le.sibling),b=c(le,T.props),b.ref=hs(P,le,T),b.return=P,P=b;break e}r(P,le);break}else t(P,le);le=le.sibling}T.type===z?(b=$n(T.props.children,P.mode,V,T.key),b.return=P,P=b):(V=Di(T.type,T.key,T.props,null,P.mode,V),V.ref=hs(P,b,T),V.return=P,P=V)}return g(P);case I:e:{for(le=T.key;b!==null;){if(b.key===le)if(b.tag===4&&b.stateNode.containerInfo===T.containerInfo&&b.stateNode.implementation===T.implementation){r(P,b.sibling),b=c(b,T.children||[]),b.return=P,P=b;break e}else{r(P,b);break}else t(P,b);b=b.sibling}b=rl(T,P.mode,V),b.return=P,P=b}return g(P);case Te:return le=T._init,$e(P,b,le(T._payload),V)}if(Br(T))return Y(P,b,T,V);if(ae(T))return Z(P,b,T,V);vi(P,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,b!==null&&b.tag===6?(r(P,b.sibling),b=c(b,T),b.return=P,P=b):(r(P,b),b=nl(T,P.mode,V),b.return=P,P=b),g(P)):r(P,b)}return $e}var ur=Dc(!0),$c=Dc(!1),ps={},Dt=ln(ps),ms=ln(ps),gs=ln(ps);function Rn(e){if(e===ps)throw Error(s(174));return e}function _a(e,t){switch(Se(gs,t),Se(ms,e),Se(Dt,ps),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:wo(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=wo(t,e)}je(Dt),Se(Dt,t)}function cr(){je(Dt),je(ms),je(gs)}function Uc(e){Rn(gs.current);var t=Rn(Dt.current),r=wo(t,e.type);t!==r&&(Se(ms,e),Se(Dt,r))}function xa(e){ms.current===e&&(je(Dt),je(ms))}var Ae=ln(0);function yi(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ka=[];function Sa(){for(var e=0;e<ka.length;e++)ka[e]._workInProgressVersionPrimary=null;ka.length=0}var wi=q.ReactCurrentDispatcher,ba=q.ReactCurrentBatchConfig,An=0,Oe=null,Fe=null,We=null,_i=!1,vs=!1,ys=0,Zp=0;function Xe(){throw Error(s(321))}function Ea(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!jt(e[r],t[r]))return!1;return!0}function ja(e,t,r,a,c,f){if(An=f,Oe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,wi.current=e===null||e.memoizedState===null?rm:sm,e=r(a,c),vs){f=0;do{if(vs=!1,ys=0,25<=f)throw Error(s(301));f+=1,We=Fe=null,t.updateQueue=null,wi.current=im,e=r(a,c)}while(vs)}if(wi.current=Si,t=Fe!==null&&Fe.next!==null,An=0,We=Fe=Oe=null,_i=!1,t)throw Error(s(300));return e}function Ca(){var e=ys!==0;return ys=0,e}function $t(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return We===null?Oe.memoizedState=We=e:We=We.next=e,We}function kt(){if(Fe===null){var e=Oe.alternate;e=e!==null?e.memoizedState:null}else e=Fe.next;var t=We===null?Oe.memoizedState:We.next;if(t!==null)We=t,Fe=e;else{if(e===null)throw Error(s(310));Fe=e,e={memoizedState:Fe.memoizedState,baseState:Fe.baseState,baseQueue:Fe.baseQueue,queue:Fe.queue,next:null},We===null?Oe.memoizedState=We=e:We=We.next=e}return We}function ws(e,t){return typeof t=="function"?t(e):t}function Na(e){var t=kt(),r=t.queue;if(r===null)throw Error(s(311));r.lastRenderedReducer=e;var a=Fe,c=a.baseQueue,f=r.pending;if(f!==null){if(c!==null){var g=c.next;c.next=f.next,f.next=g}a.baseQueue=c=f,r.pending=null}if(c!==null){f=c.next,a=a.baseState;var w=g=null,k=null,R=f;do{var M=R.lane;if((An&M)===M)k!==null&&(k=k.next={lane:0,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null}),a=R.hasEagerState?R.eagerState:e(a,R.action);else{var B={lane:M,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null};k===null?(w=k=B,g=a):k=k.next=B,Oe.lanes|=M,On|=M}R=R.next}while(R!==null&&R!==f);k===null?g=a:k.next=w,jt(a,t.memoizedState)||(ot=!0),t.memoizedState=a,t.baseState=g,t.baseQueue=k,r.lastRenderedState=a}if(e=r.interleaved,e!==null){c=e;do f=c.lane,Oe.lanes|=f,On|=f,c=c.next;while(c!==e)}else c===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Pa(e){var t=kt(),r=t.queue;if(r===null)throw Error(s(311));r.lastRenderedReducer=e;var a=r.dispatch,c=r.pending,f=t.memoizedState;if(c!==null){r.pending=null;var g=c=c.next;do f=e(f,g.action),g=g.next;while(g!==c);jt(f,t.memoizedState)||(ot=!0),t.memoizedState=f,t.baseQueue===null&&(t.baseState=f),r.lastRenderedState=f}return[f,a]}function Mc(){}function Fc(e,t){var r=Oe,a=kt(),c=t(),f=!jt(a.memoizedState,c);if(f&&(a.memoizedState=c,ot=!0),a=a.queue,Ta(Vc.bind(null,r,a,e),[e]),a.getSnapshot!==t||f||We!==null&&We.memoizedState.tag&1){if(r.flags|=2048,_s(9,Bc.bind(null,r,a,c,t),void 0,null),He===null)throw Error(s(349));(An&30)!==0||zc(r,t,c)}return c}function zc(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Oe.updateQueue,t===null?(t={lastEffect:null,stores:null},Oe.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Bc(e,t,r,a){t.value=r,t.getSnapshot=a,Wc(t)&&Hc(e)}function Vc(e,t,r){return r(function(){Wc(t)&&Hc(e)})}function Wc(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!jt(e,r)}catch{return!0}}function Hc(e){var t=Kt(e,1);t!==null&&Rt(t,e,1,-1)}function qc(e){var t=$t();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ws,lastRenderedState:e},t.queue=e,e=e.dispatch=nm.bind(null,Oe,e),[t.memoizedState,e]}function _s(e,t,r,a){return e={tag:e,create:t,destroy:r,deps:a,next:null},t=Oe.updateQueue,t===null?(t={lastEffect:null,stores:null},Oe.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(a=r.next,r.next=e,e.next=a,t.lastEffect=e)),e}function Kc(){return kt().memoizedState}function xi(e,t,r,a){var c=$t();Oe.flags|=e,c.memoizedState=_s(1|t,r,void 0,a===void 0?null:a)}function ki(e,t,r,a){var c=kt();a=a===void 0?null:a;var f=void 0;if(Fe!==null){var g=Fe.memoizedState;if(f=g.destroy,a!==null&&Ea(a,g.deps)){c.memoizedState=_s(t,r,f,a);return}}Oe.flags|=e,c.memoizedState=_s(1|t,r,f,a)}function Gc(e,t){return xi(8390656,8,e,t)}function Ta(e,t){return ki(2048,8,e,t)}function Qc(e,t){return ki(4,2,e,t)}function Jc(e,t){return ki(4,4,e,t)}function Xc(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Yc(e,t,r){return r=r!=null?r.concat([e]):null,ki(4,4,Xc.bind(null,t,e),r)}function Ra(){}function Zc(e,t){var r=kt();t=t===void 0?null:t;var a=r.memoizedState;return a!==null&&t!==null&&Ea(t,a[1])?a[0]:(r.memoizedState=[e,t],e)}function ed(e,t){var r=kt();t=t===void 0?null:t;var a=r.memoizedState;return a!==null&&t!==null&&Ea(t,a[1])?a[0]:(e=e(),r.memoizedState=[e,t],e)}function td(e,t,r){return(An&21)===0?(e.baseState&&(e.baseState=!1,ot=!0),e.memoizedState=r):(jt(r,t)||(r=Cu(),Oe.lanes|=r,On|=r,e.baseState=!0),t)}function em(e,t){var r=xe;xe=r!==0&&4>r?r:4,e(!0);var a=ba.transition;ba.transition={};try{e(!1),t()}finally{xe=r,ba.transition=a}}function nd(){return kt().memoizedState}function tm(e,t,r){var a=gn(e);if(r={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null},rd(e))sd(t,r);else if(r=Cc(e,t,r,a),r!==null){var c=nt();Rt(r,e,a,c),id(r,t,a)}}function nm(e,t,r){var a=gn(e),c={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null};if(rd(e))sd(t,c);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=t.lastRenderedReducer,f!==null))try{var g=t.lastRenderedState,w=f(g,r);if(c.hasEagerState=!0,c.eagerState=w,jt(w,g)){var k=t.interleaved;k===null?(c.next=c,ga(t)):(c.next=k.next,k.next=c),t.interleaved=c;return}}catch{}finally{}r=Cc(e,t,c,a),r!==null&&(c=nt(),Rt(r,e,a,c),id(r,t,a))}}function rd(e){var t=e.alternate;return e===Oe||t!==null&&t===Oe}function sd(e,t){vs=_i=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function id(e,t,r){if((r&4194240)!==0){var a=t.lanes;a&=e.pendingLanes,r|=a,t.lanes=r,Ro(e,r)}}var Si={readContext:xt,useCallback:Xe,useContext:Xe,useEffect:Xe,useImperativeHandle:Xe,useInsertionEffect:Xe,useLayoutEffect:Xe,useMemo:Xe,useReducer:Xe,useRef:Xe,useState:Xe,useDebugValue:Xe,useDeferredValue:Xe,useTransition:Xe,useMutableSource:Xe,useSyncExternalStore:Xe,useId:Xe,unstable_isNewReconciler:!1},rm={readContext:xt,useCallback:function(e,t){return $t().memoizedState=[e,t===void 0?null:t],e},useContext:xt,useEffect:Gc,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,xi(4194308,4,Xc.bind(null,t,e),r)},useLayoutEffect:function(e,t){return xi(4194308,4,e,t)},useInsertionEffect:function(e,t){return xi(4,2,e,t)},useMemo:function(e,t){var r=$t();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var a=$t();return t=r!==void 0?r(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=tm.bind(null,Oe,e),[a.memoizedState,e]},useRef:function(e){var t=$t();return e={current:e},t.memoizedState=e},useState:qc,useDebugValue:Ra,useDeferredValue:function(e){return $t().memoizedState=e},useTransition:function(){var e=qc(!1),t=e[0];return e=em.bind(null,e[1]),$t().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var a=Oe,c=$t();if(Ne){if(r===void 0)throw Error(s(407));r=r()}else{if(r=t(),He===null)throw Error(s(349));(An&30)!==0||zc(a,t,r)}c.memoizedState=r;var f={value:r,getSnapshot:t};return c.queue=f,Gc(Vc.bind(null,a,f,e),[e]),a.flags|=2048,_s(9,Bc.bind(null,a,f,r,t),void 0,null),r},useId:function(){var e=$t(),t=He.identifierPrefix;if(Ne){var r=qt,a=Ht;r=(a&~(1<<32-Et(a)-1)).toString(32)+r,t=":"+t+"R"+r,r=ys++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=Zp++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},sm={readContext:xt,useCallback:Zc,useContext:xt,useEffect:Ta,useImperativeHandle:Yc,useInsertionEffect:Qc,useLayoutEffect:Jc,useMemo:ed,useReducer:Na,useRef:Kc,useState:function(){return Na(ws)},useDebugValue:Ra,useDeferredValue:function(e){var t=kt();return td(t,Fe.memoizedState,e)},useTransition:function(){var e=Na(ws)[0],t=kt().memoizedState;return[e,t]},useMutableSource:Mc,useSyncExternalStore:Fc,useId:nd,unstable_isNewReconciler:!1},im={readContext:xt,useCallback:Zc,useContext:xt,useEffect:Ta,useImperativeHandle:Yc,useInsertionEffect:Qc,useLayoutEffect:Jc,useMemo:ed,useReducer:Pa,useRef:Kc,useState:function(){return Pa(ws)},useDebugValue:Ra,useDeferredValue:function(e){var t=kt();return Fe===null?t.memoizedState=e:td(t,Fe.memoizedState,e)},useTransition:function(){var e=Pa(ws)[0],t=kt().memoizedState;return[e,t]},useMutableSource:Mc,useSyncExternalStore:Fc,useId:nd,unstable_isNewReconciler:!1};function dr(e,t){try{var r="",a=t;do r+=K(a),a=a.return;while(a);var c=r}catch(f){c=`
Error generating stack: `+f.message+`
`+f.stack}return{value:e,source:t,stack:c,digest:null}}function Aa(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Oa(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var om=typeof WeakMap=="function"?WeakMap:Map;function od(e,t,r){r=Gt(-1,r),r.tag=3,r.payload={element:null};var a=t.value;return r.callback=function(){Ti||(Ti=!0,Ga=a),Oa(e,t)},r}function ad(e,t,r){r=Gt(-1,r),r.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var c=t.value;r.payload=function(){return a(c)},r.callback=function(){Oa(e,t)}}var f=e.stateNode;return f!==null&&typeof f.componentDidCatch=="function"&&(r.callback=function(){Oa(e,t),typeof a!="function"&&(pn===null?pn=new Set([this]):pn.add(this));var g=t.stack;this.componentDidCatch(t.value,{componentStack:g!==null?g:""})}),r}function ld(e,t,r){var a=e.pingCache;if(a===null){a=e.pingCache=new om;var c=new Set;a.set(t,c)}else c=a.get(t),c===void 0&&(c=new Set,a.set(t,c));c.has(r)||(c.add(r),e=_m.bind(null,e,t,r),t.then(e,e))}function ud(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function cd(e,t,r,a,c){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Gt(-1,1),t.tag=2,fn(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=c,e)}var am=q.ReactCurrentOwner,ot=!1;function tt(e,t,r,a){t.child=e===null?$c(t,null,r,a):ur(t,e.child,r,a)}function dd(e,t,r,a,c){r=r.render;var f=t.ref;return lr(t,c),a=ja(e,t,r,a,f,c),r=Ca(),e!==null&&!ot?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,Qt(e,t,c)):(Ne&&r&&aa(t),t.flags|=1,tt(e,t,a,c),t.child)}function fd(e,t,r,a,c){if(e===null){var f=r.type;return typeof f=="function"&&!tl(f)&&f.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=f,hd(e,t,f,a,c)):(e=Di(r.type,null,a,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(f=e.child,(e.lanes&c)===0){var g=f.memoizedProps;if(r=r.compare,r=r!==null?r:os,r(g,a)&&e.ref===t.ref)return Qt(e,t,c)}return t.flags|=1,e=yn(f,a),e.ref=t.ref,e.return=t,t.child=e}function hd(e,t,r,a,c){if(e!==null){var f=e.memoizedProps;if(os(f,a)&&e.ref===t.ref)if(ot=!1,t.pendingProps=a=f,(e.lanes&c)!==0)(e.flags&131072)!==0&&(ot=!0);else return t.lanes=e.lanes,Qt(e,t,c)}return Ia(e,t,r,a,c)}function pd(e,t,r){var a=t.pendingProps,c=a.children,f=e!==null?e.memoizedState:null;if(a.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Se(hr,gt),gt|=r;else{if((r&1073741824)===0)return e=f!==null?f.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Se(hr,gt),gt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=f!==null?f.baseLanes:r,Se(hr,gt),gt|=a}else f!==null?(a=f.baseLanes|r,t.memoizedState=null):a=r,Se(hr,gt),gt|=a;return tt(e,t,c,r),t.child}function md(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Ia(e,t,r,a,c){var f=it(r)?Cn:Je.current;return f=rr(t,f),lr(t,c),r=ja(e,t,r,a,f,c),a=Ca(),e!==null&&!ot?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,Qt(e,t,c)):(Ne&&a&&aa(t),t.flags|=1,tt(e,t,r,c),t.child)}function gd(e,t,r,a,c){if(it(r)){var f=!0;ai(t)}else f=!1;if(lr(t,c),t.stateNode===null)Ei(e,t),Oc(t,r,a),wa(t,r,a,c),a=!0;else if(e===null){var g=t.stateNode,w=t.memoizedProps;g.props=w;var k=g.context,R=r.contextType;typeof R=="object"&&R!==null?R=xt(R):(R=it(r)?Cn:Je.current,R=rr(t,R));var M=r.getDerivedStateFromProps,B=typeof M=="function"||typeof g.getSnapshotBeforeUpdate=="function";B||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(w!==a||k!==R)&&Ic(t,g,a,R),dn=!1;var U=t.memoizedState;g.state=U,mi(t,a,g,c),k=t.memoizedState,w!==a||U!==k||st.current||dn?(typeof M=="function"&&(ya(t,r,M,a),k=t.memoizedState),(w=dn||Ac(t,r,w,a,U,k,R))?(B||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(t.flags|=4194308)):(typeof g.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=k),g.props=a,g.state=k,g.context=R,a=w):(typeof g.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{g=t.stateNode,Nc(e,t),w=t.memoizedProps,R=t.type===t.elementType?w:Nt(t.type,w),g.props=R,B=t.pendingProps,U=g.context,k=r.contextType,typeof k=="object"&&k!==null?k=xt(k):(k=it(r)?Cn:Je.current,k=rr(t,k));var J=r.getDerivedStateFromProps;(M=typeof J=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(w!==B||U!==k)&&Ic(t,g,a,k),dn=!1,U=t.memoizedState,g.state=U,mi(t,a,g,c);var Y=t.memoizedState;w!==B||U!==Y||st.current||dn?(typeof J=="function"&&(ya(t,r,J,a),Y=t.memoizedState),(R=dn||Ac(t,r,R,a,U,Y,k)||!1)?(M||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(a,Y,k),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(a,Y,k)),typeof g.componentDidUpdate=="function"&&(t.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof g.componentDidUpdate!="function"||w===e.memoizedProps&&U===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||w===e.memoizedProps&&U===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=Y),g.props=a,g.state=Y,g.context=k,a=R):(typeof g.componentDidUpdate!="function"||w===e.memoizedProps&&U===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||w===e.memoizedProps&&U===e.memoizedState||(t.flags|=1024),a=!1)}return La(e,t,r,a,f,c)}function La(e,t,r,a,c,f){md(e,t);var g=(t.flags&128)!==0;if(!a&&!g)return c&&_c(t,r,!1),Qt(e,t,f);a=t.stateNode,am.current=t;var w=g&&typeof r.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,e!==null&&g?(t.child=ur(t,e.child,null,f),t.child=ur(t,null,w,f)):tt(e,t,w,f),t.memoizedState=a.state,c&&_c(t,r,!0),t.child}function vd(e){var t=e.stateNode;t.pendingContext?yc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&yc(e,t.context,!1),_a(e,t.containerInfo)}function yd(e,t,r,a,c){return or(),da(c),t.flags|=256,tt(e,t,r,a),t.child}var Da={dehydrated:null,treeContext:null,retryLane:0};function $a(e){return{baseLanes:e,cachePool:null,transitions:null}}function wd(e,t,r){var a=t.pendingProps,c=Ae.current,f=!1,g=(t.flags&128)!==0,w;if((w=g)||(w=e!==null&&e.memoizedState===null?!1:(c&2)!==0),w?(f=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(c|=1),Se(Ae,c&1),e===null)return ca(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(g=a.children,e=a.fallback,f?(a=t.mode,f=t.child,g={mode:"hidden",children:g},(a&1)===0&&f!==null?(f.childLanes=0,f.pendingProps=g):f=$i(g,a,0,null),e=$n(e,a,r,null),f.return=t,e.return=t,f.sibling=e,t.child=f,t.child.memoizedState=$a(r),t.memoizedState=Da,e):Ua(t,g));if(c=e.memoizedState,c!==null&&(w=c.dehydrated,w!==null))return lm(e,t,g,a,w,c,r);if(f){f=a.fallback,g=t.mode,c=e.child,w=c.sibling;var k={mode:"hidden",children:a.children};return(g&1)===0&&t.child!==c?(a=t.child,a.childLanes=0,a.pendingProps=k,t.deletions=null):(a=yn(c,k),a.subtreeFlags=c.subtreeFlags&14680064),w!==null?f=yn(w,f):(f=$n(f,g,r,null),f.flags|=2),f.return=t,a.return=t,a.sibling=f,t.child=a,a=f,f=t.child,g=e.child.memoizedState,g=g===null?$a(r):{baseLanes:g.baseLanes|r,cachePool:null,transitions:g.transitions},f.memoizedState=g,f.childLanes=e.childLanes&~r,t.memoizedState=Da,a}return f=e.child,e=f.sibling,a=yn(f,{mode:"visible",children:a.children}),(t.mode&1)===0&&(a.lanes=r),a.return=t,a.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=a,t.memoizedState=null,a}function Ua(e,t){return t=$i({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function bi(e,t,r,a){return a!==null&&da(a),ur(t,e.child,null,r),e=Ua(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function lm(e,t,r,a,c,f,g){if(r)return t.flags&256?(t.flags&=-257,a=Aa(Error(s(422))),bi(e,t,g,a)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(f=a.fallback,c=t.mode,a=$i({mode:"visible",children:a.children},c,0,null),f=$n(f,c,g,null),f.flags|=2,a.return=t,f.return=t,a.sibling=f,t.child=a,(t.mode&1)!==0&&ur(t,e.child,null,g),t.child.memoizedState=$a(g),t.memoizedState=Da,f);if((t.mode&1)===0)return bi(e,t,g,null);if(c.data==="$!"){if(a=c.nextSibling&&c.nextSibling.dataset,a)var w=a.dgst;return a=w,f=Error(s(419)),a=Aa(f,a,void 0),bi(e,t,g,a)}if(w=(g&e.childLanes)!==0,ot||w){if(a=He,a!==null){switch(g&-g){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=(c&(a.suspendedLanes|g))!==0?0:c,c!==0&&c!==f.retryLane&&(f.retryLane=c,Kt(e,c),Rt(a,e,c,-1))}return el(),a=Aa(Error(s(421))),bi(e,t,g,a)}return c.data==="$?"?(t.flags|=128,t.child=e.child,t=xm.bind(null,e),c._reactRetry=t,null):(e=f.treeContext,mt=an(c.nextSibling),pt=t,Ne=!0,Ct=null,e!==null&&(wt[_t++]=Ht,wt[_t++]=qt,wt[_t++]=Nn,Ht=e.id,qt=e.overflow,Nn=t),t=Ua(t,a.children),t.flags|=4096,t)}function _d(e,t,r){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),ma(e.return,t,r)}function Ma(e,t,r,a,c){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:r,tailMode:c}:(f.isBackwards=t,f.rendering=null,f.renderingStartTime=0,f.last=a,f.tail=r,f.tailMode=c)}function xd(e,t,r){var a=t.pendingProps,c=a.revealOrder,f=a.tail;if(tt(e,t,a.children,r),a=Ae.current,(a&2)!==0)a=a&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&_d(e,r,t);else if(e.tag===19)_d(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(Se(Ae,a),(t.mode&1)===0)t.memoizedState=null;else switch(c){case"forwards":for(r=t.child,c=null;r!==null;)e=r.alternate,e!==null&&yi(e)===null&&(c=r),r=r.sibling;r=c,r===null?(c=t.child,t.child=null):(c=r.sibling,r.sibling=null),Ma(t,!1,c,r,f);break;case"backwards":for(r=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&yi(e)===null){t.child=c;break}e=c.sibling,c.sibling=r,r=c,c=e}Ma(t,!0,r,null,f);break;case"together":Ma(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ei(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Qt(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),On|=t.lanes,(r&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(s(153));if(t.child!==null){for(e=t.child,r=yn(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=yn(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function um(e,t,r){switch(t.tag){case 3:vd(t),or();break;case 5:Uc(t);break;case 1:it(t.type)&&ai(t);break;case 4:_a(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,c=t.memoizedProps.value;Se(fi,a._currentValue),a._currentValue=c;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?(Se(Ae,Ae.current&1),t.flags|=128,null):(r&t.child.childLanes)!==0?wd(e,t,r):(Se(Ae,Ae.current&1),e=Qt(e,t,r),e!==null?e.sibling:null);Se(Ae,Ae.current&1);break;case 19:if(a=(r&t.childLanes)!==0,(e.flags&128)!==0){if(a)return xd(e,t,r);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),Se(Ae,Ae.current),a)break;return null;case 22:case 23:return t.lanes=0,pd(e,t,r)}return Qt(e,t,r)}var kd,Fa,Sd,bd;kd=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},Fa=function(){},Sd=function(e,t,r,a){var c=e.memoizedProps;if(c!==a){e=t.stateNode,Rn(Dt.current);var f=null;switch(r){case"input":c=mo(e,c),a=mo(e,a),f=[];break;case"select":c=S({},c,{value:void 0}),a=S({},a,{value:void 0}),f=[];break;case"textarea":c=yo(e,c),a=yo(e,a),f=[];break;default:typeof c.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=si)}_o(r,a);var g;r=null;for(R in c)if(!a.hasOwnProperty(R)&&c.hasOwnProperty(R)&&c[R]!=null)if(R==="style"){var w=c[R];for(g in w)w.hasOwnProperty(g)&&(r||(r={}),r[g]="")}else R!=="dangerouslySetInnerHTML"&&R!=="children"&&R!=="suppressContentEditableWarning"&&R!=="suppressHydrationWarning"&&R!=="autoFocus"&&(l.hasOwnProperty(R)?f||(f=[]):(f=f||[]).push(R,null));for(R in a){var k=a[R];if(w=c?.[R],a.hasOwnProperty(R)&&k!==w&&(k!=null||w!=null))if(R==="style")if(w){for(g in w)!w.hasOwnProperty(g)||k&&k.hasOwnProperty(g)||(r||(r={}),r[g]="");for(g in k)k.hasOwnProperty(g)&&w[g]!==k[g]&&(r||(r={}),r[g]=k[g])}else r||(f||(f=[]),f.push(R,r)),r=k;else R==="dangerouslySetInnerHTML"?(k=k?k.__html:void 0,w=w?w.__html:void 0,k!=null&&w!==k&&(f=f||[]).push(R,k)):R==="children"?typeof k!="string"&&typeof k!="number"||(f=f||[]).push(R,""+k):R!=="suppressContentEditableWarning"&&R!=="suppressHydrationWarning"&&(l.hasOwnProperty(R)?(k!=null&&R==="onScroll"&&Ee("scroll",e),f||w===k||(f=[])):(f=f||[]).push(R,k))}r&&(f=f||[]).push("style",r);var R=f;(t.updateQueue=R)&&(t.flags|=4)}},bd=function(e,t,r,a){r!==a&&(t.flags|=4)};function xs(e,t){if(!Ne)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function Ye(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,a=0;if(t)for(var c=e.child;c!==null;)r|=c.lanes|c.childLanes,a|=c.subtreeFlags&14680064,a|=c.flags&14680064,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)r|=c.lanes|c.childLanes,a|=c.subtreeFlags,a|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=a,e.childLanes=r,t}function cm(e,t,r){var a=t.pendingProps;switch(la(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ye(t),null;case 1:return it(t.type)&&oi(),Ye(t),null;case 3:return a=t.stateNode,cr(),je(st),je(Je),Sa(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(di(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Ct!==null&&(Xa(Ct),Ct=null))),Fa(e,t),Ye(t),null;case 5:xa(t);var c=Rn(gs.current);if(r=t.type,e!==null&&t.stateNode!=null)Sd(e,t,r,a,c),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(s(166));return Ye(t),null}if(e=Rn(Dt.current),di(t)){a=t.stateNode,r=t.type;var f=t.memoizedProps;switch(a[Lt]=t,a[ds]=f,e=(t.mode&1)!==0,r){case"dialog":Ee("cancel",a),Ee("close",a);break;case"iframe":case"object":case"embed":Ee("load",a);break;case"video":case"audio":for(c=0;c<ls.length;c++)Ee(ls[c],a);break;case"source":Ee("error",a);break;case"img":case"image":case"link":Ee("error",a),Ee("load",a);break;case"details":Ee("toggle",a);break;case"input":ru(a,f),Ee("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!f.multiple},Ee("invalid",a);break;case"textarea":ou(a,f),Ee("invalid",a)}_o(r,f),c=null;for(var g in f)if(f.hasOwnProperty(g)){var w=f[g];g==="children"?typeof w=="string"?a.textContent!==w&&(f.suppressHydrationWarning!==!0&&ri(a.textContent,w,e),c=["children",w]):typeof w=="number"&&a.textContent!==""+w&&(f.suppressHydrationWarning!==!0&&ri(a.textContent,w,e),c=["children",""+w]):l.hasOwnProperty(g)&&w!=null&&g==="onScroll"&&Ee("scroll",a)}switch(r){case"input":Bt(a),iu(a,f,!0);break;case"textarea":Bt(a),lu(a);break;case"select":case"option":break;default:typeof f.onClick=="function"&&(a.onclick=si)}a=c,t.updateQueue=a,a!==null&&(t.flags|=4)}else{g=c.nodeType===9?c:c.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=uu(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=g.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=g.createElement(r,{is:a.is}):(e=g.createElement(r),r==="select"&&(g=e,a.multiple?g.multiple=!0:a.size&&(g.size=a.size))):e=g.createElementNS(e,r),e[Lt]=t,e[ds]=a,kd(e,t,!1,!1),t.stateNode=e;e:{switch(g=xo(r,a),r){case"dialog":Ee("cancel",e),Ee("close",e),c=a;break;case"iframe":case"object":case"embed":Ee("load",e),c=a;break;case"video":case"audio":for(c=0;c<ls.length;c++)Ee(ls[c],e);c=a;break;case"source":Ee("error",e),c=a;break;case"img":case"image":case"link":Ee("error",e),Ee("load",e),c=a;break;case"details":Ee("toggle",e),c=a;break;case"input":ru(e,a),c=mo(e,a),Ee("invalid",e);break;case"option":c=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},c=S({},a,{value:void 0}),Ee("invalid",e);break;case"textarea":ou(e,a),c=yo(e,a),Ee("invalid",e);break;default:c=a}_o(r,c),w=c;for(f in w)if(w.hasOwnProperty(f)){var k=w[f];f==="style"?fu(e,k):f==="dangerouslySetInnerHTML"?(k=k?k.__html:void 0,k!=null&&cu(e,k)):f==="children"?typeof k=="string"?(r!=="textarea"||k!=="")&&Vr(e,k):typeof k=="number"&&Vr(e,""+k):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(l.hasOwnProperty(f)?k!=null&&f==="onScroll"&&Ee("scroll",e):k!=null&&L(e,f,k,g))}switch(r){case"input":Bt(e),iu(e,a,!1);break;case"textarea":Bt(e),lu(e);break;case"option":a.value!=null&&e.setAttribute("value",""+se(a.value));break;case"select":e.multiple=!!a.multiple,f=a.value,f!=null?Hn(e,!!a.multiple,f,!1):a.defaultValue!=null&&Hn(e,!!a.multiple,a.defaultValue,!0);break;default:typeof c.onClick=="function"&&(e.onclick=si)}switch(r){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ye(t),null;case 6:if(e&&t.stateNode!=null)bd(e,t,e.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(s(166));if(r=Rn(gs.current),Rn(Dt.current),di(t)){if(a=t.stateNode,r=t.memoizedProps,a[Lt]=t,(f=a.nodeValue!==r)&&(e=pt,e!==null))switch(e.tag){case 3:ri(a.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ri(a.nodeValue,r,(e.mode&1)!==0)}f&&(t.flags|=4)}else a=(r.nodeType===9?r:r.ownerDocument).createTextNode(a),a[Lt]=t,t.stateNode=a}return Ye(t),null;case 13:if(je(Ae),a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ne&&mt!==null&&(t.mode&1)!==0&&(t.flags&128)===0)jc(),or(),t.flags|=98560,f=!1;else if(f=di(t),a!==null&&a.dehydrated!==null){if(e===null){if(!f)throw Error(s(318));if(f=t.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[Lt]=t}else or(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ye(t),f=!1}else Ct!==null&&(Xa(Ct),Ct=null),f=!0;if(!f)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=r,t):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(Ae.current&1)!==0?ze===0&&(ze=3):el())),t.updateQueue!==null&&(t.flags|=4),Ye(t),null);case 4:return cr(),Fa(e,t),e===null&&us(t.stateNode.containerInfo),Ye(t),null;case 10:return pa(t.type._context),Ye(t),null;case 17:return it(t.type)&&oi(),Ye(t),null;case 19:if(je(Ae),f=t.memoizedState,f===null)return Ye(t),null;if(a=(t.flags&128)!==0,g=f.rendering,g===null)if(a)xs(f,!1);else{if(ze!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(g=yi(e),g!==null){for(t.flags|=128,xs(f,!1),a=g.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=r,r=t.child;r!==null;)f=r,e=a,f.flags&=14680066,g=f.alternate,g===null?(f.childLanes=0,f.lanes=e,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=g.childLanes,f.lanes=g.lanes,f.child=g.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=g.memoizedProps,f.memoizedState=g.memoizedState,f.updateQueue=g.updateQueue,f.type=g.type,e=g.dependencies,f.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Se(Ae,Ae.current&1|2),t.child}e=e.sibling}f.tail!==null&&De()>pr&&(t.flags|=128,a=!0,xs(f,!1),t.lanes=4194304)}else{if(!a)if(e=yi(g),e!==null){if(t.flags|=128,a=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),xs(f,!0),f.tail===null&&f.tailMode==="hidden"&&!g.alternate&&!Ne)return Ye(t),null}else 2*De()-f.renderingStartTime>pr&&r!==1073741824&&(t.flags|=128,a=!0,xs(f,!1),t.lanes=4194304);f.isBackwards?(g.sibling=t.child,t.child=g):(r=f.last,r!==null?r.sibling=g:t.child=g,f.last=g)}return f.tail!==null?(t=f.tail,f.rendering=t,f.tail=t.sibling,f.renderingStartTime=De(),t.sibling=null,r=Ae.current,Se(Ae,a?r&1|2:r&1),t):(Ye(t),null);case 22:case 23:return Za(),a=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(t.flags|=8192),a&&(t.mode&1)!==0?(gt&1073741824)!==0&&(Ye(t),t.subtreeFlags&6&&(t.flags|=8192)):Ye(t),null;case 24:return null;case 25:return null}throw Error(s(156,t.tag))}function dm(e,t){switch(la(t),t.tag){case 1:return it(t.type)&&oi(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return cr(),je(st),je(Je),Sa(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return xa(t),null;case 13:if(je(Ae),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(s(340));or()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return je(Ae),null;case 4:return cr(),null;case 10:return pa(t.type._context),null;case 22:case 23:return Za(),null;case 24:return null;default:return null}}var ji=!1,Ze=!1,fm=typeof WeakSet=="function"?WeakSet:Set,X=null;function fr(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(a){Ie(e,t,a)}else r.current=null}function za(e,t,r){try{r()}catch(a){Ie(e,t,a)}}var Ed=!1;function hm(e,t){if(Zo=qs,e=nc(),Ho(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var a=r.getSelection&&r.getSelection();if(a&&a.rangeCount!==0){r=a.anchorNode;var c=a.anchorOffset,f=a.focusNode;a=a.focusOffset;try{r.nodeType,f.nodeType}catch{r=null;break e}var g=0,w=-1,k=-1,R=0,M=0,B=e,U=null;t:for(;;){for(var J;B!==r||c!==0&&B.nodeType!==3||(w=g+c),B!==f||a!==0&&B.nodeType!==3||(k=g+a),B.nodeType===3&&(g+=B.nodeValue.length),(J=B.firstChild)!==null;)U=B,B=J;for(;;){if(B===e)break t;if(U===r&&++R===c&&(w=g),U===f&&++M===a&&(k=g),(J=B.nextSibling)!==null)break;B=U,U=B.parentNode}B=J}r=w===-1||k===-1?null:{start:w,end:k}}else r=null}r=r||{start:0,end:0}}else r=null;for(ea={focusedElem:e,selectionRange:r},qs=!1,X=t;X!==null;)if(t=X,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,X=e;else for(;X!==null;){t=X;try{var Y=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(Y!==null){var Z=Y.memoizedProps,$e=Y.memoizedState,P=t.stateNode,b=P.getSnapshotBeforeUpdate(t.elementType===t.type?Z:Nt(t.type,Z),$e);P.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var T=t.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch(V){Ie(t,t.return,V)}if(e=t.sibling,e!==null){e.return=t.return,X=e;break}X=t.return}return Y=Ed,Ed=!1,Y}function ks(e,t,r){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var c=a=a.next;do{if((c.tag&e)===e){var f=c.destroy;c.destroy=void 0,f!==void 0&&za(t,r,f)}c=c.next}while(c!==a)}}function Ci(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var a=r.create;r.destroy=a()}r=r.next}while(r!==t)}}function Ba(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function jd(e){var t=e.alternate;t!==null&&(e.alternate=null,jd(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Lt],delete t[ds],delete t[sa],delete t[Qp],delete t[Jp])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Cd(e){return e.tag===5||e.tag===3||e.tag===4}function Nd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Cd(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Va(e,t,r){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=si));else if(a!==4&&(e=e.child,e!==null))for(Va(e,t,r),e=e.sibling;e!==null;)Va(e,t,r),e=e.sibling}function Wa(e,t,r){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(Wa(e,t,r),e=e.sibling;e!==null;)Wa(e,t,r),e=e.sibling}var Ge=null,Pt=!1;function hn(e,t,r){for(r=r.child;r!==null;)Pd(e,t,r),r=r.sibling}function Pd(e,t,r){if(It&&typeof It.onCommitFiberUnmount=="function")try{It.onCommitFiberUnmount(Fs,r)}catch{}switch(r.tag){case 5:Ze||fr(r,t);case 6:var a=Ge,c=Pt;Ge=null,hn(e,t,r),Ge=a,Pt=c,Ge!==null&&(Pt?(e=Ge,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Ge.removeChild(r.stateNode));break;case 18:Ge!==null&&(Pt?(e=Ge,r=r.stateNode,e.nodeType===8?ra(e.parentNode,r):e.nodeType===1&&ra(e,r),es(e)):ra(Ge,r.stateNode));break;case 4:a=Ge,c=Pt,Ge=r.stateNode.containerInfo,Pt=!0,hn(e,t,r),Ge=a,Pt=c;break;case 0:case 11:case 14:case 15:if(!Ze&&(a=r.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){c=a=a.next;do{var f=c,g=f.destroy;f=f.tag,g!==void 0&&((f&2)!==0||(f&4)!==0)&&za(r,t,g),c=c.next}while(c!==a)}hn(e,t,r);break;case 1:if(!Ze&&(fr(r,t),a=r.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=r.memoizedProps,a.state=r.memoizedState,a.componentWillUnmount()}catch(w){Ie(r,t,w)}hn(e,t,r);break;case 21:hn(e,t,r);break;case 22:r.mode&1?(Ze=(a=Ze)||r.memoizedState!==null,hn(e,t,r),Ze=a):hn(e,t,r);break;default:hn(e,t,r)}}function Td(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new fm),t.forEach(function(a){var c=km.bind(null,e,a);r.has(a)||(r.add(a),a.then(c,c))})}}function Tt(e,t){var r=t.deletions;if(r!==null)for(var a=0;a<r.length;a++){var c=r[a];try{var f=e,g=t,w=g;e:for(;w!==null;){switch(w.tag){case 5:Ge=w.stateNode,Pt=!1;break e;case 3:Ge=w.stateNode.containerInfo,Pt=!0;break e;case 4:Ge=w.stateNode.containerInfo,Pt=!0;break e}w=w.return}if(Ge===null)throw Error(s(160));Pd(f,g,c),Ge=null,Pt=!1;var k=c.alternate;k!==null&&(k.return=null),c.return=null}catch(R){Ie(c,t,R)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Rd(t,e),t=t.sibling}function Rd(e,t){var r=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Tt(t,e),Ut(e),a&4){try{ks(3,e,e.return),Ci(3,e)}catch(Z){Ie(e,e.return,Z)}try{ks(5,e,e.return)}catch(Z){Ie(e,e.return,Z)}}break;case 1:Tt(t,e),Ut(e),a&512&&r!==null&&fr(r,r.return);break;case 5:if(Tt(t,e),Ut(e),a&512&&r!==null&&fr(r,r.return),e.flags&32){var c=e.stateNode;try{Vr(c,"")}catch(Z){Ie(e,e.return,Z)}}if(a&4&&(c=e.stateNode,c!=null)){var f=e.memoizedProps,g=r!==null?r.memoizedProps:f,w=e.type,k=e.updateQueue;if(e.updateQueue=null,k!==null)try{w==="input"&&f.type==="radio"&&f.name!=null&&su(c,f),xo(w,g);var R=xo(w,f);for(g=0;g<k.length;g+=2){var M=k[g],B=k[g+1];M==="style"?fu(c,B):M==="dangerouslySetInnerHTML"?cu(c,B):M==="children"?Vr(c,B):L(c,M,B,R)}switch(w){case"input":go(c,f);break;case"textarea":au(c,f);break;case"select":var U=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!f.multiple;var J=f.value;J!=null?Hn(c,!!f.multiple,J,!1):U!==!!f.multiple&&(f.defaultValue!=null?Hn(c,!!f.multiple,f.defaultValue,!0):Hn(c,!!f.multiple,f.multiple?[]:"",!1))}c[ds]=f}catch(Z){Ie(e,e.return,Z)}}break;case 6:if(Tt(t,e),Ut(e),a&4){if(e.stateNode===null)throw Error(s(162));c=e.stateNode,f=e.memoizedProps;try{c.nodeValue=f}catch(Z){Ie(e,e.return,Z)}}break;case 3:if(Tt(t,e),Ut(e),a&4&&r!==null&&r.memoizedState.isDehydrated)try{es(t.containerInfo)}catch(Z){Ie(e,e.return,Z)}break;case 4:Tt(t,e),Ut(e);break;case 13:Tt(t,e),Ut(e),c=e.child,c.flags&8192&&(f=c.memoizedState!==null,c.stateNode.isHidden=f,!f||c.alternate!==null&&c.alternate.memoizedState!==null||(Ka=De())),a&4&&Td(e);break;case 22:if(M=r!==null&&r.memoizedState!==null,e.mode&1?(Ze=(R=Ze)||M,Tt(t,e),Ze=R):Tt(t,e),Ut(e),a&8192){if(R=e.memoizedState!==null,(e.stateNode.isHidden=R)&&!M&&(e.mode&1)!==0)for(X=e,M=e.child;M!==null;){for(B=X=M;X!==null;){switch(U=X,J=U.child,U.tag){case 0:case 11:case 14:case 15:ks(4,U,U.return);break;case 1:fr(U,U.return);var Y=U.stateNode;if(typeof Y.componentWillUnmount=="function"){a=U,r=U.return;try{t=a,Y.props=t.memoizedProps,Y.state=t.memoizedState,Y.componentWillUnmount()}catch(Z){Ie(a,r,Z)}}break;case 5:fr(U,U.return);break;case 22:if(U.memoizedState!==null){Id(B);continue}}J!==null?(J.return=U,X=J):Id(B)}M=M.sibling}e:for(M=null,B=e;;){if(B.tag===5){if(M===null){M=B;try{c=B.stateNode,R?(f=c.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none"):(w=B.stateNode,k=B.memoizedProps.style,g=k!=null&&k.hasOwnProperty("display")?k.display:null,w.style.display=du("display",g))}catch(Z){Ie(e,e.return,Z)}}}else if(B.tag===6){if(M===null)try{B.stateNode.nodeValue=R?"":B.memoizedProps}catch(Z){Ie(e,e.return,Z)}}else if((B.tag!==22&&B.tag!==23||B.memoizedState===null||B===e)&&B.child!==null){B.child.return=B,B=B.child;continue}if(B===e)break e;for(;B.sibling===null;){if(B.return===null||B.return===e)break e;M===B&&(M=null),B=B.return}M===B&&(M=null),B.sibling.return=B.return,B=B.sibling}}break;case 19:Tt(t,e),Ut(e),a&4&&Td(e);break;case 21:break;default:Tt(t,e),Ut(e)}}function Ut(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Cd(r)){var a=r;break e}r=r.return}throw Error(s(160))}switch(a.tag){case 5:var c=a.stateNode;a.flags&32&&(Vr(c,""),a.flags&=-33);var f=Nd(e);Wa(e,f,c);break;case 3:case 4:var g=a.stateNode.containerInfo,w=Nd(e);Va(e,w,g);break;default:throw Error(s(161))}}catch(k){Ie(e,e.return,k)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function pm(e,t,r){X=e,Ad(e)}function Ad(e,t,r){for(var a=(e.mode&1)!==0;X!==null;){var c=X,f=c.child;if(c.tag===22&&a){var g=c.memoizedState!==null||ji;if(!g){var w=c.alternate,k=w!==null&&w.memoizedState!==null||Ze;w=ji;var R=Ze;if(ji=g,(Ze=k)&&!R)for(X=c;X!==null;)g=X,k=g.child,g.tag===22&&g.memoizedState!==null?Ld(c):k!==null?(k.return=g,X=k):Ld(c);for(;f!==null;)X=f,Ad(f),f=f.sibling;X=c,ji=w,Ze=R}Od(e)}else(c.subtreeFlags&8772)!==0&&f!==null?(f.return=c,X=f):Od(e)}}function Od(e){for(;X!==null;){var t=X;if((t.flags&8772)!==0){var r=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:Ze||Ci(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!Ze)if(r===null)a.componentDidMount();else{var c=t.elementType===t.type?r.memoizedProps:Nt(t.type,r.memoizedProps);a.componentDidUpdate(c,r.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var f=t.updateQueue;f!==null&&Tc(t,f,a);break;case 3:var g=t.updateQueue;if(g!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Tc(t,g,r)}break;case 5:var w=t.stateNode;if(r===null&&t.flags&4){r=w;var k=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":k.autoFocus&&r.focus();break;case"img":k.src&&(r.src=k.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var R=t.alternate;if(R!==null){var M=R.memoizedState;if(M!==null){var B=M.dehydrated;B!==null&&es(B)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(s(163))}Ze||t.flags&512&&Ba(t)}catch(U){Ie(t,t.return,U)}}if(t===e){X=null;break}if(r=t.sibling,r!==null){r.return=t.return,X=r;break}X=t.return}}function Id(e){for(;X!==null;){var t=X;if(t===e){X=null;break}var r=t.sibling;if(r!==null){r.return=t.return,X=r;break}X=t.return}}function Ld(e){for(;X!==null;){var t=X;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Ci(4,t)}catch(k){Ie(t,r,k)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var c=t.return;try{a.componentDidMount()}catch(k){Ie(t,c,k)}}var f=t.return;try{Ba(t)}catch(k){Ie(t,f,k)}break;case 5:var g=t.return;try{Ba(t)}catch(k){Ie(t,g,k)}}}catch(k){Ie(t,t.return,k)}if(t===e){X=null;break}var w=t.sibling;if(w!==null){w.return=t.return,X=w;break}X=t.return}}var mm=Math.ceil,Ni=q.ReactCurrentDispatcher,Ha=q.ReactCurrentOwner,St=q.ReactCurrentBatchConfig,ve=0,He=null,Me=null,Qe=0,gt=0,hr=ln(0),ze=0,Ss=null,On=0,Pi=0,qa=0,bs=null,at=null,Ka=0,pr=1/0,Jt=null,Ti=!1,Ga=null,pn=null,Ri=!1,mn=null,Ai=0,Es=0,Qa=null,Oi=-1,Ii=0;function nt(){return(ve&6)!==0?De():Oi!==-1?Oi:Oi=De()}function gn(e){return(e.mode&1)===0?1:(ve&2)!==0&&Qe!==0?Qe&-Qe:Yp.transition!==null?(Ii===0&&(Ii=Cu()),Ii):(e=xe,e!==0||(e=window.event,e=e===void 0?16:Du(e.type)),e)}function Rt(e,t,r,a){if(50<Es)throw Es=0,Qa=null,Error(s(185));Qr(e,r,a),((ve&2)===0||e!==He)&&(e===He&&((ve&2)===0&&(Pi|=r),ze===4&&vn(e,Qe)),lt(e,a),r===1&&ve===0&&(t.mode&1)===0&&(pr=De()+500,li&&cn()))}function lt(e,t){var r=e.callbackNode;Yh(e,t);var a=Vs(e,e===He?Qe:0);if(a===0)r!==null&&bu(r),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(r!=null&&bu(r),t===1)e.tag===0?Xp($d.bind(null,e)):xc($d.bind(null,e)),Kp(function(){(ve&6)===0&&cn()}),r=null;else{switch(Nu(a)){case 1:r=No;break;case 4:r=Eu;break;case 16:r=Ms;break;case 536870912:r=ju;break;default:r=Ms}r=Hd(r,Dd.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Dd(e,t){if(Oi=-1,Ii=0,(ve&6)!==0)throw Error(s(327));var r=e.callbackNode;if(mr()&&e.callbackNode!==r)return null;var a=Vs(e,e===He?Qe:0);if(a===0)return null;if((a&30)!==0||(a&e.expiredLanes)!==0||t)t=Li(e,a);else{t=a;var c=ve;ve|=2;var f=Md();(He!==e||Qe!==t)&&(Jt=null,pr=De()+500,Ln(e,t));do try{ym();break}catch(w){Ud(e,w)}while(!0);ha(),Ni.current=f,ve=c,Me!==null?t=0:(He=null,Qe=0,t=ze)}if(t!==0){if(t===2&&(c=Po(e),c!==0&&(a=c,t=Ja(e,c))),t===1)throw r=Ss,Ln(e,0),vn(e,a),lt(e,De()),r;if(t===6)vn(e,a);else{if(c=e.current.alternate,(a&30)===0&&!gm(c)&&(t=Li(e,a),t===2&&(f=Po(e),f!==0&&(a=f,t=Ja(e,f))),t===1))throw r=Ss,Ln(e,0),vn(e,a),lt(e,De()),r;switch(e.finishedWork=c,e.finishedLanes=a,t){case 0:case 1:throw Error(s(345));case 2:Dn(e,at,Jt);break;case 3:if(vn(e,a),(a&130023424)===a&&(t=Ka+500-De(),10<t)){if(Vs(e,0)!==0)break;if(c=e.suspendedLanes,(c&a)!==a){nt(),e.pingedLanes|=e.suspendedLanes&c;break}e.timeoutHandle=na(Dn.bind(null,e,at,Jt),t);break}Dn(e,at,Jt);break;case 4:if(vn(e,a),(a&4194240)===a)break;for(t=e.eventTimes,c=-1;0<a;){var g=31-Et(a);f=1<<g,g=t[g],g>c&&(c=g),a&=~f}if(a=c,a=De()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*mm(a/1960))-a,10<a){e.timeoutHandle=na(Dn.bind(null,e,at,Jt),a);break}Dn(e,at,Jt);break;case 5:Dn(e,at,Jt);break;default:throw Error(s(329))}}}return lt(e,De()),e.callbackNode===r?Dd.bind(null,e):null}function Ja(e,t){var r=bs;return e.current.memoizedState.isDehydrated&&(Ln(e,t).flags|=256),e=Li(e,t),e!==2&&(t=at,at=r,t!==null&&Xa(t)),e}function Xa(e){at===null?at=e:at.push.apply(at,e)}function gm(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var a=0;a<r.length;a++){var c=r[a],f=c.getSnapshot;c=c.value;try{if(!jt(f(),c))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function vn(e,t){for(t&=~qa,t&=~Pi,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Et(t),a=1<<r;e[r]=-1,t&=~a}}function $d(e){if((ve&6)!==0)throw Error(s(327));mr();var t=Vs(e,0);if((t&1)===0)return lt(e,De()),null;var r=Li(e,t);if(e.tag!==0&&r===2){var a=Po(e);a!==0&&(t=a,r=Ja(e,a))}if(r===1)throw r=Ss,Ln(e,0),vn(e,t),lt(e,De()),r;if(r===6)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Dn(e,at,Jt),lt(e,De()),null}function Ya(e,t){var r=ve;ve|=1;try{return e(t)}finally{ve=r,ve===0&&(pr=De()+500,li&&cn())}}function In(e){mn!==null&&mn.tag===0&&(ve&6)===0&&mr();var t=ve;ve|=1;var r=St.transition,a=xe;try{if(St.transition=null,xe=1,e)return e()}finally{xe=a,St.transition=r,ve=t,(ve&6)===0&&cn()}}function Za(){gt=hr.current,je(hr)}function Ln(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,qp(r)),Me!==null)for(r=Me.return;r!==null;){var a=r;switch(la(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&oi();break;case 3:cr(),je(st),je(Je),Sa();break;case 5:xa(a);break;case 4:cr();break;case 13:je(Ae);break;case 19:je(Ae);break;case 10:pa(a.type._context);break;case 22:case 23:Za()}r=r.return}if(He=e,Me=e=yn(e.current,null),Qe=gt=t,ze=0,Ss=null,qa=Pi=On=0,at=bs=null,Tn!==null){for(t=0;t<Tn.length;t++)if(r=Tn[t],a=r.interleaved,a!==null){r.interleaved=null;var c=a.next,f=r.pending;if(f!==null){var g=f.next;f.next=c,a.next=g}r.pending=a}Tn=null}return e}function Ud(e,t){do{var r=Me;try{if(ha(),wi.current=Si,_i){for(var a=Oe.memoizedState;a!==null;){var c=a.queue;c!==null&&(c.pending=null),a=a.next}_i=!1}if(An=0,We=Fe=Oe=null,vs=!1,ys=0,Ha.current=null,r===null||r.return===null){ze=1,Ss=t,Me=null;break}e:{var f=e,g=r.return,w=r,k=t;if(t=Qe,w.flags|=32768,k!==null&&typeof k=="object"&&typeof k.then=="function"){var R=k,M=w,B=M.tag;if((M.mode&1)===0&&(B===0||B===11||B===15)){var U=M.alternate;U?(M.updateQueue=U.updateQueue,M.memoizedState=U.memoizedState,M.lanes=U.lanes):(M.updateQueue=null,M.memoizedState=null)}var J=ud(g);if(J!==null){J.flags&=-257,cd(J,g,w,f,t),J.mode&1&&ld(f,R,t),t=J,k=R;var Y=t.updateQueue;if(Y===null){var Z=new Set;Z.add(k),t.updateQueue=Z}else Y.add(k);break e}else{if((t&1)===0){ld(f,R,t),el();break e}k=Error(s(426))}}else if(Ne&&w.mode&1){var $e=ud(g);if($e!==null){($e.flags&65536)===0&&($e.flags|=256),cd($e,g,w,f,t),da(dr(k,w));break e}}f=k=dr(k,w),ze!==4&&(ze=2),bs===null?bs=[f]:bs.push(f),f=g;do{switch(f.tag){case 3:f.flags|=65536,t&=-t,f.lanes|=t;var P=od(f,k,t);Pc(f,P);break e;case 1:w=k;var b=f.type,T=f.stateNode;if((f.flags&128)===0&&(typeof b.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(pn===null||!pn.has(T)))){f.flags|=65536,t&=-t,f.lanes|=t;var V=ad(f,w,t);Pc(f,V);break e}}f=f.return}while(f!==null)}zd(r)}catch(ee){t=ee,Me===r&&r!==null&&(Me=r=r.return);continue}break}while(!0)}function Md(){var e=Ni.current;return Ni.current=Si,e===null?Si:e}function el(){(ze===0||ze===3||ze===2)&&(ze=4),He===null||(On&268435455)===0&&(Pi&268435455)===0||vn(He,Qe)}function Li(e,t){var r=ve;ve|=2;var a=Md();(He!==e||Qe!==t)&&(Jt=null,Ln(e,t));do try{vm();break}catch(c){Ud(e,c)}while(!0);if(ha(),ve=r,Ni.current=a,Me!==null)throw Error(s(261));return He=null,Qe=0,ze}function vm(){for(;Me!==null;)Fd(Me)}function ym(){for(;Me!==null&&!Vh();)Fd(Me)}function Fd(e){var t=Wd(e.alternate,e,gt);e.memoizedProps=e.pendingProps,t===null?zd(e):Me=t,Ha.current=null}function zd(e){var t=e;do{var r=t.alternate;if(e=t.return,(t.flags&32768)===0){if(r=cm(r,t,gt),r!==null){Me=r;return}}else{if(r=dm(r,t),r!==null){r.flags&=32767,Me=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ze=6,Me=null;return}}if(t=t.sibling,t!==null){Me=t;return}Me=t=e}while(t!==null);ze===0&&(ze=5)}function Dn(e,t,r){var a=xe,c=St.transition;try{St.transition=null,xe=1,wm(e,t,r,a)}finally{St.transition=c,xe=a}return null}function wm(e,t,r,a){do mr();while(mn!==null);if((ve&6)!==0)throw Error(s(327));r=e.finishedWork;var c=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var f=r.lanes|r.childLanes;if(Zh(e,f),e===He&&(Me=He=null,Qe=0),(r.subtreeFlags&2064)===0&&(r.flags&2064)===0||Ri||(Ri=!0,Hd(Ms,function(){return mr(),null})),f=(r.flags&15990)!==0,(r.subtreeFlags&15990)!==0||f){f=St.transition,St.transition=null;var g=xe;xe=1;var w=ve;ve|=4,Ha.current=null,hm(e,r),Rd(r,e),Mp(ea),qs=!!Zo,ea=Zo=null,e.current=r,pm(r),Wh(),ve=w,xe=g,St.transition=f}else e.current=r;if(Ri&&(Ri=!1,mn=e,Ai=c),f=e.pendingLanes,f===0&&(pn=null),Kh(r.stateNode),lt(e,De()),t!==null)for(a=e.onRecoverableError,r=0;r<t.length;r++)c=t[r],a(c.value,{componentStack:c.stack,digest:c.digest});if(Ti)throw Ti=!1,e=Ga,Ga=null,e;return(Ai&1)!==0&&e.tag!==0&&mr(),f=e.pendingLanes,(f&1)!==0?e===Qa?Es++:(Es=0,Qa=e):Es=0,cn(),null}function mr(){if(mn!==null){var e=Nu(Ai),t=St.transition,r=xe;try{if(St.transition=null,xe=16>e?16:e,mn===null)var a=!1;else{if(e=mn,mn=null,Ai=0,(ve&6)!==0)throw Error(s(331));var c=ve;for(ve|=4,X=e.current;X!==null;){var f=X,g=f.child;if((X.flags&16)!==0){var w=f.deletions;if(w!==null){for(var k=0;k<w.length;k++){var R=w[k];for(X=R;X!==null;){var M=X;switch(M.tag){case 0:case 11:case 15:ks(8,M,f)}var B=M.child;if(B!==null)B.return=M,X=B;else for(;X!==null;){M=X;var U=M.sibling,J=M.return;if(jd(M),M===R){X=null;break}if(U!==null){U.return=J,X=U;break}X=J}}}var Y=f.alternate;if(Y!==null){var Z=Y.child;if(Z!==null){Y.child=null;do{var $e=Z.sibling;Z.sibling=null,Z=$e}while(Z!==null)}}X=f}}if((f.subtreeFlags&2064)!==0&&g!==null)g.return=f,X=g;else e:for(;X!==null;){if(f=X,(f.flags&2048)!==0)switch(f.tag){case 0:case 11:case 15:ks(9,f,f.return)}var P=f.sibling;if(P!==null){P.return=f.return,X=P;break e}X=f.return}}var b=e.current;for(X=b;X!==null;){g=X;var T=g.child;if((g.subtreeFlags&2064)!==0&&T!==null)T.return=g,X=T;else e:for(g=b;X!==null;){if(w=X,(w.flags&2048)!==0)try{switch(w.tag){case 0:case 11:case 15:Ci(9,w)}}catch(ee){Ie(w,w.return,ee)}if(w===g){X=null;break e}var V=w.sibling;if(V!==null){V.return=w.return,X=V;break e}X=w.return}}if(ve=c,cn(),It&&typeof It.onPostCommitFiberRoot=="function")try{It.onPostCommitFiberRoot(Fs,e)}catch{}a=!0}return a}finally{xe=r,St.transition=t}}return!1}function Bd(e,t,r){t=dr(r,t),t=od(e,t,1),e=fn(e,t,1),t=nt(),e!==null&&(Qr(e,1,t),lt(e,t))}function Ie(e,t,r){if(e.tag===3)Bd(e,e,r);else for(;t!==null;){if(t.tag===3){Bd(t,e,r);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(pn===null||!pn.has(a))){e=dr(r,e),e=ad(t,e,1),t=fn(t,e,1),e=nt(),t!==null&&(Qr(t,1,e),lt(t,e));break}}t=t.return}}function _m(e,t,r){var a=e.pingCache;a!==null&&a.delete(t),t=nt(),e.pingedLanes|=e.suspendedLanes&r,He===e&&(Qe&r)===r&&(ze===4||ze===3&&(Qe&130023424)===Qe&&500>De()-Ka?Ln(e,0):qa|=r),lt(e,t)}function Vd(e,t){t===0&&((e.mode&1)===0?t=1:(t=Bs,Bs<<=1,(Bs&130023424)===0&&(Bs=4194304)));var r=nt();e=Kt(e,t),e!==null&&(Qr(e,t,r),lt(e,r))}function xm(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Vd(e,r)}function km(e,t){var r=0;switch(e.tag){case 13:var a=e.stateNode,c=e.memoizedState;c!==null&&(r=c.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(s(314))}a!==null&&a.delete(t),Vd(e,r)}var Wd;Wd=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||st.current)ot=!0;else{if((e.lanes&r)===0&&(t.flags&128)===0)return ot=!1,um(e,t,r);ot=(e.flags&131072)!==0}else ot=!1,Ne&&(t.flags&1048576)!==0&&kc(t,ci,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;Ei(e,t),e=t.pendingProps;var c=rr(t,Je.current);lr(t,r),c=ja(null,t,a,e,c,r);var f=Ca();return t.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,it(a)?(f=!0,ai(t)):f=!1,t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,va(t),c.updater=gi,t.stateNode=c,c._reactInternals=t,wa(t,a,e,r),t=La(null,t,a,!0,f,r)):(t.tag=0,Ne&&f&&aa(t),tt(null,t,c,r),t=t.child),t;case 16:a=t.elementType;e:{switch(Ei(e,t),e=t.pendingProps,c=a._init,a=c(a._payload),t.type=a,c=t.tag=bm(a),e=Nt(a,e),c){case 0:t=Ia(null,t,a,e,r);break e;case 1:t=gd(null,t,a,e,r);break e;case 11:t=dd(null,t,a,e,r);break e;case 14:t=fd(null,t,a,Nt(a.type,e),r);break e}throw Error(s(306,a,""))}return t;case 0:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:Nt(a,c),Ia(e,t,a,c,r);case 1:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:Nt(a,c),gd(e,t,a,c,r);case 3:e:{if(vd(t),e===null)throw Error(s(387));a=t.pendingProps,f=t.memoizedState,c=f.element,Nc(e,t),mi(t,a,null,r);var g=t.memoizedState;if(a=g.element,f.isDehydrated)if(f={element:a,isDehydrated:!1,cache:g.cache,pendingSuspenseBoundaries:g.pendingSuspenseBoundaries,transitions:g.transitions},t.updateQueue.baseState=f,t.memoizedState=f,t.flags&256){c=dr(Error(s(423)),t),t=yd(e,t,a,r,c);break e}else if(a!==c){c=dr(Error(s(424)),t),t=yd(e,t,a,r,c);break e}else for(mt=an(t.stateNode.containerInfo.firstChild),pt=t,Ne=!0,Ct=null,r=$c(t,null,a,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(or(),a===c){t=Qt(e,t,r);break e}tt(e,t,a,r)}t=t.child}return t;case 5:return Uc(t),e===null&&ca(t),a=t.type,c=t.pendingProps,f=e!==null?e.memoizedProps:null,g=c.children,ta(a,c)?g=null:f!==null&&ta(a,f)&&(t.flags|=32),md(e,t),tt(e,t,g,r),t.child;case 6:return e===null&&ca(t),null;case 13:return wd(e,t,r);case 4:return _a(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=ur(t,null,a,r):tt(e,t,a,r),t.child;case 11:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:Nt(a,c),dd(e,t,a,c,r);case 7:return tt(e,t,t.pendingProps,r),t.child;case 8:return tt(e,t,t.pendingProps.children,r),t.child;case 12:return tt(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(a=t.type._context,c=t.pendingProps,f=t.memoizedProps,g=c.value,Se(fi,a._currentValue),a._currentValue=g,f!==null)if(jt(f.value,g)){if(f.children===c.children&&!st.current){t=Qt(e,t,r);break e}}else for(f=t.child,f!==null&&(f.return=t);f!==null;){var w=f.dependencies;if(w!==null){g=f.child;for(var k=w.firstContext;k!==null;){if(k.context===a){if(f.tag===1){k=Gt(-1,r&-r),k.tag=2;var R=f.updateQueue;if(R!==null){R=R.shared;var M=R.pending;M===null?k.next=k:(k.next=M.next,M.next=k),R.pending=k}}f.lanes|=r,k=f.alternate,k!==null&&(k.lanes|=r),ma(f.return,r,t),w.lanes|=r;break}k=k.next}}else if(f.tag===10)g=f.type===t.type?null:f.child;else if(f.tag===18){if(g=f.return,g===null)throw Error(s(341));g.lanes|=r,w=g.alternate,w!==null&&(w.lanes|=r),ma(g,r,t),g=f.sibling}else g=f.child;if(g!==null)g.return=f;else for(g=f;g!==null;){if(g===t){g=null;break}if(f=g.sibling,f!==null){f.return=g.return,g=f;break}g=g.return}f=g}tt(e,t,c.children,r),t=t.child}return t;case 9:return c=t.type,a=t.pendingProps.children,lr(t,r),c=xt(c),a=a(c),t.flags|=1,tt(e,t,a,r),t.child;case 14:return a=t.type,c=Nt(a,t.pendingProps),c=Nt(a.type,c),fd(e,t,a,c,r);case 15:return hd(e,t,t.type,t.pendingProps,r);case 17:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:Nt(a,c),Ei(e,t),t.tag=1,it(a)?(e=!0,ai(t)):e=!1,lr(t,r),Oc(t,a,c),wa(t,a,c,r),La(null,t,a,!0,e,r);case 19:return xd(e,t,r);case 22:return pd(e,t,r)}throw Error(s(156,t.tag))};function Hd(e,t){return Su(e,t)}function Sm(e,t,r,a){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bt(e,t,r,a){return new Sm(e,t,r,a)}function tl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function bm(e){if(typeof e=="function")return tl(e)?1:0;if(e!=null){if(e=e.$$typeof,e===H)return 11;if(e===ke)return 14}return 2}function yn(e,t){var r=e.alternate;return r===null?(r=bt(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Di(e,t,r,a,c,f){var g=2;if(a=e,typeof e=="function")tl(e)&&(g=1);else if(typeof e=="string")g=5;else e:switch(e){case z:return $n(r.children,c,f,t);case te:g=8,c|=8;break;case oe:return e=bt(12,r,t,c|2),e.elementType=oe,e.lanes=f,e;case re:return e=bt(13,r,t,c),e.elementType=re,e.lanes=f,e;case _e:return e=bt(19,r,t,c),e.elementType=_e,e.lanes=f,e;case me:return $i(r,c,f,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ye:g=10;break e;case Pe:g=9;break e;case H:g=11;break e;case ke:g=14;break e;case Te:g=16,a=null;break e}throw Error(s(130,e==null?e:typeof e,""))}return t=bt(g,r,t,c),t.elementType=e,t.type=a,t.lanes=f,t}function $n(e,t,r,a){return e=bt(7,e,a,t),e.lanes=r,e}function $i(e,t,r,a){return e=bt(22,e,a,t),e.elementType=me,e.lanes=r,e.stateNode={isHidden:!1},e}function nl(e,t,r){return e=bt(6,e,null,t),e.lanes=r,e}function rl(e,t,r){return t=bt(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Em(e,t,r,a,c){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=To(0),this.expirationTimes=To(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=To(0),this.identifierPrefix=a,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function sl(e,t,r,a,c,f,g,w,k){return e=new Em(e,t,r,w,k),t===1?(t=1,f===!0&&(t|=8)):t=0,f=bt(3,null,null,t),e.current=f,f.stateNode=e,f.memoizedState={element:a,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},va(f),e}function jm(e,t,r){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:I,key:a==null?null:""+a,children:e,containerInfo:t,implementation:r}}function qd(e){if(!e)return un;e=e._reactInternals;e:{if(En(e)!==e||e.tag!==1)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(it(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(s(171))}if(e.tag===1){var r=e.type;if(it(r))return wc(e,r,t)}return t}function Kd(e,t,r,a,c,f,g,w,k){return e=sl(r,a,!0,e,c,f,g,w,k),e.context=qd(null),r=e.current,a=nt(),c=gn(r),f=Gt(a,c),f.callback=t??null,fn(r,f,c),e.current.lanes=c,Qr(e,c,a),lt(e,a),e}function Ui(e,t,r,a){var c=t.current,f=nt(),g=gn(c);return r=qd(r),t.context===null?t.context=r:t.pendingContext=r,t=Gt(f,g),t.payload={element:e},a=a===void 0?null:a,a!==null&&(t.callback=a),e=fn(c,t,g),e!==null&&(Rt(e,c,g,f),pi(e,c,g)),g}function Mi(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Gd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function il(e,t){Gd(e,t),(e=e.alternate)&&Gd(e,t)}function Cm(){return null}var Qd=typeof reportError=="function"?reportError:function(e){console.error(e)};function ol(e){this._internalRoot=e}Fi.prototype.render=ol.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(s(409));Ui(e,t,null,null)},Fi.prototype.unmount=ol.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;In(function(){Ui(null,e,null,null)}),t[Vt]=null}};function Fi(e){this._internalRoot=e}Fi.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ru();e={blockedOn:null,target:e,priority:t};for(var r=0;r<rn.length&&t!==0&&t<rn[r].priority;r++);rn.splice(r,0,e),r===0&&Iu(e)}};function al(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function zi(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Jd(){}function Nm(e,t,r,a,c){if(c){if(typeof a=="function"){var f=a;a=function(){var R=Mi(g);f.call(R)}}var g=Kd(t,a,e,0,null,!1,!1,"",Jd);return e._reactRootContainer=g,e[Vt]=g.current,us(e.nodeType===8?e.parentNode:e),In(),g}for(;c=e.lastChild;)e.removeChild(c);if(typeof a=="function"){var w=a;a=function(){var R=Mi(k);w.call(R)}}var k=sl(e,0,!1,null,null,!1,!1,"",Jd);return e._reactRootContainer=k,e[Vt]=k.current,us(e.nodeType===8?e.parentNode:e),In(function(){Ui(t,k,r,a)}),k}function Bi(e,t,r,a,c){var f=r._reactRootContainer;if(f){var g=f;if(typeof c=="function"){var w=c;c=function(){var k=Mi(g);w.call(k)}}Ui(t,g,e,c)}else g=Nm(r,t,e,c,a);return Mi(g)}Pu=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Gr(t.pendingLanes);r!==0&&(Ro(t,r|1),lt(t,De()),(ve&6)===0&&(pr=De()+500,cn()))}break;case 13:In(function(){var a=Kt(e,1);if(a!==null){var c=nt();Rt(a,e,1,c)}}),il(e,1)}},Ao=function(e){if(e.tag===13){var t=Kt(e,134217728);if(t!==null){var r=nt();Rt(t,e,134217728,r)}il(e,134217728)}},Tu=function(e){if(e.tag===13){var t=gn(e),r=Kt(e,t);if(r!==null){var a=nt();Rt(r,e,t,a)}il(e,t)}},Ru=function(){return xe},Au=function(e,t){var r=xe;try{return xe=e,t()}finally{xe=r}},bo=function(e,t,r){switch(t){case"input":if(go(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var a=r[t];if(a!==e&&a.form===e.form){var c=ii(a);if(!c)throw Error(s(90));po(a),go(a,c)}}}break;case"textarea":au(e,r);break;case"select":t=r.value,t!=null&&Hn(e,!!r.multiple,t,!1)}},gu=Ya,vu=In;var Pm={usingClientEntryPoint:!1,Events:[fs,tr,ii,pu,mu,Ya]},js={findFiberByHostInstance:jn,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Tm={bundleType:js.bundleType,version:js.version,rendererPackageName:js.rendererPackageName,rendererConfig:js.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:q.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=xu(e),e===null?null:e.stateNode},findFiberByHostInstance:js.findFiberByHostInstance||Cm,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vi.isDisabled&&Vi.supportsFiber)try{Fs=Vi.inject(Tm),It=Vi}catch{}}return ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Pm,ut.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!al(t))throw Error(s(200));return jm(e,t,null,r)},ut.createRoot=function(e,t){if(!al(e))throw Error(s(299));var r=!1,a="",c=Qd;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(c=t.onRecoverableError)),t=sl(e,1,!1,null,null,r,!1,a,c),e[Vt]=t.current,us(e.nodeType===8?e.parentNode:e),new ol(t)},ut.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=xu(t),e=e===null?null:e.stateNode,e},ut.flushSync=function(e){return In(e)},ut.hydrate=function(e,t,r){if(!zi(t))throw Error(s(200));return Bi(null,e,t,!0,r)},ut.hydrateRoot=function(e,t,r){if(!al(e))throw Error(s(405));var a=r!=null&&r.hydratedSources||null,c=!1,f="",g=Qd;if(r!=null&&(r.unstable_strictMode===!0&&(c=!0),r.identifierPrefix!==void 0&&(f=r.identifierPrefix),r.onRecoverableError!==void 0&&(g=r.onRecoverableError)),t=Kd(t,null,e,1,r??null,c,!1,f,g),e[Vt]=t.current,us(e),a)for(e=0;e<a.length;e++)r=a[e],c=r._getVersion,c=c(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,c]:t.mutableSourceEagerHydrationData.push(r,c);return new Fi(t)},ut.render=function(e,t,r){if(!zi(t))throw Error(s(200));return Bi(null,e,t,!1,r)},ut.unmountComponentAtNode=function(e){if(!zi(e))throw Error(s(40));return e._reactRootContainer?(In(function(){Bi(null,null,e,!1,function(){e._reactRootContainer=null,e[Vt]=null})}),!0):!1},ut.unstable_batchedUpdates=Ya,ut.unstable_renderSubtreeIntoContainer=function(e,t,r,a){if(!zi(r))throw Error(s(200));if(e==null||e._reactInternals===void 0)throw Error(s(38));return Bi(e,t,r,!1,a)},ut.version="18.2.0-next-9e3b772b8-20220608",ut}var of;function zm(){if(of)return cl.exports;of=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(n){console.error(n)}}return i(),cl.exports=Fm(),cl.exports}var af;function Bm(){if(af)return Wi;af=1;var i=zm();return Wi.createRoot=i.createRoot,Wi.hydrateRoot=i.hydrateRoot,Wi}var Vm=Bm();const Wm=Bl(Vm);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hm=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Gf=(...i)=>i.filter((n,s,o)=>!!n&&n.trim()!==""&&o.indexOf(n)===s).join(" ").trim();/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var qm={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Km=j.forwardRef(({color:i="currentColor",size:n=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:l="",children:u,iconNode:d,...p},m)=>j.createElement("svg",{ref:m,...qm,width:n,height:n,stroke:i,strokeWidth:o?Number(s)*24/Number(n):s,className:Gf("lucide",l),...p},[...d.map(([y,v])=>j.createElement(y,v)),...Array.isArray(u)?u:[u]]));/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=(i,n)=>{const s=j.forwardRef(({className:o,...l},u)=>j.createElement(Km,{ref:u,iconNode:n,className:Gf(`lucide-${Hm(i)}`,o),...l}));return s.displayName=`${i}`,s};/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qf=Le("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gm=Le("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qm=Le("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jm=Le("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xm=Le("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ym=Le("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zm=Le("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bl=Le("Film",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eg=Le("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ir=Le("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tg=Le("Images",[["path",{d:"M18 22H4a2 2 0 0 1-2-2V6",key:"pblm9e"}],["path",{d:"m22 13-1.296-1.296a2.41 2.41 0 0 0-3.408 0L11 18",key:"nf6bnh"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}],["rect",{width:"16",height:"16",x:"6",y:"2",rx:"2",key:"12espp"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ng=Le("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rg=Le("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lf=Le("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sg=Le("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ig=Le("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const og=Le("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ag=Le("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lg=Le("SquarePlus",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bn=Le("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ug=Le("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cg=Le("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),dg=i=>{let n;return i?n=i:typeof fetch>"u"?n=(...s)=>Fr(async()=>{const{default:o}=await Promise.resolve().then(()=>zr);return{default:o}},void 0).then(({default:o})=>o(...s)):n=fetch,(...s)=>n(...s)};class Wl extends Error{constructor(n,s="FunctionsError",o){super(n),this.name=s,this.context=o}}class fg extends Wl{constructor(n){super("Failed to send a request to the Edge Function","FunctionsFetchError",n)}}class uf extends Wl{constructor(n){super("Relay Error invoking the Edge Function","FunctionsRelayError",n)}}class cf extends Wl{constructor(n){super("Edge Function returned a non-2xx status code","FunctionsHttpError",n)}}var El;(function(i){i.Any="any",i.ApNortheast1="ap-northeast-1",i.ApNortheast2="ap-northeast-2",i.ApSouth1="ap-south-1",i.ApSoutheast1="ap-southeast-1",i.ApSoutheast2="ap-southeast-2",i.CaCentral1="ca-central-1",i.EuCentral1="eu-central-1",i.EuWest1="eu-west-1",i.EuWest2="eu-west-2",i.EuWest3="eu-west-3",i.SaEast1="sa-east-1",i.UsEast1="us-east-1",i.UsWest1="us-west-1",i.UsWest2="us-west-2"})(El||(El={}));var hg=function(i,n,s,o){function l(u){return u instanceof s?u:new s(function(d){d(u)})}return new(s||(s=Promise))(function(u,d){function p(v){try{y(o.next(v))}catch(x){d(x)}}function m(v){try{y(o.throw(v))}catch(x){d(x)}}function y(v){v.done?u(v.value):l(v.value).then(p,m)}y((o=o.apply(i,n||[])).next())})};class pg{constructor(n,{headers:s={},customFetch:o,region:l=El.Any}={}){this.url=n,this.headers=s,this.region=l,this.fetch=dg(o)}setAuth(n){this.headers.Authorization=`Bearer ${n}`}invoke(n,s={}){var o;return hg(this,void 0,void 0,function*(){try{const{headers:l,method:u,body:d}=s;let p={},{region:m}=s;m||(m=this.region);const y=new URL(`${this.url}/${n}`);m&&m!=="any"&&(p["x-region"]=m,y.searchParams.set("forceFunctionRegion",m));let v;d&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)&&(typeof Blob<"u"&&d instanceof Blob||d instanceof ArrayBuffer?(p["Content-Type"]="application/octet-stream",v=d):typeof d=="string"?(p["Content-Type"]="text/plain",v=d):typeof FormData<"u"&&d instanceof FormData?v=d:(p["Content-Type"]="application/json",v=JSON.stringify(d)));const x=yield this.fetch(y.toString(),{method:u||"POST",headers:Object.assign(Object.assign(Object.assign({},p),this.headers),l),body:v}).catch(C=>{throw new fg(C)}),_=x.headers.get("x-relay-error");if(_&&_==="true")throw new uf(x);if(!x.ok)throw new cf(x);let E=((o=x.headers.get("Content-Type"))!==null&&o!==void 0?o:"text/plain").split(";")[0].trim(),A;return E==="application/json"?A=yield x.json():E==="application/octet-stream"?A=yield x.blob():E==="text/event-stream"?A=x:E==="multipart/form-data"?A=yield x.formData():A=yield x.text(),{data:A,error:null,response:x}}catch(l){return{data:null,error:l,response:l instanceof cf||l instanceof uf?l.context:void 0}}})}}var Ke={},gr={},vr={},yr={},wr={},_r={},mg=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ur=mg();const gg=Ur.fetch,Jf=Ur.fetch.bind(Ur),Xf=Ur.Headers,vg=Ur.Request,yg=Ur.Response,zr=Object.freeze(Object.defineProperty({__proto__:null,Headers:Xf,Request:vg,Response:yg,default:Jf,fetch:gg},Symbol.toStringTag,{value:"Module"})),wg=Im(zr);var Hi={},df;function Yf(){if(df)return Hi;df=1,Object.defineProperty(Hi,"__esModule",{value:!0});class i extends Error{constructor(s){super(s.message),this.name="PostgrestError",this.details=s.details,this.hint=s.hint,this.code=s.code}}return Hi.default=i,Hi}var ff;function Zf(){if(ff)return _r;ff=1;var i=_r&&_r.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(_r,"__esModule",{value:!0});const n=i(wg),s=i(Yf());class o{constructor(u){var d,p;this.shouldThrowOnError=!1,this.method=u.method,this.url=u.url,this.headers=new Headers(u.headers),this.schema=u.schema,this.body=u.body,this.shouldThrowOnError=(d=u.shouldThrowOnError)!==null&&d!==void 0?d:!1,this.signal=u.signal,this.isMaybeSingle=(p=u.isMaybeSingle)!==null&&p!==void 0?p:!1,u.fetch?this.fetch=u.fetch:typeof fetch>"u"?this.fetch=n.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(u,d){return this.headers=new Headers(this.headers),this.headers.set(u,d),this}then(u,d){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const p=this.fetch;let m=p(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async y=>{var v,x,_,E;let A=null,C=null,N=null,D=y.status,F=y.statusText;if(y.ok){if(this.method!=="HEAD"){const I=await y.text();I===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((v=this.headers.get("Accept"))===null||v===void 0)&&v.includes("application/vnd.pgrst.plan+text"))?C=I:C=JSON.parse(I))}const q=(x=this.headers.get("Prefer"))===null||x===void 0?void 0:x.match(/count=(exact|planned|estimated)/),W=(_=y.headers.get("content-range"))===null||_===void 0?void 0:_.split("/");q&&W&&W.length>1&&(N=parseInt(W[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(C)&&(C.length>1?(A={code:"PGRST116",details:`Results contain ${C.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},C=null,N=null,D=406,F="Not Acceptable"):C.length===1?C=C[0]:C=null)}else{const q=await y.text();try{A=JSON.parse(q),Array.isArray(A)&&y.status===404&&(C=[],A=null,D=200,F="OK")}catch{y.status===404&&q===""?(D=204,F="No Content"):A={message:q}}if(A&&this.isMaybeSingle&&(!((E=A?.details)===null||E===void 0)&&E.includes("0 rows"))&&(A=null,D=200,F="OK"),A&&this.shouldThrowOnError)throw new s.default(A)}return{error:A,data:C,count:N,status:D,statusText:F}});return this.shouldThrowOnError||(m=m.catch(y=>{var v,x,_;return{error:{message:`${(v=y?.name)!==null&&v!==void 0?v:"FetchError"}: ${y?.message}`,details:`${(x=y?.stack)!==null&&x!==void 0?x:""}`,hint:"",code:`${(_=y?.code)!==null&&_!==void 0?_:""}`},data:null,count:null,status:0,statusText:""}})),m.then(u,d)}returns(){return this}overrideTypes(){return this}}return _r.default=o,_r}var hf;function eh(){if(hf)return wr;hf=1;var i=wr&&wr.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(wr,"__esModule",{value:!0});const n=i(Zf());class s extends n.default{select(l){let u=!1;const d=(l??"*").split("").map(p=>/\s/.test(p)&&!u?"":(p==='"'&&(u=!u),p)).join("");return this.url.searchParams.set("select",d),this.headers.append("Prefer","return=representation"),this}order(l,{ascending:u=!0,nullsFirst:d,foreignTable:p,referencedTable:m=p}={}){const y=m?`${m}.order`:"order",v=this.url.searchParams.get(y);return this.url.searchParams.set(y,`${v?`${v},`:""}${l}.${u?"asc":"desc"}${d===void 0?"":d?".nullsfirst":".nullslast"}`),this}limit(l,{foreignTable:u,referencedTable:d=u}={}){const p=typeof d>"u"?"limit":`${d}.limit`;return this.url.searchParams.set(p,`${l}`),this}range(l,u,{foreignTable:d,referencedTable:p=d}={}){const m=typeof p>"u"?"offset":`${p}.offset`,y=typeof p>"u"?"limit":`${p}.limit`;return this.url.searchParams.set(m,`${l}`),this.url.searchParams.set(y,`${u-l+1}`),this}abortSignal(l){return this.signal=l,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:l=!1,verbose:u=!1,settings:d=!1,buffers:p=!1,wal:m=!1,format:y="text"}={}){var v;const x=[l?"analyze":null,u?"verbose":null,d?"settings":null,p?"buffers":null,m?"wal":null].filter(Boolean).join("|"),_=(v=this.headers.get("Accept"))!==null&&v!==void 0?v:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${y}; for="${_}"; options=${x};`),y==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(l){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${l}`),this}}return wr.default=s,wr}var pf;function Hl(){if(pf)return yr;pf=1;var i=yr&&yr.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(yr,"__esModule",{value:!0});const n=i(eh());class s extends n.default{eq(l,u){return this.url.searchParams.append(l,`eq.${u}`),this}neq(l,u){return this.url.searchParams.append(l,`neq.${u}`),this}gt(l,u){return this.url.searchParams.append(l,`gt.${u}`),this}gte(l,u){return this.url.searchParams.append(l,`gte.${u}`),this}lt(l,u){return this.url.searchParams.append(l,`lt.${u}`),this}lte(l,u){return this.url.searchParams.append(l,`lte.${u}`),this}like(l,u){return this.url.searchParams.append(l,`like.${u}`),this}likeAllOf(l,u){return this.url.searchParams.append(l,`like(all).{${u.join(",")}}`),this}likeAnyOf(l,u){return this.url.searchParams.append(l,`like(any).{${u.join(",")}}`),this}ilike(l,u){return this.url.searchParams.append(l,`ilike.${u}`),this}ilikeAllOf(l,u){return this.url.searchParams.append(l,`ilike(all).{${u.join(",")}}`),this}ilikeAnyOf(l,u){return this.url.searchParams.append(l,`ilike(any).{${u.join(",")}}`),this}is(l,u){return this.url.searchParams.append(l,`is.${u}`),this}in(l,u){const d=Array.from(new Set(u)).map(p=>typeof p=="string"&&new RegExp("[,()]").test(p)?`"${p}"`:`${p}`).join(",");return this.url.searchParams.append(l,`in.(${d})`),this}contains(l,u){return typeof u=="string"?this.url.searchParams.append(l,`cs.${u}`):Array.isArray(u)?this.url.searchParams.append(l,`cs.{${u.join(",")}}`):this.url.searchParams.append(l,`cs.${JSON.stringify(u)}`),this}containedBy(l,u){return typeof u=="string"?this.url.searchParams.append(l,`cd.${u}`):Array.isArray(u)?this.url.searchParams.append(l,`cd.{${u.join(",")}}`):this.url.searchParams.append(l,`cd.${JSON.stringify(u)}`),this}rangeGt(l,u){return this.url.searchParams.append(l,`sr.${u}`),this}rangeGte(l,u){return this.url.searchParams.append(l,`nxl.${u}`),this}rangeLt(l,u){return this.url.searchParams.append(l,`sl.${u}`),this}rangeLte(l,u){return this.url.searchParams.append(l,`nxr.${u}`),this}rangeAdjacent(l,u){return this.url.searchParams.append(l,`adj.${u}`),this}overlaps(l,u){return typeof u=="string"?this.url.searchParams.append(l,`ov.${u}`):this.url.searchParams.append(l,`ov.{${u.join(",")}}`),this}textSearch(l,u,{config:d,type:p}={}){let m="";p==="plain"?m="pl":p==="phrase"?m="ph":p==="websearch"&&(m="w");const y=d===void 0?"":`(${d})`;return this.url.searchParams.append(l,`${m}fts${y}.${u}`),this}match(l){return Object.entries(l).forEach(([u,d])=>{this.url.searchParams.append(u,`eq.${d}`)}),this}not(l,u,d){return this.url.searchParams.append(l,`not.${u}.${d}`),this}or(l,{foreignTable:u,referencedTable:d=u}={}){const p=d?`${d}.or`:"or";return this.url.searchParams.append(p,`(${l})`),this}filter(l,u,d){return this.url.searchParams.append(l,`${u}.${d}`),this}}return yr.default=s,yr}var mf;function th(){if(mf)return vr;mf=1;var i=vr&&vr.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(vr,"__esModule",{value:!0});const n=i(Hl());class s{constructor(l,{headers:u={},schema:d,fetch:p}){this.url=l,this.headers=new Headers(u),this.schema=d,this.fetch=p}select(l,{head:u=!1,count:d}={}){const p=u?"HEAD":"GET";let m=!1;const y=(l??"*").split("").map(v=>/\s/.test(v)&&!m?"":(v==='"'&&(m=!m),v)).join("");return this.url.searchParams.set("select",y),d&&this.headers.append("Prefer",`count=${d}`),new n.default({method:p,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(l,{count:u,defaultToNull:d=!0}={}){var p;const m="POST";if(u&&this.headers.append("Prefer",`count=${u}`),d||this.headers.append("Prefer","missing=default"),Array.isArray(l)){const y=l.reduce((v,x)=>v.concat(Object.keys(x)),[]);if(y.length>0){const v=[...new Set(y)].map(x=>`"${x}"`);this.url.searchParams.set("columns",v.join(","))}}return new n.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}upsert(l,{onConflict:u,ignoreDuplicates:d=!1,count:p,defaultToNull:m=!0}={}){var y;const v="POST";if(this.headers.append("Prefer",`resolution=${d?"ignore":"merge"}-duplicates`),u!==void 0&&this.url.searchParams.set("on_conflict",u),p&&this.headers.append("Prefer",`count=${p}`),m||this.headers.append("Prefer","missing=default"),Array.isArray(l)){const x=l.reduce((_,E)=>_.concat(Object.keys(E)),[]);if(x.length>0){const _=[...new Set(x)].map(E=>`"${E}"`);this.url.searchParams.set("columns",_.join(","))}}return new n.default({method:v,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:(y=this.fetch)!==null&&y!==void 0?y:fetch})}update(l,{count:u}={}){var d;const p="PATCH";return u&&this.headers.append("Prefer",`count=${u}`),new n.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}delete({count:l}={}){var u;const d="DELETE";return l&&this.headers.append("Prefer",`count=${l}`),new n.default({method:d,url:this.url,headers:this.headers,schema:this.schema,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}}return vr.default=s,vr}var gf;function _g(){if(gf)return gr;gf=1;var i=gr&&gr.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(gr,"__esModule",{value:!0});const n=i(th()),s=i(Hl());class o{constructor(u,{headers:d={},schema:p,fetch:m}={}){this.url=u,this.headers=new Headers(d),this.schemaName=p,this.fetch=m}from(u){const d=new URL(`${this.url}/${u}`);return new n.default(d,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(u){return new o(this.url,{headers:this.headers,schema:u,fetch:this.fetch})}rpc(u,d={},{head:p=!1,get:m=!1,count:y}={}){var v;let x;const _=new URL(`${this.url}/rpc/${u}`);let E;p||m?(x=p?"HEAD":"GET",Object.entries(d).filter(([C,N])=>N!==void 0).map(([C,N])=>[C,Array.isArray(N)?`{${N.join(",")}}`:`${N}`]).forEach(([C,N])=>{_.searchParams.append(C,N)})):(x="POST",E=d);const A=new Headers(this.headers);return y&&A.set("Prefer",`count=${y}`),new s.default({method:x,url:_,headers:A,schema:this.schemaName,body:E,fetch:(v=this.fetch)!==null&&v!==void 0?v:fetch})}}return gr.default=o,gr}var vf;function xg(){if(vf)return Ke;vf=1;var i=Ke&&Ke.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(Ke,"__esModule",{value:!0}),Ke.PostgrestError=Ke.PostgrestBuilder=Ke.PostgrestTransformBuilder=Ke.PostgrestFilterBuilder=Ke.PostgrestQueryBuilder=Ke.PostgrestClient=void 0;const n=i(_g());Ke.PostgrestClient=n.default;const s=i(th());Ke.PostgrestQueryBuilder=s.default;const o=i(Hl());Ke.PostgrestFilterBuilder=o.default;const l=i(eh());Ke.PostgrestTransformBuilder=l.default;const u=i(Zf());Ke.PostgrestBuilder=u.default;const d=i(Yf());return Ke.PostgrestError=d.default,Ke.default={PostgrestClient:n.default,PostgrestQueryBuilder:s.default,PostgrestFilterBuilder:o.default,PostgrestTransformBuilder:l.default,PostgrestBuilder:u.default,PostgrestError:d.default},Ke}var kg=xg();const Sg=Bl(kg),{PostgrestClient:bg,PostgrestQueryBuilder:aw,PostgrestFilterBuilder:lw,PostgrestTransformBuilder:uw,PostgrestBuilder:cw,PostgrestError:dw}=Sg;class Eg{static detectEnvironment(){var n;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((n=navigator.userAgent)===null||n===void 0)&&n.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const s=parseInt(process.versions.node.split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const n=this.detectEnvironment();if(n.constructor)return n.constructor;let s=n.error||"WebSocket not supported in this environment.";throw n.workaround&&(s+=`

Suggested solution: ${n.workaround}`),new Error(s)}static createWebSocket(n,s){const o=this.getWebSocketConstructor();return new o(n,s)}static isWebSocketSupported(){try{const n=this.detectEnvironment();return n.type==="native"||n.type==="ws"}catch{return!1}}}const jg="2.15.1",Cg=`realtime-js/${jg}`,Ng="1.0.0",jl=1e4,Pg=1e3,Tg=100;var Ps;(function(i){i[i.connecting=0]="connecting",i[i.open=1]="open",i[i.closing=2]="closing",i[i.closed=3]="closed"})(Ps||(Ps={}));var Be;(function(i){i.closed="closed",i.errored="errored",i.joined="joined",i.joining="joining",i.leaving="leaving"})(Be||(Be={}));var Ot;(function(i){i.close="phx_close",i.error="phx_error",i.join="phx_join",i.reply="phx_reply",i.leave="phx_leave",i.access_token="access_token"})(Ot||(Ot={}));var Cl;(function(i){i.websocket="websocket"})(Cl||(Cl={}));var zn;(function(i){i.Connecting="connecting",i.Open="open",i.Closing="closing",i.Closed="closed"})(zn||(zn={}));class Rg{constructor(){this.HEADER_LENGTH=1}decode(n,s){return n.constructor===ArrayBuffer?s(this._binaryDecode(n)):s(typeof n=="string"?JSON.parse(n):{})}_binaryDecode(n){const s=new DataView(n),o=new TextDecoder;return this._decodeBroadcast(n,s,o)}_decodeBroadcast(n,s,o){const l=s.getUint8(1),u=s.getUint8(2);let d=this.HEADER_LENGTH+2;const p=o.decode(n.slice(d,d+l));d=d+l;const m=o.decode(n.slice(d,d+u));d=d+u;const y=JSON.parse(o.decode(n.slice(d,n.byteLength)));return{ref:null,topic:p,event:m,payload:y}}}class nh{constructor(n,s){this.callback=n,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=n,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var be;(function(i){i.abstime="abstime",i.bool="bool",i.date="date",i.daterange="daterange",i.float4="float4",i.float8="float8",i.int2="int2",i.int4="int4",i.int4range="int4range",i.int8="int8",i.int8range="int8range",i.json="json",i.jsonb="jsonb",i.money="money",i.numeric="numeric",i.oid="oid",i.reltime="reltime",i.text="text",i.time="time",i.timestamp="timestamp",i.timestamptz="timestamptz",i.timetz="timetz",i.tsrange="tsrange",i.tstzrange="tstzrange"})(be||(be={}));const yf=(i,n,s={})=>{var o;const l=(o=s.skipTypes)!==null&&o!==void 0?o:[];return Object.keys(n).reduce((u,d)=>(u[d]=Ag(d,i,n,l),u),{})},Ag=(i,n,s,o)=>{const l=n.find(p=>p.name===i),u=l?.type,d=s[i];return u&&!o.includes(u)?rh(u,d):Nl(d)},rh=(i,n)=>{if(i.charAt(0)==="_"){const s=i.slice(1,i.length);return Dg(n,s)}switch(i){case be.bool:return Og(n);case be.float4:case be.float8:case be.int2:case be.int4:case be.int8:case be.numeric:case be.oid:return Ig(n);case be.json:case be.jsonb:return Lg(n);case be.timestamp:return $g(n);case be.abstime:case be.date:case be.daterange:case be.int4range:case be.int8range:case be.money:case be.reltime:case be.text:case be.time:case be.timestamptz:case be.timetz:case be.tsrange:case be.tstzrange:return Nl(n);default:return Nl(n)}},Nl=i=>i,Og=i=>{switch(i){case"t":return!0;case"f":return!1;default:return i}},Ig=i=>{if(typeof i=="string"){const n=parseFloat(i);if(!Number.isNaN(n))return n}return i},Lg=i=>{if(typeof i=="string")try{return JSON.parse(i)}catch(n){return console.log(`JSON parse error: ${n}`),i}return i},Dg=(i,n)=>{if(typeof i!="string")return i;const s=i.length-1,o=i[s];if(i[0]==="{"&&o==="}"){let u;const d=i.slice(1,s);try{u=JSON.parse("["+d+"]")}catch{u=d?d.split(","):[]}return u.map(p=>rh(n,p))}return i},$g=i=>typeof i=="string"?i.replace(" ","T"):i,sh=i=>{let n=i;return n=n.replace(/^ws/i,"http"),n=n.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),n.replace(/\/+$/,"")+"/api/broadcast"};class hl{constructor(n,s,o={},l=jl){this.channel=n,this.event=s,this.payload=o,this.timeout=l,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(n){this.timeout=n,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(n){this.payload=Object.assign(Object.assign({},this.payload),n)}receive(n,s){var o;return this._hasReceived(n)&&s((o=this.receivedResp)===null||o===void 0?void 0:o.response),this.recHooks.push({status:n,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const n=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},n),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(n,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:n,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:n,response:s}){this.recHooks.filter(o=>o.status===n).forEach(o=>o.callback(s))}_hasReceived(n){return this.receivedResp&&this.receivedResp.status===n}}var wf;(function(i){i.SYNC="sync",i.JOIN="join",i.LEAVE="leave"})(wf||(wf={}));class Ts{constructor(n,s){this.channel=n,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const o=s?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(o.state,{},l=>{const{onJoin:u,onLeave:d,onSync:p}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ts.syncState(this.state,l,u,d),this.pendingDiffs.forEach(m=>{this.state=Ts.syncDiff(this.state,m,u,d)}),this.pendingDiffs=[],p()}),this.channel._on(o.diff,{},l=>{const{onJoin:u,onLeave:d,onSync:p}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(l):(this.state=Ts.syncDiff(this.state,l,u,d),p())}),this.onJoin((l,u,d)=>{this.channel._trigger("presence",{event:"join",key:l,currentPresences:u,newPresences:d})}),this.onLeave((l,u,d)=>{this.channel._trigger("presence",{event:"leave",key:l,currentPresences:u,leftPresences:d})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(n,s,o,l){const u=this.cloneDeep(n),d=this.transformState(s),p={},m={};return this.map(u,(y,v)=>{d[y]||(m[y]=v)}),this.map(d,(y,v)=>{const x=u[y];if(x){const _=v.map(N=>N.presence_ref),E=x.map(N=>N.presence_ref),A=v.filter(N=>E.indexOf(N.presence_ref)<0),C=x.filter(N=>_.indexOf(N.presence_ref)<0);A.length>0&&(p[y]=A),C.length>0&&(m[y]=C)}else p[y]=v}),this.syncDiff(u,{joins:p,leaves:m},o,l)}static syncDiff(n,s,o,l){const{joins:u,leaves:d}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return o||(o=()=>{}),l||(l=()=>{}),this.map(u,(p,m)=>{var y;const v=(y=n[p])!==null&&y!==void 0?y:[];if(n[p]=this.cloneDeep(m),v.length>0){const x=n[p].map(E=>E.presence_ref),_=v.filter(E=>x.indexOf(E.presence_ref)<0);n[p].unshift(..._)}o(p,v,m)}),this.map(d,(p,m)=>{let y=n[p];if(!y)return;const v=m.map(x=>x.presence_ref);y=y.filter(x=>v.indexOf(x.presence_ref)<0),n[p]=y,l(p,y,m),y.length===0&&delete n[p]}),n}static map(n,s){return Object.getOwnPropertyNames(n).map(o=>s(o,n[o]))}static transformState(n){return n=this.cloneDeep(n),Object.getOwnPropertyNames(n).reduce((s,o)=>{const l=n[o];return"metas"in l?s[o]=l.metas.map(u=>(u.presence_ref=u.phx_ref,delete u.phx_ref,delete u.phx_ref_prev,u)):s[o]=l,s},{})}static cloneDeep(n){return JSON.parse(JSON.stringify(n))}onJoin(n){this.caller.onJoin=n}onLeave(n){this.caller.onLeave=n}onSync(n){this.caller.onSync=n}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var _f;(function(i){i.ALL="*",i.INSERT="INSERT",i.UPDATE="UPDATE",i.DELETE="DELETE"})(_f||(_f={}));var Rs;(function(i){i.BROADCAST="broadcast",i.PRESENCE="presence",i.POSTGRES_CHANGES="postgres_changes",i.SYSTEM="system"})(Rs||(Rs={}));var Yt;(function(i){i.SUBSCRIBED="SUBSCRIBED",i.TIMED_OUT="TIMED_OUT",i.CLOSED="CLOSED",i.CHANNEL_ERROR="CHANNEL_ERROR"})(Yt||(Yt={}));class ql{constructor(n,s={config:{}},o){this.topic=n,this.params=s,this.socket=o,this.bindings={},this.state=Be.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=n.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new hl(this,Ot.join,this.params,this.timeout),this.rejoinTimer=new nh(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Be.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Be.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Be.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Be.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Be.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ot.reply,{},(l,u)=>{this._trigger(this._replyEventName(u),l)}),this.presence=new Ts(this),this.broadcastEndpointURL=sh(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(n,s=this.timeout){var o,l;if(this.socket.isConnected()||this.socket.connect(),this.state==Be.closed){const{config:{broadcast:u,presence:d,private:p}}=this.params,m=(l=(o=this.bindings.postgres_changes)===null||o===void 0?void 0:o.map(_=>_.filter))!==null&&l!==void 0?l:[],y=!!this.bindings[Rs.PRESENCE]&&this.bindings[Rs.PRESENCE].length>0,v={},x={broadcast:u,presence:Object.assign(Object.assign({},d),{enabled:y}),postgres_changes:m,private:p};this.socket.accessTokenValue&&(v.access_token=this.socket.accessTokenValue),this._onError(_=>n?.(Yt.CHANNEL_ERROR,_)),this._onClose(()=>n?.(Yt.CLOSED)),this.updateJoinPayload(Object.assign({config:x},v)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:_})=>{var E;if(this.socket.setAuth(),_===void 0){n?.(Yt.SUBSCRIBED);return}else{const A=this.bindings.postgres_changes,C=(E=A?.length)!==null&&E!==void 0?E:0,N=[];for(let D=0;D<C;D++){const F=A[D],{filter:{event:L,schema:q,table:W,filter:I}}=F,z=_&&_[D];if(z&&z.event===L&&z.schema===q&&z.table===W&&z.filter===I)N.push(Object.assign(Object.assign({},F),{id:z.id}));else{this.unsubscribe(),this.state=Be.errored,n?.(Yt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=N,n&&n(Yt.SUBSCRIBED);return}}).receive("error",_=>{this.state=Be.errored,n?.(Yt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(_).join(", ")||"error")))}).receive("timeout",()=>{n?.(Yt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(n,s={}){return await this.send({type:"presence",event:"track",payload:n},s.timeout||this.timeout)}async untrack(n={}){return await this.send({type:"presence",event:"untrack"},n)}on(n,s,o){return this.state===Be.joined&&n===Rs.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(n,s,o)}async send(n,s={}){var o,l;if(!this._canPush()&&n.type==="broadcast"){const{event:u,payload:d}=n,m={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:u,payload:d,private:this.private}]})};try{const y=await this._fetchWithTimeout(this.broadcastEndpointURL,m,(o=s.timeout)!==null&&o!==void 0?o:this.timeout);return await((l=y.body)===null||l===void 0?void 0:l.cancel()),y.ok?"ok":"error"}catch(y){return y.name==="AbortError"?"timed out":"error"}}else return new Promise(u=>{var d,p,m;const y=this._push(n.type,n,s.timeout||this.timeout);n.type==="broadcast"&&!(!((m=(p=(d=this.params)===null||d===void 0?void 0:d.config)===null||p===void 0?void 0:p.broadcast)===null||m===void 0)&&m.ack)&&u("ok"),y.receive("ok",()=>u("ok")),y.receive("error",()=>u("error")),y.receive("timeout",()=>u("timed out"))})}updateJoinPayload(n){this.joinPush.updatePayload(n)}unsubscribe(n=this.timeout){this.state=Be.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ot.close,"leave",this._joinRef())};this.joinPush.destroy();let o=null;return new Promise(l=>{o=new hl(this,Ot.leave,{},n),o.receive("ok",()=>{s(),l("ok")}).receive("timeout",()=>{s(),l("timed out")}).receive("error",()=>{l("error")}),o.send(),this._canPush()||o.trigger("ok",{})}).finally(()=>{o?.destroy()})}teardown(){this.pushBuffer.forEach(n=>n.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Be.closed,this.bindings={}}async _fetchWithTimeout(n,s,o){const l=new AbortController,u=setTimeout(()=>l.abort(),o),d=await this.socket.fetch(n,Object.assign(Object.assign({},s),{signal:l.signal}));return clearTimeout(u),d}_push(n,s,o=this.timeout){if(!this.joinedOnce)throw`tried to push '${n}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let l=new hl(this,n,s,o);return this._canPush()?l.send():this._addToPushBuffer(l),l}_addToPushBuffer(n){if(n.startTimeout(),this.pushBuffer.push(n),this.pushBuffer.length>Tg){const s=this.pushBuffer.shift();s&&(s.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${s.event}`,s.payload))}}_onMessage(n,s,o){return s}_isMember(n){return this.topic===n}_joinRef(){return this.joinPush.ref}_trigger(n,s,o){var l,u;const d=n.toLocaleLowerCase(),{close:p,error:m,leave:y,join:v}=Ot;if(o&&[p,m,y,v].indexOf(d)>=0&&o!==this._joinRef())return;let _=this._onMessage(d,s,o);if(s&&!_)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(d)?(l=this.bindings.postgres_changes)===null||l===void 0||l.filter(E=>{var A,C,N;return((A=E.filter)===null||A===void 0?void 0:A.event)==="*"||((N=(C=E.filter)===null||C===void 0?void 0:C.event)===null||N===void 0?void 0:N.toLocaleLowerCase())===d}).map(E=>E.callback(_,o)):(u=this.bindings[d])===null||u===void 0||u.filter(E=>{var A,C,N,D,F,L;if(["broadcast","presence","postgres_changes"].includes(d))if("id"in E){const q=E.id,W=(A=E.filter)===null||A===void 0?void 0:A.event;return q&&((C=s.ids)===null||C===void 0?void 0:C.includes(q))&&(W==="*"||W?.toLocaleLowerCase()===((N=s.data)===null||N===void 0?void 0:N.type.toLocaleLowerCase()))}else{const q=(F=(D=E?.filter)===null||D===void 0?void 0:D.event)===null||F===void 0?void 0:F.toLocaleLowerCase();return q==="*"||q===((L=s?.event)===null||L===void 0?void 0:L.toLocaleLowerCase())}else return E.type.toLocaleLowerCase()===d}).map(E=>{if(typeof _=="object"&&"ids"in _){const A=_.data,{schema:C,table:N,commit_timestamp:D,type:F,errors:L}=A;_=Object.assign(Object.assign({},{schema:C,table:N,commit_timestamp:D,eventType:F,new:{},old:{},errors:L}),this._getPayloadRecords(A))}E.callback(_,o)})}_isClosed(){return this.state===Be.closed}_isJoined(){return this.state===Be.joined}_isJoining(){return this.state===Be.joining}_isLeaving(){return this.state===Be.leaving}_replyEventName(n){return`chan_reply_${n}`}_on(n,s,o){const l=n.toLocaleLowerCase(),u={type:l,filter:s,callback:o};return this.bindings[l]?this.bindings[l].push(u):this.bindings[l]=[u],this}_off(n,s){const o=n.toLocaleLowerCase();return this.bindings[o]&&(this.bindings[o]=this.bindings[o].filter(l=>{var u;return!(((u=l.type)===null||u===void 0?void 0:u.toLocaleLowerCase())===o&&ql.isEqual(l.filter,s))})),this}static isEqual(n,s){if(Object.keys(n).length!==Object.keys(s).length)return!1;for(const o in n)if(n[o]!==s[o])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(n){this._on(Ot.close,{},n)}_onError(n){this._on(Ot.error,{},s=>n(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(n=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Be.joining,this.joinPush.resend(n))}_getPayloadRecords(n){const s={new:{},old:{}};return(n.type==="INSERT"||n.type==="UPDATE")&&(s.new=yf(n.columns,n.record)),(n.type==="UPDATE"||n.type==="DELETE")&&(s.old=yf(n.columns,n.old_record)),s}}const xf=()=>{},qi={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Ug=[1e3,2e3,5e3,1e4],Mg=1e4,Fg=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class zg{constructor(n,s){var o;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=jl,this.transport=null,this.heartbeatIntervalMs=qi.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=xf,this.ref=0,this.reconnectTimer=null,this.logger=xf,this.conn=null,this.sendBuffer=[],this.serializer=new Rg,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=l=>{let u;return l?u=l:typeof fetch>"u"?u=(...d)=>Fr(async()=>{const{default:p}=await Promise.resolve().then(()=>zr);return{default:p}},void 0).then(({default:p})=>p(...d)).catch(p=>{throw new Error(`Failed to load @supabase/node-fetch: ${p.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):u=fetch,(...d)=>u(...d)},!(!((o=s?.params)===null||o===void 0)&&o.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=s.params.apikey,this.endPoint=`${n}/${Cl.websocket}`,this.httpEndpoint=sh(n),this._initializeOptions(s),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(s?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Eg.createWebSocket(this.endpointURL())}catch(n){this._setConnectionState("disconnected");const s=n.message;throw s.includes("Node.js")?new Error(`${s}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${s}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Ng}))}disconnect(n,s){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const o=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(o),this._setConnectionState("disconnected")},n?this.conn.close(n,s??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(n){const s=await n.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const n=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),n}log(n,s,o){this.logger(n,s,o)}connectionState(){switch(this.conn&&this.conn.readyState){case Ps.connecting:return zn.Connecting;case Ps.open:return zn.Open;case Ps.closing:return zn.Closing;default:return zn.Closed}}isConnected(){return this.connectionState()===zn.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(n,s={config:{}}){const o=`realtime:${n}`,l=this.getChannels().find(u=>u.topic===o);if(l)return l;{const u=new ql(`realtime:${n}`,s,this);return this.channels.push(u),u}}push(n){const{topic:s,event:o,payload:l,ref:u}=n,d=()=>{this.encode(n,p=>{var m;(m=this.conn)===null||m===void 0||m.send(p)})};this.log("push",`${s} ${o} (${u})`,l),this.isConnected()?d():this.sendBuffer.push(d)}async setAuth(n=null){this._authPromise=this._performAuth(n);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var n;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(n=this.conn)===null||n===void 0||n.close(Pg,"heartbeat timeout"),setTimeout(()=>{var s;this.isConnected()||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout()},qi.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(n){this.heartbeatCallback=n}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(n=>n()),this.sendBuffer=[])}_makeRef(){let n=this.ref+1;return n===this.ref?this.ref=0:this.ref=n,this.ref.toString()}_leaveOpenTopic(n){let s=this.channels.find(o=>o.topic===n&&(o._isJoined()||o._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${n}"`),s.unsubscribe())}_remove(n){this.channels=this.channels.filter(s=>s.topic!==n.topic)}_onConnMessage(n){this.decode(n.data,s=>{s.topic==="phoenix"&&s.event==="phx_reply"&&this.heartbeatCallback(s.payload.status==="ok"?"ok":"error"),s.ref&&s.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:o,event:l,payload:u,ref:d}=s,p=d?`(${d})`:"",m=u.status||"";this.log("receive",`${m} ${o} ${l} ${p}`.trim(),u),this.channels.filter(y=>y._isMember(o)).forEach(y=>y._trigger(l,u,d)),this._triggerStateCallbacks("message",s)})}_clearTimer(n){var s;n==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):n==="reconnect"&&((s=this.reconnectTimer)===null||s===void 0||s.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=n=>this._onConnError(n),this.conn.onmessage=n=>this._onConnMessage(n),this.conn.onclose=n=>this._onConnClose(n))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(n=>n.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const n=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(n),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(n){var s;this._setConnectionState("disconnected"),this.log("transport","close",n),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout(),this._triggerStateCallbacks("close",n)}_onConnError(n){this._setConnectionState("disconnected"),this.log("transport",`${n}`),this._triggerChanError(),this._triggerStateCallbacks("error",n)}_triggerChanError(){this.channels.forEach(n=>n._trigger(Ot.error))}_appendParams(n,s){if(Object.keys(s).length===0)return n;const o=n.match(/\?/)?"&":"?",l=new URLSearchParams(s);return`${n}${o}${l}`}_workerObjectUrl(n){let s;if(n)s=n;else{const o=new Blob([Fg],{type:"application/javascript"});s=URL.createObjectURL(o)}return s}_setConnectionState(n,s=!1){this._connectionState=n,n==="connecting"?this._wasManualDisconnect=!1:n==="disconnecting"&&(this._wasManualDisconnect=s)}async _performAuth(n=null){let s;n?s=n:this.accessToken?s=await this.accessToken():s=this.accessTokenValue,this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(o=>{const l={access_token:s,version:Cg};s&&o.updateJoinPayload(l),o.joinedOnce&&o._isJoined()&&o._push(Ot.access_token,{access_token:s})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(n="general"){this.setAuth().catch(s=>{this.log("error",`error setting auth in ${n}`,s)})}_triggerStateCallbacks(n,s){try{this.stateChangeCallbacks[n].forEach(o=>{try{o(s)}catch(l){this.log("error",`error in ${n} callback`,l)}})}catch(o){this.log("error",`error triggering ${n} callbacks`,o)}}_setupReconnectionTimer(){this.reconnectTimer=new nh(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},qi.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(n){var s,o,l,u,d,p,m,y;if(this.transport=(s=n?.transport)!==null&&s!==void 0?s:null,this.timeout=(o=n?.timeout)!==null&&o!==void 0?o:jl,this.heartbeatIntervalMs=(l=n?.heartbeatIntervalMs)!==null&&l!==void 0?l:qi.HEARTBEAT_INTERVAL,this.worker=(u=n?.worker)!==null&&u!==void 0?u:!1,this.accessToken=(d=n?.accessToken)!==null&&d!==void 0?d:null,n?.params&&(this.params=n.params),n?.logger&&(this.logger=n.logger),(n?.logLevel||n?.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=n?.reconnectAfterMs)!==null&&p!==void 0?p:(v=>Ug[v-1]||Mg),this.encode=(m=n?.encode)!==null&&m!==void 0?m:((v,x)=>x(JSON.stringify(v))),this.decode=(y=n?.decode)!==null&&y!==void 0?y:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=n?.workerUrl}}}class Kl extends Error{constructor(n){super(n),this.__isStorageError=!0,this.name="StorageError"}}function Ve(i){return typeof i=="object"&&i!==null&&"__isStorageError"in i}class Bg extends Kl{constructor(n,s,o){super(n),this.name="StorageApiError",this.status=s,this.statusCode=o}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Pl extends Kl{constructor(n,s){super(n),this.name="StorageUnknownError",this.originalError=s}}var Vg=function(i,n,s,o){function l(u){return u instanceof s?u:new s(function(d){d(u)})}return new(s||(s=Promise))(function(u,d){function p(v){try{y(o.next(v))}catch(x){d(x)}}function m(v){try{y(o.throw(v))}catch(x){d(x)}}function y(v){v.done?u(v.value):l(v.value).then(p,m)}y((o=o.apply(i,n||[])).next())})};const ih=i=>{let n;return i?n=i:typeof fetch>"u"?n=(...s)=>Fr(async()=>{const{default:o}=await Promise.resolve().then(()=>zr);return{default:o}},void 0).then(({default:o})=>o(...s)):n=fetch,(...s)=>n(...s)},Wg=()=>Vg(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Fr(()=>Promise.resolve().then(()=>zr),void 0)).Response:Response}),Tl=i=>{if(Array.isArray(i))return i.map(s=>Tl(s));if(typeof i=="function"||i!==Object(i))return i;const n={};return Object.entries(i).forEach(([s,o])=>{const l=s.replace(/([-_][a-z])/gi,u=>u.toUpperCase().replace(/[-_]/g,""));n[l]=Tl(o)}),n},Hg=i=>{if(typeof i!="object"||i===null)return!1;const n=Object.getPrototypeOf(i);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)};var Vn=function(i,n,s,o){function l(u){return u instanceof s?u:new s(function(d){d(u)})}return new(s||(s=Promise))(function(u,d){function p(v){try{y(o.next(v))}catch(x){d(x)}}function m(v){try{y(o.throw(v))}catch(x){d(x)}}function y(v){v.done?u(v.value):l(v.value).then(p,m)}y((o=o.apply(i,n||[])).next())})};const pl=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),qg=(i,n,s)=>Vn(void 0,void 0,void 0,function*(){const o=yield Wg();i instanceof o&&!s?.noResolveJson?i.json().then(l=>{const u=i.status||500,d=l?.statusCode||u+"";n(new Bg(pl(l),u,d))}).catch(l=>{n(new Pl(pl(l),l))}):n(new Pl(pl(i),i))}),Kg=(i,n,s,o)=>{const l={method:i,headers:n?.headers||{}};return i==="GET"||!o?l:(Hg(o)?(l.headers=Object.assign({"Content-Type":"application/json"},n?.headers),l.body=JSON.stringify(o)):l.body=o,n?.duplex&&(l.duplex=n.duplex),Object.assign(Object.assign({},l),s))};function Ls(i,n,s,o,l,u){return Vn(this,void 0,void 0,function*(){return new Promise((d,p)=>{i(s,Kg(n,o,l,u)).then(m=>{if(!m.ok)throw m;return o?.noResolveJson?m:m.json()}).then(m=>d(m)).catch(m=>qg(m,p,o))})})}function to(i,n,s,o){return Vn(this,void 0,void 0,function*(){return Ls(i,"GET",n,s,o)})}function Mt(i,n,s,o,l){return Vn(this,void 0,void 0,function*(){return Ls(i,"POST",n,o,l,s)})}function Rl(i,n,s,o,l){return Vn(this,void 0,void 0,function*(){return Ls(i,"PUT",n,o,l,s)})}function Gg(i,n,s,o){return Vn(this,void 0,void 0,function*(){return Ls(i,"HEAD",n,Object.assign(Object.assign({},s),{noResolveJson:!0}),o)})}function oh(i,n,s,o,l){return Vn(this,void 0,void 0,function*(){return Ls(i,"DELETE",n,o,l,s)})}var rt=function(i,n,s,o){function l(u){return u instanceof s?u:new s(function(d){d(u)})}return new(s||(s=Promise))(function(u,d){function p(v){try{y(o.next(v))}catch(x){d(x)}}function m(v){try{y(o.throw(v))}catch(x){d(x)}}function y(v){v.done?u(v.value):l(v.value).then(p,m)}y((o=o.apply(i,n||[])).next())})};const Qg={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},kf={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Jg{constructor(n,s={},o,l){this.url=n,this.headers=s,this.bucketId=o,this.fetch=ih(l)}uploadOrUpdate(n,s,o,l){return rt(this,void 0,void 0,function*(){try{let u;const d=Object.assign(Object.assign({},kf),l);let p=Object.assign(Object.assign({},this.headers),n==="POST"&&{"x-upsert":String(d.upsert)});const m=d.metadata;typeof Blob<"u"&&o instanceof Blob?(u=new FormData,u.append("cacheControl",d.cacheControl),m&&u.append("metadata",this.encodeMetadata(m)),u.append("",o)):typeof FormData<"u"&&o instanceof FormData?(u=o,u.append("cacheControl",d.cacheControl),m&&u.append("metadata",this.encodeMetadata(m))):(u=o,p["cache-control"]=`max-age=${d.cacheControl}`,p["content-type"]=d.contentType,m&&(p["x-metadata"]=this.toBase64(this.encodeMetadata(m)))),l?.headers&&(p=Object.assign(Object.assign({},p),l.headers));const y=this._removeEmptyFolders(s),v=this._getFinalPath(y),x=yield(n=="PUT"?Rl:Mt)(this.fetch,`${this.url}/object/${v}`,u,Object.assign({headers:p},d?.duplex?{duplex:d.duplex}:{}));return{data:{path:y,id:x.Id,fullPath:x.Key},error:null}}catch(u){if(Ve(u))return{data:null,error:u};throw u}})}upload(n,s,o){return rt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",n,s,o)})}uploadToSignedUrl(n,s,o,l){return rt(this,void 0,void 0,function*(){const u=this._removeEmptyFolders(n),d=this._getFinalPath(u),p=new URL(this.url+`/object/upload/sign/${d}`);p.searchParams.set("token",s);try{let m;const y=Object.assign({upsert:kf.upsert},l),v=Object.assign(Object.assign({},this.headers),{"x-upsert":String(y.upsert)});typeof Blob<"u"&&o instanceof Blob?(m=new FormData,m.append("cacheControl",y.cacheControl),m.append("",o)):typeof FormData<"u"&&o instanceof FormData?(m=o,m.append("cacheControl",y.cacheControl)):(m=o,v["cache-control"]=`max-age=${y.cacheControl}`,v["content-type"]=y.contentType);const x=yield Rl(this.fetch,p.toString(),m,{headers:v});return{data:{path:u,fullPath:x.Key},error:null}}catch(m){if(Ve(m))return{data:null,error:m};throw m}})}createSignedUploadUrl(n,s){return rt(this,void 0,void 0,function*(){try{let o=this._getFinalPath(n);const l=Object.assign({},this.headers);s?.upsert&&(l["x-upsert"]="true");const u=yield Mt(this.fetch,`${this.url}/object/upload/sign/${o}`,{},{headers:l}),d=new URL(this.url+u.url),p=d.searchParams.get("token");if(!p)throw new Kl("No token returned by API");return{data:{signedUrl:d.toString(),path:n,token:p},error:null}}catch(o){if(Ve(o))return{data:null,error:o};throw o}})}update(n,s,o){return rt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",n,s,o)})}move(n,s,o){return rt(this,void 0,void 0,function*(){try{return{data:yield Mt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:n,destinationKey:s,destinationBucket:o?.destinationBucket},{headers:this.headers}),error:null}}catch(l){if(Ve(l))return{data:null,error:l};throw l}})}copy(n,s,o){return rt(this,void 0,void 0,function*(){try{return{data:{path:(yield Mt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:n,destinationKey:s,destinationBucket:o?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(l){if(Ve(l))return{data:null,error:l};throw l}})}createSignedUrl(n,s,o){return rt(this,void 0,void 0,function*(){try{let l=this._getFinalPath(n),u=yield Mt(this.fetch,`${this.url}/object/sign/${l}`,Object.assign({expiresIn:s},o?.transform?{transform:o.transform}:{}),{headers:this.headers});const d=o?.download?`&download=${o.download===!0?"":o.download}`:"";return u={signedUrl:encodeURI(`${this.url}${u.signedURL}${d}`)},{data:u,error:null}}catch(l){if(Ve(l))return{data:null,error:l};throw l}})}createSignedUrls(n,s,o){return rt(this,void 0,void 0,function*(){try{const l=yield Mt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:n},{headers:this.headers}),u=o?.download?`&download=${o.download===!0?"":o.download}`:"";return{data:l.map(d=>Object.assign(Object.assign({},d),{signedUrl:d.signedURL?encodeURI(`${this.url}${d.signedURL}${u}`):null})),error:null}}catch(l){if(Ve(l))return{data:null,error:l};throw l}})}download(n,s){return rt(this,void 0,void 0,function*(){const l=typeof s?.transform<"u"?"render/image/authenticated":"object",u=this.transformOptsToQueryString(s?.transform||{}),d=u?`?${u}`:"";try{const p=this._getFinalPath(n);return{data:yield(yield to(this.fetch,`${this.url}/${l}/${p}${d}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(p){if(Ve(p))return{data:null,error:p};throw p}})}info(n){return rt(this,void 0,void 0,function*(){const s=this._getFinalPath(n);try{const o=yield to(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:Tl(o),error:null}}catch(o){if(Ve(o))return{data:null,error:o};throw o}})}exists(n){return rt(this,void 0,void 0,function*(){const s=this._getFinalPath(n);try{return yield Gg(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(o){if(Ve(o)&&o instanceof Pl){const l=o.originalError;if([400,404].includes(l?.status))return{data:!1,error:o}}throw o}})}getPublicUrl(n,s){const o=this._getFinalPath(n),l=[],u=s?.download?`download=${s.download===!0?"":s.download}`:"";u!==""&&l.push(u);const p=typeof s?.transform<"u"?"render/image":"object",m=this.transformOptsToQueryString(s?.transform||{});m!==""&&l.push(m);let y=l.join("&");return y!==""&&(y=`?${y}`),{data:{publicUrl:encodeURI(`${this.url}/${p}/public/${o}${y}`)}}}remove(n){return rt(this,void 0,void 0,function*(){try{return{data:yield oh(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:n},{headers:this.headers}),error:null}}catch(s){if(Ve(s))return{data:null,error:s};throw s}})}list(n,s,o){return rt(this,void 0,void 0,function*(){try{const l=Object.assign(Object.assign(Object.assign({},Qg),s),{prefix:n||""});return{data:yield Mt(this.fetch,`${this.url}/object/list/${this.bucketId}`,l,{headers:this.headers},o),error:null}}catch(l){if(Ve(l))return{data:null,error:l};throw l}})}listV2(n,s){return rt(this,void 0,void 0,function*(){try{const o=Object.assign({},n);return{data:yield Mt(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,o,{headers:this.headers},s),error:null}}catch(o){if(Ve(o))return{data:null,error:o};throw o}})}encodeMetadata(n){return JSON.stringify(n)}toBase64(n){return typeof Buffer<"u"?Buffer.from(n).toString("base64"):btoa(n)}_getFinalPath(n){return`${this.bucketId}/${n.replace(/^\/+/,"")}`}_removeEmptyFolders(n){return n.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(n){const s=[];return n.width&&s.push(`width=${n.width}`),n.height&&s.push(`height=${n.height}`),n.resize&&s.push(`resize=${n.resize}`),n.format&&s.push(`format=${n.format}`),n.quality&&s.push(`quality=${n.quality}`),s.join("&")}}const Xg="2.11.0",Yg={"X-Client-Info":`storage-js/${Xg}`};var xr=function(i,n,s,o){function l(u){return u instanceof s?u:new s(function(d){d(u)})}return new(s||(s=Promise))(function(u,d){function p(v){try{y(o.next(v))}catch(x){d(x)}}function m(v){try{y(o.throw(v))}catch(x){d(x)}}function y(v){v.done?u(v.value):l(v.value).then(p,m)}y((o=o.apply(i,n||[])).next())})};class Zg{constructor(n,s={},o,l){const u=new URL(n);l?.useNewHostname&&/supabase\.(co|in|red)$/.test(u.hostname)&&!u.hostname.includes("storage.supabase.")&&(u.hostname=u.hostname.replace("supabase.","storage.supabase.")),this.url=u.href,this.headers=Object.assign(Object.assign({},Yg),s),this.fetch=ih(o)}listBuckets(){return xr(this,void 0,void 0,function*(){try{return{data:yield to(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(n){if(Ve(n))return{data:null,error:n};throw n}})}getBucket(n){return xr(this,void 0,void 0,function*(){try{return{data:yield to(this.fetch,`${this.url}/bucket/${n}`,{headers:this.headers}),error:null}}catch(s){if(Ve(s))return{data:null,error:s};throw s}})}createBucket(n,s={public:!1}){return xr(this,void 0,void 0,function*(){try{return{data:yield Mt(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(Ve(o))return{data:null,error:o};throw o}})}updateBucket(n,s){return xr(this,void 0,void 0,function*(){try{return{data:yield Rl(this.fetch,`${this.url}/bucket/${n}`,{id:n,name:n,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(Ve(o))return{data:null,error:o};throw o}})}emptyBucket(n){return xr(this,void 0,void 0,function*(){try{return{data:yield Mt(this.fetch,`${this.url}/bucket/${n}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(Ve(s))return{data:null,error:s};throw s}})}deleteBucket(n){return xr(this,void 0,void 0,function*(){try{return{data:yield oh(this.fetch,`${this.url}/bucket/${n}`,{},{headers:this.headers}),error:null}}catch(s){if(Ve(s))return{data:null,error:s};throw s}})}}class ev extends Zg{constructor(n,s={},o,l){super(n,s,o,l)}from(n){return new Jg(this.url,this.headers,n,this.fetch)}}const tv="2.56.0";let Ns="";typeof Deno<"u"?Ns="deno":typeof document<"u"?Ns="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ns="react-native":Ns="node";const nv={"X-Client-Info":`supabase-js-${Ns}/${tv}`},rv={headers:nv},sv={schema:"public"},iv={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},ov={};var av=function(i,n,s,o){function l(u){return u instanceof s?u:new s(function(d){d(u)})}return new(s||(s=Promise))(function(u,d){function p(v){try{y(o.next(v))}catch(x){d(x)}}function m(v){try{y(o.throw(v))}catch(x){d(x)}}function y(v){v.done?u(v.value):l(v.value).then(p,m)}y((o=o.apply(i,n||[])).next())})};const lv=i=>{let n;return i?n=i:typeof fetch>"u"?n=Jf:n=fetch,(...s)=>n(...s)},uv=()=>typeof Headers>"u"?Xf:Headers,cv=(i,n,s)=>{const o=lv(s),l=uv();return(u,d)=>av(void 0,void 0,void 0,function*(){var p;const m=(p=yield n())!==null&&p!==void 0?p:i;let y=new l(d?.headers);return y.has("apikey")||y.set("apikey",i),y.has("Authorization")||y.set("Authorization",`Bearer ${m}`),o(u,Object.assign(Object.assign({},d),{headers:y}))})};var dv=function(i,n,s,o){function l(u){return u instanceof s?u:new s(function(d){d(u)})}return new(s||(s=Promise))(function(u,d){function p(v){try{y(o.next(v))}catch(x){d(x)}}function m(v){try{y(o.throw(v))}catch(x){d(x)}}function y(v){v.done?u(v.value):l(v.value).then(p,m)}y((o=o.apply(i,n||[])).next())})};function fv(i){return i.endsWith("/")?i:i+"/"}function hv(i,n){var s,o;const{db:l,auth:u,realtime:d,global:p}=i,{db:m,auth:y,realtime:v,global:x}=n,_={db:Object.assign(Object.assign({},m),l),auth:Object.assign(Object.assign({},y),u),realtime:Object.assign(Object.assign({},v),d),storage:{},global:Object.assign(Object.assign(Object.assign({},x),p),{headers:Object.assign(Object.assign({},(s=x?.headers)!==null&&s!==void 0?s:{}),(o=p?.headers)!==null&&o!==void 0?o:{})}),accessToken:()=>dv(this,void 0,void 0,function*(){return""})};return i.accessToken?_.accessToken=i.accessToken:delete _.accessToken,_}const ah="2.71.1",Tr=30*1e3,Al=3,ml=Al*Tr,pv="http://localhost:9999",mv="supabase.auth.token",gv={"X-Client-Info":`gotrue-js/${ah}`},Ol="X-Supabase-Api-Version",lh={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},vv=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,yv=600*1e3;class Gl extends Error{constructor(n,s,o){super(n),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=o}}function de(i){return typeof i=="object"&&i!==null&&"__isAuthError"in i}class wv extends Gl{constructor(n,s,o){super(n,s,o),this.name="AuthApiError",this.status=s,this.code=o}}function _v(i){return de(i)&&i.name==="AuthApiError"}class uh extends Gl{constructor(n,s){super(n),this.name="AuthUnknownError",this.originalError=s}}class bn extends Gl{constructor(n,s,o,l){super(n,o,l),this.name=s,this.status=o}}class xn extends bn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function xv(i){return de(i)&&i.name==="AuthSessionMissingError"}class Ki extends bn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Gi extends bn{constructor(n){super(n,"AuthInvalidCredentialsError",400,void 0)}}class Qi extends bn{constructor(n,s=null){super(n,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function kv(i){return de(i)&&i.name==="AuthImplicitGrantRedirectError"}class Sf extends bn{constructor(n,s=null){super(n,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Il extends bn{constructor(n,s){super(n,"AuthRetryableFetchError",s,void 0)}}function gl(i){return de(i)&&i.name==="AuthRetryableFetchError"}class bf extends bn{constructor(n,s,o){super(n,"AuthWeakPasswordError",s,"weak_password"),this.reasons=o}}class Ll extends bn{constructor(n){super(n,"AuthInvalidJwtError",400,"invalid_jwt")}}const no="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Ef=` 	
\r=`.split(""),Sv=(()=>{const i=new Array(128);for(let n=0;n<i.length;n+=1)i[n]=-1;for(let n=0;n<Ef.length;n+=1)i[Ef[n].charCodeAt(0)]=-2;for(let n=0;n<no.length;n+=1)i[no[n].charCodeAt(0)]=n;return i})();function jf(i,n,s){if(i!==null)for(n.queue=n.queue<<8|i,n.queuedBits+=8;n.queuedBits>=6;){const o=n.queue>>n.queuedBits-6&63;s(no[o]),n.queuedBits-=6}else if(n.queuedBits>0)for(n.queue=n.queue<<6-n.queuedBits,n.queuedBits=6;n.queuedBits>=6;){const o=n.queue>>n.queuedBits-6&63;s(no[o]),n.queuedBits-=6}}function ch(i,n,s){const o=Sv[i];if(o>-1)for(n.queue=n.queue<<6|o,n.queuedBits+=6;n.queuedBits>=8;)s(n.queue>>n.queuedBits-8&255),n.queuedBits-=8;else{if(o===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(i)}"`)}}function Cf(i){const n=[],s=d=>{n.push(String.fromCodePoint(d))},o={utf8seq:0,codepoint:0},l={queue:0,queuedBits:0},u=d=>{jv(d,o,s)};for(let d=0;d<i.length;d+=1)ch(i.charCodeAt(d),l,u);return n.join("")}function bv(i,n){if(i<=127){n(i);return}else if(i<=2047){n(192|i>>6),n(128|i&63);return}else if(i<=65535){n(224|i>>12),n(128|i>>6&63),n(128|i&63);return}else if(i<=1114111){n(240|i>>18),n(128|i>>12&63),n(128|i>>6&63),n(128|i&63);return}throw new Error(`Unrecognized Unicode codepoint: ${i.toString(16)}`)}function Ev(i,n){for(let s=0;s<i.length;s+=1){let o=i.charCodeAt(s);if(o>55295&&o<=56319){const l=(o-55296)*1024&65535;o=(i.charCodeAt(s+1)-56320&65535|l)+65536,s+=1}bv(o,n)}}function jv(i,n,s){if(n.utf8seq===0){if(i<=127){s(i);return}for(let o=1;o<6;o+=1)if((i>>7-o&1)===0){n.utf8seq=o;break}if(n.utf8seq===2)n.codepoint=i&31;else if(n.utf8seq===3)n.codepoint=i&15;else if(n.utf8seq===4)n.codepoint=i&7;else throw new Error("Invalid UTF-8 sequence");n.utf8seq-=1}else if(n.utf8seq>0){if(i<=127)throw new Error("Invalid UTF-8 sequence");n.codepoint=n.codepoint<<6|i&63,n.utf8seq-=1,n.utf8seq===0&&s(n.codepoint)}}function Cv(i){const n=[],s={queue:0,queuedBits:0},o=l=>{n.push(l)};for(let l=0;l<i.length;l+=1)ch(i.charCodeAt(l),s,o);return new Uint8Array(n)}function Nv(i){const n=[];return Ev(i,s=>n.push(s)),new Uint8Array(n)}function Pv(i){const n=[],s={queue:0,queuedBits:0},o=l=>{n.push(l)};return i.forEach(l=>jf(l,s,o)),jf(null,s,o),n.join("")}function Tv(i){return Math.round(Date.now()/1e3)+i}function Rv(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(i){const n=Math.random()*16|0;return(i=="x"?n:n&3|8).toString(16)})}const At=()=>typeof window<"u"&&typeof document<"u",Un={tested:!1,writable:!1},dh=()=>{if(!At())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Un.tested)return Un.writable;const i=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(i,i),globalThis.localStorage.removeItem(i),Un.tested=!0,Un.writable=!0}catch{Un.tested=!0,Un.writable=!1}return Un.writable};function Av(i){const n={},s=new URL(i);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((l,u)=>{n[u]=l})}catch{}return s.searchParams.forEach((o,l)=>{n[l]=o}),n}const fh=i=>{let n;return i?n=i:typeof fetch>"u"?n=(...s)=>Fr(async()=>{const{default:o}=await Promise.resolve().then(()=>zr);return{default:o}},void 0).then(({default:o})=>o(...s)):n=fetch,(...s)=>n(...s)},Ov=i=>typeof i=="object"&&i!==null&&"status"in i&&"ok"in i&&"json"in i&&typeof i.json=="function",Rr=async(i,n,s)=>{await i.setItem(n,JSON.stringify(s))},Mn=async(i,n)=>{const s=await i.getItem(n);if(!s)return null;try{return JSON.parse(s)}catch{return s}},_n=async(i,n)=>{await i.removeItem(n)};class uo{constructor(){this.promise=new uo.promiseConstructor((n,s)=>{this.resolve=n,this.reject=s})}}uo.promiseConstructor=Promise;function vl(i){const n=i.split(".");if(n.length!==3)throw new Ll("Invalid JWT structure");for(let o=0;o<n.length;o++)if(!vv.test(n[o]))throw new Ll("JWT not in base64url format");return{header:JSON.parse(Cf(n[0])),payload:JSON.parse(Cf(n[1])),signature:Cv(n[2]),raw:{header:n[0],payload:n[1]}}}async function Iv(i){return await new Promise(n=>{setTimeout(()=>n(null),i)})}function Lv(i,n){return new Promise((o,l)=>{(async()=>{for(let u=0;u<1/0;u++)try{const d=await i(u);if(!n(u,null,d)){o(d);return}}catch(d){if(!n(u,d)){l(d);return}}})()})}function Dv(i){return("0"+i.toString(16)).substr(-2)}function $v(){const n=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",o=s.length;let l="";for(let u=0;u<56;u++)l+=s.charAt(Math.floor(Math.random()*o));return l}return crypto.getRandomValues(n),Array.from(n,Dv).join("")}async function Uv(i){const s=new TextEncoder().encode(i),o=await crypto.subtle.digest("SHA-256",s),l=new Uint8Array(o);return Array.from(l).map(u=>String.fromCharCode(u)).join("")}async function Mv(i){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),i;const s=await Uv(i);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function kr(i,n,s=!1){const o=$v();let l=o;s&&(l+="/PASSWORD_RECOVERY"),await Rr(i,`${n}-code-verifier`,l);const u=await Mv(o);return[u,o===u?"plain":"s256"]}const Fv=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function zv(i){const n=i.headers.get(Ol);if(!n||!n.match(Fv))return null;try{return new Date(`${n}T00:00:00.0Z`)}catch{return null}}function Bv(i){if(!i)throw new Error("Missing exp claim");const n=Math.floor(Date.now()/1e3);if(i<=n)throw new Error("JWT has expired")}function Vv(i){switch(i){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Wv=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Sr(i){if(!Wv.test(i))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function yl(){const i={};return new Proxy(i,{get:(n,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const o=s.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(n,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(n,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Nf(i){return JSON.parse(JSON.stringify(i))}var Hv=function(i,n){var s={};for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&n.indexOf(o)<0&&(s[o]=i[o]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(i);l<o.length;l++)n.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(i,o[l])&&(s[o[l]]=i[o[l]]);return s};const Fn=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),qv=[502,503,504];async function Pf(i){var n;if(!Ov(i))throw new Il(Fn(i),0);if(qv.includes(i.status))throw new Il(Fn(i),i.status);let s;try{s=await i.json()}catch(u){throw new uh(Fn(u),u)}let o;const l=zv(i);if(l&&l.getTime()>=lh["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?o=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(o=s.error_code),o){if(o==="weak_password")throw new bf(Fn(s),i.status,((n=s.weak_password)===null||n===void 0?void 0:n.reasons)||[]);if(o==="session_not_found")throw new xn}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((u,d)=>u&&typeof d=="string",!0))throw new bf(Fn(s),i.status,s.weak_password.reasons);throw new wv(Fn(s),i.status||500,o)}const Kv=(i,n,s,o)=>{const l={method:i,headers:n?.headers||{}};return i==="GET"?l:(l.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},n?.headers),l.body=JSON.stringify(o),Object.assign(Object.assign({},l),s))};async function he(i,n,s,o){var l;const u=Object.assign({},o?.headers);u[Ol]||(u[Ol]=lh["2024-01-01"].name),o?.jwt&&(u.Authorization=`Bearer ${o.jwt}`);const d=(l=o?.query)!==null&&l!==void 0?l:{};o?.redirectTo&&(d.redirect_to=o.redirectTo);const p=Object.keys(d).length?"?"+new URLSearchParams(d).toString():"",m=await Gv(i,n,s+p,{headers:u,noResolveJson:o?.noResolveJson},{},o?.body);return o?.xform?o?.xform(m):{data:Object.assign({},m),error:null}}async function Gv(i,n,s,o,l,u){const d=Kv(n,o,l,u);let p;try{p=await i(s,Object.assign({},d))}catch(m){throw console.error(m),new Il(Fn(m),0)}if(p.ok||await Pf(p),o?.noResolveJson)return p;try{return await p.json()}catch(m){await Pf(m)}}function Xt(i){var n;let s=null;Yv(i)&&(s=Object.assign({},i),i.expires_at||(s.expires_at=Tv(i.expires_in)));const o=(n=i.user)!==null&&n!==void 0?n:i;return{data:{session:s,user:o},error:null}}function Tf(i){const n=Xt(i);return!n.error&&i.weak_password&&typeof i.weak_password=="object"&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.message&&typeof i.weak_password.message=="string"&&i.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0)&&(n.data.weak_password=i.weak_password),n}function kn(i){var n;return{data:{user:(n=i.user)!==null&&n!==void 0?n:i},error:null}}function Qv(i){return{data:i,error:null}}function Jv(i){const{action_link:n,email_otp:s,hashed_token:o,redirect_to:l,verification_type:u}=i,d=Hv(i,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),p={action_link:n,email_otp:s,hashed_token:o,redirect_to:l,verification_type:u},m=Object.assign({},d);return{data:{properties:p,user:m},error:null}}function Xv(i){return i}function Yv(i){return i.access_token&&i.refresh_token&&i.expires_in}const wl=["global","local","others"];var Zv=function(i,n){var s={};for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&n.indexOf(o)<0&&(s[o]=i[o]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(i);l<o.length;l++)n.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(i,o[l])&&(s[o[l]]=i[o[l]]);return s};class ey{constructor({url:n="",headers:s={},fetch:o}){this.url=n,this.headers=s,this.fetch=fh(o),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(n,s=wl[0]){if(wl.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${wl.join(", ")}`);try{return await he(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:n,noResolveJson:!0}),{data:null,error:null}}catch(o){if(de(o))return{data:null,error:o};throw o}}async inviteUserByEmail(n,s={}){try{return await he(this.fetch,"POST",`${this.url}/invite`,{body:{email:n,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:kn})}catch(o){if(de(o))return{data:{user:null},error:o};throw o}}async generateLink(n){try{const{options:s}=n,o=Zv(n,["options"]),l=Object.assign(Object.assign({},o),s);return"newEmail"in o&&(l.new_email=o?.newEmail,delete l.newEmail),await he(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:l,headers:this.headers,xform:Jv,redirectTo:s?.redirectTo})}catch(s){if(de(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(n){try{return await he(this.fetch,"POST",`${this.url}/admin/users`,{body:n,headers:this.headers,xform:kn})}catch(s){if(de(s))return{data:{user:null},error:s};throw s}}async listUsers(n){var s,o,l,u,d,p,m;try{const y={nextPage:null,lastPage:0,total:0},v=await he(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(s=n?.page)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:"",per_page:(u=(l=n?.perPage)===null||l===void 0?void 0:l.toString())!==null&&u!==void 0?u:""},xform:Xv});if(v.error)throw v.error;const x=await v.json(),_=(d=v.headers.get("x-total-count"))!==null&&d!==void 0?d:0,E=(m=(p=v.headers.get("link"))===null||p===void 0?void 0:p.split(","))!==null&&m!==void 0?m:[];return E.length>0&&(E.forEach(A=>{const C=parseInt(A.split(";")[0].split("=")[1].substring(0,1)),N=JSON.parse(A.split(";")[1].split("=")[1]);y[`${N}Page`]=C}),y.total=parseInt(_)),{data:Object.assign(Object.assign({},x),y),error:null}}catch(y){if(de(y))return{data:{users:[]},error:y};throw y}}async getUserById(n){Sr(n);try{return await he(this.fetch,"GET",`${this.url}/admin/users/${n}`,{headers:this.headers,xform:kn})}catch(s){if(de(s))return{data:{user:null},error:s};throw s}}async updateUserById(n,s){Sr(n);try{return await he(this.fetch,"PUT",`${this.url}/admin/users/${n}`,{body:s,headers:this.headers,xform:kn})}catch(o){if(de(o))return{data:{user:null},error:o};throw o}}async deleteUser(n,s=!1){Sr(n);try{return await he(this.fetch,"DELETE",`${this.url}/admin/users/${n}`,{headers:this.headers,body:{should_soft_delete:s},xform:kn})}catch(o){if(de(o))return{data:{user:null},error:o};throw o}}async _listFactors(n){Sr(n.userId);try{const{data:s,error:o}=await he(this.fetch,"GET",`${this.url}/admin/users/${n.userId}/factors`,{headers:this.headers,xform:l=>({data:{factors:l},error:null})});return{data:s,error:o}}catch(s){if(de(s))return{data:null,error:s};throw s}}async _deleteFactor(n){Sr(n.userId),Sr(n.id);try{return{data:await he(this.fetch,"DELETE",`${this.url}/admin/users/${n.userId}/factors/${n.id}`,{headers:this.headers}),error:null}}catch(s){if(de(s))return{data:null,error:s};throw s}}}function Rf(i={}){return{getItem:n=>i[n]||null,setItem:(n,s)=>{i[n]=s},removeItem:n=>{delete i[n]}}}function ty(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const br={debug:!!(globalThis&&dh()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class hh extends Error{constructor(n){super(n),this.isAcquireTimeout=!0}}class ny extends hh{}async function ry(i,n,s){br.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",i,n);const o=new globalThis.AbortController;return n>0&&setTimeout(()=>{o.abort(),br.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",i)},n),await Promise.resolve().then(()=>globalThis.navigator.locks.request(i,n===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:o.signal},async l=>{if(l){br.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",i,l.name);try{return await s()}finally{br.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",i,l.name)}}else{if(n===0)throw br.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",i),new ny(`Acquiring an exclusive Navigator LockManager lock "${i}" immediately failed`);if(br.debug)try{const u=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(u,null,"  "))}catch(u){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",u)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}ty();const sy={url:pv,storageKey:mv,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:gv,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Af(i,n,s){return await s()}const Er={};class Is{constructor(n){var s,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Is.nextInstanceID,Is.nextInstanceID+=1,this.instanceID>0&&At()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const l=Object.assign(Object.assign({},sy),n);if(this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.persistSession=l.persistSession,this.storageKey=l.storageKey,this.autoRefreshToken=l.autoRefreshToken,this.admin=new ey({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=fh(l.fetch),this.lock=l.lock||Af,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,l.lock?this.lock=l.lock:At()&&(!((s=globalThis?.navigator)===null||s===void 0)&&s.locks)?this.lock=ry:this.lock=Af,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(l.storage?this.storage=l.storage:dh()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Rf(this.memoryStorage)),l.userStorage&&(this.userStorage=l.userStorage)):(this.memoryStorage={},this.storage=Rf(this.memoryStorage)),At()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(u){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",u)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",async u=>{this._debug("received broadcast notification from other tab or client",u),await this._notifyAllSubscribers(u.data.event,u.data.session,!1)})}this.initialize()}get jwks(){var n,s;return(s=(n=Er[this.storageKey])===null||n===void 0?void 0:n.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(n){Er[this.storageKey]=Object.assign(Object.assign({},Er[this.storageKey]),{jwks:n})}get jwks_cached_at(){var n,s;return(s=(n=Er[this.storageKey])===null||n===void 0?void 0:n.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(n){Er[this.storageKey]=Object.assign(Object.assign({},Er[this.storageKey]),{cachedAt:n})}_debug(...n){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${ah}) ${new Date().toISOString()}`,...n),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var n;try{const s=Av(window.location.href);let o="none";if(this._isImplicitGrantCallback(s)?o="implicit":await this._isPKCECallback(s)&&(o="pkce"),At()&&this.detectSessionInUrl&&o!=="none"){const{data:l,error:u}=await this._getSessionFromURL(s,o);if(u){if(this._debug("#_initialize()","error detecting session from URL",u),kv(u)){const m=(n=u.details)===null||n===void 0?void 0:n.code;if(m==="identity_already_exists"||m==="identity_not_found"||m==="single_identity_not_deletable")return{error:u}}return await this._removeSession(),{error:u}}const{session:d,redirectType:p}=l;return this._debug("#_initialize()","detected session in URL",d,"redirect type",p),await this._saveSession(d),setTimeout(async()=>{p==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",d):await this._notifyAllSubscribers("SIGNED_IN",d)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return de(s)?{error:s}:{error:new uh("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(n){var s,o,l;try{const u=await he(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(o=(s=n?.options)===null||s===void 0?void 0:s.data)!==null&&o!==void 0?o:{},gotrue_meta_security:{captcha_token:(l=n?.options)===null||l===void 0?void 0:l.captchaToken}},xform:Xt}),{data:d,error:p}=u;if(p||!d)return{data:{user:null,session:null},error:p};const m=d.session,y=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",m)),{data:{user:y,session:m},error:null}}catch(u){if(de(u))return{data:{user:null,session:null},error:u};throw u}}async signUp(n){var s,o,l;try{let u;if("email"in n){const{email:v,password:x,options:_}=n;let E=null,A=null;this.flowType==="pkce"&&([E,A]=await kr(this.storage,this.storageKey)),u=await he(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:_?.emailRedirectTo,body:{email:v,password:x,data:(s=_?.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:_?.captchaToken},code_challenge:E,code_challenge_method:A},xform:Xt})}else if("phone"in n){const{phone:v,password:x,options:_}=n;u=await he(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:v,password:x,data:(o=_?.data)!==null&&o!==void 0?o:{},channel:(l=_?.channel)!==null&&l!==void 0?l:"sms",gotrue_meta_security:{captcha_token:_?.captchaToken}},xform:Xt})}else throw new Gi("You must provide either an email or phone number and a password");const{data:d,error:p}=u;if(p||!d)return{data:{user:null,session:null},error:p};const m=d.session,y=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",m)),{data:{user:y,session:m},error:null}}catch(u){if(de(u))return{data:{user:null,session:null},error:u};throw u}}async signInWithPassword(n){try{let s;if("email"in n){const{email:u,password:d,options:p}=n;s=await he(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:u,password:d,gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:Tf})}else if("phone"in n){const{phone:u,password:d,options:p}=n;s=await he(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:u,password:d,gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:Tf})}else throw new Gi("You must provide either an email or phone number and a password");const{data:o,error:l}=s;return l?{data:{user:null,session:null},error:l}:!o||!o.session||!o.user?{data:{user:null,session:null},error:new Ki}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign({user:o.user,session:o.session},o.weak_password?{weakPassword:o.weak_password}:null),error:l})}catch(s){if(de(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(n){var s,o,l,u;return await this._handleProviderSignIn(n.provider,{redirectTo:(s=n.options)===null||s===void 0?void 0:s.redirectTo,scopes:(o=n.options)===null||o===void 0?void 0:o.scopes,queryParams:(l=n.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:(u=n.options)===null||u===void 0?void 0:u.skipBrowserRedirect})}async exchangeCodeForSession(n){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(n))}async signInWithWeb3(n){const{chain:s}=n;if(s==="solana")return await this.signInWithSolana(n);throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}async signInWithSolana(n){var s,o,l,u,d,p,m,y,v,x,_,E;let A,C;if("message"in n)A=n.message,C=n.signature;else{const{chain:N,wallet:D,statement:F,options:L}=n;let q;if(At())if(typeof D=="object")q=D;else{const I=window;if("solana"in I&&typeof I.solana=="object"&&("signIn"in I.solana&&typeof I.solana.signIn=="function"||"signMessage"in I.solana&&typeof I.solana.signMessage=="function"))q=I.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof D!="object"||!L?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");q=D}const W=new URL((s=L?.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in q&&q.signIn){const I=await q.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},L?.signInWithSolana),{version:"1",domain:W.host,uri:W.href}),F?{statement:F}:null));let z;if(Array.isArray(I)&&I[0]&&typeof I[0]=="object")z=I[0];else if(I&&typeof I=="object"&&"signedMessage"in I&&"signature"in I)z=I;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in z&&"signature"in z&&(typeof z.signedMessage=="string"||z.signedMessage instanceof Uint8Array)&&z.signature instanceof Uint8Array)A=typeof z.signedMessage=="string"?z.signedMessage:new TextDecoder().decode(z.signedMessage),C=z.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in q)||typeof q.signMessage!="function"||!("publicKey"in q)||typeof q!="object"||!q.publicKey||!("toBase58"in q.publicKey)||typeof q.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");A=[`${W.host} wants you to sign in with your Solana account:`,q.publicKey.toBase58(),...F?["",F,""]:[""],"Version: 1",`URI: ${W.href}`,`Issued At: ${(l=(o=L?.signInWithSolana)===null||o===void 0?void 0:o.issuedAt)!==null&&l!==void 0?l:new Date().toISOString()}`,...!((u=L?.signInWithSolana)===null||u===void 0)&&u.notBefore?[`Not Before: ${L.signInWithSolana.notBefore}`]:[],...!((d=L?.signInWithSolana)===null||d===void 0)&&d.expirationTime?[`Expiration Time: ${L.signInWithSolana.expirationTime}`]:[],...!((p=L?.signInWithSolana)===null||p===void 0)&&p.chainId?[`Chain ID: ${L.signInWithSolana.chainId}`]:[],...!((m=L?.signInWithSolana)===null||m===void 0)&&m.nonce?[`Nonce: ${L.signInWithSolana.nonce}`]:[],...!((y=L?.signInWithSolana)===null||y===void 0)&&y.requestId?[`Request ID: ${L.signInWithSolana.requestId}`]:[],...!((x=(v=L?.signInWithSolana)===null||v===void 0?void 0:v.resources)===null||x===void 0)&&x.length?["Resources",...L.signInWithSolana.resources.map(z=>`- ${z}`)]:[]].join(`
`);const I=await q.signMessage(new TextEncoder().encode(A),"utf8");if(!I||!(I instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");C=I}}try{const{data:N,error:D}=await he(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:A,signature:Pv(C)},!((_=n.options)===null||_===void 0)&&_.captchaToken?{gotrue_meta_security:{captcha_token:(E=n.options)===null||E===void 0?void 0:E.captchaToken}}:null),xform:Xt});if(D)throw D;return!N||!N.session||!N.user?{data:{user:null,session:null},error:new Ki}:(N.session&&(await this._saveSession(N.session),await this._notifyAllSubscribers("SIGNED_IN",N.session)),{data:Object.assign({},N),error:D})}catch(N){if(de(N))return{data:{user:null,session:null},error:N};throw N}}async _exchangeCodeForSession(n){const s=await Mn(this.storage,`${this.storageKey}-code-verifier`),[o,l]=(s??"").split("/");try{const{data:u,error:d}=await he(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:o},xform:Xt});if(await _n(this.storage,`${this.storageKey}-code-verifier`),d)throw d;return!u||!u.session||!u.user?{data:{user:null,session:null,redirectType:null},error:new Ki}:(u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),{data:Object.assign(Object.assign({},u),{redirectType:l??null}),error:d})}catch(u){if(de(u))return{data:{user:null,session:null,redirectType:null},error:u};throw u}}async signInWithIdToken(n){try{const{options:s,provider:o,token:l,access_token:u,nonce:d}=n,p=await he(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:o,id_token:l,access_token:u,nonce:d,gotrue_meta_security:{captcha_token:s?.captchaToken}},xform:Xt}),{data:m,error:y}=p;return y?{data:{user:null,session:null},error:y}:!m||!m.session||!m.user?{data:{user:null,session:null},error:new Ki}:(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),{data:m,error:y})}catch(s){if(de(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(n){var s,o,l,u,d;try{if("email"in n){const{email:p,options:m}=n;let y=null,v=null;this.flowType==="pkce"&&([y,v]=await kr(this.storage,this.storageKey));const{error:x}=await he(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:p,data:(s=m?.data)!==null&&s!==void 0?s:{},create_user:(o=m?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:m?.captchaToken},code_challenge:y,code_challenge_method:v},redirectTo:m?.emailRedirectTo});return{data:{user:null,session:null},error:x}}if("phone"in n){const{phone:p,options:m}=n,{data:y,error:v}=await he(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:p,data:(l=m?.data)!==null&&l!==void 0?l:{},create_user:(u=m?.shouldCreateUser)!==null&&u!==void 0?u:!0,gotrue_meta_security:{captcha_token:m?.captchaToken},channel:(d=m?.channel)!==null&&d!==void 0?d:"sms"}});return{data:{user:null,session:null,messageId:y?.message_id},error:v}}throw new Gi("You must provide either an email or phone number.")}catch(p){if(de(p))return{data:{user:null,session:null},error:p};throw p}}async verifyOtp(n){var s,o;try{let l,u;"options"in n&&(l=(s=n.options)===null||s===void 0?void 0:s.redirectTo,u=(o=n.options)===null||o===void 0?void 0:o.captchaToken);const{data:d,error:p}=await he(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:u}}),redirectTo:l,xform:Xt});if(p)throw p;if(!d)throw new Error("An error occurred on token verification.");const m=d.session,y=d.user;return m?.access_token&&(await this._saveSession(m),await this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",m)),{data:{user:y,session:m},error:null}}catch(l){if(de(l))return{data:{user:null,session:null},error:l};throw l}}async signInWithSSO(n){var s,o,l;try{let u=null,d=null;return this.flowType==="pkce"&&([u,d]=await kr(this.storage,this.storageKey)),await he(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(o=(s=n.options)===null||s===void 0?void 0:s.redirectTo)!==null&&o!==void 0?o:void 0}),!((l=n?.options)===null||l===void 0)&&l.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:u,code_challenge_method:d}),headers:this.headers,xform:Qv})}catch(u){if(de(u))return{data:null,error:u};throw u}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async n=>{const{data:{session:s},error:o}=n;if(o)throw o;if(!s)throw new xn;const{error:l}=await he(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:l}})}catch(n){if(de(n))return{data:{user:null,session:null},error:n};throw n}}async resend(n){try{const s=`${this.url}/resend`;if("email"in n){const{email:o,type:l,options:u}=n,{error:d}=await he(this.fetch,"POST",s,{headers:this.headers,body:{email:o,type:l,gotrue_meta_security:{captcha_token:u?.captchaToken}},redirectTo:u?.emailRedirectTo});return{data:{user:null,session:null},error:d}}else if("phone"in n){const{phone:o,type:l,options:u}=n,{data:d,error:p}=await he(this.fetch,"POST",s,{headers:this.headers,body:{phone:o,type:l,gotrue_meta_security:{captcha_token:u?.captchaToken}}});return{data:{user:null,session:null,messageId:d?.message_id},error:p}}throw new Gi("You must provide either an email or phone number and a type")}catch(s){if(de(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(n,s){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){const o=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),l=(async()=>(await o,await s()))();return this.pendingInLock.push((async()=>{try{await l}catch{}})()),l}return await this.lock(`lock:${this.storageKey}`,n,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const o=s();for(this.pendingInLock.push((async()=>{try{await o}catch{}})()),await o;this.pendingInLock.length;){const l=[...this.pendingInLock];await Promise.all(l),this.pendingInLock.splice(0,l.length)}return await o}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(n){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await n(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null;const s=await Mn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?n=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!n)return{data:{session:null},error:null};const o=n.expires_at?n.expires_at*1e3-Date.now()<ml:!1;if(this._debug("#__loadSession()",`session has${o?"":" not"} expired`,"expires_at",n.expires_at),!o){if(this.userStorage){const d=await Mn(this.userStorage,this.storageKey+"-user");d?.user?n.user=d.user:n.user=yl()}if(this.storage.isServer&&n.user){let d=this.suppressGetSessionWarning;n=new Proxy(n,{get:(m,y,v)=>(!d&&y==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),d=!0,this.suppressGetSessionWarning=!0),Reflect.get(m,y,v))})}return{data:{session:n},error:null}}const{session:l,error:u}=await this._callRefreshToken(n.refresh_token);return u?{data:{session:null},error:u}:{data:{session:l},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(n){return n?await this._getUser(n):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(n){try{return n?await he(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:kn}):await this._useSession(async s=>{var o,l,u;const{data:d,error:p}=s;if(p)throw p;return!(!((o=d.session)===null||o===void 0)&&o.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new xn}:await he(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(u=(l=d.session)===null||l===void 0?void 0:l.access_token)!==null&&u!==void 0?u:void 0,xform:kn})})}catch(s){if(de(s))return xv(s)&&(await this._removeSession(),await _n(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:s};throw s}}async updateUser(n,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(n,s))}async _updateUser(n,s={}){try{return await this._useSession(async o=>{const{data:l,error:u}=o;if(u)throw u;if(!l.session)throw new xn;const d=l.session;let p=null,m=null;this.flowType==="pkce"&&n.email!=null&&([p,m]=await kr(this.storage,this.storageKey));const{data:y,error:v}=await he(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s?.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:p,code_challenge_method:m}),jwt:d.access_token,xform:kn});if(v)throw v;return d.user=y.user,await this._saveSession(d),await this._notifyAllSubscribers("USER_UPDATED",d),{data:{user:d.user},error:null}})}catch(o){if(de(o))return{data:{user:null},error:o};throw o}}async setSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(n))}async _setSession(n){try{if(!n.access_token||!n.refresh_token)throw new xn;const s=Date.now()/1e3;let o=s,l=!0,u=null;const{payload:d}=vl(n.access_token);if(d.exp&&(o=d.exp,l=o<=s),l){const{session:p,error:m}=await this._callRefreshToken(n.refresh_token);if(m)return{data:{user:null,session:null},error:m};if(!p)return{data:{user:null,session:null},error:null};u=p}else{const{data:p,error:m}=await this._getUser(n.access_token);if(m)throw m;u={access_token:n.access_token,refresh_token:n.refresh_token,user:p.user,token_type:"bearer",expires_in:o-s,expires_at:o},await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)}return{data:{user:u.user,session:u},error:null}}catch(s){if(de(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(n))}async _refreshSession(n){try{return await this._useSession(async s=>{var o;if(!n){const{data:d,error:p}=s;if(p)throw p;n=(o=d.session)!==null&&o!==void 0?o:void 0}if(!n?.refresh_token)throw new xn;const{session:l,error:u}=await this._callRefreshToken(n.refresh_token);return u?{data:{user:null,session:null},error:u}:l?{data:{user:l.user,session:l},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(de(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(n,s){try{if(!At())throw new Qi("No browser detected.");if(n.error||n.error_description||n.error_code)throw new Qi(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new Sf("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Qi("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new Sf("No code detected.");const{data:F,error:L}=await this._exchangeCodeForSession(n.code);if(L)throw L;const q=new URL(window.location.href);return q.searchParams.delete("code"),window.history.replaceState(window.history.state,"",q.toString()),{data:{session:F.session,redirectType:null},error:null}}const{provider_token:o,provider_refresh_token:l,access_token:u,refresh_token:d,expires_in:p,expires_at:m,token_type:y}=n;if(!u||!p||!d||!y)throw new Qi("No session defined in URL");const v=Math.round(Date.now()/1e3),x=parseInt(p);let _=v+x;m&&(_=parseInt(m));const E=_-v;E*1e3<=Tr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${E}s, should have been closer to ${x}s`);const A=_-x;v-A>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",A,_,v):v-A<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",A,_,v);const{data:C,error:N}=await this._getUser(u);if(N)throw N;const D={provider_token:o,provider_refresh_token:l,access_token:u,expires_in:x,expires_at:_,refresh_token:d,token_type:y,user:C.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:D,redirectType:n.type},error:null}}catch(o){if(de(o))return{data:{session:null,redirectType:null},error:o};throw o}}_isImplicitGrantCallback(n){return!!(n.access_token||n.error_description)}async _isPKCECallback(n){const s=await Mn(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&s)}async signOut(n={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(n))}async _signOut({scope:n}={scope:"global"}){return await this._useSession(async s=>{var o;const{data:l,error:u}=s;if(u)return{error:u};const d=(o=l.session)===null||o===void 0?void 0:o.access_token;if(d){const{error:p}=await this.admin.signOut(d,n);if(p&&!(_v(p)&&(p.status===404||p.status===401||p.status===403)))return{error:p}}return n!=="others"&&(await this._removeSession(),await _n(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(n){const s=Rv(),o={id:s,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,o),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:o}}}async _emitInitialSession(n){return await this._useSession(async s=>{var o,l;try{const{data:{session:u},error:d}=s;if(d)throw d;await((o=this.stateChangeEmitters.get(n))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",u)),this._debug("INITIAL_SESSION","callback id",n,"session",u)}catch(u){await((l=this.stateChangeEmitters.get(n))===null||l===void 0?void 0:l.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",n,"error",u),console.error(u)}})}async resetPasswordForEmail(n,s={}){let o=null,l=null;this.flowType==="pkce"&&([o,l]=await kr(this.storage,this.storageKey,!0));try{return await he(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:o,code_challenge_method:l,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(u){if(de(u))return{data:null,error:u};throw u}}async getUserIdentities(){var n;try{const{data:s,error:o}=await this.getUser();if(o)throw o;return{data:{identities:(n=s.user.identities)!==null&&n!==void 0?n:[]},error:null}}catch(s){if(de(s))return{data:null,error:s};throw s}}async linkIdentity(n){var s;try{const{data:o,error:l}=await this._useSession(async u=>{var d,p,m,y,v;const{data:x,error:_}=u;if(_)throw _;const E=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(d=n.options)===null||d===void 0?void 0:d.redirectTo,scopes:(p=n.options)===null||p===void 0?void 0:p.scopes,queryParams:(m=n.options)===null||m===void 0?void 0:m.queryParams,skipBrowserRedirect:!0});return await he(this.fetch,"GET",E,{headers:this.headers,jwt:(v=(y=x.session)===null||y===void 0?void 0:y.access_token)!==null&&v!==void 0?v:void 0})});if(l)throw l;return At()&&!(!((s=n.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(o?.url),{data:{provider:n.provider,url:o?.url},error:null}}catch(o){if(de(o))return{data:{provider:n.provider,url:null},error:o};throw o}}async unlinkIdentity(n){try{return await this._useSession(async s=>{var o,l;const{data:u,error:d}=s;if(d)throw d;return await he(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(l=(o=u.session)===null||o===void 0?void 0:o.access_token)!==null&&l!==void 0?l:void 0})})}catch(s){if(de(s))return{data:null,error:s};throw s}}async _refreshAccessToken(n){const s=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(s,"begin");try{const o=Date.now();return await Lv(async l=>(l>0&&await Iv(200*Math.pow(2,l-1)),this._debug(s,"refreshing attempt",l),await he(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:Xt})),(l,u)=>{const d=200*Math.pow(2,l);return u&&gl(u)&&Date.now()+d-o<Tr})}catch(o){if(this._debug(s,"error",o),de(o))return{data:{session:null,user:null},error:o};throw o}finally{this._debug(s,"end")}}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}async _handleProviderSignIn(n,s){const o=await this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",s,"url",o),At()&&!s.skipBrowserRedirect&&window.location.assign(o),{data:{provider:n,url:o},error:null}}async _recoverAndRefresh(){var n,s;const o="#_recoverAndRefresh()";this._debug(o,"begin");try{const l=await Mn(this.storage,this.storageKey);if(l&&this.userStorage){let d=await Mn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!d&&(d={user:l.user},await Rr(this.userStorage,this.storageKey+"-user",d)),l.user=(n=d?.user)!==null&&n!==void 0?n:yl()}else if(l&&!l.user&&!l.user){const d=await Mn(this.storage,this.storageKey+"-user");d&&d?.user?(l.user=d.user,await _n(this.storage,this.storageKey+"-user"),await Rr(this.storage,this.storageKey,l)):l.user=yl()}if(this._debug(o,"session from storage",l),!this._isValidSession(l)){this._debug(o,"session is not valid"),l!==null&&await this._removeSession();return}const u=((s=l.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<ml;if(this._debug(o,`session has${u?"":" not"} expired with margin of ${ml}s`),u){if(this.autoRefreshToken&&l.refresh_token){const{error:d}=await this._callRefreshToken(l.refresh_token);d&&(console.error(d),gl(d)||(this._debug(o,"refresh failed with a non-retryable error, removing the session",d),await this._removeSession()))}}else if(l.user&&l.user.__isUserNotAvailableProxy===!0)try{const{data:d,error:p}=await this._getUser(l.access_token);!p&&d?.user?(l.user=d.user,await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)):this._debug(o,"could not get user data, skipping SIGNED_IN notification")}catch(d){console.error("Error getting user data:",d),this._debug(o,"error getting user data, skipping SIGNED_IN notification",d)}else await this._notifyAllSubscribers("SIGNED_IN",l)}catch(l){this._debug(o,"error",l),console.error(l);return}finally{this._debug(o,"end")}}async _callRefreshToken(n){var s,o;if(!n)throw new xn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const l=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(l,"begin");try{this.refreshingDeferred=new uo;const{data:u,error:d}=await this._refreshAccessToken(n);if(d)throw d;if(!u.session)throw new xn;await this._saveSession(u.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",u.session);const p={session:u.session,error:null};return this.refreshingDeferred.resolve(p),p}catch(u){if(this._debug(l,"error",u),de(u)){const d={session:null,error:u};return gl(u)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(d),d}throw(o=this.refreshingDeferred)===null||o===void 0||o.reject(u),u}finally{this.refreshingDeferred=null,this._debug(l,"end")}}async _notifyAllSubscribers(n,s,o=!0){const l=`#_notifyAllSubscribers(${n})`;this._debug(l,"begin",s,`broadcast = ${o}`);try{this.broadcastChannel&&o&&this.broadcastChannel.postMessage({event:n,session:s});const u=[],d=Array.from(this.stateChangeEmitters.values()).map(async p=>{try{await p.callback(n,s)}catch(m){u.push(m)}});if(await Promise.all(d),u.length>0){for(let p=0;p<u.length;p+=1)console.error(u[p]);throw u[0]}}finally{this._debug(l,"end")}}async _saveSession(n){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0;const s=Object.assign({},n),o=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!o&&s.user&&await Rr(this.userStorage,this.storageKey+"-user",{user:s.user});const l=Object.assign({},s);delete l.user;const u=Nf(l);await Rr(this.storage,this.storageKey,u)}else{const l=Nf(s);await Rr(this.storage,this.storageKey,l)}}async _removeSession(){this._debug("#_removeSession()"),await _n(this.storage,this.storageKey),await _n(this.storage,this.storageKey+"-code-verifier"),await _n(this.storage,this.storageKey+"-user"),this.userStorage&&await _n(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&At()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",n)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const n=setInterval(()=>this._autoRefreshTokenTick(),Tr);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const n=Date.now();try{return await this._useSession(async s=>{const{data:{session:o}}=s;if(!o||!o.refresh_token||!o.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const l=Math.floor((o.expires_at*1e3-n)/Tr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${l} ticks, a tick lasts ${Tr}ms, refresh threshold is ${Al} ticks`),l<=Al&&await this._callRefreshToken(o.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(n){if(n.isAcquireTimeout||n instanceof hh)this._debug("auto refresh token tick lock not available");else throw n}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!At()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}}async _onVisibilityChanged(n){const s=`#_onVisibilityChanged(${n})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(n,s,o){const l=[`provider=${encodeURIComponent(s)}`];if(o?.redirectTo&&l.push(`redirect_to=${encodeURIComponent(o.redirectTo)}`),o?.scopes&&l.push(`scopes=${encodeURIComponent(o.scopes)}`),this.flowType==="pkce"){const[u,d]=await kr(this.storage,this.storageKey),p=new URLSearchParams({code_challenge:`${encodeURIComponent(u)}`,code_challenge_method:`${encodeURIComponent(d)}`});l.push(p.toString())}if(o?.queryParams){const u=new URLSearchParams(o.queryParams);l.push(u.toString())}return o?.skipBrowserRedirect&&l.push(`skip_http_redirect=${o.skipBrowserRedirect}`),`${n}?${l.join("&")}`}async _unenroll(n){try{return await this._useSession(async s=>{var o;const{data:l,error:u}=s;return u?{data:null,error:u}:await he(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(o=l?.session)===null||o===void 0?void 0:o.access_token})})}catch(s){if(de(s))return{data:null,error:s};throw s}}async _enroll(n){try{return await this._useSession(async s=>{var o,l;const{data:u,error:d}=s;if(d)return{data:null,error:d};const p=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:{issuer:n.issuer}),{data:m,error:y}=await he(this.fetch,"POST",`${this.url}/factors`,{body:p,headers:this.headers,jwt:(o=u?.session)===null||o===void 0?void 0:o.access_token});return y?{data:null,error:y}:(n.factorType==="totp"&&(!((l=m?.totp)===null||l===void 0)&&l.qr_code)&&(m.totp.qr_code=`data:image/svg+xml;utf-8,${m.totp.qr_code}`),{data:m,error:null})})}catch(s){if(de(s))return{data:null,error:s};throw s}}async _verify(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var o;const{data:l,error:u}=s;if(u)return{data:null,error:u};const{data:d,error:p}=await he(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:{code:n.code,challenge_id:n.challengeId},headers:this.headers,jwt:(o=l?.session)===null||o===void 0?void 0:o.access_token});return p?{data:null,error:p}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),{data:d,error:p})})}catch(s){if(de(s))return{data:null,error:s};throw s}})}async _challenge(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var o;const{data:l,error:u}=s;return u?{data:null,error:u}:await he(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:{channel:n.channel},headers:this.headers,jwt:(o=l?.session)===null||o===void 0?void 0:o.access_token})})}catch(s){if(de(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(n){const{data:s,error:o}=await this._challenge({factorId:n.factorId});return o?{data:null,error:o}:await this._verify({factorId:n.factorId,challengeId:s.id,code:n.code})}async _listFactors(){const{data:{user:n},error:s}=await this.getUser();if(s)return{data:null,error:s};const o=n?.factors||[],l=o.filter(d=>d.factor_type==="totp"&&d.status==="verified"),u=o.filter(d=>d.factor_type==="phone"&&d.status==="verified");return{data:{all:o,totp:l,phone:u},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async n=>{var s,o;const{data:{session:l},error:u}=n;if(u)return{data:null,error:u};if(!l)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:d}=vl(l.access_token);let p=null;d.aal&&(p=d.aal);let m=p;((o=(s=l.user.factors)===null||s===void 0?void 0:s.filter(x=>x.status==="verified"))!==null&&o!==void 0?o:[]).length>0&&(m="aal2");const v=d.amr||[];return{data:{currentLevel:p,nextLevel:m,currentAuthenticationMethods:v},error:null}}))}async fetchJwk(n,s={keys:[]}){let o=s.keys.find(p=>p.kid===n);if(o)return o;const l=Date.now();if(o=this.jwks.keys.find(p=>p.kid===n),o&&this.jwks_cached_at+yv>l)return o;const{data:u,error:d}=await he(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(d)throw d;return!u.keys||u.keys.length===0||(this.jwks=u,this.jwks_cached_at=l,o=u.keys.find(p=>p.kid===n),!o)?null:o}async getClaims(n,s={}){try{let o=n;if(!o){const{data:E,error:A}=await this.getSession();if(A||!E.session)return{data:null,error:A};o=E.session.access_token}const{header:l,payload:u,signature:d,raw:{header:p,payload:m}}=vl(o);s?.allowExpired||Bv(u.exp);const y=!l.alg||l.alg.startsWith("HS")||!l.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(l.kid,s?.keys?{keys:s.keys}:s?.jwks);if(!y){const{error:E}=await this.getUser(o);if(E)throw E;return{data:{claims:u,header:l,signature:d},error:null}}const v=Vv(l.alg),x=await crypto.subtle.importKey("jwk",y,v,!0,["verify"]);if(!await crypto.subtle.verify(v,x,d,Nv(`${p}.${m}`)))throw new Ll("Invalid JWT signature");return{data:{claims:u,header:l,signature:d},error:null}}catch(o){if(de(o))return{data:null,error:o};throw o}}}Is.nextInstanceID=0;const iy=Is;class oy extends iy{constructor(n){super(n)}}var ay=function(i,n,s,o){function l(u){return u instanceof s?u:new s(function(d){d(u)})}return new(s||(s=Promise))(function(u,d){function p(v){try{y(o.next(v))}catch(x){d(x)}}function m(v){try{y(o.throw(v))}catch(x){d(x)}}function y(v){v.done?u(v.value):l(v.value).then(p,m)}y((o=o.apply(i,n||[])).next())})};class ly{constructor(n,s,o){var l,u,d;if(this.supabaseUrl=n,this.supabaseKey=s,!n)throw new Error("supabaseUrl is required.");if(!s)throw new Error("supabaseKey is required.");const p=fv(n),m=new URL(p);this.realtimeUrl=new URL("realtime/v1",m),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",m),this.storageUrl=new URL("storage/v1",m),this.functionsUrl=new URL("functions/v1",m);const y=`sb-${m.hostname.split(".")[0]}-auth-token`,v={db:sv,realtime:ov,auth:Object.assign(Object.assign({},iv),{storageKey:y}),global:rv},x=hv(o??{},v);this.storageKey=(l=x.auth.storageKey)!==null&&l!==void 0?l:"",this.headers=(u=x.global.headers)!==null&&u!==void 0?u:{},x.accessToken?(this.accessToken=x.accessToken,this.auth=new Proxy({},{get:(_,E)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(E)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((d=x.auth)!==null&&d!==void 0?d:{},this.headers,x.global.fetch),this.fetch=cv(s,this._getAccessToken.bind(this),x.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},x.realtime)),this.rest=new bg(new URL("rest/v1",m).href,{headers:this.headers,schema:x.db.schema,fetch:this.fetch}),this.storage=new ev(this.storageUrl.href,this.headers,this.fetch,o?.storage),x.accessToken||this._listenForAuthEvents()}get functions(){return new pg(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(n){return this.rest.from(n)}schema(n){return this.rest.schema(n)}rpc(n,s={},o={}){return this.rest.rpc(n,s,o)}channel(n,s={config:{}}){return this.realtime.channel(n,s)}getChannels(){return this.realtime.getChannels()}removeChannel(n){return this.realtime.removeChannel(n)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var n,s;return ay(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:o}=yield this.auth.getSession();return(s=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:n,persistSession:s,detectSessionInUrl:o,storage:l,storageKey:u,flowType:d,lock:p,debug:m},y,v){const x={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new oy({url:this.authUrl.href,headers:Object.assign(Object.assign({},x),y),storageKey:u,autoRefreshToken:n,persistSession:s,detectSessionInUrl:o,storage:l,flowType:d,lock:p,debug:m,fetch:v,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(n){return new zg(this.realtimeUrl.href,Object.assign(Object.assign({},n),{params:Object.assign({apikey:this.supabaseKey},n?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,o)=>{this._handleTokenChanged(s,"CLIENT",o?.access_token)})}_handleTokenChanged(n,s,o){(n==="TOKEN_REFRESHED"||n==="SIGNED_IN")&&this.changedAccessToken!==o?this.changedAccessToken=o:n==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const uy=(i,n,s)=>new ly(i,n,s);function cy(){if(typeof window<"u"||typeof process>"u")return!1;const i=process.version;if(i==null)return!1;const n=i.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}cy()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Dl="https://sfjwjkmwnowjbtpsnvvb.supabase.co",dy="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNmandqa213bm93amJ0cHNudnZiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU4NjYzMDUsImV4cCI6MjA3MTQ0MjMwNX0.rtVW8C68p-thOmuJ1xcjAGu--gvAMppOD_0smyXbpuQ";try{new URL(Dl)}catch{throw new Error(`Invalid VITE_SUPABASE_URL: ${Dl}`)}const ge=uy(Dl,dy,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,storage:typeof window<"u"?window.localStorage:void 0,storageKey:"social-spark-auth",flowType:"pkce"},realtime:{params:{eventsPerSecond:10}},db:{schema:"public"},global:{headers:{"X-Client-Info":"social-spark-web@1.0.0"},fetch:(i,n={})=>{const s=new AbortController,o=setTimeout(()=>s.abort(),3e4);return fetch(i,{...n,signal:s.signal}).finally(()=>{clearTimeout(o)})}}}),vt={INVALID_CREDENTIALS:"invalid_grant",USER_NOT_FOUND:"user_not_found",EMAIL_NOT_CONFIRMED:"email_not_confirmed",SIGNUP_DISABLED:"signup_disabled",FOREIGN_KEY_VIOLATION:"23503",UNIQUE_VIOLATION:"23505",NOT_NULL_VIOLATION:"23502",CHECK_VIOLATION:"23514",INSUFFICIENT_PRIVILEGE:"42501",RLS_POLICY_VIOLATION:"PGRST301",NOT_FOUND:"PGRST116",CONNECTION_ERROR:"ECONNREFUSED",TIMEOUT:"PGRST101"},Of={[vt.INVALID_CREDENTIALS]:"Invalid email or password",[vt.USER_NOT_FOUND]:"No account found with this email",[vt.EMAIL_NOT_CONFIRMED]:"Please check your email and click the confirmation link",[vt.SIGNUP_DISABLED]:"Account registration is currently disabled",[vt.FOREIGN_KEY_VIOLATION]:"Referenced record does not exist",[vt.UNIQUE_VIOLATION]:"A record with this information already exists",[vt.NOT_NULL_VIOLATION]:"Required information is missing",[vt.CHECK_VIOLATION]:"Invalid data provided",[vt.INSUFFICIENT_PRIVILEGE]:"You do not have permission to perform this action",[vt.RLS_POLICY_VIOLATION]:"Access denied for this operation",[vt.NOT_FOUND]:"Record not found",[vt.CONNECTION_ERROR]:"Unable to connect to the server",[vt.TIMEOUT]:"Request timed out"};class ro extends Error{constructor(n,s={}){const o=fy(n);super(o),this.name="SupabaseError",this.code=n?.code||"UNKNOWN",this.originalError=n,this.context=s,this.timestamp=new Date().toISOString(),this.userMessage=o,this.type=hy(n)}toJSON(){return{name:this.name,message:this.message,code:this.code,type:this.type,context:this.context,timestamp:this.timestamp}}}function fy(i){if(!i)return"An unknown error occurred";if(i.code&&Of[i.code])return Of[i.code];const n=i.message||"";return n.includes("duplicate key value")?"This item already exists":n.includes("violates foreign key constraint")?"Cannot delete - this item is referenced by other records":n.includes("permission denied")?"You do not have permission to perform this action":n.includes("connection refused")||n.includes("network")?"Unable to connect to the server. Please check your internet connection.":n.includes("timeout")?"The request took too long. Please try again.":n.length<100&&!n.includes("ERROR:")&&!n.includes("PGRST")?n:"Something went wrong. Please try again."}function hy(i){if(!i)return"unknown";const n=i.code||"",s=i.message||"";return n.startsWith("23")||s.includes("constraint")?"validation":n==="PGRST301"||n==="42501"?"permission":n==="PGRST116"?"not_found":s.includes("network")||s.includes("connection")?"network":s.includes("timeout")?"timeout":"database"}function Ue(i,n={}){const s=new ro(i,n);return console.error("Supabase Error:",{code:s.code,type:s.type,context:s.context,originalError:i}),s}async function ph(i,n={}){try{const s=await i();if(s.error)throw Ue(s.error,n);return s}catch(s){throw s instanceof ro?s:Ue(s,n)}}async function Zt(i,{maxRetries:n=3,baseDelayMs:s=1e3,maxDelayMs:o=1e4,backoffMultiplier:l=2,retryableErrors:u=["network","timeout"]}={}){let d;for(let p=0;p<=n;p++)try{return await i()}catch(m){if(d=m,p===n)break;const y=m instanceof ro?m:Ue(m);if(!u.includes(y.type))throw y;const v=Math.min(s*Math.pow(l,p),o);console.log(`Retrying operation in ${v}ms (attempt ${p+1}/${n+1})`),await new Promise(x=>setTimeout(x,v))}throw d instanceof ro?d:Ue(d)}const Dr={uuid:i=>typeof i=="string"&&/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(i),email:i=>typeof i=="string"&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i),nonEmptyString:i=>typeof i=="string"&&i.trim().length>0,positiveInteger:i=>Number.isInteger(i)&&i>0,url:i=>{if(!i||typeof i!="string")return!0;try{return new URL(i),!0}catch{return!1}}},mh=j.createContext(null),Ql=()=>j.useContext(mh),py=j.memo(function({children:n}){const[s,o]=j.useState(null),[l,u]=j.useState(!0),[d,p]=j.useState(null),m=j.useCallback(_=>{const E=Ue(_,{operation:"auth"});console.error("Auth error:",E),p(E.userMessage)},[]),y=j.useCallback(async()=>{try{const{data:_,error:E}=await Zt(()=>ge.auth.getSession(),{maxRetries:2,retryableErrors:["network","timeout"]});if(E){m(E);return}o(_?.session??null),p(null)}catch(_){m(_)}finally{u(!1)}},[m]);j.useEffect(()=>{let _=!0;y();const{data:E}=ge.auth.onAuthStateChange((A,C)=>{_&&(o(C??null),C&&p(null),u(!1))});return()=>{_=!1,E?.subscription?.unsubscribe?.()}},[y]);const v=j.useCallback(async()=>{p(null),u(!0);try{const{error:_}=await Zt(()=>ge.auth.signOut(),{maxRetries:2,retryableErrors:["network","timeout"]});if(_)throw _;o(null)}catch(_){m(_)}finally{u(!1)}},[m]),x=j.useMemo(()=>({user:s?.user??null,session:s,loading:l,error:d,signOut:v,clearError:()=>p(null),isAuthenticated:!!s?.user,refreshAuth:y}),[s,l,d,v,y]);return h.jsx(mh.Provider,{value:x,children:n})});function my(){const{user:i,signOut:n}=Ql(),[s,o]=j.useState(!1),l=j.useRef(null),u=i?.email||"Guest",d=j.useCallback(()=>{n(),o(!1)},[n]);return j.useEffect(()=>{const p=m=>{l.current&&!l.current.contains(m.target)&&o(!1)};return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[]),h.jsxs("div",{ref:l,className:"relative",children:[h.jsxs("button",{onClick:()=>o(p=>!p),className:"chip bg-app-surface hover:bg-app-muted border-app",title:"Account menu",children:[h.jsx("span",{className:"truncate max-w-[160px]",children:u}),h.jsx("svg",{className:"w-3.5 h-3.5 ml-1 text-app-muted",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:h.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),s&&h.jsxs("div",{className:"absolute right-0 mt-2 w-40 bg-white border border-app rounded-lg shadow-lg z-50",children:[h.jsx("div",{className:"px-3 py-2 border-b border-app text-sm text-app-muted",children:i?"Signed in":"Not signed in"}),i?h.jsx("button",{onClick:d,className:"w-full text-left px-3 py-2 text-sm text-red-600 hover:bg-app-muted transition",children:"Sign Out"}):h.jsx("div",{className:"px-3 py-2 text-sm text-app-body",children:"Please sign in"})]})]})}const gy=j.memo(function({mode:n="create",setMode:s=()=>{},onExportPNG:o=()=>{},onOpenMenu:l=()=>{},deckActions:u={},user:d=null,canPresent:p=!1,onStartPresent:m=()=>{},exportDisabled:y=!1,loading:v=!1}){const{openDeckManager:x=()=>{},openDeckPicker:_=()=>{},loadingDeck:E=!1}=u,A=j.useCallback(()=>{n==="present"?s("create"):p?m():alert("No posts to present. Add posts to your deck or open a saved deck first.")},[n,s,p,m]),C=j.useCallback(N=>{if(N==="present"&&!p){alert("No posts to present. Add posts to your deck or open a saved deck first.");return}s(N)},[s,p]);return h.jsx("header",{className:"border-b bg-white h-12",children:h.jsxs("div",{className:"container-tight h-full flex items-center gap-3",children:[h.jsx("button",{className:"p-2 rounded hover:bg-slate-100 -ml-2",onClick:l,"aria-label":"Menu","aria-expanded":"false","aria-controls":"app-menu-drawer",children:h.jsx(rg,{className:"w-4 h-4"})}),h.jsxs("div",{className:"tabs",children:[h.jsx("button",{className:"tab","aria-selected":n==="create",onClick:()=>C("create"),children:"Create"}),h.jsx("button",{className:"tab","aria-selected":n==="present",onClick:A,title:n==="present"?"Exit present mode":p?"Start presenting":"No posts to present",children:"Present"})]}),h.jsx("div",{className:"flex-1"}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs("button",{className:"btn-outline hidden sm:inline-flex",onClick:x,disabled:E||v,title:E||v?"Loading...":"Open Deck Manager",children:[h.jsx(eg,{className:"w-4 h-4 mr-1"}),E||v?"Loading...":"Decks"]}),n==="create"&&h.jsxs("button",{className:"btn-outline hidden sm:inline-flex",onClick:_,disabled:E||v,title:E||v?"Loading...":"Save current post to a deck",children:[h.jsx(lg,{className:"w-4 h-4 mr-1"}),E||v?"Loading...":"Save to deck"]}),h.jsxs("button",{className:"btn-outline",onClick:o,title:y?"Waiting for images to load...":"Export PNG",disabled:y,children:[h.jsx(Ir,{className:"w-4 h-4 mr-1"}),"Export"]}),h.jsx("div",{className:"h-6 w-px bg-slate-200 mx-1"}),h.jsx(my,{})]})]})})}),jr={FB_NAME_MAX:100,IG_USERNAME_MAX:30,AVATAR_URL_MAX:500},gh={URL_REGEX:/^https?:\/\/.+\..+$/,IG_USERNAME_REGEX:/^[a-zA-Z0-9._]{1,30}$/},If=Object.freeze({fb_name:"",fb_avatar_url:"",ig_username:"",ig_avatar_url:"",verified:!1}),Ji=i=>typeof i=="string",Lf=i=>{if(!i||typeof i!="string")return!0;try{const n=new URL(i);return gh.URL_REGEX.test(i)}catch{return!1}},vy=i=>!i||typeof i!="string"?!0:gh.IG_USERNAME_REGEX.test(i),so={fb_name:i=>!i||!i.trim()?"Facebook name is required":i.length>jr.FB_NAME_MAX?`Facebook name must be ${jr.FB_NAME_MAX} characters or less`:null,fb_avatar_url:i=>i&&!Lf(i)?"Facebook avatar URL must be a valid URL":i&&i.length>jr.AVATAR_URL_MAX?"Facebook avatar URL is too long":null,ig_username:i=>i&&!vy(i)?"Instagram username can only contain letters, numbers, periods, and underscores":i&&i.length>jr.IG_USERNAME_MAX?`Instagram username must be ${jr.IG_USERNAME_MAX} characters or less`:null,ig_avatar_url:i=>i&&!Lf(i)?"Instagram avatar URL must be a valid URL":i&&i.length>jr.AVATAR_URL_MAX?"Instagram avatar URL is too long":null,verified:i=>null};function io(i){const n={};let s=!1;Object.keys(so).forEach(u=>{const d=so[u](i[u]);d&&(n[u]=d,s=!0)});const o=i.fb_name&&i.fb_name.trim(),l=i.ig_username&&i.ig_username.trim();if(!o&&!l){const u="Either Facebook name or Instagram username is required";n.fb_name=n.fb_name||u,n.ig_username=n.ig_username||u,s=!0}return{isValid:!s,errors:n}}function Zi(i={}){return{fb_name:Ji(i.fb_name)?i.fb_name.trim():"",fb_avatar_url:Ji(i.fb_avatar_url)?i.fb_avatar_url.trim():"",ig_username:Ji(i.ig_username)?i.ig_username.trim().replace(/^@/,"").toLowerCase():"",ig_avatar_url:Ji(i.ig_avatar_url)?i.ig_avatar_url.trim():"",verified:!!i.verified}}function eo(i){if(!i)return"Unknown Brand";const n=i.fb_name?.trim(),s=i.ig_username?.trim();return n||(s?`@${s}`:"Unnamed Brand")}function Xi(i,n="facebook"){return i?n==="instagram"?i.ig_avatar_url||i.fb_avatar_url||"":i.fb_avatar_url||i.ig_avatar_url||"":""}function $l(i){if(!i)return"";const n=i.fb_name?.trim(),s=i.ig_username?.trim();return n&&s?`@${s}`:s?`@${s}`:n||""}function vh(i=null){const[n,s]=j.useState(()=>i?Zi(i):{...If}),[o,l]=j.useState({}),[u,d]=j.useState({}),p=j.useCallback((E=null)=>{s(E?Zi(E):{...If}),l({}),d({})},[]),m=j.useCallback((E,A)=>{if(s(C=>({...C,[E]:A})),u[E]){const C=so[E]?.(A);l(N=>({...N,[E]:C}))}},[u]),y=j.useCallback(E=>{d(C=>({...C,[E]:!0}));const A=so[E]?.(n[E]);l(C=>({...C,[E]:A}))},[n]),v=j.useCallback(()=>{const E=io(n);return l(E.errors),d({fb_name:!0,fb_avatar_url:!0,ig_username:!0,ig_avatar_url:!0,verified:!0}),E},[n]),x=j.useCallback(()=>Zi(n),[n]),_=j.useMemo(()=>io(n),[n]);return{form:n,errors:o,touched:u,isValid:_.isValid,resetForm:p,updateField:m,touchField:y,validateForm:v,getFormData:x}}const zt={DEFAULT_TTL:300*1e3,MAX_CACHE_SIZE:100,CACHE_KEY_PREFIX:"supabase_cache_"};class yy{constructor(n=zt.MAX_CACHE_SIZE){this.cache=new Map,this.maxSize=n,this.hitCount=0,this.missCount=0}set(n,s,o=zt.DEFAULT_TTL){if(this.cache.size>=this.maxSize){const u=this.cache.keys().next().value;this.cache.delete(u)}const l=Date.now()+o;this.cache.set(n,{value:s,expiresAt:l,createdAt:Date.now()})}get(n){const s=this.cache.get(n);return s?Date.now()>s.expiresAt?(this.cache.delete(n),this.missCount++,null):(this.hitCount++,s.value):(this.missCount++,null)}delete(n){return this.cache.delete(n)}clear(){this.cache.clear(),this.hitCount=0,this.missCount=0}invalidatePattern(n){const s=new RegExp(n),o=[];for(const l of this.cache.keys())s.test(l)&&o.push(l);return o.forEach(l=>this.cache.delete(l)),o.length}getStats(){const n=this.hitCount+this.missCount;return{size:this.cache.size,hitCount:this.hitCount,missCount:this.missCount,hitRate:n>0?(this.hitCount/n*100).toFixed(2)+"%":"0%"}}}const et=new yy;function As(i,n,s={}){const o=[zt.CACHE_KEY_PREFIX,i,n],l=Object.keys(s).sort().reduce((u,d)=>(u[d]=s[d],u),{});return Object.keys(l).length>0&&o.push(JSON.stringify(l)),o.join(":")}class wy{constructor(){this.pendingRequests=new Map}async deduplicate(n,s){if(this.pendingRequests.has(n))return this.pendingRequests.get(n);const o=s().finally(()=>{this.pendingRequests.delete(n)});return this.pendingRequests.set(n,o),o}clear(){this.pendingRequests.clear()}getStats(){return{pendingRequests:this.pendingRequests.size}}}const Lr=new wy,Ft={CACHE_FIRST:"cache-first",CACHE_ONLY:"cache-only",NETWORK_FIRST:"network-first",NETWORK_ONLY:"network-only"};async function Df({queryFn:i,cacheKey:n,ttl:s=zt.DEFAULT_TTL,strategy:o=Ft.CACHE_FIRST,staleWhileRevalidate:l=!1}){const u=et.get(n);switch(o){case Ft.CACHE_ONLY:return u||null;case Ft.NETWORK_ONLY:const d=await Lr.deduplicate(n,i);return et.set(n,d,s),d;case Ft.NETWORK_FIRST:try{const m=await Lr.deduplicate(n,i);return et.set(n,m,s),m}catch(m){if(u)return console.warn("Network request failed, returning cached data:",m),u;throw m}case Ft.CACHE_FIRST:default:if(u)return l&&Lr.deduplicate(`${n}_refresh`,async()=>{try{const m=await i();et.set(n,m,s)}catch(m){console.warn("Background refresh failed:",m)}}),u;const p=await Lr.deduplicate(n,i);return et.set(n,p,s),p}}class Os{static async select({query:n,table:s,filters:o={},ttl:l=zt.DEFAULT_TTL,strategy:u=Ft.CACHE_FIRST}){const d=As(s,"select",o);return Df({queryFn:async()=>{const p=await n;if(p.error)throw p.error;return p.data},cacheKey:d,ttl:l,strategy:u,staleWhileRevalidate:!0})}static async selectSingle({query:n,table:s,id:o,ttl:l=zt.DEFAULT_TTL,strategy:u=Ft.CACHE_FIRST}){const d=As(s,"select_single",{id:o});return Df({queryFn:async()=>{const p=await n;if(p.error)throw p.error;return p.data},cacheKey:d,ttl:l,strategy:u})}static invalidate(n){return et.invalidatePattern(n)}static invalidateTable(n){const s=`${zt.CACHE_KEY_PREFIX}${n}:`;return et.invalidatePattern(s)}static clearAll(){et.clear(),Lr.clear()}static getStats(){return{cache:et.getStats(),deduplicator:Lr.getStats()}}static async warmUp(n=[]){const s=n.map(async({queryFn:o,cacheKey:l,ttl:u})=>{try{const d=await o();et.set(l,d,u)}catch(d){console.warn(`Cache warm-up failed for ${l}:`,d)}});await Promise.allSettled(s)}}class _l{static updateRecord(n,s,o){const l=As(n,"select_single",{id:s}),u=et.get(l);if(u){const d={...u,...o};return et.set(l,d,zt.DEFAULT_TTL),d}return null}static addToList(n,s,o){const l=As(n,"select",s),u=et.get(l);if(u&&Array.isArray(u)){const d=[o,...u];return et.set(l,d,zt.DEFAULT_TTL),d}return null}static removeFromList(n,s,o){const l=As(n,"select",s),u=et.get(l);if(u&&Array.isArray(u)){const d=u.filter(p=>p.id!==o);return et.set(l,d,zt.DEFAULT_TTL),d}return null}}function yh(i={}){const n=Zi(i);return{id:i.id??void 0,...n}}async function _y(i){if(!i)return[];if(!ge)throw new Error("Supabase client is undefined");return Os.select({query:ge.from("brands").select("*").eq("user_id",i).order("created_at",{ascending:!1}),table:"brands",filters:{user_id:i},ttl:600*1e3,strategy:Ft.CACHE_FIRST})}async function xy(i,n){if(!i)throw new Error("Missing userId");if(!ge)throw new Error("Supabase client is undefined");const s=yh(n),o=io(s);if(!o.isValid){const p=Object.values(o.errors)[0];throw new Error(p||"Invalid brand data")}const l={fb_name:s.fb_name,fb_avatar_url:s.fb_avatar_url,ig_username:s.ig_username,ig_avatar_url:s.ig_avatar_url,verified:s.verified,updated_at:new Date().toISOString()};if(s.id){const{data:p,error:m}=await ge.from("brands").update(l).eq("id",s.id).eq("user_id",i).select().single();if(m)throw m.code==="PGRST116"?new Error("Brand not found or access denied"):m;return p}const{data:u,error:d}=await ge.from("brands").insert([{user_id:i,...l,created_at:new Date().toISOString()}]).select().single();if(d)throw d.code==="23505"?new Error("A brand with this name already exists"):d;return u}async function ky(i,n){if(!i)throw new Error("Missing userId");if(!n)throw new Error("Missing brand id");if(!ge)throw new Error("Supabase client is undefined");const{error:s}=await ge.from("brands").delete().eq("id",n).eq("user_id",i);if(s)throw s;return!0}function Jl(i){const[n,s]=j.useState([]),[o,l]=j.useState(!!i),[u,d]=j.useState(!1),[p,m]=j.useState("");j.useEffect(()=>{i||(s([]),m(""),l(!1))},[i]),j.useEffect(()=>{let _=!1;async function E(){try{if(l(!0),m(""),!i)return;const A=await _y(i);_||s(A)}catch(A){console.error("[useBrands] fetch error:",A),_||m(A.message||"Failed to load brands")}finally{_||l(!1)}}return E(),()=>{_=!0}},[i]),j.useEffect(()=>{if(!i)return;if(!ge?.channel){console.warn("[useBrands] Realtime channel not available. Skipping subscribe.");return}let _;try{_=ge.channel(`brands:${i}`).on("postgres_changes",{event:"*",schema:"public",table:"brands",filter:`user_id=eq.${i}`},E=>{if(E.eventType==="INSERT"){const A=E.new;s(C=>C.find(N=>N.id===A.id)?C:[A,...C])}else if(E.eventType==="UPDATE"){const A=E.new;s(C=>{const N=C.findIndex(F=>F.id===A.id);if(N===-1)return C;const D=C.slice();return D[N]=A,D})}else if(E.eventType==="DELETE"){const A=E.old;s(C=>C.filter(N=>N.id!==A.id))}}).subscribe()}catch(E){console.error("[useBrands] realtime subscribe error:",E)}return()=>{_&&ge.removeChannel(_)}},[i]);const y=j.useCallback(async _=>{if(!i)throw new Error("Not signed in");d(!0),m("");try{const E=yh(_),A=io(E);if(!A.isValid){const N=Object.values(A.errors)[0];throw new Error(N||"Invalid brand data")}const C=await xy(i,_);return Os.invalidateTable("brands"),s(N=>{const D=N.findIndex(L=>L.id===C.id);if(D===-1)return _l.addToList("brands",{user_id:i},C),[C,...N];_l.updateRecord("brands",C.id,C);const F=N.slice();return F[D]=C,F}),C}catch(E){console.error("[useBrands] save error:",E);const A=E.message||"Failed to save brand";throw m(A),E}finally{d(!1)}},[i]),v=j.useCallback(async _=>{if(!i)throw new Error("Not signed in");if(!_)throw new Error("Brand ID is required");d(!0),m("");try{return await ky(i,_),Os.invalidateTable("brands"),_l.removeFromList("brands",{user_id:i},_),s(E=>E.filter(A=>A.id!==_)),!0}catch(E){console.error("[useBrands] delete error:",E);const A=E.message||"Failed to delete brand";throw m(A),E}finally{d(!1)}},[i]),x=j.useCallback(async()=>{if(i){l(!0),m("");try{const _=await Os.select({query:ge.from("brands").select("*").eq("user_id",i).order("created_at",{ascending:!1}),table:"brands",filters:{user_id:i},strategy:Ft.NETWORK_FIRST});s(_)}catch(_){console.error("[useBrands] reload error:",_);const E=_.message||"Failed to reload brands";m(E)}finally{l(!1)}}},[i]);return{brands:n,loading:o,saving:u,error:p,saveBrand:y,removeBrand:v,reload:x}}const wh=j.memo(function({form:n,errors:s={},touched:o={},onFieldChange:l,onFieldBlur:u,disabled:d=!1,showPreview:p=!0,compact:m=!1}){const y=m?"input text-sm":"input",v="text-xs text-app-muted",x=m?"space-y-2":"space-y-3";return h.jsxs("div",{className:x,children:[h.jsxs("div",{children:[h.jsx("label",{className:v,htmlFor:"brand_fb_name",children:"Facebook page name"}),h.jsx("input",{id:"brand_fb_name",className:y,placeholder:"e.g. Patagonia",value:n.fb_name||"",onChange:_=>l("fb_name",_.target.value),onBlur:()=>u?.("fb_name"),disabled:d,autoComplete:"organization"}),o.fb_name&&s.fb_name&&h.jsx("div",{className:"text-xs text-red-600 mt-1",children:s.fb_name})]}),h.jsxs("div",{children:[h.jsx("label",{className:v,htmlFor:"brand_fb_avatar",children:"Facebook avatar URL"}),h.jsx("input",{id:"brand_fb_avatar",className:y,placeholder:"https://...",value:n.fb_avatar_url||"",onChange:_=>l("fb_avatar_url",_.target.value),onBlur:()=>u?.("fb_avatar_url"),disabled:d,autoComplete:"url",type:"url"}),o.fb_avatar_url&&s.fb_avatar_url&&h.jsx("div",{className:"text-xs text-red-600 mt-1",children:s.fb_avatar_url})]}),h.jsxs("div",{children:[h.jsx("label",{className:v,htmlFor:"brand_ig_username",children:"Instagram username"}),h.jsx("input",{id:"brand_ig_username",className:y,placeholder:"e.g. patagonia",value:n.ig_username||"",onChange:_=>l("ig_username",_.target.value),onBlur:()=>u?.("ig_username"),disabled:d,autoComplete:"username"}),o.ig_username&&s.ig_username&&h.jsx("div",{className:"text-xs text-red-600 mt-1",children:s.ig_username})]}),h.jsxs("div",{children:[h.jsx("label",{className:v,htmlFor:"brand_ig_avatar",children:"Instagram avatar URL"}),h.jsx("input",{id:"brand_ig_avatar",className:y,placeholder:"https://...",value:n.ig_avatar_url||"",onChange:_=>l("ig_avatar_url",_.target.value),onBlur:()=>u?.("ig_avatar_url"),disabled:d,autoComplete:"url",type:"url"}),o.ig_avatar_url&&s.ig_avatar_url&&h.jsx("div",{className:"text-xs text-red-600 mt-1",children:s.ig_avatar_url})]}),h.jsxs("div",{children:[h.jsxs("label",{className:"flex items-center gap-2 text-sm cursor-pointer",children:[h.jsx("input",{type:"checkbox",checked:n.verified||!1,onChange:_=>l("verified",_.target.checked),onBlur:()=>u?.("verified"),disabled:d,className:"rounded"}),h.jsx("span",{children:"Verified account"})]}),o.verified&&s.verified&&h.jsx("div",{className:"text-xs text-red-600 mt-1",children:s.verified})]}),p&&h.jsxs("div",{className:"pt-2 border-t border-app-border",children:[h.jsx("div",{className:"text-xs text-app-muted mb-2",children:"Preview"}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden bg-app-muted flex items-center justify-center flex-shrink-0",children:n.fb_avatar_url||n.ig_avatar_url?h.jsx("img",{src:n.fb_avatar_url||n.ig_avatar_url,className:"w-full h-full object-cover",alt:"",onError:_=>{_.target.style.display="none"}}):h.jsx("div",{className:"text-xs text-app-muted",children:"👤"})}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsxs("div",{className:"font-medium text-sm truncate",children:[n.fb_name||"Facebook name",n.verified?" ✓":""]}),h.jsxs("div",{className:"text-xs text-app-muted truncate",children:["@",n.ig_username||"instagram"]})]})]})]})]})}),_h=j.memo(function({brand:n,onEdit:s,onDelete:o,onToggleVerified:l,showActions:u=!0,showVerifiedToggle:d=!0,showInlineEdit:p=!1,compact:m=!1,disabled:y=!1,className:v=""}){const[x,_]=j.useState(!1),[E,A]=j.useState(!1),{form:C,errors:N,touched:D,isValid:F,resetForm:L,updateField:q,touchField:W,getFormData:I}=vh(n),z=j.useCallback(()=>{L(n),_(!0)},[L,n]),te=j.useCallback(()=>{_(!1),L()},[L]),oe=j.useCallback(async()=>{if(F){A(!0);try{const me=I();await s?.(n.id,me),_(!1)}catch(me){console.error("Save failed:",me)}finally{A(!1)}}},[F,I,s,n.id]),ye=j.useCallback(()=>{confirm("Delete this brand? This cannot be undone.")&&o?.(n.id)},[o,n.id]),Pe=j.useCallback(()=>{l?.(n)},[l,n]),H=j.useCallback(me=>{me.key==="Enter"&&F&&oe(),me.key==="Escape"&&te()},[oe,te,F]),re=m?`border border-app-border rounded-lg p-3 bg-white ${v}`:`card p-0 overflow-hidden ${v}`,_e=m?"w-8 h-8":"w-12 h-12",ke=m?"font-medium text-sm":"font-medium",Te="text-xs text-app-muted";return x&&p?h.jsx("div",{className:re,onKeyDown:H,children:h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("div",{className:"text-sm font-medium",children:"Edit Brand"}),h.jsx("div",{className:"text-xs text-app-muted",children:eo(n)})]}),h.jsx(wh,{form:C,errors:N,touched:D,onFieldChange:q,onFieldBlur:W,disabled:E,showPreview:!1,compact:m}),h.jsxs("div",{className:"flex items-center justify-end gap-2 pt-2 border-t border-app-border",children:[h.jsxs("button",{className:"btn-outline text-sm",onClick:te,disabled:E,type:"button",children:[h.jsx(cg,{className:"w-3 h-3 mr-1"}),"Cancel"]}),h.jsxs("button",{className:"btn text-sm",onClick:oe,disabled:!F||E,type:"button",children:[h.jsx(og,{className:"w-3 h-3 mr-1"}),E?"Saving...":"Save"]})]})]})}):h.jsx("div",{className:re,children:m?h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:`${_e} rounded-full bg-app-muted overflow-hidden flex items-center justify-center flex-shrink-0`,children:Xi(n)?h.jsx("img",{src:Xi(n),alt:"",className:"w-full h-full object-cover"}):h.jsx("div",{className:"text-xs text-app-muted",children:"👤"})}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsxs("div",{className:`${ke} truncate`,children:[eo(n),n.verified?" ✓":""]}),h.jsx("div",{className:`${Te} truncate`,children:$l(n)})]}),u&&h.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[p&&h.jsx("button",{className:"chip text-xs",onClick:z,disabled:y,title:"Edit brand",children:h.jsx(lf,{className:"w-3 h-3"})}),h.jsx("button",{className:"chip text-xs hover:bg-red-50 hover:text-red-600",onClick:ye,disabled:y,title:"Delete brand",children:h.jsx(Bn,{className:"w-3 h-3"})})]})]}):h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"flex items-center gap-3 p-3 border-b",children:[h.jsx("div",{className:`${_e} rounded-full bg-app-muted overflow-hidden flex items-center justify-center flex-shrink-0`,children:Xi(n)?h.jsx("img",{src:Xi(n),alt:"",className:"w-full h-full object-cover"}):h.jsx("div",{className:"text-xs text-app-muted",children:"👤"})}),h.jsxs("div",{className:"min-w-0 flex-1",children:[h.jsx("div",{className:`${ke} truncate`,children:eo(n)}),h.jsx("div",{className:`${Te} truncate`,children:$l(n)}),n.created_at&&h.jsx("div",{className:"text-xs text-app-muted",children:new Date(n.created_at).toLocaleString()})]})]}),h.jsxs("div",{className:"p-3 space-y-3",children:[d&&h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("div",{className:"text-sm",children:"Verified"}),h.jsx("button",{className:`chip ${n.verified?"bg-green-50 border-green-200 text-green-700":"bg-app-muted"}`,onClick:Pe,disabled:y,title:"Toggle verified status",children:n.verified?h.jsxs(h.Fragment,{children:[h.jsx(Jm,{className:"w-3 h-3 mr-1"}),"Verified"]}):h.jsxs(h.Fragment,{children:[h.jsx(Xm,{className:"w-3 h-3 mr-1"}),"Unverified"]})})]}),u&&h.jsxs("div",{className:"flex items-center justify-end gap-2 pt-2 border-t border-app-border",children:[p&&h.jsxs("button",{className:"chip",onClick:z,disabled:y,title:"Edit brand",children:[h.jsx(lf,{className:"w-3 h-3 mr-1"}),"Edit"]}),h.jsxs("button",{className:"chip hover:bg-red-50 hover:text-red-600",onClick:ye,disabled:y,title:"Delete brand",children:[h.jsx(Bn,{className:"w-3 h-3 mr-1"}),"Delete"]})]})]})]})})}),xl=j.memo(function({kind:n="info",children:s}){const o=n==="error"?"bg-red-50 text-red-700 border-red-200":n==="success"?"bg-green-50 text-green-700 border-green-200":"bg-slate-50 text-slate-700 border-slate-200";return h.jsx("div",{className:`border rounded-lg px-3 py-2 text-sm ${o}`,children:s})}),Sy=j.memo(function({user:n,open:s,onClose:o}){const l=n?.id||null;if(!s||!l)return null;const{brands:u,saveBrand:d,removeBrand:p,saving:m,error:y}=Jl(l),{form:v,errors:x,touched:_,isValid:E,resetForm:A,updateField:C,touchField:N,validateForm:D,getFormData:F}=vh(),[L,q]=j.useState(""),[W,I]=j.useState(""),z=!!v.id;j.useEffect(()=>{s||(A(),q(""),I(""))},[s,A]);const te=j.useCallback(()=>{q(""),I("")},[]),oe=j.useCallback(()=>{A(),te()},[A,te]),ye=j.useCallback(re=>{A({...re,id:re.id}),te()},[A,te]),Pe=j.useCallback(async re=>{if(re.preventDefault(),te(),!l){q("You must be signed in.");return}if(!D().isValid){q("Please fix the errors above.");return}try{const ke=F(),Te=z?{...ke,id:v.id}:ke,me=await d(Te);I(z?"Brand updated.":"Brand created."),A({...me})}catch(ke){console.error("Save error:",ke),q(ke?.message||"Failed to save brand.")}},[l,D,F,z,v.id,d,te,A]),H=j.useCallback(async re=>{if(te(),!(!re||!confirm("Delete this brand? This cannot be undone.")))try{await p(re),v.id===re&&oe(),I("Brand deleted.")}catch(ke){console.error("Delete error:",ke),q(ke?.message||"Failed to delete brand.")}},[p,v.id,oe,te]);return h.jsxs("div",{className:"fixed inset-0 z-50",children:[h.jsx("button",{type:"button","aria-label":"Close",onClick:o,className:"absolute inset-0 bg-black/40"}),h.jsxs("div",{className:"absolute left-1/2 top-16 -translate-x-1/2 w-[min(960px,95vw)] max-h-[90vh] bg-white border rounded-2xl shadow-xl overflow-hidden flex flex-col",children:[h.jsxs("div",{className:"px-5 py-4 border-b flex items-center justify-between shrink-0",children:[h.jsx("div",{className:"font-semibold",children:"Brand Manager"}),h.jsx("button",{type:"button",onClick:o,className:"p-1 rounded hover:bg-slate-100","aria-label":"Close",children:h.jsx("svg",{className:"w-4 h-4 text-slate-600",viewBox:"0 0 24 24",stroke:"currentColor",fill:"none",children:h.jsx("path",{d:"M6 6l12 12M18 6l-12 12"})})})]}),h.jsxs("div",{className:"p-5 grid lg:grid-cols-2 gap-6 overflow-y-auto",children:[h.jsxs("form",{onSubmit:Pe,className:"space-y-3",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("div",{className:"text-sm font-medium",children:z?"Edit brand":"Add brand"}),z?h.jsxs("span",{className:"text-xs text-slate-500",children:["Editing: ",v.fb_name||(v.ig_username?`@${v.ig_username}`:"Unnamed")]}):null]}),y?h.jsx(xl,{kind:"error",children:y}):null,L?h.jsx(xl,{kind:"error",children:L}):null,W?h.jsx(xl,{kind:"success",children:W}):null,h.jsx(wh,{form:v,errors:x,touched:_,onFieldChange:C,onFieldBlur:N,disabled:m,showPreview:!0}),h.jsxs("div",{className:"flex items-center gap-2 pt-1",children:[h.jsx("button",{type:"submit",className:"btn",disabled:m||!E,children:m?"Saving...":z?"Save changes":"Save brand"}),h.jsx("button",{type:"button",className:"btn-outline",onClick:oe,disabled:m,children:z?"Cancel":"Clear"}),z&&v.id?h.jsx("button",{type:"button",className:"btn-outline text-red-600 border-red-200 ml-auto",onClick:()=>H(v.id),disabled:m,children:"Delete"}):null]})]}),h.jsxs("div",{className:"space-y-3",children:[h.jsx("div",{className:"text-sm font-medium",children:"Your brands"}),u.length===0?h.jsx("div",{className:"border rounded-xl p-4 text-sm text-slate-500",children:"No brands yet"}):h.jsx("ul",{className:"space-y-2",children:u.map(re=>h.jsxs("li",{children:[h.jsx(_h,{brand:re,onEdit:(_e,ke)=>d({...ke,id:_e}),onDelete:H,showActions:!0,showVerifiedToggle:!1,showInlineEdit:!1,compact:!0,disabled:m,className:"hover:bg-slate-50"}),h.jsx("div",{className:"mt-2 flex justify-end",children:h.jsx("button",{type:"button",className:"chip",onClick:()=>ye(re),disabled:m,children:"Edit in form above"})})]},re.id))}),h.jsx("div",{className:"text-xs text-slate-500",children:"Tip: Editing a brand here does not auto-update existing posts. Reselect the brand on a post to refresh its info."})]})]})]})]})}),xh=i=>{if(!i||typeof i!="string")throw new Error("Invalid user ID provided")},co=i=>{if(!i||typeof i!="string"&&typeof i!="number")throw new Error("Invalid deck ID provided")};async function Mr(i){xh(i);const{data:n,error:s}=await ge.from("decks").select("id, title, created_at").eq("user_id",i).order("created_at",{ascending:!1});if(s)throw s;return n||[]}async function Xl(i,n){if(xh(i),!n?.trim())throw new Error("Deck title is required");const{data:s,error:o}=await ge.from("decks").insert([{user_id:i,title:n.trim()}]).select("id, title, created_at").single();if(o)throw o;return s}async function kh(i){co(i);const{error:n}=await ge.from("decks").delete().eq("id",i);if(n)throw n;return!0}async function Ul(i,n,s=null){if(co(i),!n||typeof n!="object")throw new Error("Invalid post data");let o=s;if(o==null){const{data:d,error:p}=await ge.from("deck_items").select("order_index").eq("deck_id",i).order("order_index",{ascending:!1}).limit(1).maybeSingle();if(p)throw p;o=d?d.order_index+1:0}const{data:l,error:u}=await ge.from("deck_items").insert([{deck_id:i,order_index:o,post_json:n}]).select("id, deck_id, order_index, post_json, created_at").single();if(u)throw u;return l}async function $r(i){co(i);const{data:n,error:s}=await ge.from("deck_items").select("id, deck_id, order_index, post_json, created_at").eq("deck_id",i).order("order_index",{ascending:!0});if(s)throw s;return n||[]}async function by(i){if(!i)throw new Error("Item ID is required");const{error:n}=await ge.from("deck_items").delete().eq("id",i);if(n)throw n;return!0}async function Ey(i){return(await $r(i)).map(s=>s.post_json)}let kl=new Map;function jy(i=32){const n=`token_${i}`;return kl.has(n)&&kl.get(n).length>0?kl.get(n).pop():crypto.getRandomValues(new Uint8Array(i)).reduce((s,o)=>s+o.toString(36),"").slice(0,i)}async function Cy(i,{days:n=7}={}){co(i);const s=jy(32),o=n&&n>0?new Date(Date.now()+n*864e5).toISOString():null,{data:l,error:u}=await ge.from("deck_shares").insert([{deck_id:i,token:s,expires_at:o}]).select("token").single();if(u)throw u;return l.token}function Ny({onOpenForPresent:i,onClose:n}){const{user:s}=Ql(),o=s?.id||s?.user?.id||null,[l,u]=j.useState(!0),[d,p]=j.useState([]),[m,y]=j.useState(""),[v,x]=j.useState(!1),[_,E]=j.useState(null);j.useEffect(()=>{let D=!0;return(async()=>{if(!o){u(!1);return}u(!0);try{const F=await Mr(o);D&&p(F)}catch(F){console.error(F)}finally{D&&u(!1)}})(),()=>{D=!1}},[o]);async function A(){const D=m.trim();if(!(!D||!o)){x(!0);try{const F=await Xl(o,D);p(L=>[F,...L]),y("")}catch(F){console.error(F),alert("Could not create deck")}finally{x(!1)}}}async function C(D){if(D&&confirm("Delete this deck?")){E(D);try{await kh(D),p(F=>F.filter(L=>L.id!==D))}catch(F){console.error(F),alert("Could not delete deck")}finally{E(null)}}}async function N(D){if(D){E(D);try{const F=await $r(D);if(i){const L=F.map(q=>q.post_json);i({deckId:D,count:F.length,posts:L})}else{const L=await Ey(D);alert(`Loaded deck with ${L.length} post(s). Wire onOpenForPresent to present it.`)}n?.()}catch(F){console.error(F),alert("Could not open deck")}finally{E(null)}}}return h.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[h.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:n}),h.jsxs("div",{className:"relative w-full max-w-xl rounded-2xl bg-white shadow-xl border",children:[h.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b",children:[h.jsx("h2",{className:"text-lg font-semibold",children:"Decks"}),h.jsx("button",{className:"px-2 py-1 text-sm rounded hover:bg-slate-100",onClick:n,children:"Close"})]}),h.jsxs("div",{className:"p-4 space-y-4",children:[h.jsxs("div",{className:"flex gap-2",children:[h.jsx("input",{className:"input flex-1",placeholder:"New deck title",value:m,onChange:D=>y(D.target.value),onKeyDown:D=>D.key==="Enter"&&A()}),h.jsx("button",{className:"btn",onClick:A,disabled:v||!m.trim(),children:v?"Creating...":"Create"})]}),l?h.jsx("div",{className:"text-sm text-slate-500",children:"Loading decks..."}):d.length===0?h.jsx("div",{className:"text-sm text-slate-500",children:"No decks yet"}):h.jsx("ul",{className:"space-y-2 max-h-80 overflow-auto pr-1",children:d.map(D=>{const F=_===D.id,L=new Date(D.created_at);return h.jsxs("li",{className:"border rounded-lg p-3 flex items-center justify-between hover:bg-slate-50",children:[h.jsxs("div",{className:"min-w-0",children:[h.jsx("div",{className:"font-medium truncate",children:D.title}),h.jsx("div",{className:"text-xs text-slate-500",children:isNaN(L.getTime())?"":L.toLocaleString()})]}),h.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[h.jsx("button",{className:"px-2 py-1 text-sm rounded border",onClick:()=>N(D.id),disabled:F,title:"Open for Present mode",children:F?"Opening...":"Open"}),h.jsx("button",{className:"px-2 py-1 text-sm rounded border",onClick:()=>C(D.id),disabled:F,title:"Delete deck",children:F?"...":"Delete"})]})]},D.id)})})]})]})]})}function Py(i){return h.jsx(Ny,{...i})}const $f=(...i)=>i.filter(Boolean).join(" ");function Ty({topBarProps:i={},leftPanel:n=null,rightPreview:s=null,modals:o={},singleColumn:l=!1}){const{brandManagerOpen:u=!1,onCloseBrandManager:d=()=>{},deckManagerOpen:p=!1,onCloseDeckManager:m=()=>{},deckManagerOnOpenForPresent:y=null}=o,v=!!n,x=!!s,_=v&&x&&!l;return h.jsxs("div",{className:"app-shell",children:[h.jsx(gy,{...i}),h.jsx("main",{className:$f(l?"mx-auto w-full max-w-screen-2xl px-4":"container-tight","py-4"),style:l?{maxWidth:"1536px"}:void 0,children:h.jsxs("div",{className:$f("grid gap-4 w-full",_?"grid-cols-[minmax(320px,420px)_1fr]":"grid-cols-1"),children:[v?h.jsx("section",{"aria-label":"Primary",className:"min-w-0 w-full",children:n}):null,x?h.jsx("section",{"aria-label":"Live preview",className:"min-w-0 w-full",children:s}):null]})}),u?h.jsx(Sy,{onClose:d}):null,p?h.jsx(Py,{onClose:m,onOpenForPresent:y}):null]})}const oo=(...i)=>i.filter(Boolean).join(" ");function Cr({title:i,children:n}){return h.jsxs("div",{className:"space-y-3",children:[h.jsx("div",{className:"label-strong",children:i}),h.jsx("div",{className:"space-y-3",children:n})]})}function Uf({label:i,checked:n,onChange:s,name:o,value:l,id:u}){return h.jsxs("label",{className:oo("px-3 py-2 rounded-lg border cursor-pointer select-none text-sm transition-colors",n?"bg-app-strong text-white border-app-strong":"bg-white hover:bg-slate-50 border-app-border"),htmlFor:u,children:[h.jsx("input",{id:u,name:o,value:l,type:"radio",className:"sr-only",checked:n,onChange:s}),i]})}function Ry({platform:i,setPlatform:n}){return h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"flex gap-2",children:[h.jsxs("button",{className:oo("btn-outline flex-1 flex items-center justify-center",i==="facebook"?"bg-blue-50 border-blue-300 text-blue-700":""),onClick:()=>n("facebook"),"aria-pressed":i==="facebook",children:[h.jsx("span",{className:"text-blue-600 mr-2 font-bold text-lg",children:"f"}),"Facebook"]}),h.jsxs("button",{className:oo("btn-outline flex-1 flex items-center justify-center",i==="instagram"?"bg-pink-50 border-pink-300 text-pink-700":""),onClick:()=>n("instagram"),"aria-pressed":i==="instagram",children:[h.jsx("span",{className:"mr-2",children:"📷"}),"Instagram"]})]}),h.jsx("div",{className:"text-xs text-app-muted",children:i==="instagram"?"Instagram posts are always square (1:1 aspect ratio)":"Facebook supports multiple aspect ratios - select one below in Media section"})]})}const Ay=j.memo(function(n){const{user:s,post:o,update:l,onDrop:u,handleImageFiles:d,handleVideoFile:p,clearVideo:m,removeImageAt:y,deckActions:v={},openBrandManager:x}=n,{deck:_=[],loadFromDeck:E=()=>{},deleteFromDeck:A=()=>{},duplicateToDeck:C=()=>{},startPresentingDeck:N=()=>{},saveToDeck:D=()=>{},openDeckPicker:F=()=>{},addToDeck:L=()=>{},loadingDeck:q=!1}=v;if(!o)return null;const W=j.useRef(null),I=j.useRef(null),{brands:z}=Jl(s?.id),te=j.useMemo(()=>o?.brandId??o?.brand?.id??null,[o?.brandId,o?.brand?.id]),oe=j.useMemo(()=>z.find(H=>H.id===te)||null,[z,te]),ye=j.useCallback(H=>{if(!H){l({brandId:null,brand:{id:null,name:"",username:"",profileSrc:"",verified:!1}});return}const re=o.platform==="facebook"?H.fb_avatar_url||"":H.ig_avatar_url||"";l({brandId:H.id,brand:{id:H.id,name:H.fb_name||"",username:H.ig_username||"",profileSrc:re,verified:!!H.verified}})},[o.platform,l]),Pe=j.useCallback(H=>{const re=z.find(_e=>_e.id===H)||null;ye(re)},[z,ye]);return h.jsxs("div",{className:"panel overflow-hidden flex flex-col h-full",children:[h.jsxs("div",{className:"panel-header flex items-center gap-2 flex-shrink-0",children:[h.jsx(ag,{className:"w-4 h-4 text-app-body"}),h.jsx("span",{className:"font-medium text-app-strong",children:"Controls"})]}),h.jsx("div",{className:"flex-1 overflow-auto bg-app-surface",style:{height:"calc(100vh - 12rem)"},children:h.jsxs("div",{className:"p-4 space-y-6",children:[h.jsx(Cr,{title:"Platform",children:h.jsx(Ry,{platform:o.platform||"facebook",setPlatform:j.useCallback(H=>l({platform:H}),[l])})}),h.jsx("div",{className:"border-t border-app-border"}),h.jsxs(Cr,{title:"Brand",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs("select",{id:"brand_select",name:"brand_select",className:"select flex-1",value:te||"",onChange:H=>Pe(H.target.value||null),children:[h.jsx("option",{value:"",children:"Select a brand"}),z.map(H=>h.jsxs("option",{value:H.id,children:[H.fb_name||"FB name"," · @",H.ig_username||"ig",H.verified?" ✓":""]},H.id))]}),h.jsx("button",{type:"button",className:"btn-outline flex-shrink-0",onClick:x,children:"Manage"})]}),oe&&h.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-lg",children:[h.jsx("div",{className:"w-10 h-10 rounded-full bg-app-muted overflow-hidden flex items-center justify-center flex-shrink-0",children:o.platform==="facebook"?oe?.fb_avatar_url?h.jsx("img",{src:oe.fb_avatar_url,className:"w-full h-full object-cover",alt:""}):h.jsx(Ir,{className:"w-5 h-5 text-app-muted"}):oe?.ig_avatar_url?h.jsx("img",{src:oe.ig_avatar_url,className:"w-full h-full object-cover",alt:""}):h.jsx(Ir,{className:"w-5 h-5 text-app-muted"})}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsxs("div",{className:"font-medium text-sm truncate",children:[o.platform==="facebook"?oe.fb_name||"Facebook Page":`@${oe.ig_username||"instagram"}`,oe.verified?" ✓":""]}),h.jsxs("div",{className:"text-xs text-app-muted",children:[o.platform==="facebook"?"Facebook":"Instagram"," · ",o.platform==="facebook"?"Page":"Account"]})]})]})]}),h.jsx("div",{className:"border-t border-app-border"}),h.jsx(Cr,{title:"Post copy",children:h.jsxs("div",{children:[h.jsx("label",{htmlFor:"post_caption",className:"sr-only",children:"Post caption"}),h.jsx("textarea",{id:"post_caption",name:"post_caption",className:"textarea",rows:5,value:o.caption||"",onChange:H=>l({caption:H.target.value}),placeholder:"Write your post copy here..."}),h.jsxs("div",{className:"text-xs text-app-muted text-right mt-1",children:[(o.caption||"").length," chars"]})]})}),h.jsx("div",{className:"border-t border-app-border"}),h.jsxs(Cr,{title:"Media",children:[h.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Uf,{id:"type_images",name:"media_type",value:"images",label:"Images",checked:o.type!=="video",onChange:()=>{const re=(o.media?.length||0)>1?"carousel":"single";l({type:re,videoSrc:""})}}),h.jsx(Uf,{id:"type_video",name:"media_type",value:"video",label:"Video",checked:o.type==="video",onChange:()=>l({type:"video"})})]}),h.jsx("div",{className:"flex items-center gap-3 text-sm",children:o.platform==="instagram"?h.jsxs("div",{className:"w-full",children:[h.jsx("label",{className:"block text-xs text-app-muted mb-2",children:"Instagram ad format"}),h.jsxs("select",{className:"select w-full text-sm",value:o.igAdFormat||"feed-1:1",onChange:H=>{const[re,_e]=H.target.value.split("-");l({igAdFormat:H.target.value,fbAspectRatio:_e,igAdType:re,isReel:re==="reels"})},children:[h.jsxs("optgroup",{label:"📸 Feed Ads",children:[h.jsx("option",{value:"feed-1:1",children:"Feed - Square (1:1) - 1080×1080"}),h.jsx("option",{value:"feed-4:5",children:"Feed - Vertical (4:5) - 1080×1350"}),h.jsx("option",{value:"feed-16:9",children:"Feed Video - Landscape (16:9) - up to 60s"})]}),h.jsxs("optgroup",{label:"📱 Stories & Reels",children:[h.jsx("option",{value:"story-9:16",children:"Story Ads - Vertical (9:16) - 1080×1920"}),h.jsx("option",{value:"reels-9:16",children:"Reels Ads - Vertical (9:16) - 1080×1920"})]}),h.jsxs("optgroup",{label:"🔍 Discovery",children:[h.jsx("option",{value:"explore-1:1",children:"Explore - Square (1:1) - 1080×1080"}),h.jsx("option",{value:"explore-4:5",children:"Explore - Vertical (4:5) - 1080×1350"})]}),h.jsxs("optgroup",{label:"🛍️ Shopping",children:[h.jsx("option",{value:"shop-1:1",children:"Shop Ads - Square (1:1) - 1080×1080"}),h.jsx("option",{value:"carousel-1:1",children:"Carousel - Square (1:1) - 1080×1080"})]})]}),h.jsxs("div",{className:"text-xs text-app-muted mt-2",children:[o.igAdFormat==="feed-1:1"&&"Most flexible format, shows in main feed",o.igAdFormat==="feed-4:5"&&"Vertical format, takes up more feed space",o.igAdFormat==="feed-16:9"&&"Landscape video format, up to 60 seconds",o.igAdFormat==="story-9:16"&&"Full-screen vertical, up to 15s per card, best for swipe-up CTAs",o.igAdFormat==="reels-9:16"&&"Plays in Reels feed, feels native, up to 90 seconds",o.igAdFormat==="explore-1:1"&&"Shows in Explore grid when users browse",o.igAdFormat==="explore-4:5"&&"Vertical Explore format for more visual impact",o.igAdFormat==="shop-1:1"&&"Product-focused, connects directly to Instagram Shop",o.igAdFormat==="carousel-1:1"&&"Up to 10 cards, great for multiple products or features",!o.igAdFormat&&"Select an Instagram ad format to see specific notes"]})]}):h.jsxs("div",{className:"w-full",children:[h.jsx("label",{className:"block text-xs text-app-muted mb-2",children:"Facebook ad format"}),h.jsxs("select",{className:"select w-full text-sm",value:o.fbAdFormat||"feed-1:1",onChange:H=>{const[re,_e]=H.target.value.split("-");l({fbAdFormat:H.target.value,fbAspectRatio:_e,fbAdType:re})},children:[h.jsxs("optgroup",{label:"📰 Feed Ads",children:[h.jsx("option",{value:"feed-1:1",children:"Feed - Square (1:1) - 1080×1080"}),h.jsx("option",{value:"feed-4:5",children:"Feed - Vertical (4:5) - 1080×1350"})]}),h.jsxs("optgroup",{label:"🎥 Video Ads",children:[h.jsx("option",{value:"video-4:5",children:"Video Feed - Vertical (4:5) - 1080×1350"}),h.jsx("option",{value:"video-16:9",children:"Video Feed - Landscape (16:9) - 1280×720"}),h.jsx("option",{value:"instream-16:9",children:"In-stream Video - Landscape (16:9) - 1280×720"})]}),h.jsxs("optgroup",{label:"📱 Stories & Reels",children:[h.jsx("option",{value:"story-9:16",children:"Story Ads - Vertical (9:16) - 1080×1920"}),h.jsx("option",{value:"reels-9:16",children:"Reels Ads - Vertical (9:16) - 1080×1920"})]}),h.jsxs("optgroup",{label:"🛍️ Shopping",children:[h.jsx("option",{value:"marketplace-1:1",children:"Marketplace - Square (1:1) - 1080×1080"}),h.jsx("option",{value:"carousel-1:1",children:"Carousel - Square (1:1) - 1080×1080"}),h.jsx("option",{value:"collection-1.91:1",children:"Collection Cover - Landscape (1.91:1) - 1200×628"})]}),h.jsx("optgroup",{label:"💻 Desktop",children:h.jsx("option",{value:"rightcolumn-1:1",children:"Right Column - Square (1:1) - 1200×1200"})})]}),h.jsxs("div",{className:"text-xs text-app-muted mt-2",children:[o.fbAdFormat==="feed-1:1"&&"High visibility feed placement with CTA buttons",o.fbAdFormat==="feed-4:5"&&"Vertical feed format, great for product ads",o.fbAdFormat==="video-4:5"&&"Auto-plays muted, short videos perform better",o.fbAdFormat==="video-16:9"&&"Landscape video format for feed placement",o.fbAdFormat==="instream-16:9"&&"Plays inside longer videos, skippable after 5s",o.fbAdFormat==="story-9:16"&&"Full-screen vertical, same as Instagram Stories",o.fbAdFormat==="reels-9:16"&&"Auto-plays in Reels feed, up to 90 seconds",o.fbAdFormat==="marketplace-1:1"&&"Targets users actively shopping",o.fbAdFormat==="carousel-1:1"&&"Up to 10 cards, great for product showcases",o.fbAdFormat==="collection-1.91:1"&&"Opens Instant Experience, optimized for shopping",o.fbAdFormat==="rightcolumn-1:1"&&"Desktop only, lower CTR but cheap impressions",!o.fbAdFormat&&"Select a Facebook ad format to see specific notes"]})]})})]}),h.jsxs("div",{onDragOver:H=>{H.preventDefault(),H.stopPropagation()},onDrop:u,className:"border-2 border-dashed border-app-border rounded-lg p-6 text-center bg-slate-50/50 hover:bg-slate-50 transition-colors",children:[h.jsx("p",{className:"text-sm text-app-body mb-3",children:"Drag files here, or"}),h.jsxs("div",{className:"flex items-center justify-center gap-2 flex-wrap",children:[h.jsxs("button",{className:"btn",onClick:()=>W.current?.click(),children:[h.jsx(Ir,{className:"w-4 h-4 mr-2"}),"Add images"]}),h.jsxs("button",{className:"btn-outline",onClick:()=>I.current?.click(),children:[h.jsx(ug,{className:"w-4 h-4 mr-2"}),"Add video"]})]}),h.jsx("input",{id:"image_files",name:"image_files",ref:W,type:"file",accept:"image/*",multiple:!0,className:"sr-only",onChange:async H=>{H.target.files&&await d(H.target.files)}}),h.jsx("input",{id:"video_file",name:"video_file",ref:I,type:"file",accept:"video/mp4,video/webm,video/quicktime",className:"sr-only",onChange:async H=>{const re=H.target.files?.[0];re&&await p(re)}})]}),o.type!=="video"&&o.media?.length?h.jsx("div",{className:"grid grid-cols-5 gap-2",children:o.media.map((H,re)=>h.jsxs("div",{className:oo("relative rounded-lg overflow-hidden border cursor-pointer transition-all",re===o.activeIndex?"ring-2 ring-brand-500 border-brand-500":"border-app-border hover:border-brand-300"),onClick:()=>l({activeIndex:re}),children:[h.jsx("img",{src:H,className:"w-full h-16 object-cover block",alt:""}),h.jsx("button",{className:"absolute top-1 right-1 bg-white/90 hover:bg-white rounded-full p-1 shadow-sm transition-colors",onClick:_e=>{_e.stopPropagation(),y(re)},title:"Remove",children:h.jsx(Bn,{className:"w-3 h-3"})})]},re))}):null,o.type==="video"&&o.videoSrc?h.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border border-app-border",children:[h.jsx("div",{className:"text-sm text-app-body",children:"Video loaded"}),h.jsxs("button",{className:"chip hover:bg-red-50 hover:text-red-600 transition-colors",onClick:m,children:[h.jsx(Bn,{className:"w-3 h-3 mr-1"}),"Remove video"]})]}):null,o.type!=="video"&&(o.media?.length||0)>0?h.jsxs("div",{children:[h.jsxs("label",{htmlFor:"image_headline",className:"block text-xs text-app-muted mb-2",children:["Headline for image ",o.activeIndex+1]}),h.jsx("input",{id:"image_headline",name:"image_headline",className:"input",placeholder:"Enter headline for this image",value:o.mediaMeta?.[o.activeIndex]?.headline||"",onChange:H=>{const re=(o.mediaMeta||[]).slice(),_e=o.activeIndex||0;re[_e]={...re[_e]||{},headline:H.target.value},l({mediaMeta:re})}})]}):null]}),h.jsx("div",{className:"border-t border-app-border"}),o.platform==="facebook"&&h.jsx(Cr,{title:"Link preview (Facebook style)",children:h.jsxs("div",{className:"space-y-3",children:[h.jsx("input",{id:"link_headline",name:"link_headline",className:"input",placeholder:"Headline",value:o.link?.headline||"",onChange:H=>l({link:{...o.link||{},headline:H.target.value}})}),h.jsx("input",{id:"link_subhead",name:"link_subhead",className:"input",placeholder:"Subhead",value:o.link?.subhead||"",onChange:H=>l({link:{...o.link||{},subhead:H.target.value}})}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("input",{id:"link_url",name:"link_url",className:"input flex-1",placeholder:"Link URL",value:o.link?.url||"",onChange:H=>l({link:{...o.link||{},url:H.target.value}}),autoComplete:"url"}),h.jsx("select",{id:"link_cta",name:"link_cta",className:"select w-auto",value:o.link?.cta||"Learn More",onChange:H=>l({link:{...o.link||{},cta:H.target.value}}),children:["Learn More","Shop Now","Sign Up","Download","Book Now","Contact Us"].map(H=>h.jsx("option",{value:H,children:H},H))})]})]})}),o.platform==="facebook"&&h.jsx("div",{className:"border-t border-app-border"}),h.jsxs(Cr,{title:"Deck (multiple posts)",children:[h.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[h.jsxs("button",{className:"btn",onClick:()=>F?.(),children:[h.jsx(Ir,{className:"w-4 h-4 mr-2"}),"Add this post to deck"]}),h.jsx("button",{className:"btn-outline",title:"Quick save with title prompt",onClick:()=>D?.(),children:"Quick save"}),_.length>0&&h.jsxs("button",{className:"btn-outline",onClick:()=>N(_[0]?.id),disabled:!_.length,children:[h.jsx(bl,{className:"w-4 h-4 mr-2"}),"Present deck"]})]}),_.length>0&&h.jsx("div",{className:"space-y-2 max-h-56 overflow-auto pr-1",children:_.map(H=>h.jsxs("div",{className:"flex items-center justify-between border border-app-border rounded-lg p-3 hover:bg-slate-50 transition-colors",children:[h.jsxs("div",{className:"text-sm min-w-0",children:[h.jsx("div",{className:"font-medium text-app-strong truncate",children:new Date(H.createdAt).toLocaleString()}),h.jsxs("div",{className:"text-xs text-app-muted truncate",children:[H.post?.brand?.name||"Brand"," · ",H.post?.platform||"facebook"," ·"," ",H.post?.type||"single"]})]}),h.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[h.jsxs("button",{className:"chip text-xs",onClick:()=>E(H.id),children:[h.jsx(Zm,{className:"w-3 h-3 mr-1"}),"Load"]}),h.jsxs("button",{className:"chip text-xs",onClick:()=>C(H.id),children:[h.jsx(Ym,{className:"w-3 h-3 mr-1"}),"Duplicate"]}),h.jsxs("button",{className:"chip text-xs",onClick:()=>N(H.id),children:[h.jsx(bl,{className:"w-3 h-3 mr-1"}),"Start here"]}),h.jsxs("button",{className:"chip text-xs hover:bg-red-50 hover:text-red-600 transition-colors",onClick:()=>A(H.id),children:[h.jsx(Bn,{className:"w-3 h-3 mr-1"}),"Remove"]})]})]},H.id))})]})]})})]})}),Ml=["Learn More","Shop Now","Sign Up","Download","Book Now","Contact Us"],Sh=["facebook","instagram"],bh=["single","carousel","video"],Oy=["1:1","4:5","9:16","16:9","1.91:1"],Fl=Object.freeze({id:null,name:"Your Brand",username:"yourbrand",profileSrc:"",verified:!1}),Iy=Object.freeze({headline:"",subhead:"",url:"",cta:Ml[0]}),Ar=Object.freeze({likes:128,comments:24,shares:12,saves:9,views:10234}),Eh=Object.freeze({id:null,platform:"facebook",type:"single",isReel:!1,caption:"Write your post copy here...",media:[],mediaMeta:[],videoSrc:"",muted:!0,playing:!1,activeIndex:0,fbAspectRatio:"1:1",fbAdFormat:"feed-1:1",fbAdType:"feed",igAdFormat:"feed-1:1",igAdType:"feed",link:{...Iy},brand:{...Fl},metrics:{...Ar},brandId:null}),ct=i=>typeof i=="string",Yl=i=>Array.isArray(i),Zl=i=>i&&typeof i=="object",Or=i=>Number.isFinite(i);function Ly(i){return i&&typeof i=="object"&&Sh.includes(i.platform)&&bh.includes(i.type)&&Yl(i.media)&&ct(i.caption)}function Dy(i){return Yl(i)?i.filter(Boolean).slice(0,5):[]}function $y(i,n){const s=Yl(i)?i:[];return Array.from({length:n},(o,l)=>({headline:ct(s[l]?.headline)?s[l].headline:""}))}function Uy(i,n){return Or(i)?Math.max(0,Math.min(i,Math.max(0,n-1))):0}function My(i){return Oy.includes(i.fbAspectRatio)?i.fbAspectRatio:i.fbSquare!==void 0?i.fbSquare?"1:1":"16:9":"1:1"}function Fy(i){const n=Zl(i)?i:{};return{headline:ct(n.headline)?n.headline:"",subhead:ct(n.subhead)?n.subhead:"",url:ct(n.url)?n.url.trim():"",cta:Ml.includes(n.cta)?n.cta:Ml[0]}}function zy(i,n){const s=Zl(i)?i:{},o=(typeof n=="string"&&n.length?n:null)??(typeof s.id=="string"&&s.id.length?s.id:null);return{id:(typeof s.id=="string"&&s.id.length?s.id:null)??o,name:ct(s.name)?s.name:Fl.name,username:ct(s.username)?s.username:Fl.username,profileSrc:ct(s.profileSrc)?s.profileSrc:"",verified:!!s.verified}}function By(i){const n=Zl(i)?i:{};return{likes:Or(n.likes)?n.likes:Ar.likes,comments:Or(n.comments)?n.comments:Ar.comments,shares:Or(n.shares)?n.shares:Ar.shares,saves:Or(n.saves)?n.saves:Ar.saves,views:Or(n.views)?n.views:Ar.views}}function Ce(i){if(Ly(i))return i;const n=i&&typeof i=="object"?i:{},s={...Eh};return s.id=n.id??s.id,s.platform=Sh.includes(n.platform)?n.platform:"facebook",s.type=bh.includes(n.type)?n.type:null,s.isReel=!!n.isReel,s.caption=ct(n.caption)?n.caption:s.caption,s.media=Dy(n.media),s.mediaMeta=$y(n.mediaMeta,s.media.length),s.videoSrc=ct(n.videoSrc)?n.videoSrc:"",s.muted=n.muted??!0,s.playing=n.playing??!1,s.activeIndex=Uy(n.activeIndex,s.media.length),s.fbAspectRatio=My(n),s.fbAdFormat=ct(n.fbAdFormat)?n.fbAdFormat:"feed-1:1",s.fbAdType=ct(n.fbAdType)?n.fbAdType:"feed",s.igAdFormat=ct(n.igAdFormat)?n.igAdFormat:"feed-1:1",s.igAdType=ct(n.igAdType)?n.igAdType:"feed",s.link=Fy(n.link),s.brand=zy(n.brand,n.brandId),s.brandId=s.brand.id,s.metrics=By(n.metrics),s.type||(s.type=s.videoSrc?"video":s.media.length>1?"carousel":"single"),s}function Vy(i){return j.useMemo(()=>Ce(i),[i])}function Wy(i,n){if(i.match(/^[a-z]+:\/\//i))return i;if(i.match(/^\/\//))return window.location.protocol+i;if(i.match(/^[a-z]+:/i))return i;const s=document.implementation.createHTMLDocument(),o=s.createElement("base"),l=s.createElement("a");return s.head.appendChild(o),s.body.appendChild(l),n&&(o.href=n),l.href=i,l.href}const Hy=(()=>{let i=0;const n=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(i+=1,`u${n()}${i}`)})();function Sn(i){const n=[];for(let s=0,o=i.length;s<o;s++)n.push(i[s]);return n}let Nr=null;function jh(i={}){return Nr||(i.includeStyleProperties?(Nr=i.includeStyleProperties,Nr):(Nr=Sn(window.getComputedStyle(document.documentElement)),Nr))}function ao(i,n){const o=(i.ownerDocument.defaultView||window).getComputedStyle(i).getPropertyValue(n);return o?parseFloat(o.replace("px","")):0}function qy(i){const n=ao(i,"border-left-width"),s=ao(i,"border-right-width");return i.clientWidth+n+s}function Ky(i){const n=ao(i,"border-top-width"),s=ao(i,"border-bottom-width");return i.clientHeight+n+s}function Ch(i,n={}){const s=n.width||qy(i),o=n.height||Ky(i);return{width:s,height:o}}function Gy(){let i,n;try{n=process}catch{}const s=n&&n.env?n.env.devicePixelRatio:null;return s&&(i=parseInt(s,10),Number.isNaN(i)&&(i=1)),i||window.devicePixelRatio||1}const yt=16384;function Qy(i){(i.width>yt||i.height>yt)&&(i.width>yt&&i.height>yt?i.width>i.height?(i.height*=yt/i.width,i.width=yt):(i.width*=yt/i.height,i.height=yt):i.width>yt?(i.height*=yt/i.width,i.width=yt):(i.width*=yt/i.height,i.height=yt))}function lo(i){return new Promise((n,s)=>{const o=new Image;o.onload=()=>{o.decode().then(()=>{requestAnimationFrame(()=>n(o))})},o.onerror=s,o.crossOrigin="anonymous",o.decoding="async",o.src=i})}async function Jy(i){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(i)).then(encodeURIComponent).then(n=>`data:image/svg+xml;charset=utf-8,${n}`)}async function Xy(i,n,s){const o="http://www.w3.org/2000/svg",l=document.createElementNS(o,"svg"),u=document.createElementNS(o,"foreignObject");return l.setAttribute("width",`${n}`),l.setAttribute("height",`${s}`),l.setAttribute("viewBox",`0 0 ${n} ${s}`),u.setAttribute("width","100%"),u.setAttribute("height","100%"),u.setAttribute("x","0"),u.setAttribute("y","0"),u.setAttribute("externalResourcesRequired","true"),l.appendChild(u),u.appendChild(i),Jy(l)}const dt=(i,n)=>{if(i instanceof n)return!0;const s=Object.getPrototypeOf(i);return s===null?!1:s.constructor.name===n.name||dt(s,n)};function Yy(i){const n=i.getPropertyValue("content");return`${i.cssText} content: '${n.replace(/'|"/g,"")}';`}function Zy(i,n){return jh(n).map(s=>{const o=i.getPropertyValue(s),l=i.getPropertyPriority(s);return`${s}: ${o}${l?" !important":""};`}).join(" ")}function e0(i,n,s,o){const l=`.${i}:${n}`,u=s.cssText?Yy(s):Zy(s,o);return document.createTextNode(`${l}{${u}}`)}function Mf(i,n,s,o){const l=window.getComputedStyle(i,s),u=l.getPropertyValue("content");if(u===""||u==="none")return;const d=Hy();try{n.className=`${n.className} ${d}`}catch{return}const p=document.createElement("style");p.appendChild(e0(d,s,l,o)),n.appendChild(p)}function t0(i,n,s){Mf(i,n,":before",s),Mf(i,n,":after",s)}const Ff="application/font-woff",zf="image/jpeg",n0={woff:Ff,woff2:Ff,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:zf,jpeg:zf,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function r0(i){const n=/\.([^./]*?)$/g.exec(i);return n?n[1]:""}function eu(i){const n=r0(i).toLowerCase();return n0[n]||""}function s0(i){return i.split(/,/)[1]}function zl(i){return i.search(/^(data:)/)!==-1}function i0(i,n){return`data:${n};base64,${i}`}async function Nh(i,n,s){const o=await fetch(i,n);if(o.status===404)throw new Error(`Resource "${o.url}" not found`);const l=await o.blob();return new Promise((u,d)=>{const p=new FileReader;p.onerror=d,p.onloadend=()=>{try{u(s({res:o,result:p.result}))}catch(m){d(m)}},p.readAsDataURL(l)})}const Sl={};function o0(i,n,s){let o=i.replace(/\?.*/,"");return s&&(o=i),/ttf|otf|eot|woff2?/i.test(o)&&(o=o.replace(/.*\//,"")),n?`[${n}]${o}`:o}async function tu(i,n,s){const o=o0(i,n,s.includeQueryParams);if(Sl[o]!=null)return Sl[o];s.cacheBust&&(i+=(/\?/.test(i)?"&":"?")+new Date().getTime());let l;try{const u=await Nh(i,s.fetchRequestInit,({res:d,result:p})=>(n||(n=d.headers.get("Content-Type")||""),s0(p)));l=i0(u,n)}catch(u){l=s.imagePlaceholder||"";let d=`Failed to fetch resource: ${i}`;u&&(d=typeof u=="string"?u:u.message),d&&console.warn(d)}return Sl[o]=l,l}async function a0(i){const n=i.toDataURL();return n==="data:,"?i.cloneNode(!1):lo(n)}async function l0(i,n){if(i.currentSrc){const u=document.createElement("canvas"),d=u.getContext("2d");u.width=i.clientWidth,u.height=i.clientHeight,d?.drawImage(i,0,0,u.width,u.height);const p=u.toDataURL();return lo(p)}const s=i.poster,o=eu(s),l=await tu(s,o,n);return lo(l)}async function u0(i,n){var s;try{if(!((s=i?.contentDocument)===null||s===void 0)&&s.body)return await fo(i.contentDocument.body,n,!0)}catch{}return i.cloneNode(!1)}async function c0(i,n){return dt(i,HTMLCanvasElement)?a0(i):dt(i,HTMLVideoElement)?l0(i,n):dt(i,HTMLIFrameElement)?u0(i,n):i.cloneNode(Ph(i))}const d0=i=>i.tagName!=null&&i.tagName.toUpperCase()==="SLOT",Ph=i=>i.tagName!=null&&i.tagName.toUpperCase()==="SVG";async function f0(i,n,s){var o,l;if(Ph(n))return n;let u=[];return d0(i)&&i.assignedNodes?u=Sn(i.assignedNodes()):dt(i,HTMLIFrameElement)&&(!((o=i.contentDocument)===null||o===void 0)&&o.body)?u=Sn(i.contentDocument.body.childNodes):u=Sn(((l=i.shadowRoot)!==null&&l!==void 0?l:i).childNodes),u.length===0||dt(i,HTMLVideoElement)||await u.reduce((d,p)=>d.then(()=>fo(p,s)).then(m=>{m&&n.appendChild(m)}),Promise.resolve()),n}function h0(i,n,s){const o=n.style;if(!o)return;const l=window.getComputedStyle(i);l.cssText?(o.cssText=l.cssText,o.transformOrigin=l.transformOrigin):jh(s).forEach(u=>{let d=l.getPropertyValue(u);u==="font-size"&&d.endsWith("px")&&(d=`${Math.floor(parseFloat(d.substring(0,d.length-2)))-.1}px`),dt(i,HTMLIFrameElement)&&u==="display"&&d==="inline"&&(d="block"),u==="d"&&n.getAttribute("d")&&(d=`path(${n.getAttribute("d")})`),o.setProperty(u,d,l.getPropertyPriority(u))})}function p0(i,n){dt(i,HTMLTextAreaElement)&&(n.innerHTML=i.value),dt(i,HTMLInputElement)&&n.setAttribute("value",i.value)}function m0(i,n){if(dt(i,HTMLSelectElement)){const s=n,o=Array.from(s.children).find(l=>i.value===l.getAttribute("value"));o&&o.setAttribute("selected","")}}function g0(i,n,s){return dt(n,Element)&&(h0(i,n,s),t0(i,n,s),p0(i,n),m0(i,n)),n}async function v0(i,n){const s=i.querySelectorAll?i.querySelectorAll("use"):[];if(s.length===0)return i;const o={};for(let u=0;u<s.length;u++){const p=s[u].getAttribute("xlink:href");if(p){const m=i.querySelector(p),y=document.querySelector(p);!m&&y&&!o[p]&&(o[p]=await fo(y,n,!0))}}const l=Object.values(o);if(l.length){const u="http://www.w3.org/1999/xhtml",d=document.createElementNS(u,"svg");d.setAttribute("xmlns",u),d.style.position="absolute",d.style.width="0",d.style.height="0",d.style.overflow="hidden",d.style.display="none";const p=document.createElementNS(u,"defs");d.appendChild(p);for(let m=0;m<l.length;m++)p.appendChild(l[m]);i.appendChild(d)}return i}async function fo(i,n,s){return!s&&n.filter&&!n.filter(i)?null:Promise.resolve(i).then(o=>c0(o,n)).then(o=>f0(i,o,n)).then(o=>g0(i,o,n)).then(o=>v0(o,n))}const Th=/url\((['"]?)([^'"]+?)\1\)/g,y0=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,w0=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function _0(i){const n=i.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${n})(['"]?\\))`,"g")}function x0(i){const n=[];return i.replace(Th,(s,o,l)=>(n.push(l),s)),n.filter(s=>!zl(s))}async function k0(i,n,s,o,l){try{const u=s?Wy(n,s):n,d=eu(n);let p;return l||(p=await tu(u,d,o)),i.replace(_0(n),`$1${p}$3`)}catch{}return i}function S0(i,{preferredFontFormat:n}){return n?i.replace(w0,s=>{for(;;){const[o,,l]=y0.exec(s)||[];if(!l)return"";if(l===n)return`src: ${o};`}}):i}function Rh(i){return i.search(Th)!==-1}async function Ah(i,n,s){if(!Rh(i))return i;const o=S0(i,s);return x0(o).reduce((u,d)=>u.then(p=>k0(p,d,n,s)),Promise.resolve(o))}async function Pr(i,n,s){var o;const l=(o=n.style)===null||o===void 0?void 0:o.getPropertyValue(i);if(l){const u=await Ah(l,null,s);return n.style.setProperty(i,u,n.style.getPropertyPriority(i)),!0}return!1}async function b0(i,n){await Pr("background",i,n)||await Pr("background-image",i,n),await Pr("mask",i,n)||await Pr("-webkit-mask",i,n)||await Pr("mask-image",i,n)||await Pr("-webkit-mask-image",i,n)}async function E0(i,n){const s=dt(i,HTMLImageElement);if(!(s&&!zl(i.src))&&!(dt(i,SVGImageElement)&&!zl(i.href.baseVal)))return;const o=s?i.src:i.href.baseVal,l=await tu(o,eu(o),n);await new Promise((u,d)=>{i.onload=u,i.onerror=n.onImageErrorHandler?(...m)=>{try{u(n.onImageErrorHandler(...m))}catch(y){d(y)}}:d;const p=i;p.decode&&(p.decode=u),p.loading==="lazy"&&(p.loading="eager"),s?(i.srcset="",i.src=l):i.href.baseVal=l})}async function j0(i,n){const o=Sn(i.childNodes).map(l=>Oh(l,n));await Promise.all(o).then(()=>i)}async function Oh(i,n){dt(i,Element)&&(await b0(i,n),await E0(i,n),await j0(i,n))}function C0(i,n){const{style:s}=i;n.backgroundColor&&(s.backgroundColor=n.backgroundColor),n.width&&(s.width=`${n.width}px`),n.height&&(s.height=`${n.height}px`);const o=n.style;return o!=null&&Object.keys(o).forEach(l=>{s[l]=o[l]}),i}const Bf={};async function Vf(i){let n=Bf[i];if(n!=null)return n;const o=await(await fetch(i)).text();return n={url:i,cssText:o},Bf[i]=n,n}async function Wf(i,n){let s=i.cssText;const o=/url\(["']?([^"')]+)["']?\)/g,u=(s.match(/url\([^)]+\)/g)||[]).map(async d=>{let p=d.replace(o,"$1");return p.startsWith("https://")||(p=new URL(p,i.url).href),Nh(p,n.fetchRequestInit,({result:m})=>(s=s.replace(d,`url(${m})`),[d,m]))});return Promise.all(u).then(()=>s)}function Hf(i){if(i==null)return[];const n=[],s=/(\/\*[\s\S]*?\*\/)/gi;let o=i.replace(s,"");const l=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const m=l.exec(o);if(m===null)break;n.push(m[0])}o=o.replace(l,"");const u=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,d="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",p=new RegExp(d,"gi");for(;;){let m=u.exec(o);if(m===null){if(m=p.exec(o),m===null)break;u.lastIndex=p.lastIndex}else p.lastIndex=u.lastIndex;n.push(m[0])}return n}async function N0(i,n){const s=[],o=[];return i.forEach(l=>{if("cssRules"in l)try{Sn(l.cssRules||[]).forEach((u,d)=>{if(u.type===CSSRule.IMPORT_RULE){let p=d+1;const m=u.href,y=Vf(m).then(v=>Wf(v,n)).then(v=>Hf(v).forEach(x=>{try{l.insertRule(x,x.startsWith("@import")?p+=1:l.cssRules.length)}catch(_){console.error("Error inserting rule from remote css",{rule:x,error:_})}})).catch(v=>{console.error("Error loading remote css",v.toString())});o.push(y)}})}catch(u){const d=i.find(p=>p.href==null)||document.styleSheets[0];l.href!=null&&o.push(Vf(l.href).then(p=>Wf(p,n)).then(p=>Hf(p).forEach(m=>{d.insertRule(m,d.cssRules.length)})).catch(p=>{console.error("Error loading remote stylesheet",p)})),console.error("Error inlining remote css file",u)}}),Promise.all(o).then(()=>(i.forEach(l=>{if("cssRules"in l)try{Sn(l.cssRules||[]).forEach(u=>{s.push(u)})}catch(u){console.error(`Error while reading CSS rules from ${l.href}`,u)}}),s))}function P0(i){return i.filter(n=>n.type===CSSRule.FONT_FACE_RULE).filter(n=>Rh(n.style.getPropertyValue("src")))}async function T0(i,n){if(i.ownerDocument==null)throw new Error("Provided element is not within a Document");const s=Sn(i.ownerDocument.styleSheets),o=await N0(s,n);return P0(o)}function Ih(i){return i.trim().replace(/["']/g,"")}function R0(i){const n=new Set;function s(o){(o.style.fontFamily||getComputedStyle(o).fontFamily).split(",").forEach(u=>{n.add(Ih(u))}),Array.from(o.children).forEach(u=>{u instanceof HTMLElement&&s(u)})}return s(i),n}async function A0(i,n){const s=await T0(i,n),o=R0(i);return(await Promise.all(s.filter(u=>o.has(Ih(u.style.fontFamily))).map(u=>{const d=u.parentStyleSheet?u.parentStyleSheet.href:null;return Ah(u.cssText,d,n)}))).join(`
`)}async function O0(i,n){const s=n.fontEmbedCSS!=null?n.fontEmbedCSS:n.skipFonts?null:await A0(i,n);if(s){const o=document.createElement("style"),l=document.createTextNode(s);o.appendChild(l),i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o)}}async function I0(i,n={}){const{width:s,height:o}=Ch(i,n),l=await fo(i,n,!0);return await O0(l,n),await Oh(l,n),C0(l,n),await Xy(l,s,o)}async function L0(i,n={}){const{width:s,height:o}=Ch(i,n),l=await I0(i,n),u=await lo(l),d=document.createElement("canvas"),p=d.getContext("2d"),m=n.pixelRatio||Gy(),y=n.canvasWidth||s,v=n.canvasHeight||o;return d.width=y*m,d.height=v*m,n.skipAutoScale||Qy(d),d.style.width=`${y}`,d.style.height=`${v}`,n.backgroundColor&&(p.fillStyle=n.backgroundColor,p.fillRect(0,0,d.width,d.height)),p.drawImage(u,0,0,d.width,d.height),d}async function D0(i,n={}){return(await L0(i,n)).toDataURL()}async function $0(i,n=8e3){const s=Array.from(i.querySelectorAll("img"));if(s.length===0)return;const o=s.filter(l=>!(l.complete&&l.naturalWidth>0));o.length!==0&&await new Promise(l=>{let u=0;const d=()=>{u+=1,u===o.length&&l()};setTimeout(()=>l(),n),o.forEach(p=>{const m=()=>{p.removeEventListener("load",m),d()},y=()=>{p.removeEventListener("error",y),d()};p.addEventListener("load",m),p.addEventListener("error",y)})})}function Lh(){const[i,n]=j.useState(!1),[s,o]=j.useState(!1),l=j.useRef(null),u=j.useRef([]),d=j.useCallback(y=>{if(!y)return!1;const v=Array.from(y.querySelectorAll("img"));return v.length===0?!0:v.every(x=>x.complete&&x.naturalWidth>0)},[]),p=j.useCallback(y=>{if(u.current.forEach(x=>{try{x()}catch{}}),u.current=[],l.current=y,!y){o(!1);return}o(d(y)),Array.from(y.querySelectorAll("img")).forEach(x=>{const _=()=>o(d(y));x.addEventListener("load",_),x.addEventListener("error",_),u.current.push(()=>{x.removeEventListener("load",_),x.removeEventListener("error",_)})})},[d]),m=j.useCallback(async(y,v=`mockup-${Date.now()}.png`)=>{const x=y?.current||l.current;if(!(!x||i)){n(!0);try{await $0(x),await new Promise(A=>setTimeout(A,100));const _=await D0(x,{pixelRatio:2,cacheBust:!0,quality:1,backgroundColor:"#ffffff",style:{transform:"scale(1)",transformOrigin:"top left"}}),E=document.createElement("a");return E.href=_,E.download=v,document.body.appendChild(E),E.click(),document.body.removeChild(E),!0}catch(_){throw console.error("PNG export failed:",_),new Error(`Export failed: ${_.message}`)}finally{n(!1),o(d(l.current))}}},[i,d]);return{isExporting:i,imagesReady:s,exportAsPng:m,attachNode:p}}const Yi=(...i)=>i.filter(Boolean).join(" "),nu=j.forwardRef(function({post:n,setPost:s,mode:o="create",saveAsPng:l,savingImg:u=!1,videoRef:d,clamp:p,showExport:m=!0},y){const v=j.useMemo(()=>Ce(n||{}),[n]),x=v.media?.length||0,_=v.activeIndex||0,E=v.platform==="instagram"?v.igAdFormat?v.igAdFormat.split("-")[1]:"1:1":v.fbAspectRatio||"1:1",C=j.useMemo(()=>oe=>{switch(oe){case"1:1":return"aspect-square";case"4:5":return"aspect-[4/5]";case"9:16":return"aspect-[9/16]";case"16:9":return"aspect-video";case"1.91:1":return"aspect-[1.91/1]";default:return"aspect-square"}},[])(E),N=j.useMemo(()=>{const oe=E==="9:16"||E==="4:5",ye=E==="16:9"||E==="1.91:1";return o==="present"?oe?{maxWidth:"min(400px, 85vw)",maxHeight:"85vh"}:ye?{maxWidth:"min(720px, 90vw)",maxHeight:"70vh"}:{maxWidth:"min(500px, 85vw)",maxHeight:"85vh"}:oe?{maxWidth:"min(320px, 75vw)",maxHeight:"75vh"}:ye?{maxWidth:"min(560px, 85vw)",maxHeight:"60vh"}:{maxWidth:"min(400px, 80vw)",maxHeight:"75vh"}},[E,o]),D=j.useMemo(()=>p?{width:"100%",maxWidth:`min(${p.maxPx||560}px, ${p.maxVmin||80}vmin)`}:{width:"100%",...N},[p,N]),{isExporting:F,imagesReady:L,exportAsPng:q,attachNode:W}=Lh?.()||{isExporting:u,imagesReady:!0,exportAsPng:l,attachNode:null};j.useEffect(()=>{_>Math.max(0,x-1)&&s(oe=>({...Ce(oe),activeIndex:Math.max(0,x-1)}))},[_,x,s]);const I=j.useCallback(oe=>{s(ye=>{const Pe=Ce(ye),H=Pe.media?.length||0;if(H<2)return Pe;const re=oe==="prev"?((Pe.activeIndex||0)-1+H)%H:((Pe.activeIndex||0)+1)%H;return{...Pe,activeIndex:re}})},[s]),z=j.useCallback(()=>I("prev"),[I]),te=j.useCallback(()=>I("next"),[I]);return j.useEffect(()=>{if(o!=="present")return;const oe=ye=>{ye.key==="ArrowLeft"&&z(),ye.key==="ArrowRight"&&te()};return window.addEventListener("keydown",oe),()=>window.removeEventListener("keydown",oe)},[o,z,te]),j.useEffect(()=>{W&&y?.current&&W(y.current)},[W,y,v.media,v.videoSrc,v.platform,_]),h.jsxs("div",{className:Yi(v.platform==="instagram"?"ig-ui":"fb-ui","h-full flex flex-col"),children:[m?h.jsx("div",{className:"flex justify-end mb-2 flex-shrink-0",children:h.jsx("button",{className:Yi("btn-outline",(F||!L)&&"opacity-50 cursor-not-allowed"),disabled:F||!L,onClick:()=>q(y),title:L?"Export PNG":"Waiting for images to load...",children:F?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"w-4 h-4 mr-2 border-2 border-slate-500 border-t-transparent rounded-full animate-spin"}),"Exporting..."]}):L?"Export PNG":"Loading images..."})}):null,h.jsx("div",{className:"flex-1 flex items-center justify-center overflow-hidden p-2",children:h.jsx("div",{className:"w-full h-full flex items-center justify-center",children:h.jsx("div",{className:"mx-auto flex-shrink-0",style:D,children:h.jsxs("div",{ref:y,className:"card p-0 overflow-hidden w-full",children:[h.jsxs("div",{className:"flex items-center gap-3 p-3",children:[h.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-200 overflow-hidden shrink-0",children:v.brand?.profileSrc?h.jsx("img",{src:v.brand.profileSrc,alt:"",className:"w-full h-full object-cover",draggable:!1}):null}),h.jsxs("div",{className:"min-w-0",children:[h.jsxs("div",{className:"brand-name font-medium truncate",children:[v.brand?.name||v.brand?.username||"Brand",v.brand?.verified?h.jsx("span",{className:"ml-1 align-middle text-sky-500",children:"✓"}):null]}),h.jsx("div",{className:"meta text-xs text-slate-500 truncate",children:v.platform==="instagram"?`@${v.brand?.username||"username"}`:"Facebook · Now"})]})]}),v.caption?h.jsx("div",{className:"px-3 pb-3",children:h.jsx("div",{className:"whitespace-pre-wrap text-sm",children:v.caption})}):null,h.jsx("div",{className:"w-full",children:h.jsxs("div",{className:Yi("relative border-t border-b bg-black/5",C),children:[v.type==="video"&&v.videoSrc?h.jsx("video",{ref:d,src:v.videoSrc,className:"absolute inset-0 w-full h-full object-cover",autoPlay:v.playing,muted:v.muted,loop:!0,playsInline:!0}):x>0?h.jsx("img",{src:v.media[_],alt:"",className:"absolute inset-0 w-full h-full object-cover",draggable:!1}):h.jsx("div",{className:"absolute inset-0 grid place-items-center text-sm text-slate-500",children:"Add media"}),v.type!=="video"&&x>0&&(v.mediaMeta?.[_]?.headline||"").trim()?h.jsx("div",{className:"absolute left-3 top-3 bg-white/90 px-2 py-1 rounded shadow text-sm",children:v.mediaMeta[_].headline}):null,v.type!=="video"&&x>1?h.jsxs("div",{className:"absolute inset-0 p-2 pointer-events-none",children:[h.jsxs("div",{className:"h-full flex items-center justify-between",children:[h.jsx("button",{type:"button",className:"pointer-events-auto w-8 h-8 rounded-full bg-white/90 ring-1 ring-black/10 flex items-center justify-center",onClick:z,"aria-label":"Previous",children:"‹"}),h.jsx("button",{type:"button",className:"pointer-events-auto w-8 h-8 rounded-full bg-white/90 ring-1 ring-black/10 flex items-center justify-center",onClick:te,"aria-label":"Next",children:"›"})]}),h.jsx("div",{className:"pointer-events-none absolute bottom-2 left-0 right-0 flex justify-center gap-1",children:Array.from({length:x}).map((oe,ye)=>h.jsx("span",{className:Yi("inline-block w-1.5 h-1.5 rounded-full",ye===_?"bg-white shadow":"bg-white/60")},ye))})]}):null]})}),v.platform==="facebook"&&(v.link?.headline||v.link?.subhead||v.link?.url)?h.jsx("div",{className:"px-3 py-3",children:h.jsx("a",{href:v.link?.url||"#",className:"block border rounded-lg overflow-hidden hover:bg-slate-50 transition",onClick:oe=>oe.preventDefault(),children:h.jsxs("div",{className:"p-3",children:[h.jsx("div",{className:"link-headline font-medium truncate",children:v.link?.headline||"Link headline"}),h.jsx("div",{className:"link-subhead text-sm text-slate-600 truncate",children:v.link?.subhead||"Add a subhead"}),h.jsx("div",{className:"mt-2 text-xs text-slate-500 truncate",children:U0(v.link?.url)}),h.jsx("div",{className:"mt-3",children:h.jsx("span",{className:"cta inline-block px-3 py-1 rounded bg-slate-900 text-white text-sm",children:v.link?.cta||"Learn More"})})]})})}):null,h.jsx("div",{className:"px-3 py-2 border-t text-xs text-slate-500 flex items-center gap-4",children:["likes","comments","shares","saves","views"].map(oe=>v.metrics?.[oe]?h.jsxs("span",{children:[M0(oe)," ",F0(v.metrics[oe])]},oe):null)})]})})})}),h.jsx("style",{children:`
        .aspect-square { aspect-ratio: 1 / 1; }
        .aspect-video { aspect-ratio: 16 / 9; }
        .aspect-\\[4\\/5\\] { aspect-ratio: 4 / 5; }
        .aspect-\\[9\\/16\\] { aspect-ratio: 9 / 16; }
        .aspect-\\[1\\.91\\/1\\] { aspect-ratio: 1.91 / 1; }
      `})]})});function U0(i){if(!i)return"";try{return new URL(i).hostname.replace(/^www\./,"")}catch{return""}}function M0(i){switch(i){case"likes":return"Likes";case"comments":return"Comments";case"shares":return"Shares";case"saves":return"Saves";case"views":return"Views";default:return""}}function F0(i){try{const n=Number(i||0);return n>=1e6?`${(n/1e6).toFixed(1)}M`:n>=1e3?`${(n/1e3).toFixed(1)}k`:`${n}`}catch{return`${i}`}}function z0({open:i,onClose:n,onOpenDeckManager:s,onOpenBrandsPage:o}){return j.useEffect(()=>{if(!i)return;const l=u=>u.key==="Escape"&&n?.();return window.addEventListener("keydown",l),()=>window.removeEventListener("keydown",l)},[i,n]),i?h.jsxs("div",{id:"app-menu-drawer",className:"fixed inset-0 z-[100]",children:[h.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:n}),h.jsxs("aside",{role:"dialog","aria-modal":"true",className:`absolute left-0 top-0 h-full w-80 max-w-[85vw] bg-white shadow-xl border-r
                   transform transition-transform duration-200 ease-out translate-x-0`,children:[h.jsxs("div",{className:"flex items-center justify-between px-4 h-14 border-b",children:[h.jsx("div",{className:"font-medium",children:"Menu"}),h.jsx("button",{className:"btn-outline",onClick:n,"aria-label":"Close menu",children:"Close"})]}),h.jsxs("nav",{className:"p-3 space-y-1",children:[h.jsx("button",{className:"w-full text-left px-3 py-2 rounded hover:bg-slate-100",onClick:()=>{s?.(),n?.()},children:"Decks"}),h.jsx("button",{className:"w-full text-left px-3 py-2 rounded hover:bg-slate-100",onClick:()=>{o?.(),n?.()},children:"Brands"})]})]})]}):null}function B0({userId:i,open:n,onClose:s,onPick:o}){const[l,u]=j.useState(!1),[d,p]=j.useState(!1),[m,y]=j.useState([]),[v,x]=j.useState(null),[_,E]=j.useState(""),[A,C]=j.useState(!1);j.useEffect(()=>{if(!n)return;console.log("DeckPickerV3 mounted");let F=!0;return(async()=>{if(i){u(!0);try{const L=await Mr(i);if(!F)return;y(L),x(q=>q??(L?.[0]?.id?String(L[0].id):null))}catch(L){console.error(L),alert("Could not load decks.")}finally{F&&u(!1)}}})(),()=>{F=!1}},[n,i]);async function N(){const F=_.trim();if(F){if(!i){alert("Please sign in first.");return}C(!0);try{const L=await Xl(i,F),q=await Mr(i);y(q),x(String(L.id)),E("")}catch(L){console.error(L),alert("Could not create deck.")}finally{C(!1)}}}async function D(){if(!v){alert("Pick a deck first.");return}if(typeof o!="function"){alert("Save handler missing.");return}p(!0);try{await o(v),s?.()}catch(F){console.error(F),alert("Could not save to deck.")}finally{p(!1)}}return n?h.jsxs("div",{className:"fixed inset-0 z-[200]",id:"deck-picker-v3","data-version":"v3",style:{outline:"2px dashed #046BD9"},children:[h.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:s}),h.jsxs("div",{role:"dialog","aria-modal":"true",className:`absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2
                   w-[92vw] max-w-[560px] bg-white rounded-xl shadow-xl border`,children:[h.jsxs("div",{className:"flex items-center justify-between px-4 h-14 border-b",children:[h.jsx("div",{className:"font-medium",children:"Save to deck · v3"}),h.jsx("button",{className:"btn-outline",onClick:s,children:"Close"})]}),h.jsxs("div",{className:"p-4 space-y-4",children:[h.jsxs("div",{children:[h.jsx("div",{className:"label-strong mb-2",children:"Choose a deck"}),h.jsx("div",{className:"max-h-60 overflow-auto border rounded",children:l?h.jsx("div",{className:"p-3 text-sm text-app-muted",children:"Loading…"}):m.length===0?h.jsx("div",{className:"p-3 text-sm text-app-muted",children:"No decks yet."}):h.jsx("ul",{className:"divide-y",children:m.map(F=>{const L=String(F.id),q=v===L;return h.jsx("li",{role:"radio","aria-checked":q,tabIndex:0,className:`outline-none ${q?"bg-slate-50":"hover:bg-slate-50"}`,onClick:()=>x(L),onKeyDown:W=>{(W.key==="Enter"||W.key===" ")&&(W.preventDefault(),x(L))},children:h.jsxs("div",{className:"flex items-center gap-3 px-3 py-2 cursor-pointer w-full",children:[h.jsx("span",{"aria-hidden":"true",className:"inline-block",style:{width:16,height:16,borderRadius:9999,border:`1px solid ${q?"var(--brand-500)":"var(--app-border)"}`,background:q?"var(--brand-500)":"white",boxShadow:q?"0 0 0 3px rgba(4,107,217,0.20)":"none",flex:"0 0 auto"}}),h.jsxs("div",{className:"min-w-0",children:[h.jsx("div",{className:"font-medium truncate",children:F.title}),h.jsx("div",{className:"text-xs text-app-muted",children:new Date(F.created_at).toLocaleString()})]})]})},L)})})})]}),h.jsxs("div",{children:[h.jsx("div",{className:"label-strong mb-2",children:"Or create a new deck"}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("input",{className:"input flex-1 min-w-0",placeholder:"Deck title",value:_,onChange:F=>E(F.target.value),onKeyDown:F=>{F.key==="Enter"&&N()}}),h.jsx("button",{className:"btn-outline",onClick:N,disabled:A||!_.trim(),children:A?"Creating…":"Create"})]})]})]}),h.jsxs("div",{className:"px-4 py-3 border-t flex items-center justify-end gap-2",children:[h.jsx("button",{className:"btn-outline",onClick:s,children:"Cancel"}),h.jsx("button",{className:"btn",onClick:D,disabled:d||!v,children:d?"Saving…":"Save here"})]})]})]}):null}function V0({open:i,onClose:n,post:s,onLoadToEditor:o}){if(!i)return null;const[l,u]=j.useState(()=>Ce(s||{})),d=j.useRef(null);return j.useEffect(()=>{u(Ce(s||{}))},[s]),h.jsxs("div",{className:"fixed inset-0 z-[300]",children:[h.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:n}),h.jsx("div",{className:"absolute inset-0 p-4 flex items-center justify-center",children:h.jsxs("div",{className:"w-[96vw] max-w-[1000px] max-h-[92vh] bg-white rounded-2xl shadow-xl border overflow-hidden flex flex-col",children:[h.jsxs("div",{className:"flex items-center justify-between px-4 h-14 border-b",children:[h.jsx("div",{className:"font-medium",children:"Post preview"}),h.jsxs("div",{className:"flex items-center gap-2",children:[typeof o=="function"?h.jsx("button",{className:"btn-outline",onClick:()=>o(l),children:"Load in editor"}):null,h.jsx("button",{className:"btn-outline",onClick:n,children:"Close"})]})]}),h.jsx("div",{className:"p-4 overflow-auto",children:h.jsx(nu,{ref:d,post:l,setPost:u,mode:"present",clamp:{maxVmin:72,maxPx:560},showExport:!1,saveAsPng:()=>{},savingImg:!1})})]})})]})}const W0=(...i)=>i.filter(Boolean).join(" ");function H0({userId:i,currentPost:n,onBack:s,onPresent:o,onLoadToEditor:l}){const[u,d]=j.useState({decks:[],items:[],activeId:null,loading:{decks:!0,items:!1,operations:new Set},error:null}),[p,m]=j.useState(!1),[y,v]=j.useState(null),{decks:x,items:_,activeId:E,loading:A}=u,C=j.useMemo(()=>x.find(W=>String(W.id)===E)||null,[x,E]);j.useEffect(()=>{let W=!0;return(async()=>{if(!i){W&&d(z=>({...z,decks:[],loading:{...z.loading,decks:!1}}));return}try{const z=await Mr(i);if(!W)return;d(te=>({...te,decks:z,activeId:z.length&&!te.activeId?String(z[0].id):te.activeId,loading:{...te.loading,decks:!1},error:null}))}catch(z){console.error("Load decks error:",z),W&&d(te=>({...te,loading:{...te.loading,decks:!1},error:z.message}))}})(),()=>{W=!1}},[i]),j.useEffect(()=>{let W=!0;return(async()=>{if(!E){W&&d(z=>({...z,items:[]}));return}d(z=>({...z,loading:{...z.loading,items:!0}}));try{const z=await $r(E);W&&d(te=>({...te,items:z,loading:{...te.loading,items:!1},error:null}))}catch(z){console.error("Load items error:",z),W&&d(te=>({...te,loading:{...te.loading,items:!1},error:z.message}))}})(),()=>{W=!1}},[E]);const N=j.useCallback(async()=>{if(!n||!E)return;const W="add-current";d(I=>({...I,loading:{...I.loading,operations:new Set(I.loading.operations).add(W)}}));try{await Ul(E,Ce(n));const I=await $r(E);d(z=>({...z,items:I,error:null}))}catch(I){console.error("Add current error:",I),alert("Could not add post.")}finally{d(I=>{const z=new Set(I.loading.operations);return z.delete(W),{...I,loading:{...I.loading,operations:z}}})}},[n,E]);async function D(W){if(W&&confirm("Delete this deck and all posts in it?"))try{await kh(W);const I=await Mr(i);setDecks(I),I.length?setActiveId(String(I[0].id)):(setActiveId(null),setItems([]))}catch(I){console.error(I),alert("Could not delete deck.")}}async function F(W){if(W)try{await by(W);const I=await $r(E);setItems(I)}catch(I){console.error(I),alert("Could not delete post.")}}async function L(){if(C)try{const W=await Cy(C.id,{days:7}),I=`${window.location.origin}/s/${encodeURIComponent(W)}`;navigator.clipboard&&window.isSecureContext?(await navigator.clipboard.writeText(I),alert(`Share link copied to clipboard!

URL: ${I}

Note: Make sure your app has a route handler for /s/:token`)):prompt("Copy this share link:",I),console.log("Share link created:",I)}catch(W){console.error("Share link error:",W),alert(`Could not create share link. Error: ${W.message}`)}}function q(W){v(Ce(W||{})),m(!0)}return h.jsxs("div",{className:"panel w-full overflow-hidden flex flex-col",children:[h.jsxs("div",{className:"panel-header flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs("button",{className:"btn-outline",onClick:s,children:[h.jsx(Qf,{className:"w-4 h-4 mr-1"}),"Back"]}),h.jsx("div",{className:"font-medium text-app-strong",children:"Manage decks"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs("button",{className:"btn-outline",disabled:!C,onClick:()=>C&&o?.(C.id),title:"Start presentation from this deck",children:[h.jsx(sg,{className:"w-4 h-4 mr-1"}),"Present"]}),h.jsxs("button",{className:"btn-outline",disabled:!C,onClick:L,title:"Create a public preview link (requires /s/:token route)",children:[h.jsx(ng,{className:"w-4 h-4 mr-1"}),"Share"]}),n&&h.jsxs("button",{className:"btn-outline",disabled:!C,onClick:N,title:"Add the current editor post to this deck",children:[h.jsx(Plus,{className:"w-4 h-4 mr-1"}),"Add current post"]}),h.jsxs("button",{className:"btn-outline",disabled:!C,onClick:()=>C&&D(C.id),title:"Delete this deck",children:[h.jsx(Bn,{className:"w-4 h-4 mr-1"}),"Delete deck"]})]})]}),h.jsx("div",{className:"bg-app-surface p-4",children:h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[h.jsxs("div",{className:"card p-0 overflow-hidden",children:[h.jsx("div",{className:"px-3 py-2 border-b text-xs uppercase tracking-wide label-strong",children:"Your decks"}),h.jsx("div",{className:"max-h-[60vh] overflow-auto",children:A.decks?h.jsx("div",{className:"p-3 text-sm text-app-muted",children:"Loading..."}):x.length===0?h.jsx("div",{className:"p-3 text-sm text-app-muted",children:"No decks yet"}):h.jsx("ul",{className:"divide-y",role:"radiogroup","aria-label":"Decks",children:x.map(W=>{const I=String(W.id),z=E===I;return h.jsx("li",{role:"radio","aria-checked":z,tabIndex:0,className:W0("px-3 py-2 cursor-pointer outline-none",z?"bg-slate-50":"hover:bg-slate-50"),onClick:()=>d(te=>({...te,activeId:I})),onKeyDown:te=>{(te.key==="Enter"||te.key===" ")&&(te.preventDefault(),d(oe=>({...oe,activeId:I})))},children:h.jsxs("div",{className:"flex items-center justify-between gap-3",children:[h.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[h.jsx("span",{"aria-hidden":"true",className:"inline-block",style:{width:16,height:16,borderRadius:9999,border:`1px solid ${z?"var(--brand-500)":"var(--app-border)"}`,background:z?"var(--brand-500)":"white",boxShadow:z?"0 0 0 3px rgba(4,107,217,0.20)":"none",flex:"0 0 auto"}}),h.jsxs("div",{className:"min-w-0",children:[h.jsx("div",{className:"font-medium truncate",children:W.title}),h.jsx("div",{className:"text-app-muted text-xs",children:new Date(W.created_at).toLocaleString()})]})]}),h.jsx("div",{className:"chip",children:W.count??""})]})},I)})})})]}),h.jsxs("div",{className:"md:col-span-2 card p-0 overflow-hidden",children:[h.jsx("div",{className:"px-3 py-2 border-b text-xs uppercase tracking-wide label-strong",children:C?C.title:"Deck items"}),A.items?h.jsx("div",{className:"p-4 text-sm text-app-muted",children:"Loading..."}):C?_.length===0?h.jsx("div",{className:"p-4 text-sm text-app-muted",children:'This deck has no posts. Create posts in the editor and use "Save to deck" to add them.'}):h.jsx("ul",{className:"p-3 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:_.map(W=>{const I=Ce(W.post_json||{}),z=I.type==="video"?"video":(I.media?.length||0)>1?"carousel":"single",te=z==="video"?bl:z==="carousel"?tg:Ir,oe=I.type==="video"&&I.videoSrc?I.videoSrc:I.media?.[0]||"",ye=(I.brand?.name||I.brand?.username||"Post")+" · "+(I.platform||"facebook")+" · "+(I.type||"single");return h.jsxs("li",{className:"border border-app rounded-lg overflow-hidden cursor-pointer",onClick:()=>q(I),children:[h.jsxs("div",{className:"relative aspect-square bg-app-muted",children:[oe?I.type==="video"?h.jsx("video",{src:oe,className:"absolute inset-0 w-full h-full object-cover",muted:!0,playsInline:!0,preload:"metadata"}):h.jsx("img",{src:oe,className:"absolute inset-0 w-full h-full object-cover",alt:"",draggable:!1}):h.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-app-muted text-sm",children:"No media"}),h.jsxs("div",{className:"absolute right-2 top-2 bg-black/70 text-white rounded-full px-2 py-0.5 flex items-center gap-1",children:[h.jsx(te,{className:"w-4 h-4"}),z==="carousel"?h.jsx("span",{className:"text-xs",children:I.media?.length||0}):null]})]}),h.jsxs("div",{className:"p-2",children:[h.jsx("div",{className:"text-sm truncate",children:ye}),h.jsx("div",{className:"text-app-muted text-xs",children:new Date(W.created_at).toLocaleString()}),h.jsx("div",{className:"flex items-center justify-end gap-2 mt-2",children:h.jsxs("button",{className:"chip",onClick:Pe=>{Pe.stopPropagation(),F(W.id)},title:"Remove from deck",children:[h.jsx(Bn,{className:"w-3 h-3 mr-1"}),"Remove"]})})]})]},W.id)})}):h.jsx("div",{className:"p-4 text-sm text-app-muted",children:"Pick a deck"})]})]})}),h.jsx(V0,{open:p,onClose:()=>m(!1),post:y,onLoadToEditor:l})]})}const q0=j.memo(function({userId:n,onBack:s,onOpenBrandManager:o}){const{brands:l,saveBrand:u,removeBrand:d,loading:p,error:m}=Jl(n),[y,v]=j.useState("");j.useEffect(()=>{m&&console.error("Brands loading error:",m)},[m]);const x=j.useCallback(async(C,N)=>{try{await u({...N,id:C})}catch(D){throw console.error("Edit failed:",D),alert("Could not save changes: "+(D.message||"Unknown error")),D}},[u]),_=j.useCallback(async C=>{try{await d(C)}catch(N){console.error("Delete failed:",N),alert("Could not delete brand: "+(N.message||"Unknown error"))}},[d]),E=j.useCallback(async C=>{try{const N={fb_name:C.fb_name,fb_avatar_url:C.fb_avatar_url,ig_username:C.ig_username,ig_avatar_url:C.ig_avatar_url,verified:!C.verified};await u({...N,id:C.id})}catch(N){console.error("Toggle verified failed:",N),alert("Could not update verification status: "+(N.message||"Unknown error"))}},[u]),A=j.useMemo(()=>{const C=y.trim().toLowerCase();return C?l.filter(N=>{const D=eo(N).toLowerCase(),F=$l(N).toLowerCase(),L=(N.fb_name||"").toLowerCase(),q=(N.ig_username||"").toLowerCase();return D.includes(C)||F.includes(C)||L.includes(C)||q.includes(C)}):l},[l,y]);return h.jsxs("div",{className:"panel w-full overflow-hidden flex flex-col",children:[h.jsxs("div",{className:"panel-header flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs("button",{className:"btn-outline",onClick:s,children:[h.jsx(Qf,{className:"w-4 h-4 mr-1"}),"Back"]}),h.jsx("div",{className:"font-medium text-app-strong",children:"Manage brands"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("input",{className:"input",placeholder:"Search brands",value:y,onChange:C=>v(C.target.value)}),h.jsxs("button",{className:"btn",onClick:o,children:[h.jsx(ig,{className:"w-4 h-4 mr-1"}),"New brand"]})]})]}),h.jsx("div",{className:"bg-app-surface p-4 w-full",children:p?h.jsx("div",{className:"text-sm text-app-muted",children:"Loading brands..."}):m?h.jsxs("div",{className:"text-sm text-red-600",children:["Error loading brands: ",m]}):A.length===0?h.jsx("div",{className:"text-sm text-app-muted",children:y?`No brands found matching "${y}"`:"No brands yet."}):h.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:A.map(C=>h.jsx(_h,{brand:C,onEdit:x,onDelete:_,onToggleVerified:E,showActions:!0,showVerifiedToggle:!0,showInlineEdit:!0,compact:!1,disabled:!1},C.id))})})]})}),K0=j.memo(function({posts:n=[],initialIndex:s=0,onClose:o,showPlatformTags:l=!0}){const[u,d]=j.useState(s),p=j.useMemo(()=>n[Math.min(u,n.length-1)]||{},[n,u]),m=Vy(p),y=j.useMemo(()=>{const _=m.platform||"facebook";return{platform:_,display:_==="instagram"?"Instagram":"Facebook",colorClass:_==="instagram"?"bg-gradient-to-r from-purple-500 via-pink-500 to-orange-400":"bg-blue-600"}},[m.platform]),v=j.useCallback(()=>{d(_=>n.length>0?(_-1+n.length)%n.length:0)},[n.length]),x=j.useCallback(()=>{d(_=>n.length>0?(_+1)%n.length:0)},[n.length]);return j.useEffect(()=>{if(!n.length)return;const _=E=>{E.key==="ArrowLeft"&&v(),E.key==="ArrowRight"&&x(),E.key==="Escape"&&o&&o()};return window.addEventListener("keydown",_),()=>window.removeEventListener("keydown",_)},[n.length,v,x,o]),n.length?h.jsxs("div",{className:"h-full flex flex-col items-center justify-center bg-app-surface p-4",children:[n.length>1&&h.jsxs("div",{className:"mb-2 text-sm text-app-muted",children:[u+1," / ",n.length]}),l&&h.jsx("div",{className:"mb-4",children:h.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-white text-xs font-medium ${y.colorClass}`,children:y.display})}),h.jsx("div",{className:"flex-1 flex items-center justify-center w-full max-w-none overflow-hidden px-4",children:h.jsx("div",{className:"w-full h-full flex items-center justify-center",children:h.jsx(nu,{post:m,setPost:()=>{},mode:"present",clamp:null,showExport:!1})})}),n.length>1&&h.jsxs("div",{className:"flex items-center gap-2 mt-4",children:[h.jsxs("button",{className:"btn-outline flex items-center",onClick:v,title:"Previous post (←)",children:[h.jsx(Gm,{className:"w-4 h-4 mr-1"}),"Prev"]}),h.jsxs("button",{className:"btn flex items-center",onClick:x,title:"Next post (→)",children:["Next",h.jsx(Qm,{className:"w-4 h-4 ml-1"})]})]}),o&&h.jsx("div",{className:"mt-2",children:h.jsx("button",{className:"btn-outline text-xs",onClick:o,title:"Exit present mode (Esc)",children:"Back to Editor"})})]}):h.jsx("div",{className:"h-full flex items-center justify-center",children:h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"text-app-muted mb-4",children:"No posts to present"}),o&&h.jsx("button",{className:"btn-outline",onClick:o,children:"Back to Editor"})]})})}),qf=()=>Math.random().toString(36).slice(2,10);function G0(){const[i,n]=j.useState(()=>Ce(Eh)),[s,o]=j.useState([]),[l,u]=j.useState({mode:"create",page:"editor"}),[d,p]=j.useState({posts:[],currentIndex:0}),[m,y]=j.useState({menuOpen:!1,brandManagerOpen:!1,deckManagerOpen:!1,deckPickerOpen:!1}),v=j.useRef(null),x=j.useRef(null),{isExporting:_,imagesReady:E,exportAsPng:A,attachNode:C}=Lh();j.useEffect(()=>{C(v.current)},[C]);const[N,D]=j.useState(null),F=j.useMemo(()=>N?{id:N}:null,[N]);j.useEffect(()=>{let O=!0;ge.auth.getUser().then(({data:Q})=>{O&&D(Q?.user?.id??null)});const{data:K}=ge.auth.onAuthStateChange((Q,ie)=>{O&&D(ie?.user?.id??null)});return()=>{O=!1,K?.subscription?.unsubscribe?.()}},[]);const L=j.useCallback(O=>{n(K=>{const Q=typeof O=="function"?O(Ce(K)):{...K,...O};return Ce(Q)})},[]),q=j.useCallback(async()=>{let O=N;if(!O){const{data:K}=await ge.auth.getUser();O=K?.user?.id??null,O&&D(O)}return O||(alert("Please sign in first."),null)},[N]),W=j.useCallback(O=>{u(K=>({...K,page:O}))},[]),I=j.useCallback(async O=>{const K=Array.from(O||[]).slice(0,5);if(!K.length)return;const Q=await Promise.all(K.map(ie=>new Promise((se,Re)=>{const ft=new FileReader;ft.onload=()=>se(ft.result),ft.onerror=Re,ft.readAsDataURL(ie)})));n(ie=>{const se=Ce(ie),Re=[...se.media||[],...Q].slice(0,5),ft=se.type==="video"?"single":Re.length>1?"carousel":"single",Bt=Array.from({length:Re.length},(po,Wn)=>se.mediaMeta?.[Wn]||{headline:""});return Ce({...se,media:Re,mediaMeta:Bt,type:ft,videoSrc:""})})},[]),z=j.useCallback(async O=>{if(!O)return;const K=await new Promise((Q,ie)=>{const se=new FileReader;se.onload=()=>Q(se.result),se.onerror=ie,se.readAsDataURL(O)});n(Q=>Ce({...Q,videoSrc:K,type:"video"}))},[]),te=j.useCallback(()=>{n(O=>Ce({...O,videoSrc:"",type:"single"}))},[]),oe=j.useCallback(O=>{n(K=>{const Q=Ce(K),ie=(Q.media||[]).slice();if(O<0||O>=ie.length)return Q;ie.splice(O,1);const se=(Q.mediaMeta||[]).slice();se.splice(O,1);const Re=ie.length>1?"carousel":"single",ft=Math.max(0,Math.min(Q.activeIndex||0,(ie.length||1)-1));return Ce({...Q,media:ie,mediaMeta:se,type:Q.type==="video"?"video":Re,activeIndex:ft})})},[]),ye=j.useCallback(async O=>{O.preventDefault(),O.stopPropagation();const K=O.dataTransfer;if(!K)return;const Q=[];let ie=null;for(const se of Array.from(K.files||[]))se.type.startsWith("image/")?Q.push(se):!ie&&se.type.startsWith("video/")&&(ie=se);Q.length&&await I(Q),ie&&await z(ie)},[I,z]),Pe=j.useCallback(O=>{const K={id:qf(),createdAt:Date.now(),post:Ce(O||i)};o(Q=>[K,...Q])},[i]),H=j.useCallback(O=>{o(K=>{const Q=K.find(se=>se.id===O);return Q?[{...Q,id:qf(),createdAt:Date.now()},...K]:K})},[]),re=j.useCallback(O=>{o(K=>{const Q=K.find(ie=>ie.id===O);return Q&&n(Ce(Q.post)),K})},[]),_e=j.useCallback(O=>{o(K=>K.filter(Q=>Q.id!==O))},[]),ke=j.useCallback(async O=>{try{const Q=(await $r(O)).map(ie=>ie.post_json);p({posts:Q,currentIndex:0}),u({page:"editor",mode:"present"}),Q.length&&n(Ce(Q[0]))}catch(K){console.error(K),alert("Could not open deck.")}},[]),Te=j.useCallback(()=>{if(s.length===0){alert("Add some posts to your deck first to start presenting.");return}const O=s.map(K=>K.post);p({posts:O,currentIndex:0}),u(K=>({...K,mode:"present"})),O.length&&n(Ce(O[0]))},[s]),me=j.useCallback(()=>{u(O=>({...O,mode:"create"})),p({posts:[],currentIndex:0})},[]),G=j.useCallback(async({deckId:O}={})=>{const K=await q();if(!K)return;let Q=O||null;try{if(!Q){const se=(prompt("Save to which deck title? If it does not exist, it will be created.")||"").trim();if(!se)return;const ft=(await Mr(K)).find(Bt=>Bt.title.toLowerCase()===se.toLowerCase());ft?Q=ft.id:Q=(await Xl(K,se)).id}const ie=Ce(i);await Ul(Q,ie),alert("Saved to deck.")}catch(ie){console.error(ie),alert("Could not save to deck.")}},[i,q]),ae=j.useCallback(async()=>{await q()&&y(K=>({...K,deckPickerOpen:!0}))},[q]),S=j.useCallback(async O=>{try{const K=Ce(i);await Ul(O,K),y(Q=>({...Q,deckPickerOpen:!1})),alert("Saved to deck.")}catch(K){console.error(K),alert("Could not save to deck.")}},[i]),$=j.useCallback(async()=>{try{await A(v)}catch{alert("PNG export failed. Check console for details.")}},[A]),ne=j.useMemo(()=>s.length>0,[s.length]),pe=j.useCallback(()=>{l.mode==="present"?me():Te()},[l.mode,me,Te]);return h.jsxs(j.Fragment,{children:[h.jsx(Ty,{singleColumn:l.page==="decks"||l.page==="brands",topBarProps:{mode:l.mode,setMode:O=>u(K=>({...K,mode:O})),onExportPNG:$,user:F,onOpenMenu:()=>y(O=>({...O,menuOpen:!0})),openDeckManager:()=>W("decks"),openDeckPicker:ae,canPresent:ne,onStartPresent:pe,exportDisabled:!E||_},leftPanel:l.page==="decks"?h.jsx(H0,{userId:N,currentPost:null,onBack:()=>W("editor"),onPresent:ke}):l.page==="brands"?h.jsx(q0,{userId:N,onBack:()=>W("editor"),onOpenBrandManager:()=>y(O=>({...O,brandManagerOpen:!0}))}):l.mode==="present"?null:h.jsx(Ay,{user:F,post:i,update:L,onDrop:ye,handleImageFiles:I,handleVideoFile:z,clearVideo:te,removeImageAt:oe,addToDeck:Pe,duplicateToDeck:H,deck:s,loadFromDeck:re,deleteFromDeck:_e,startPresentingDeck:Te,loadingDeck:!1,openBrandManager:()=>y(O=>({...O,brandManagerOpen:!0})),saveToDeck:G,openDeckPicker:ae}),rightPreview:l.page!=="editor"?null:l.mode==="present"?h.jsx(K0,{posts:d.posts,initialIndex:d.currentIndex,onClose:me,showPlatformTags:!0}):h.jsx(nu,{ref:v,post:i,setPost:n,mode:l.mode,saveAsPng:$,savingImg:_,videoRef:x,showExport:!0}),modals:{brandManagerOpen:m.brandManagerOpen,onCloseBrandManager:()=>y(O=>({...O,brandManagerOpen:!1})),deckManagerOpen:m.deckManagerOpen,onCloseDeckManager:()=>y(O=>({...O,deckManagerOpen:!1})),deckManagerOnOpenForPresent:O=>{y(K=>({...K,deckManagerOpen:!1})),u(K=>({...K,mode:"present"})),O?.posts?.length&&(p({posts:O.posts,currentIndex:0}),n(Ce(O.posts[0])))}}}),h.jsx(z0,{open:m.menuOpen,onClose:()=>y(O=>({...O,menuOpen:!1})),onOpenDeckManager:()=>W("decks"),onOpenBrandsPage:()=>W("brands")}),h.jsx(B0,{userId:N,open:m.deckPickerOpen,onClose:()=>y(O=>({...O,deckPickerOpen:!1})),onPick:S})]})}const Q0=j.memo(function(){const[n,s]=j.useState(!1),[o,l]=j.useState(null),u=j.useCallback(async()=>{s(!0),l(null);try{const{error:d}=await Zt(()=>ge.auth.signInWithOAuth({provider:"google",options:{redirectTo:window.location.origin,queryParams:{access_type:"offline",prompt:"consent"}}}),{maxRetries:2,retryableErrors:["network","timeout"]});if(d)throw d}catch(d){const p=Ue(d,{operation:"googleOAuth"});console.error("OAuth error:",p),l(p.userMessage),s(!1)}},[]);return h.jsx("div",{className:"min-h-screen flex items-center justify-center p-6",children:h.jsxs("div",{className:"panel max-w-sm w-full p-6 text-center",children:[h.jsx("h1",{className:"h2 mb-2",children:"Sign in"}),h.jsx("p",{className:"muted mb-6",children:"Use your Google account to continue."}),o&&h.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-sm text-red-700",children:o}),h.jsx("button",{className:"btn w-full",onClick:u,disabled:n,"aria-describedby":o?"signin-error":void 0,children:n?"Redirecting...":"Continue with Google"}),o&&h.jsx("button",{className:"btn-outline w-full mt-3",onClick:()=>l(null),disabled:n,children:"Try Again"}),h.jsx("p",{className:"text-xs text-app-muted mt-3",children:"Redirect URL must match your Supabase Auth settings."})]})})});function J0({children:i}){const{user:n,loading:s}=Ql();return s?h.jsx("div",{className:"min-h-screen grid place-items-center",children:h.jsx("div",{className:"panel p-6",children:"Loading…"})}):n?i:h.jsx(Q0,{})}async function ho(){try{const{data:{session:i},error:n}=await Zt(()=>ge.auth.getSession(),{maxRetries:2,retryableErrors:["network","timeout"]});if(n)throw n;return i?.user||null}catch(i){throw Ue(i,{operation:"getCurrentUser"})}}async function X0(){const i=await ho();return i?Os.selectSingle({query:ge.from("profiles").select("*").eq("id",i.id).single(),table:"profiles",id:i.id,ttl:900*1e3,strategy:Ft.CACHE_FIRST}).catch(n=>{if(n.code==="PGRST116")return null;throw Ue(n,{operation:"fetchProfile",userId:i.id})}):null}async function Y0(){const i=await ho();if(!i)return null;if(!Dr.uuid(i.id))throw Ue(new Error("Invalid user ID format"),{userId:i.id});const n=i.user_metadata?.full_name||i.user_metadata?.name||i.email?.split("@")[0]||"User",s=typeof n=="string"?n.trim().slice(0,50):"User",o=i.user_metadata?.avatar_url;o&&!Dr.url(o)&&console.warn("Invalid avatar URL from OAuth provider:",o);const l={id:i.id,display_name:s,avatar_url:o&&Dr.url(o)?o:null};return ph(()=>ge.from("profiles").upsert({...l,updated_at:new Date().toISOString(),last_sign_in_at:new Date().toISOString()}).select("*").single(),{operation:"ensureProfileExists",userId:i.id}).then(u=>{const d=u.data;return`${i.id}`,d})}async function Z0({display_name:i,avatar_url:n}){const s=await ho();if(!s)throw Ue(new Error("Not signed in"),{operation:"saveProfile"});if(!i||!Dr.nonEmptyString(i))throw Ue(new Error("Display name is required"),{operation:"saveProfile"});if(i.length>50)throw Ue(new Error("Display name must be 50 characters or less"),{operation:"saveProfile",displayNameLength:i.length});if(n&&!Dr.url(n))throw Ue(new Error("Avatar URL must be a valid URL"),{operation:"saveProfile",avatar_url:n});const o={display_name:i.trim(),avatar_url:n?.trim()||null,updated_at:new Date().toISOString()};return ph(()=>ge.from("profiles").update(o).eq("id",s.id).select("*").single(),{operation:"saveProfile",userId:s.id}).then(l=>(`${s.id}`,l.data))}async function ew(i){const n=await ho();if(!n)throw Ue(new Error("Not signed in"),{operation:"uploadAvatar"});if(!i||!(i instanceof File))throw Ue(new Error("Invalid file provided"),{operation:"uploadAvatar"});if(!i.type.startsWith("image/"))throw Ue(new Error("File must be an image"),{operation:"uploadAvatar",fileType:i.type});const s=5*1024*1024;if(i.size>s)throw Ue(new Error("File size must be less than 5MB"),{operation:"uploadAvatar",fileSize:i.size,maxSize:s});const o=2048;if(i.type.startsWith("image/"))try{const d=await tw(i);if(d.width>o||d.height>o)throw Ue(new Error(`Image dimensions must be ${o}x${o} pixels or less`),{operation:"uploadAvatar",dimensions:d})}catch(d){if(d.name==="SupabaseError")throw d;console.warn("Could not validate image dimensions:",d)}const l=i.name.replace(/[^a-zA-Z0-9.-]/g,"_").slice(0,100),u=`${n.id}/${Date.now()}_${l}`;try{const{error:d}=await Zt(()=>ge.storage.from("avatars").upload(u,i,{cacheControl:"3600",upsert:!0,contentType:i.type}),{maxRetries:2,retryableErrors:["network","timeout"]});if(d)throw d;const{data:p}=ge.storage.from("avatars").getPublicUrl(u);if(!p.publicUrl||!Dr.url(p.publicUrl))throw Ue(new Error("Invalid public URL returned from storage"),{operation:"uploadAvatar",publicUrl:p.publicUrl});return p.publicUrl}catch(d){throw Ue(d,{operation:"uploadAvatar",fileName:l})}}function tw(i){return new Promise((n,s)=>{const o=new Image,l=URL.createObjectURL(i);o.onload=()=>{URL.revokeObjectURL(l),n({width:o.width,height:o.height})},o.onerror=()=>{URL.revokeObjectURL(l),s(new Error("Could not load image to check dimensions"))},o.src=l})}const nw=j.createContext(null),rw=j.memo(function({children:n}){const[s,o]=j.useState(null),[l,u]=j.useState(!0),[d,p]=j.useState(null),m=j.useRef(!1),y=j.useRef(0),v=j.useCallback((C,N="profile")=>{const D=Ue(C,{operation:N});return console.error("Profile error:",D),p(D.userMessage),D},[]),x=j.useCallback(async C=>{if(!m.current){m.current=!0,u(!0),p(null);try{if(!(C?.user||null)){o(null),y.current=0;return}await Zt(()=>Y0(),{maxRetries:2,retryableErrors:["network","timeout"]});const D=await Zt(()=>X0(),{maxRetries:2,retryableErrors:["network","timeout"]});o(D),y.current=0}catch(N){if(v(N,"loadProfile"),o(null),y.current<3){y.current++;const D=Math.pow(2,y.current)*1e3;setTimeout(()=>x(C),D)}}finally{m.current=!1,u(!1)}}},[v]);j.useEffect(()=>{let C=!0;(async()=>{const{data:{session:D}}=await ge.auth.getSession();C&&await x(D)})();const{data:N}=ge.auth.onAuthStateChange((D,F)=>{C&&x(F)});return()=>{C=!1,N?.subscription?.unsubscribe()}},[x]);const _=j.useCallback(async C=>{if(!C||typeof C!="object"){const N=new Error("Invalid profile data provided");throw v(N,"saveProfile"),N}u(!0),p(null);try{const N=await Zt(()=>Z0(C),{maxRetries:2,retryableErrors:["network","timeout"]});return o(N),N}catch(N){throw v(N,"saveProfile"),N}finally{u(!1)}},[v]),E=j.useCallback(async C=>{if(!C||!(C instanceof File)){const N=new Error("Invalid file provided for avatar upload");throw v(N,"uploadAvatar"),N}if(C.size>5*1024*1024){const N=new Error("File size must be less than 5MB");throw v(N,"uploadAvatar"),N}if(!C.type.startsWith("image/")){const N=new Error("File must be an image");throw v(N,"uploadAvatar"),N}u(!0),p(null);try{const N=await Zt(()=>ew(C),{maxRetries:2,retryableErrors:["network","timeout"]});return await _({display_name:s?.display_name||"User",avatar_url:N})}catch(N){throw v(N,"uploadAvatar"),N}finally{u(!1)}},[s?.display_name,_,v]),A=j.useMemo(()=>({profile:s,loading:l,error:d,saveProfile:_,uploadAvatar:E,clearError:()=>p(null),refreshProfile:()=>x({user:s?.id?{id:s.id}:null}),hasProfile:!!s}),[s,l,d,_,E,x]);return h.jsx(nw.Provider,{value:A,children:n})}),sw=Kf.lazy(()=>Fr(()=>import("./ShareViewer-BQK3klXK.js"),[])),iw=()=>{const[i,n]=j.useState(()=>window.location.pathname);return j.useEffect(()=>{const o=()=>n(window.location.pathname);return window.addEventListener("popstate",o),()=>window.removeEventListener("popstate",o)},[]),{shareToken:j.useMemo(()=>{const o=i.match(/^\/s\/([^/]+)\/?$/);return o?decodeURIComponent(o[1]):null},[i])}};function ow(){const{shareToken:i}=iw();return i?h.jsx(j.Suspense,{fallback:h.jsx("div",{className:"p-6 text-sm text-app-muted",children:"Loading…"}),children:h.jsx(sw,{token:i})}):h.jsx(py,{children:h.jsx(rw,{children:h.jsx(J0,{children:h.jsx(G0,{})})})})}Wm.createRoot(document.getElementById("root")).render(h.jsx(Kf.StrictMode,{children:h.jsx(ow,{})}));export{nu as R,Ce as e,h as j,j as r,ge as s};
