(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))o(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&o(f)}).observe(document,{childList:!0,subtree:!0});function s(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function o(l){if(l.ep)return;l.ep=!0;const u=s(l);fetch(l.href,u)}})();const vm="modulepreload",ym=function(i){return"/"+i},Md={},Ar=function(n,s,o){let l=Promise.resolve();if(s&&s.length>0){let g=function(v){return Promise.all(v.map(y=>Promise.resolve(y).then(x=>({status:"fulfilled",value:x}),x=>({status:"rejected",reason:x}))))};document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),p=f?.nonce||f?.getAttribute("nonce");l=g(s.map(v=>{if(v=ym(v),v in Md)return;Md[v]=!0;const y=v.endsWith(".css"),x=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${v}"]${x}`))return;const _=document.createElement("link");if(_.rel=y?"stylesheet":vm,y||(_.as="script"),_.crossOrigin="",_.href=v,p&&_.setAttribute("nonce",p),document.head.appendChild(_),y)return new Promise((b,R)=>{_.addEventListener("load",b),_.addEventListener("error",()=>R(new Error(`Unable to preload CSS for ${v}`)))})}))}function u(f){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=f,window.dispatchEvent(p),!p.defaultPrevented)throw f}return l.then(f=>{for(const p of f||[])p.status==="rejected"&&u(p.reason);return n().catch(u)})};function Pl(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function wm(i){if(Object.prototype.hasOwnProperty.call(i,"__esModule"))return i;var n=i.default;if(typeof n=="function"){var s=function o(){var l=!1;try{l=this instanceof o}catch{}return l?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};s.prototype=n.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(i).forEach(function(o){var l=Object.getOwnPropertyDescriptor(i,o);Object.defineProperty(s,o,l.get?l:{enumerable:!0,get:function(){return i[o]}})}),s}var Xa={exports:{}},ws={},Ya={exports:{}},fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ud;function _m(){if(Ud)return fe;Ud=1;var i=Symbol.for("react.element"),n=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),f=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),x=Symbol.iterator;function _(S){return S===null||typeof S!="object"?null:(S=x&&S[x]||S["@@iterator"],typeof S=="function"?S:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R=Object.assign,P={};function A(S,D,ne){this.props=S,this.context=D,this.refs=P,this.updater=ne||b}A.prototype.isReactComponent={},A.prototype.setState=function(S,D){if(typeof S!="object"&&typeof S!="function"&&S!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,S,D,"setState")},A.prototype.forceUpdate=function(S){this.updater.enqueueForceUpdate(this,S,"forceUpdate")};function B(){}B.prototype=A.prototype;function U(S,D,ne){this.props=S,this.context=D,this.refs=P,this.updater=ne||b}var I=U.prototype=new B;I.constructor=U,R(I,A.prototype),I.isPureReactComponent=!0;var q=Array.isArray,W=Object.prototype.hasOwnProperty,L={current:null},F={key:!0,ref:!0,__self:!0,__source:!0};function te(S,D,ne){var pe,O={},K=null,Q=null;if(D!=null)for(pe in D.ref!==void 0&&(Q=D.ref),D.key!==void 0&&(K=""+D.key),D)W.call(D,pe)&&!F.hasOwnProperty(pe)&&(O[pe]=D[pe]);var ie=arguments.length-2;if(ie===1)O.children=ne;else if(1<ie){for(var se=Array(ie),Re=0;Re<ie;Re++)se[Re]=arguments[Re+2];O.children=se}if(S&&S.defaultProps)for(pe in ie=S.defaultProps,ie)O[pe]===void 0&&(O[pe]=ie[pe]);return{$$typeof:i,type:S,key:K,ref:Q,props:O,_owner:L.current}}function oe(S,D){return{$$typeof:i,type:S.type,key:D,ref:S.ref,props:S.props,_owner:S._owner}}function ye(S){return typeof S=="object"&&S!==null&&S.$$typeof===i}function Pe(S){var D={"=":"=0",":":"=2"};return"$"+S.replace(/[=:]/g,function(ne){return D[ne]})}var H=/\/+/g;function re(S,D){return typeof S=="object"&&S!==null&&S.key!=null?Pe(""+S.key):D.toString(36)}function _e(S,D,ne,pe,O){var K=typeof S;(K==="undefined"||K==="boolean")&&(S=null);var Q=!1;if(S===null)Q=!0;else switch(K){case"string":case"number":Q=!0;break;case"object":switch(S.$$typeof){case i:case n:Q=!0}}if(Q)return Q=S,O=O(Q),S=pe===""?"."+re(Q,0):pe,q(O)?(ne="",S!=null&&(ne=S.replace(H,"$&/")+"/"),_e(O,D,ne,"",function(Re){return Re})):O!=null&&(ye(O)&&(O=oe(O,ne+(!O.key||Q&&Q.key===O.key?"":(""+O.key).replace(H,"$&/")+"/")+S)),D.push(O)),1;if(Q=0,pe=pe===""?".":pe+":",q(S))for(var ie=0;ie<S.length;ie++){K=S[ie];var se=pe+re(K,ie);Q+=_e(K,D,ne,se,O)}else if(se=_(S),typeof se=="function")for(S=se.call(S),ie=0;!(K=S.next()).done;)K=K.value,se=pe+re(K,ie++),Q+=_e(K,D,ne,se,O);else if(K==="object")throw D=String(S),Error("Objects are not valid as a React child (found: "+(D==="[object Object]"?"object with keys {"+Object.keys(S).join(", ")+"}":D)+"). If you meant to render a collection of children, use an array instead.");return Q}function ke(S,D,ne){if(S==null)return S;var pe=[],O=0;return _e(S,pe,"","",function(K){return D.call(ne,K,O++)}),pe}function Te(S){if(S._status===-1){var D=S._result;D=D(),D.then(function(ne){(S._status===0||S._status===-1)&&(S._status=1,S._result=ne)},function(ne){(S._status===0||S._status===-1)&&(S._status=2,S._result=ne)}),S._status===-1&&(S._status=0,S._result=D)}if(S._status===1)return S._result.default;throw S._result}var me={current:null},G={transition:null},ae={ReactCurrentDispatcher:me,ReactCurrentBatchConfig:G,ReactCurrentOwner:L};return fe.Children={map:ke,forEach:function(S,D,ne){ke(S,function(){D.apply(this,arguments)},ne)},count:function(S){var D=0;return ke(S,function(){D++}),D},toArray:function(S){return ke(S,function(D){return D})||[]},only:function(S){if(!ye(S))throw Error("React.Children.only expected to receive a single React element child.");return S}},fe.Component=A,fe.Fragment=s,fe.Profiler=l,fe.PureComponent=U,fe.StrictMode=o,fe.Suspense=g,fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ae,fe.cloneElement=function(S,D,ne){if(S==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+S+".");var pe=R({},S.props),O=S.key,K=S.ref,Q=S._owner;if(D!=null){if(D.ref!==void 0&&(K=D.ref,Q=L.current),D.key!==void 0&&(O=""+D.key),S.type&&S.type.defaultProps)var ie=S.type.defaultProps;for(se in D)W.call(D,se)&&!F.hasOwnProperty(se)&&(pe[se]=D[se]===void 0&&ie!==void 0?ie[se]:D[se])}var se=arguments.length-2;if(se===1)pe.children=ne;else if(1<se){ie=Array(se);for(var Re=0;Re<se;Re++)ie[Re]=arguments[Re+2];pe.children=ie}return{$$typeof:i,type:S.type,key:O,ref:K,props:pe,_owner:Q}},fe.createContext=function(S){return S={$$typeof:f,_currentValue:S,_currentValue2:S,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},S.Provider={$$typeof:u,_context:S},S.Consumer=S},fe.createElement=te,fe.createFactory=function(S){var D=te.bind(null,S);return D.type=S,D},fe.createRef=function(){return{current:null}},fe.forwardRef=function(S){return{$$typeof:p,render:S}},fe.isValidElement=ye,fe.lazy=function(S){return{$$typeof:y,_payload:{_status:-1,_result:S},_init:Te}},fe.memo=function(S,D){return{$$typeof:v,type:S,compare:D===void 0?null:D}},fe.startTransition=function(S){var D=G.transition;G.transition={};try{S()}finally{G.transition=D}},fe.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},fe.useCallback=function(S,D){return me.current.useCallback(S,D)},fe.useContext=function(S){return me.current.useContext(S)},fe.useDebugValue=function(){},fe.useDeferredValue=function(S){return me.current.useDeferredValue(S)},fe.useEffect=function(S,D){return me.current.useEffect(S,D)},fe.useId=function(){return me.current.useId()},fe.useImperativeHandle=function(S,D,ne){return me.current.useImperativeHandle(S,D,ne)},fe.useInsertionEffect=function(S,D){return me.current.useInsertionEffect(S,D)},fe.useLayoutEffect=function(S,D){return me.current.useLayoutEffect(S,D)},fe.useMemo=function(S,D){return me.current.useMemo(S,D)},fe.useReducer=function(S,D,ne){return me.current.useReducer(S,D,ne)},fe.useRef=function(S){return me.current.useRef(S)},fe.useState=function(S){return me.current.useState(S)},fe.useSyncExternalStore=function(S,D,ne){return me.current.useSyncExternalStore(S,D,ne)},fe.useTransition=function(){return me.current.useTransition()},fe.version="18.2.0",fe}var Fd;function Tl(){return Fd||(Fd=1,Ya.exports=_m()),Ya.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zd;function xm(){if(zd)return ws;zd=1;var i=Tl(),n=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,l=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function f(p,g,v){var y,x={},_=null,b=null;v!==void 0&&(_=""+v),g.key!==void 0&&(_=""+g.key),g.ref!==void 0&&(b=g.ref);for(y in g)o.call(g,y)&&!u.hasOwnProperty(y)&&(x[y]=g[y]);if(p&&p.defaultProps)for(y in g=p.defaultProps,g)x[y]===void 0&&(x[y]=g[y]);return{$$typeof:n,type:p,key:_,ref:b,props:x,_owner:l.current}}return ws.Fragment=s,ws.jsx=f,ws.jsxs=f,ws}var Bd;function km(){return Bd||(Bd=1,Xa.exports=xm()),Xa.exports}var h=km(),E=Tl();const Of=Pl(E);var Li={},Za={exports:{}},at={},el={exports:{}},tl={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vd;function Sm(){return Vd||(Vd=1,(function(i){function n(G,ae){var S=G.length;G.push(ae);e:for(;0<S;){var D=S-1>>>1,ne=G[D];if(0<l(ne,ae))G[D]=ae,G[S]=ne,S=D;else break e}}function s(G){return G.length===0?null:G[0]}function o(G){if(G.length===0)return null;var ae=G[0],S=G.pop();if(S!==ae){G[0]=S;e:for(var D=0,ne=G.length,pe=ne>>>1;D<pe;){var O=2*(D+1)-1,K=G[O],Q=O+1,ie=G[Q];if(0>l(K,S))Q<ne&&0>l(ie,K)?(G[D]=ie,G[Q]=S,D=Q):(G[D]=K,G[O]=S,D=O);else if(Q<ne&&0>l(ie,S))G[D]=ie,G[Q]=S,D=Q;else break e}}return ae}function l(G,ae){var S=G.sortIndex-ae.sortIndex;return S!==0?S:G.id-ae.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var f=Date,p=f.now();i.unstable_now=function(){return f.now()-p}}var g=[],v=[],y=1,x=null,_=3,b=!1,R=!1,P=!1,A=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(G){for(var ae=s(v);ae!==null;){if(ae.callback===null)o(v);else if(ae.startTime<=G)o(v),ae.sortIndex=ae.expirationTime,n(g,ae);else break;ae=s(v)}}function q(G){if(P=!1,I(G),!R)if(s(g)!==null)R=!0,Te(W);else{var ae=s(v);ae!==null&&me(q,ae.startTime-G)}}function W(G,ae){R=!1,P&&(P=!1,B(te),te=-1),b=!0;var S=_;try{for(I(ae),x=s(g);x!==null&&(!(x.expirationTime>ae)||G&&!Pe());){var D=x.callback;if(typeof D=="function"){x.callback=null,_=x.priorityLevel;var ne=D(x.expirationTime<=ae);ae=i.unstable_now(),typeof ne=="function"?x.callback=ne:x===s(g)&&o(g),I(ae)}else o(g);x=s(g)}if(x!==null)var pe=!0;else{var O=s(v);O!==null&&me(q,O.startTime-ae),pe=!1}return pe}finally{x=null,_=S,b=!1}}var L=!1,F=null,te=-1,oe=5,ye=-1;function Pe(){return!(i.unstable_now()-ye<oe)}function H(){if(F!==null){var G=i.unstable_now();ye=G;var ae=!0;try{ae=F(!0,G)}finally{ae?re():(L=!1,F=null)}}else L=!1}var re;if(typeof U=="function")re=function(){U(H)};else if(typeof MessageChannel<"u"){var _e=new MessageChannel,ke=_e.port2;_e.port1.onmessage=H,re=function(){ke.postMessage(null)}}else re=function(){A(H,0)};function Te(G){F=G,L||(L=!0,re())}function me(G,ae){te=A(function(){G(i.unstable_now())},ae)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(G){G.callback=null},i.unstable_continueExecution=function(){R||b||(R=!0,Te(W))},i.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):oe=0<G?Math.floor(1e3/G):5},i.unstable_getCurrentPriorityLevel=function(){return _},i.unstable_getFirstCallbackNode=function(){return s(g)},i.unstable_next=function(G){switch(_){case 1:case 2:case 3:var ae=3;break;default:ae=_}var S=_;_=ae;try{return G()}finally{_=S}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(G,ae){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var S=_;_=G;try{return ae()}finally{_=S}},i.unstable_scheduleCallback=function(G,ae,S){var D=i.unstable_now();switch(typeof S=="object"&&S!==null?(S=S.delay,S=typeof S=="number"&&0<S?D+S:D):S=D,G){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=S+ne,G={id:y++,callback:ae,priorityLevel:G,startTime:S,expirationTime:ne,sortIndex:-1},S>D?(G.sortIndex=S,n(v,G),s(g)===null&&G===s(v)&&(P?(B(te),te=-1):P=!0,me(q,S-D))):(G.sortIndex=ne,n(g,G),R||b||(R=!0,Te(W))),G},i.unstable_shouldYield=Pe,i.unstable_wrapCallback=function(G){var ae=_;return function(){var S=_;_=ae;try{return G.apply(this,arguments)}finally{_=S}}}})(tl)),tl}var Wd;function bm(){return Wd||(Wd=1,el.exports=Sm()),el.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hd;function jm(){if(Hd)return at;Hd=1;var i=Tl(),n=bm();function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,l={};function u(e,t){f(e,t),f(e+"Capture",t)}function f(e,t){for(l[e]=t,e=0;e<t.length;e++)o.add(t[e])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,y={},x={};function _(e){return g.call(x,e)?!0:g.call(y,e)?!1:v.test(e)?x[e]=!0:(y[e]=!0,!1)}function b(e,t,r,a){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function R(e,t,r,a){if(t===null||typeof t>"u"||b(e,t,r,a))return!0;if(a)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function P(e,t,r,a,c,d,m){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=c,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=d,this.removeEmptyString=m}var A={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){A[e]=new P(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];A[t]=new P(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){A[e]=new P(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){A[e]=new P(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){A[e]=new P(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){A[e]=new P(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){A[e]=new P(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){A[e]=new P(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){A[e]=new P(e,5,!1,e.toLowerCase(),null,!1,!1)});var B=/[\-:]([a-z])/g;function U(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(B,U);A[t]=new P(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(B,U);A[t]=new P(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(B,U);A[t]=new P(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){A[e]=new P(e,1,!1,e.toLowerCase(),null,!1,!1)}),A.xlinkHref=new P("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){A[e]=new P(e,1,!1,e.toLowerCase(),null,!0,!0)});function I(e,t,r,a){var c=A.hasOwnProperty(t)?A[t]:null;(c!==null?c.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(R(t,r,c,a)&&(r=null),a||c===null?_(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):c.mustUseProperty?e[c.propertyName]=r===null?c.type===3?!1:"":r:(t=c.attributeName,a=c.attributeNamespace,r===null?e.removeAttribute(t):(c=c.type,r=c===3||c===4&&r===!0?"":""+r,a?e.setAttributeNS(a,t,r):e.setAttribute(t,r))))}var q=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,W=Symbol.for("react.element"),L=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),te=Symbol.for("react.strict_mode"),oe=Symbol.for("react.profiler"),ye=Symbol.for("react.provider"),Pe=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),re=Symbol.for("react.suspense"),_e=Symbol.for("react.suspense_list"),ke=Symbol.for("react.memo"),Te=Symbol.for("react.lazy"),me=Symbol.for("react.offscreen"),G=Symbol.iterator;function ae(e){return e===null||typeof e!="object"?null:(e=G&&e[G]||e["@@iterator"],typeof e=="function"?e:null)}var S=Object.assign,D;function ne(e){if(D===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);D=t&&t[1]||""}return`
`+D+e}var pe=!1;function O(e,t){if(!e||pe)return"";pe=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(T){var a=T}Reflect.construct(e,[],t)}else{try{t.call()}catch(T){a=T}e.call(t.prototype)}else{try{throw Error()}catch(T){a=T}e()}}catch(T){if(T&&a&&typeof T.stack=="string"){for(var c=T.stack.split(`
`),d=a.stack.split(`
`),m=c.length-1,w=d.length-1;1<=m&&0<=w&&c[m]!==d[w];)w--;for(;1<=m&&0<=w;m--,w--)if(c[m]!==d[w]){if(m!==1||w!==1)do if(m--,w--,0>w||c[m]!==d[w]){var k=`
`+c[m].replace(" at new "," at ");return e.displayName&&k.includes("<anonymous>")&&(k=k.replace("<anonymous>",e.displayName)),k}while(1<=m&&0<=w);break}}}finally{pe=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?ne(e):""}function K(e){switch(e.tag){case 5:return ne(e.type);case 16:return ne("Lazy");case 13:return ne("Suspense");case 19:return ne("SuspenseList");case 0:case 2:case 15:return e=O(e.type,!1),e;case 11:return e=O(e.type.render,!1),e;case 1:return e=O(e.type,!0),e;default:return""}}function Q(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case F:return"Fragment";case L:return"Portal";case oe:return"Profiler";case te:return"StrictMode";case re:return"Suspense";case _e:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Pe:return(e.displayName||"Context")+".Consumer";case ye:return(e._context.displayName||"Context")+".Provider";case H:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ke:return t=e.displayName||null,t!==null?t:Q(e.type)||"Memo";case Te:t=e._payload,e=e._init;try{return Q(e(t))}catch{}}return null}function ie(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Q(t);case 8:return t===te?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function se(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Re(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function ct(e){var t=Re(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var c=r.get,d=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(m){a=""+m,d.call(this,m)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return a},setValue:function(m){a=""+m},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function $t(e){e._valueTracker||(e._valueTracker=ct(e))}function no(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),a="";return e&&(a=Re(e)?e.checked?"true":"false":e.value),e=a,e!==r?(t.setValue(e),!0):!1}function Mn(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ro(e,t){var r=t.checked;return S({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Wl(e,t){var r=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;r=se(t.value!=null?t.value:r),e._wrapperState={initialChecked:a,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Hl(e,t){t=t.checked,t!=null&&I(e,"checked",t,!1)}function so(e,t){Hl(e,t);var r=se(t.value),a=t.type;if(r!=null)a==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?io(e,t.type,r):t.hasOwnProperty("defaultValue")&&io(e,t.type,se(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function ql(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function io(e,t,r){(t!=="number"||Mn(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Lr=Array.isArray;function Un(e,t,r,a){if(e=e.options,t){t={};for(var c=0;c<r.length;c++)t["$"+r[c]]=!0;for(r=0;r<e.length;r++)c=t.hasOwnProperty("$"+e[r].value),e[r].selected!==c&&(e[r].selected=c),c&&a&&(e[r].defaultSelected=!0)}else{for(r=""+se(r),t=null,c=0;c<e.length;c++){if(e[c].value===r){e[c].selected=!0,a&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function oo(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(s(91));return S({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Kl(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(s(92));if(Lr(r)){if(1<r.length)throw Error(s(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:se(r)}}function Gl(e,t){var r=se(t.value),a=se(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),a!=null&&(e.defaultValue=""+a)}function Ql(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Jl(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ao(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Jl(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Es,Xl=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,a,c){MSApp.execUnsafeLocalFunction(function(){return e(t,r,a,c)})}:e})(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Es=Es||document.createElement("div"),Es.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Es.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ir(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Dr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xh=["Webkit","ms","Moz","O"];Object.keys(Dr).forEach(function(e){xh.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Dr[t]=Dr[e]})});function Yl(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Dr.hasOwnProperty(e)&&Dr[e]?(""+t).trim():t+"px"}function Zl(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var a=r.indexOf("--")===0,c=Yl(r,t[r],a);r==="float"&&(r="cssFloat"),a?e.setProperty(r,c):e[r]=c}}var kh=S({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function lo(e,t){if(t){if(kh[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(s(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(s(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(t.style!=null&&typeof t.style!="object")throw Error(s(62))}}function uo(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var co=null;function fo(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ho=null,Fn=null,zn=null;function eu(e){if(e=ss(e)){if(typeof ho!="function")throw Error(s(280));var t=e.stateNode;t&&(t=Qs(t),ho(e.stateNode,e.type,t))}}function tu(e){Fn?zn?zn.push(e):zn=[e]:Fn=e}function nu(){if(Fn){var e=Fn,t=zn;if(zn=Fn=null,eu(e),t)for(e=0;e<t.length;e++)eu(t[e])}}function ru(e,t){return e(t)}function su(){}var po=!1;function iu(e,t,r){if(po)return e(t,r);po=!0;try{return ru(e,t,r)}finally{po=!1,(Fn!==null||zn!==null)&&(su(),nu())}}function $r(e,t){var r=e.stateNode;if(r===null)return null;var a=Qs(r);if(a===null)return null;r=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(s(231,t,typeof r));return r}var mo=!1;if(p)try{var Mr={};Object.defineProperty(Mr,"passive",{get:function(){mo=!0}}),window.addEventListener("test",Mr,Mr),window.removeEventListener("test",Mr,Mr)}catch{mo=!1}function Sh(e,t,r,a,c,d,m,w,k){var T=Array.prototype.slice.call(arguments,3);try{t.apply(r,T)}catch(M){this.onError(M)}}var Ur=!1,Cs=null,Ns=!1,go=null,bh={onError:function(e){Ur=!0,Cs=e}};function jh(e,t,r,a,c,d,m,w,k){Ur=!1,Cs=null,Sh.apply(bh,arguments)}function Eh(e,t,r,a,c,d,m,w,k){if(jh.apply(this,arguments),Ur){if(Ur){var T=Cs;Ur=!1,Cs=null}else throw Error(s(198));Ns||(Ns=!0,go=T)}}function wn(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function ou(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function au(e){if(wn(e)!==e)throw Error(s(188))}function Ch(e){var t=e.alternate;if(!t){if(t=wn(e),t===null)throw Error(s(188));return t!==e?null:e}for(var r=e,a=t;;){var c=r.return;if(c===null)break;var d=c.alternate;if(d===null){if(a=c.return,a!==null){r=a;continue}break}if(c.child===d.child){for(d=c.child;d;){if(d===r)return au(c),e;if(d===a)return au(c),t;d=d.sibling}throw Error(s(188))}if(r.return!==a.return)r=c,a=d;else{for(var m=!1,w=c.child;w;){if(w===r){m=!0,r=c,a=d;break}if(w===a){m=!0,a=c,r=d;break}w=w.sibling}if(!m){for(w=d.child;w;){if(w===r){m=!0,r=d,a=c;break}if(w===a){m=!0,a=d,r=c;break}w=w.sibling}if(!m)throw Error(s(189))}}if(r.alternate!==a)throw Error(s(190))}if(r.tag!==3)throw Error(s(188));return r.stateNode.current===r?e:t}function lu(e){return e=Ch(e),e!==null?uu(e):null}function uu(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=uu(e);if(t!==null)return t;e=e.sibling}return null}var cu=n.unstable_scheduleCallback,du=n.unstable_cancelCallback,Nh=n.unstable_shouldYield,Ph=n.unstable_requestPaint,De=n.unstable_now,Th=n.unstable_getCurrentPriorityLevel,vo=n.unstable_ImmediatePriority,fu=n.unstable_UserBlockingPriority,Ps=n.unstable_NormalPriority,Rh=n.unstable_LowPriority,hu=n.unstable_IdlePriority,Ts=null,Rt=null;function Ah(e){if(Rt&&typeof Rt.onCommitFiberRoot=="function")try{Rt.onCommitFiberRoot(Ts,e,void 0,(e.current.flags&128)===128)}catch{}}var kt=Math.clz32?Math.clz32:Ih,Oh=Math.log,Lh=Math.LN2;function Ih(e){return e>>>=0,e===0?32:31-(Oh(e)/Lh|0)|0}var Rs=64,As=4194304;function Fr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Os(e,t){var r=e.pendingLanes;if(r===0)return 0;var a=0,c=e.suspendedLanes,d=e.pingedLanes,m=r&268435455;if(m!==0){var w=m&~c;w!==0?a=Fr(w):(d&=m,d!==0&&(a=Fr(d)))}else m=r&~c,m!==0?a=Fr(m):d!==0&&(a=Fr(d));if(a===0)return 0;if(t!==0&&t!==a&&(t&c)===0&&(c=a&-a,d=t&-t,c>=d||c===16&&(d&4194240)!==0))return t;if((a&4)!==0&&(a|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=a;0<t;)r=31-kt(t),c=1<<r,a|=e[r],t&=~c;return a}function Dh(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $h(e,t){for(var r=e.suspendedLanes,a=e.pingedLanes,c=e.expirationTimes,d=e.pendingLanes;0<d;){var m=31-kt(d),w=1<<m,k=c[m];k===-1?((w&r)===0||(w&a)!==0)&&(c[m]=Dh(w,t)):k<=t&&(e.expiredLanes|=w),d&=~w}}function yo(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function pu(){var e=Rs;return Rs<<=1,(Rs&4194240)===0&&(Rs=64),e}function wo(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function zr(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-kt(t),e[t]=r}function Mh(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<r;){var c=31-kt(r),d=1<<c;t[c]=0,a[c]=-1,e[c]=-1,r&=~d}}function _o(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var a=31-kt(r),c=1<<a;c&t|e[a]&t&&(e[a]|=t),r&=~c}}var xe=0;function mu(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var gu,xo,vu,yu,wu,ko=!1,Ls=[],Gt=null,Qt=null,Jt=null,Br=new Map,Vr=new Map,Xt=[],Uh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function _u(e,t){switch(e){case"focusin":case"focusout":Gt=null;break;case"dragenter":case"dragleave":Qt=null;break;case"mouseover":case"mouseout":Jt=null;break;case"pointerover":case"pointerout":Br.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vr.delete(t.pointerId)}}function Wr(e,t,r,a,c,d){return e===null||e.nativeEvent!==d?(e={blockedOn:t,domEventName:r,eventSystemFlags:a,nativeEvent:d,targetContainers:[c]},t!==null&&(t=ss(t),t!==null&&xo(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function Fh(e,t,r,a,c){switch(t){case"focusin":return Gt=Wr(Gt,e,t,r,a,c),!0;case"dragenter":return Qt=Wr(Qt,e,t,r,a,c),!0;case"mouseover":return Jt=Wr(Jt,e,t,r,a,c),!0;case"pointerover":var d=c.pointerId;return Br.set(d,Wr(Br.get(d)||null,e,t,r,a,c)),!0;case"gotpointercapture":return d=c.pointerId,Vr.set(d,Wr(Vr.get(d)||null,e,t,r,a,c)),!0}return!1}function xu(e){var t=_n(e.target);if(t!==null){var r=wn(t);if(r!==null){if(t=r.tag,t===13){if(t=ou(r),t!==null){e.blockedOn=t,wu(e.priority,function(){vu(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Is(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=bo(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var a=new r.constructor(r.type,r);co=a,r.target.dispatchEvent(a),co=null}else return t=ss(r),t!==null&&xo(t),e.blockedOn=r,!1;t.shift()}return!0}function ku(e,t,r){Is(e)&&r.delete(t)}function zh(){ko=!1,Gt!==null&&Is(Gt)&&(Gt=null),Qt!==null&&Is(Qt)&&(Qt=null),Jt!==null&&Is(Jt)&&(Jt=null),Br.forEach(ku),Vr.forEach(ku)}function Hr(e,t){e.blockedOn===t&&(e.blockedOn=null,ko||(ko=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,zh)))}function qr(e){function t(c){return Hr(c,e)}if(0<Ls.length){Hr(Ls[0],e);for(var r=1;r<Ls.length;r++){var a=Ls[r];a.blockedOn===e&&(a.blockedOn=null)}}for(Gt!==null&&Hr(Gt,e),Qt!==null&&Hr(Qt,e),Jt!==null&&Hr(Jt,e),Br.forEach(t),Vr.forEach(t),r=0;r<Xt.length;r++)a=Xt[r],a.blockedOn===e&&(a.blockedOn=null);for(;0<Xt.length&&(r=Xt[0],r.blockedOn===null);)xu(r),r.blockedOn===null&&Xt.shift()}var Bn=q.ReactCurrentBatchConfig,Ds=!0;function Bh(e,t,r,a){var c=xe,d=Bn.transition;Bn.transition=null;try{xe=1,So(e,t,r,a)}finally{xe=c,Bn.transition=d}}function Vh(e,t,r,a){var c=xe,d=Bn.transition;Bn.transition=null;try{xe=4,So(e,t,r,a)}finally{xe=c,Bn.transition=d}}function So(e,t,r,a){if(Ds){var c=bo(e,t,r,a);if(c===null)zo(e,t,a,$s,r),_u(e,a);else if(Fh(c,e,t,r,a))a.stopPropagation();else if(_u(e,a),t&4&&-1<Uh.indexOf(e)){for(;c!==null;){var d=ss(c);if(d!==null&&gu(d),d=bo(e,t,r,a),d===null&&zo(e,t,a,$s,r),d===c)break;c=d}c!==null&&a.stopPropagation()}else zo(e,t,a,null,r)}}var $s=null;function bo(e,t,r,a){if($s=null,e=fo(a),e=_n(e),e!==null)if(t=wn(e),t===null)e=null;else if(r=t.tag,r===13){if(e=ou(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return $s=e,null}function Su(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Th()){case vo:return 1;case fu:return 4;case Ps:case Rh:return 16;case hu:return 536870912;default:return 16}default:return 16}}var Yt=null,jo=null,Ms=null;function bu(){if(Ms)return Ms;var e,t=jo,r=t.length,a,c="value"in Yt?Yt.value:Yt.textContent,d=c.length;for(e=0;e<r&&t[e]===c[e];e++);var m=r-e;for(a=1;a<=m&&t[r-a]===c[d-a];a++);return Ms=c.slice(e,1<a?1-a:void 0)}function Us(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Fs(){return!0}function ju(){return!1}function dt(e){function t(r,a,c,d,m){this._reactName=r,this._targetInst=c,this.type=a,this.nativeEvent=d,this.target=m,this.currentTarget=null;for(var w in e)e.hasOwnProperty(w)&&(r=e[w],this[w]=r?r(d):d[w]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Fs:ju,this.isPropagationStopped=ju,this}return S(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Fs)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Fs)},persist:function(){},isPersistent:Fs}),t}var Vn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Eo=dt(Vn),Kr=S({},Vn,{view:0,detail:0}),Wh=dt(Kr),Co,No,Gr,zs=S({},Kr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:To,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Gr&&(Gr&&e.type==="mousemove"?(Co=e.screenX-Gr.screenX,No=e.screenY-Gr.screenY):No=Co=0,Gr=e),Co)},movementY:function(e){return"movementY"in e?e.movementY:No}}),Eu=dt(zs),Hh=S({},zs,{dataTransfer:0}),qh=dt(Hh),Kh=S({},Kr,{relatedTarget:0}),Po=dt(Kh),Gh=S({},Vn,{animationName:0,elapsedTime:0,pseudoElement:0}),Qh=dt(Gh),Jh=S({},Vn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Xh=dt(Jh),Yh=S({},Vn,{data:0}),Cu=dt(Yh),Zh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ep={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},tp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function np(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=tp[e])?!!t[e]:!1}function To(){return np}var rp=S({},Kr,{key:function(e){if(e.key){var t=Zh[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Us(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?ep[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:To,charCode:function(e){return e.type==="keypress"?Us(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Us(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),sp=dt(rp),ip=S({},zs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Nu=dt(ip),op=S({},Kr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:To}),ap=dt(op),lp=S({},Vn,{propertyName:0,elapsedTime:0,pseudoElement:0}),up=dt(lp),cp=S({},zs,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),dp=dt(cp),fp=[9,13,27,32],Ro=p&&"CompositionEvent"in window,Qr=null;p&&"documentMode"in document&&(Qr=document.documentMode);var hp=p&&"TextEvent"in window&&!Qr,Pu=p&&(!Ro||Qr&&8<Qr&&11>=Qr),Tu=" ",Ru=!1;function Au(e,t){switch(e){case"keyup":return fp.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ou(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Wn=!1;function pp(e,t){switch(e){case"compositionend":return Ou(t);case"keypress":return t.which!==32?null:(Ru=!0,Tu);case"textInput":return e=t.data,e===Tu&&Ru?null:e;default:return null}}function mp(e,t){if(Wn)return e==="compositionend"||!Ro&&Au(e,t)?(e=bu(),Ms=jo=Yt=null,Wn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Pu&&t.locale!=="ko"?null:t.data;default:return null}}var gp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Lu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!gp[e.type]:t==="textarea"}function Iu(e,t,r,a){tu(a),t=qs(t,"onChange"),0<t.length&&(r=new Eo("onChange","change",null,r,a),e.push({event:r,listeners:t}))}var Jr=null,Xr=null;function vp(e){Zu(e,0)}function Bs(e){var t=Qn(e);if(no(t))return e}function yp(e,t){if(e==="change")return t}var Du=!1;if(p){var Ao;if(p){var Oo="oninput"in document;if(!Oo){var $u=document.createElement("div");$u.setAttribute("oninput","return;"),Oo=typeof $u.oninput=="function"}Ao=Oo}else Ao=!1;Du=Ao&&(!document.documentMode||9<document.documentMode)}function Mu(){Jr&&(Jr.detachEvent("onpropertychange",Uu),Xr=Jr=null)}function Uu(e){if(e.propertyName==="value"&&Bs(Xr)){var t=[];Iu(t,Xr,e,fo(e)),iu(vp,t)}}function wp(e,t,r){e==="focusin"?(Mu(),Jr=t,Xr=r,Jr.attachEvent("onpropertychange",Uu)):e==="focusout"&&Mu()}function _p(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Bs(Xr)}function xp(e,t){if(e==="click")return Bs(t)}function kp(e,t){if(e==="input"||e==="change")return Bs(t)}function Sp(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var St=typeof Object.is=="function"?Object.is:Sp;function Yr(e,t){if(St(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),a=Object.keys(t);if(r.length!==a.length)return!1;for(a=0;a<r.length;a++){var c=r[a];if(!g.call(t,c)||!St(e[c],t[c]))return!1}return!0}function Fu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function zu(e,t){var r=Fu(e);e=0;for(var a;r;){if(r.nodeType===3){if(a=e+r.textContent.length,e<=t&&a>=t)return{node:r,offset:t-e};e=a}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Fu(r)}}function Bu(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Bu(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Vu(){for(var e=window,t=Mn();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Mn(e.document)}return t}function Lo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function bp(e){var t=Vu(),r=e.focusedElem,a=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Bu(r.ownerDocument.documentElement,r)){if(a!==null&&Lo(r)){if(t=a.start,e=a.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var c=r.textContent.length,d=Math.min(a.start,c);a=a.end===void 0?d:Math.min(a.end,c),!e.extend&&d>a&&(c=a,a=d,d=c),c=zu(r,d);var m=zu(r,a);c&&m&&(e.rangeCount!==1||e.anchorNode!==c.node||e.anchorOffset!==c.offset||e.focusNode!==m.node||e.focusOffset!==m.offset)&&(t=t.createRange(),t.setStart(c.node,c.offset),e.removeAllRanges(),d>a?(e.addRange(t),e.extend(m.node,m.offset)):(t.setEnd(m.node,m.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var jp=p&&"documentMode"in document&&11>=document.documentMode,Hn=null,Io=null,Zr=null,Do=!1;function Wu(e,t,r){var a=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Do||Hn==null||Hn!==Mn(a)||(a=Hn,"selectionStart"in a&&Lo(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Zr&&Yr(Zr,a)||(Zr=a,a=qs(Io,"onSelect"),0<a.length&&(t=new Eo("onSelect","select",null,t,r),e.push({event:t,listeners:a}),t.target=Hn)))}function Vs(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var qn={animationend:Vs("Animation","AnimationEnd"),animationiteration:Vs("Animation","AnimationIteration"),animationstart:Vs("Animation","AnimationStart"),transitionend:Vs("Transition","TransitionEnd")},$o={},Hu={};p&&(Hu=document.createElement("div").style,"AnimationEvent"in window||(delete qn.animationend.animation,delete qn.animationiteration.animation,delete qn.animationstart.animation),"TransitionEvent"in window||delete qn.transitionend.transition);function Ws(e){if($o[e])return $o[e];if(!qn[e])return e;var t=qn[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Hu)return $o[e]=t[r];return e}var qu=Ws("animationend"),Ku=Ws("animationiteration"),Gu=Ws("animationstart"),Qu=Ws("transitionend"),Ju=new Map,Xu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Zt(e,t){Ju.set(e,t),u(t,[e])}for(var Mo=0;Mo<Xu.length;Mo++){var Uo=Xu[Mo],Ep=Uo.toLowerCase(),Cp=Uo[0].toUpperCase()+Uo.slice(1);Zt(Ep,"on"+Cp)}Zt(qu,"onAnimationEnd"),Zt(Ku,"onAnimationIteration"),Zt(Gu,"onAnimationStart"),Zt("dblclick","onDoubleClick"),Zt("focusin","onFocus"),Zt("focusout","onBlur"),Zt(Qu,"onTransitionEnd"),f("onMouseEnter",["mouseout","mouseover"]),f("onMouseLeave",["mouseout","mouseover"]),f("onPointerEnter",["pointerout","pointerover"]),f("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var es="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Np=new Set("cancel close invalid load scroll toggle".split(" ").concat(es));function Yu(e,t,r){var a=e.type||"unknown-event";e.currentTarget=r,Eh(a,t,void 0,e),e.currentTarget=null}function Zu(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var a=e[r],c=a.event;a=a.listeners;e:{var d=void 0;if(t)for(var m=a.length-1;0<=m;m--){var w=a[m],k=w.instance,T=w.currentTarget;if(w=w.listener,k!==d&&c.isPropagationStopped())break e;Yu(c,w,T),d=k}else for(m=0;m<a.length;m++){if(w=a[m],k=w.instance,T=w.currentTarget,w=w.listener,k!==d&&c.isPropagationStopped())break e;Yu(c,w,T),d=k}}}if(Ns)throw e=go,Ns=!1,go=null,e}function je(e,t){var r=t[Ko];r===void 0&&(r=t[Ko]=new Set);var a=e+"__bubble";r.has(a)||(ec(t,e,2,!1),r.add(a))}function Fo(e,t,r){var a=0;t&&(a|=4),ec(r,e,a,t)}var Hs="_reactListening"+Math.random().toString(36).slice(2);function ts(e){if(!e[Hs]){e[Hs]=!0,o.forEach(function(r){r!=="selectionchange"&&(Np.has(r)||Fo(r,!1,e),Fo(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Hs]||(t[Hs]=!0,Fo("selectionchange",!1,t))}}function ec(e,t,r,a){switch(Su(t)){case 1:var c=Bh;break;case 4:c=Vh;break;default:c=So}r=c.bind(null,t,r,e),c=void 0,!mo||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),a?c!==void 0?e.addEventListener(t,r,{capture:!0,passive:c}):e.addEventListener(t,r,!0):c!==void 0?e.addEventListener(t,r,{passive:c}):e.addEventListener(t,r,!1)}function zo(e,t,r,a,c){var d=a;if((t&1)===0&&(t&2)===0&&a!==null)e:for(;;){if(a===null)return;var m=a.tag;if(m===3||m===4){var w=a.stateNode.containerInfo;if(w===c||w.nodeType===8&&w.parentNode===c)break;if(m===4)for(m=a.return;m!==null;){var k=m.tag;if((k===3||k===4)&&(k=m.stateNode.containerInfo,k===c||k.nodeType===8&&k.parentNode===c))return;m=m.return}for(;w!==null;){if(m=_n(w),m===null)return;if(k=m.tag,k===5||k===6){a=d=m;continue e}w=w.parentNode}}a=a.return}iu(function(){var T=d,M=fo(r),z=[];e:{var $=Ju.get(e);if($!==void 0){var J=Eo,Y=e;switch(e){case"keypress":if(Us(r)===0)break e;case"keydown":case"keyup":J=sp;break;case"focusin":Y="focus",J=Po;break;case"focusout":Y="blur",J=Po;break;case"beforeblur":case"afterblur":J=Po;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=Eu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=qh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=ap;break;case qu:case Ku:case Gu:J=Qh;break;case Qu:J=up;break;case"scroll":J=Wh;break;case"wheel":J=dp;break;case"copy":case"cut":case"paste":J=Xh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=Nu}var Z=(t&4)!==0,$e=!Z&&e==="scroll",C=Z?$!==null?$+"Capture":null:$;Z=[];for(var j=T,N;j!==null;){N=j;var V=N.stateNode;if(N.tag===5&&V!==null&&(N=V,C!==null&&(V=$r(j,C),V!=null&&Z.push(ns(j,V,N)))),$e)break;j=j.return}0<Z.length&&($=new J($,Y,null,r,M),z.push({event:$,listeners:Z}))}}if((t&7)===0){e:{if($=e==="mouseover"||e==="pointerover",J=e==="mouseout"||e==="pointerout",$&&r!==co&&(Y=r.relatedTarget||r.fromElement)&&(_n(Y)||Y[Mt]))break e;if((J||$)&&($=M.window===M?M:($=M.ownerDocument)?$.defaultView||$.parentWindow:window,J?(Y=r.relatedTarget||r.toElement,J=T,Y=Y?_n(Y):null,Y!==null&&($e=wn(Y),Y!==$e||Y.tag!==5&&Y.tag!==6)&&(Y=null)):(J=null,Y=T),J!==Y)){if(Z=Eu,V="onMouseLeave",C="onMouseEnter",j="mouse",(e==="pointerout"||e==="pointerover")&&(Z=Nu,V="onPointerLeave",C="onPointerEnter",j="pointer"),$e=J==null?$:Qn(J),N=Y==null?$:Qn(Y),$=new Z(V,j+"leave",J,r,M),$.target=$e,$.relatedTarget=N,V=null,_n(M)===T&&(Z=new Z(C,j+"enter",Y,r,M),Z.target=N,Z.relatedTarget=$e,V=Z),$e=V,J&&Y)t:{for(Z=J,C=Y,j=0,N=Z;N;N=Kn(N))j++;for(N=0,V=C;V;V=Kn(V))N++;for(;0<j-N;)Z=Kn(Z),j--;for(;0<N-j;)C=Kn(C),N--;for(;j--;){if(Z===C||C!==null&&Z===C.alternate)break t;Z=Kn(Z),C=Kn(C)}Z=null}else Z=null;J!==null&&tc(z,$,J,Z,!1),Y!==null&&$e!==null&&tc(z,$e,Y,Z,!0)}}e:{if($=T?Qn(T):window,J=$.nodeName&&$.nodeName.toLowerCase(),J==="select"||J==="input"&&$.type==="file")var ee=yp;else if(Lu($))if(Du)ee=kp;else{ee=_p;var le=wp}else(J=$.nodeName)&&J.toLowerCase()==="input"&&($.type==="checkbox"||$.type==="radio")&&(ee=xp);if(ee&&(ee=ee(e,T))){Iu(z,ee,r,M);break e}le&&le(e,$,T),e==="focusout"&&(le=$._wrapperState)&&le.controlled&&$.type==="number"&&io($,"number",$.value)}switch(le=T?Qn(T):window,e){case"focusin":(Lu(le)||le.contentEditable==="true")&&(Hn=le,Io=T,Zr=null);break;case"focusout":Zr=Io=Hn=null;break;case"mousedown":Do=!0;break;case"contextmenu":case"mouseup":case"dragend":Do=!1,Wu(z,r,M);break;case"selectionchange":if(jp)break;case"keydown":case"keyup":Wu(z,r,M)}var ue;if(Ro)e:{switch(e){case"compositionstart":var ce="onCompositionStart";break e;case"compositionend":ce="onCompositionEnd";break e;case"compositionupdate":ce="onCompositionUpdate";break e}ce=void 0}else Wn?Au(e,r)&&(ce="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(ce="onCompositionStart");ce&&(Pu&&r.locale!=="ko"&&(Wn||ce!=="onCompositionStart"?ce==="onCompositionEnd"&&Wn&&(ue=bu()):(Yt=M,jo="value"in Yt?Yt.value:Yt.textContent,Wn=!0)),le=qs(T,ce),0<le.length&&(ce=new Cu(ce,e,null,r,M),z.push({event:ce,listeners:le}),ue?ce.data=ue:(ue=Ou(r),ue!==null&&(ce.data=ue)))),(ue=hp?pp(e,r):mp(e,r))&&(T=qs(T,"onBeforeInput"),0<T.length&&(M=new Cu("onBeforeInput","beforeinput",null,r,M),z.push({event:M,listeners:T}),M.data=ue))}Zu(z,t)})}function ns(e,t,r){return{instance:e,listener:t,currentTarget:r}}function qs(e,t){for(var r=t+"Capture",a=[];e!==null;){var c=e,d=c.stateNode;c.tag===5&&d!==null&&(c=d,d=$r(e,r),d!=null&&a.unshift(ns(e,d,c)),d=$r(e,t),d!=null&&a.push(ns(e,d,c))),e=e.return}return a}function Kn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function tc(e,t,r,a,c){for(var d=t._reactName,m=[];r!==null&&r!==a;){var w=r,k=w.alternate,T=w.stateNode;if(k!==null&&k===a)break;w.tag===5&&T!==null&&(w=T,c?(k=$r(r,d),k!=null&&m.unshift(ns(r,k,w))):c||(k=$r(r,d),k!=null&&m.push(ns(r,k,w)))),r=r.return}m.length!==0&&e.push({event:t,listeners:m})}var Pp=/\r\n?/g,Tp=/\u0000|\uFFFD/g;function nc(e){return(typeof e=="string"?e:""+e).replace(Pp,`
`).replace(Tp,"")}function Ks(e,t,r){if(t=nc(t),nc(e)!==t&&r)throw Error(s(425))}function Gs(){}var Bo=null,Vo=null;function Wo(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ho=typeof setTimeout=="function"?setTimeout:void 0,Rp=typeof clearTimeout=="function"?clearTimeout:void 0,rc=typeof Promise=="function"?Promise:void 0,Ap=typeof queueMicrotask=="function"?queueMicrotask:typeof rc<"u"?function(e){return rc.resolve(null).then(e).catch(Op)}:Ho;function Op(e){setTimeout(function(){throw e})}function qo(e,t){var r=t,a=0;do{var c=r.nextSibling;if(e.removeChild(r),c&&c.nodeType===8)if(r=c.data,r==="/$"){if(a===0){e.removeChild(c),qr(t);return}a--}else r!=="$"&&r!=="$?"&&r!=="$!"||a++;r=c}while(r);qr(t)}function en(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function sc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Gn=Math.random().toString(36).slice(2),At="__reactFiber$"+Gn,rs="__reactProps$"+Gn,Mt="__reactContainer$"+Gn,Ko="__reactEvents$"+Gn,Lp="__reactListeners$"+Gn,Ip="__reactHandles$"+Gn;function _n(e){var t=e[At];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Mt]||r[At]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=sc(e);e!==null;){if(r=e[At])return r;e=sc(e)}return t}e=r,r=e.parentNode}return null}function ss(e){return e=e[At]||e[Mt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Qn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(s(33))}function Qs(e){return e[rs]||null}var Go=[],Jn=-1;function tn(e){return{current:e}}function Ee(e){0>Jn||(e.current=Go[Jn],Go[Jn]=null,Jn--)}function Se(e,t){Jn++,Go[Jn]=e.current,e.current=t}var nn={},Qe=tn(nn),nt=tn(!1),xn=nn;function Xn(e,t){var r=e.type.contextTypes;if(!r)return nn;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var c={},d;for(d in r)c[d]=t[d];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=c),c}function rt(e){return e=e.childContextTypes,e!=null}function Js(){Ee(nt),Ee(Qe)}function ic(e,t,r){if(Qe.current!==nn)throw Error(s(168));Se(Qe,t),Se(nt,r)}function oc(e,t,r){var a=e.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return r;a=a.getChildContext();for(var c in a)if(!(c in t))throw Error(s(108,ie(e)||"Unknown",c));return S({},r,a)}function Xs(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||nn,xn=Qe.current,Se(Qe,e),Se(nt,nt.current),!0}function ac(e,t,r){var a=e.stateNode;if(!a)throw Error(s(169));r?(e=oc(e,t,xn),a.__reactInternalMemoizedMergedChildContext=e,Ee(nt),Ee(Qe),Se(Qe,e)):Ee(nt),Se(nt,r)}var Ut=null,Ys=!1,Qo=!1;function lc(e){Ut===null?Ut=[e]:Ut.push(e)}function Dp(e){Ys=!0,lc(e)}function rn(){if(!Qo&&Ut!==null){Qo=!0;var e=0,t=xe;try{var r=Ut;for(xe=1;e<r.length;e++){var a=r[e];do a=a(!0);while(a!==null)}Ut=null,Ys=!1}catch(c){throw Ut!==null&&(Ut=Ut.slice(e+1)),cu(vo,rn),c}finally{xe=t,Qo=!1}}return null}var Yn=[],Zn=0,Zs=null,ei=0,gt=[],vt=0,kn=null,Ft=1,zt="";function Sn(e,t){Yn[Zn++]=ei,Yn[Zn++]=Zs,Zs=e,ei=t}function uc(e,t,r){gt[vt++]=Ft,gt[vt++]=zt,gt[vt++]=kn,kn=e;var a=Ft;e=zt;var c=32-kt(a)-1;a&=~(1<<c),r+=1;var d=32-kt(t)+c;if(30<d){var m=c-c%5;d=(a&(1<<m)-1).toString(32),a>>=m,c-=m,Ft=1<<32-kt(t)+c|r<<c|a,zt=d+e}else Ft=1<<d|r<<c|a,zt=e}function Jo(e){e.return!==null&&(Sn(e,1),uc(e,1,0))}function Xo(e){for(;e===Zs;)Zs=Yn[--Zn],Yn[Zn]=null,ei=Yn[--Zn],Yn[Zn]=null;for(;e===kn;)kn=gt[--vt],gt[vt]=null,zt=gt[--vt],gt[vt]=null,Ft=gt[--vt],gt[vt]=null}var ft=null,ht=null,Ne=!1,bt=null;function cc(e,t){var r=xt(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function dc(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ft=e,ht=en(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ft=e,ht=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=kn!==null?{id:Ft,overflow:zt}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=xt(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,ft=e,ht=null,!0):!1;default:return!1}}function Yo(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Zo(e){if(Ne){var t=ht;if(t){var r=t;if(!dc(e,t)){if(Yo(e))throw Error(s(418));t=en(r.nextSibling);var a=ft;t&&dc(e,t)?cc(a,r):(e.flags=e.flags&-4097|2,Ne=!1,ft=e)}}else{if(Yo(e))throw Error(s(418));e.flags=e.flags&-4097|2,Ne=!1,ft=e}}}function fc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ft=e}function ti(e){if(e!==ft)return!1;if(!Ne)return fc(e),Ne=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Wo(e.type,e.memoizedProps)),t&&(t=ht)){if(Yo(e))throw hc(),Error(s(418));for(;t;)cc(e,t),t=en(t.nextSibling)}if(fc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){ht=en(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}ht=null}}else ht=ft?en(e.stateNode.nextSibling):null;return!0}function hc(){for(var e=ht;e;)e=en(e.nextSibling)}function er(){ht=ft=null,Ne=!1}function ea(e){bt===null?bt=[e]:bt.push(e)}var $p=q.ReactCurrentBatchConfig;function jt(e,t){if(e&&e.defaultProps){t=S({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}var ni=tn(null),ri=null,tr=null,ta=null;function na(){ta=tr=ri=null}function ra(e){var t=ni.current;Ee(ni),e._currentValue=t}function sa(e,t,r){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===r)break;e=e.return}}function nr(e,t){ri=e,ta=tr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(st=!0),e.firstContext=null)}function yt(e){var t=e._currentValue;if(ta!==e)if(e={context:e,memoizedValue:t,next:null},tr===null){if(ri===null)throw Error(s(308));tr=e,ri.dependencies={lanes:0,firstContext:e}}else tr=tr.next=e;return t}var bn=null;function ia(e){bn===null?bn=[e]:bn.push(e)}function pc(e,t,r,a){var c=t.interleaved;return c===null?(r.next=r,ia(t)):(r.next=c.next,c.next=r),t.interleaved=r,Bt(e,a)}function Bt(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var sn=!1;function oa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Vt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function on(e,t,r){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,(ge&2)!==0){var c=a.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),a.pending=t,Bt(e,r)}return c=a.interleaved,c===null?(t.next=t,ia(a)):(t.next=c.next,c.next=t),a.interleaved=t,Bt(e,r)}function si(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var a=t.lanes;a&=e.pendingLanes,r|=a,t.lanes=r,_o(e,r)}}function gc(e,t){var r=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,r===a)){var c=null,d=null;if(r=r.firstBaseUpdate,r!==null){do{var m={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};d===null?c=d=m:d=d.next=m,r=r.next}while(r!==null);d===null?c=d=t:d=d.next=t}else c=d=t;r={baseState:a.baseState,firstBaseUpdate:c,lastBaseUpdate:d,shared:a.shared,effects:a.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function ii(e,t,r,a){var c=e.updateQueue;sn=!1;var d=c.firstBaseUpdate,m=c.lastBaseUpdate,w=c.shared.pending;if(w!==null){c.shared.pending=null;var k=w,T=k.next;k.next=null,m===null?d=T:m.next=T,m=k;var M=e.alternate;M!==null&&(M=M.updateQueue,w=M.lastBaseUpdate,w!==m&&(w===null?M.firstBaseUpdate=T:w.next=T,M.lastBaseUpdate=k))}if(d!==null){var z=c.baseState;m=0,M=T=k=null,w=d;do{var $=w.lane,J=w.eventTime;if((a&$)===$){M!==null&&(M=M.next={eventTime:J,lane:0,tag:w.tag,payload:w.payload,callback:w.callback,next:null});e:{var Y=e,Z=w;switch($=t,J=r,Z.tag){case 1:if(Y=Z.payload,typeof Y=="function"){z=Y.call(J,z,$);break e}z=Y;break e;case 3:Y.flags=Y.flags&-65537|128;case 0:if(Y=Z.payload,$=typeof Y=="function"?Y.call(J,z,$):Y,$==null)break e;z=S({},z,$);break e;case 2:sn=!0}}w.callback!==null&&w.lane!==0&&(e.flags|=64,$=c.effects,$===null?c.effects=[w]:$.push(w))}else J={eventTime:J,lane:$,tag:w.tag,payload:w.payload,callback:w.callback,next:null},M===null?(T=M=J,k=z):M=M.next=J,m|=$;if(w=w.next,w===null){if(w=c.shared.pending,w===null)break;$=w,w=$.next,$.next=null,c.lastBaseUpdate=$,c.shared.pending=null}}while(!0);if(M===null&&(k=z),c.baseState=k,c.firstBaseUpdate=T,c.lastBaseUpdate=M,t=c.shared.interleaved,t!==null){c=t;do m|=c.lane,c=c.next;while(c!==t)}else d===null&&(c.shared.lanes=0);Cn|=m,e.lanes=m,e.memoizedState=z}}function vc(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var a=e[t],c=a.callback;if(c!==null){if(a.callback=null,a=r,typeof c!="function")throw Error(s(191,c));c.call(a)}}}var yc=new i.Component().refs;function aa(e,t,r,a){t=e.memoizedState,r=r(a,t),r=r==null?t:S({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var oi={isMounted:function(e){return(e=e._reactInternals)?wn(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var a=et(),c=cn(e),d=Vt(a,c);d.payload=t,r!=null&&(d.callback=r),t=on(e,d,c),t!==null&&(Nt(t,e,c,a),si(t,e,c))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var a=et(),c=cn(e),d=Vt(a,c);d.tag=1,d.payload=t,r!=null&&(d.callback=r),t=on(e,d,c),t!==null&&(Nt(t,e,c,a),si(t,e,c))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=et(),a=cn(e),c=Vt(r,a);c.tag=2,t!=null&&(c.callback=t),t=on(e,c,a),t!==null&&(Nt(t,e,a,r),si(t,e,a))}};function wc(e,t,r,a,c,d,m){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,d,m):t.prototype&&t.prototype.isPureReactComponent?!Yr(r,a)||!Yr(c,d):!0}function _c(e,t,r){var a=!1,c=nn,d=t.contextType;return typeof d=="object"&&d!==null?d=yt(d):(c=rt(t)?xn:Qe.current,a=t.contextTypes,d=(a=a!=null)?Xn(e,c):nn),t=new t(r,d),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=oi,e.stateNode=t,t._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=c,e.__reactInternalMemoizedMaskedChildContext=d),t}function xc(e,t,r,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,a),t.state!==e&&oi.enqueueReplaceState(t,t.state,null)}function la(e,t,r,a){var c=e.stateNode;c.props=r,c.state=e.memoizedState,c.refs=yc,oa(e);var d=t.contextType;typeof d=="object"&&d!==null?c.context=yt(d):(d=rt(t)?xn:Qe.current,c.context=Xn(e,d)),c.state=e.memoizedState,d=t.getDerivedStateFromProps,typeof d=="function"&&(aa(e,t,d,r),c.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(t=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),t!==c.state&&oi.enqueueReplaceState(c,c.state,null),ii(e,r,c,a),c.state=e.memoizedState),typeof c.componentDidMount=="function"&&(e.flags|=4194308)}function is(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(s(309));var a=r.stateNode}if(!a)throw Error(s(147,e));var c=a,d=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===d?t.ref:(t=function(m){var w=c.refs;w===yc&&(w=c.refs={}),m===null?delete w[d]:w[d]=m},t._stringRef=d,t)}if(typeof e!="string")throw Error(s(284));if(!r._owner)throw Error(s(290,e))}return e}function ai(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function kc(e){var t=e._init;return t(e._payload)}function Sc(e){function t(C,j){if(e){var N=C.deletions;N===null?(C.deletions=[j],C.flags|=16):N.push(j)}}function r(C,j){if(!e)return null;for(;j!==null;)t(C,j),j=j.sibling;return null}function a(C,j){for(C=new Map;j!==null;)j.key!==null?C.set(j.key,j):C.set(j.index,j),j=j.sibling;return C}function c(C,j){return C=fn(C,j),C.index=0,C.sibling=null,C}function d(C,j,N){return C.index=N,e?(N=C.alternate,N!==null?(N=N.index,N<j?(C.flags|=2,j):N):(C.flags|=2,j)):(C.flags|=1048576,j)}function m(C){return e&&C.alternate===null&&(C.flags|=2),C}function w(C,j,N,V){return j===null||j.tag!==6?(j=Ha(N,C.mode,V),j.return=C,j):(j=c(j,N),j.return=C,j)}function k(C,j,N,V){var ee=N.type;return ee===F?M(C,j,N.props.children,V,N.key):j!==null&&(j.elementType===ee||typeof ee=="object"&&ee!==null&&ee.$$typeof===Te&&kc(ee)===j.type)?(V=c(j,N.props),V.ref=is(C,j,N),V.return=C,V):(V=Ei(N.type,N.key,N.props,null,C.mode,V),V.ref=is(C,j,N),V.return=C,V)}function T(C,j,N,V){return j===null||j.tag!==4||j.stateNode.containerInfo!==N.containerInfo||j.stateNode.implementation!==N.implementation?(j=qa(N,C.mode,V),j.return=C,j):(j=c(j,N.children||[]),j.return=C,j)}function M(C,j,N,V,ee){return j===null||j.tag!==7?(j=Rn(N,C.mode,V,ee),j.return=C,j):(j=c(j,N),j.return=C,j)}function z(C,j,N){if(typeof j=="string"&&j!==""||typeof j=="number")return j=Ha(""+j,C.mode,N),j.return=C,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case W:return N=Ei(j.type,j.key,j.props,null,C.mode,N),N.ref=is(C,null,j),N.return=C,N;case L:return j=qa(j,C.mode,N),j.return=C,j;case Te:var V=j._init;return z(C,V(j._payload),N)}if(Lr(j)||ae(j))return j=Rn(j,C.mode,N,null),j.return=C,j;ai(C,j)}return null}function $(C,j,N,V){var ee=j!==null?j.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return ee!==null?null:w(C,j,""+N,V);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case W:return N.key===ee?k(C,j,N,V):null;case L:return N.key===ee?T(C,j,N,V):null;case Te:return ee=N._init,$(C,j,ee(N._payload),V)}if(Lr(N)||ae(N))return ee!==null?null:M(C,j,N,V,null);ai(C,N)}return null}function J(C,j,N,V,ee){if(typeof V=="string"&&V!==""||typeof V=="number")return C=C.get(N)||null,w(j,C,""+V,ee);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case W:return C=C.get(V.key===null?N:V.key)||null,k(j,C,V,ee);case L:return C=C.get(V.key===null?N:V.key)||null,T(j,C,V,ee);case Te:var le=V._init;return J(C,j,N,le(V._payload),ee)}if(Lr(V)||ae(V))return C=C.get(N)||null,M(j,C,V,ee,null);ai(j,V)}return null}function Y(C,j,N,V){for(var ee=null,le=null,ue=j,ce=j=0,He=null;ue!==null&&ce<N.length;ce++){ue.index>ce?(He=ue,ue=null):He=ue.sibling;var we=$(C,ue,N[ce],V);if(we===null){ue===null&&(ue=He);break}e&&ue&&we.alternate===null&&t(C,ue),j=d(we,j,ce),le===null?ee=we:le.sibling=we,le=we,ue=He}if(ce===N.length)return r(C,ue),Ne&&Sn(C,ce),ee;if(ue===null){for(;ce<N.length;ce++)ue=z(C,N[ce],V),ue!==null&&(j=d(ue,j,ce),le===null?ee=ue:le.sibling=ue,le=ue);return Ne&&Sn(C,ce),ee}for(ue=a(C,ue);ce<N.length;ce++)He=J(ue,C,ce,N[ce],V),He!==null&&(e&&He.alternate!==null&&ue.delete(He.key===null?ce:He.key),j=d(He,j,ce),le===null?ee=He:le.sibling=He,le=He);return e&&ue.forEach(function(hn){return t(C,hn)}),Ne&&Sn(C,ce),ee}function Z(C,j,N,V){var ee=ae(N);if(typeof ee!="function")throw Error(s(150));if(N=ee.call(N),N==null)throw Error(s(151));for(var le=ee=null,ue=j,ce=j=0,He=null,we=N.next();ue!==null&&!we.done;ce++,we=N.next()){ue.index>ce?(He=ue,ue=null):He=ue.sibling;var hn=$(C,ue,we.value,V);if(hn===null){ue===null&&(ue=He);break}e&&ue&&hn.alternate===null&&t(C,ue),j=d(hn,j,ce),le===null?ee=hn:le.sibling=hn,le=hn,ue=He}if(we.done)return r(C,ue),Ne&&Sn(C,ce),ee;if(ue===null){for(;!we.done;ce++,we=N.next())we=z(C,we.value,V),we!==null&&(j=d(we,j,ce),le===null?ee=we:le.sibling=we,le=we);return Ne&&Sn(C,ce),ee}for(ue=a(C,ue);!we.done;ce++,we=N.next())we=J(ue,C,ce,we.value,V),we!==null&&(e&&we.alternate!==null&&ue.delete(we.key===null?ce:we.key),j=d(we,j,ce),le===null?ee=we:le.sibling=we,le=we);return e&&ue.forEach(function(gm){return t(C,gm)}),Ne&&Sn(C,ce),ee}function $e(C,j,N,V){if(typeof N=="object"&&N!==null&&N.type===F&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case W:e:{for(var ee=N.key,le=j;le!==null;){if(le.key===ee){if(ee=N.type,ee===F){if(le.tag===7){r(C,le.sibling),j=c(le,N.props.children),j.return=C,C=j;break e}}else if(le.elementType===ee||typeof ee=="object"&&ee!==null&&ee.$$typeof===Te&&kc(ee)===le.type){r(C,le.sibling),j=c(le,N.props),j.ref=is(C,le,N),j.return=C,C=j;break e}r(C,le);break}else t(C,le);le=le.sibling}N.type===F?(j=Rn(N.props.children,C.mode,V,N.key),j.return=C,C=j):(V=Ei(N.type,N.key,N.props,null,C.mode,V),V.ref=is(C,j,N),V.return=C,C=V)}return m(C);case L:e:{for(le=N.key;j!==null;){if(j.key===le)if(j.tag===4&&j.stateNode.containerInfo===N.containerInfo&&j.stateNode.implementation===N.implementation){r(C,j.sibling),j=c(j,N.children||[]),j.return=C,C=j;break e}else{r(C,j);break}else t(C,j);j=j.sibling}j=qa(N,C.mode,V),j.return=C,C=j}return m(C);case Te:return le=N._init,$e(C,j,le(N._payload),V)}if(Lr(N))return Y(C,j,N,V);if(ae(N))return Z(C,j,N,V);ai(C,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,j!==null&&j.tag===6?(r(C,j.sibling),j=c(j,N),j.return=C,C=j):(r(C,j),j=Ha(N,C.mode,V),j.return=C,C=j),m(C)):r(C,j)}return $e}var rr=Sc(!0),bc=Sc(!1),os={},Ot=tn(os),as=tn(os),ls=tn(os);function jn(e){if(e===os)throw Error(s(174));return e}function ua(e,t){switch(Se(ls,t),Se(as,e),Se(Ot,os),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ao(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ao(t,e)}Ee(Ot),Se(Ot,t)}function sr(){Ee(Ot),Ee(as),Ee(ls)}function jc(e){jn(ls.current);var t=jn(Ot.current),r=ao(t,e.type);t!==r&&(Se(as,e),Se(Ot,r))}function ca(e){as.current===e&&(Ee(Ot),Ee(as))}var Ae=tn(0);function li(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var da=[];function fa(){for(var e=0;e<da.length;e++)da[e]._workInProgressVersionPrimary=null;da.length=0}var ui=q.ReactCurrentDispatcher,ha=q.ReactCurrentBatchConfig,En=0,Oe=null,Ue=null,Ve=null,ci=!1,us=!1,cs=0,Mp=0;function Je(){throw Error(s(321))}function pa(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!St(e[r],t[r]))return!1;return!0}function ma(e,t,r,a,c,d){if(En=d,Oe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ui.current=e===null||e.memoizedState===null?Bp:Vp,e=r(a,c),us){d=0;do{if(us=!1,cs=0,25<=d)throw Error(s(301));d+=1,Ve=Ue=null,t.updateQueue=null,ui.current=Wp,e=r(a,c)}while(us)}if(ui.current=hi,t=Ue!==null&&Ue.next!==null,En=0,Ve=Ue=Oe=null,ci=!1,t)throw Error(s(300));return e}function ga(){var e=cs!==0;return cs=0,e}function Lt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ve===null?Oe.memoizedState=Ve=e:Ve=Ve.next=e,Ve}function wt(){if(Ue===null){var e=Oe.alternate;e=e!==null?e.memoizedState:null}else e=Ue.next;var t=Ve===null?Oe.memoizedState:Ve.next;if(t!==null)Ve=t,Ue=e;else{if(e===null)throw Error(s(310));Ue=e,e={memoizedState:Ue.memoizedState,baseState:Ue.baseState,baseQueue:Ue.baseQueue,queue:Ue.queue,next:null},Ve===null?Oe.memoizedState=Ve=e:Ve=Ve.next=e}return Ve}function ds(e,t){return typeof t=="function"?t(e):t}function va(e){var t=wt(),r=t.queue;if(r===null)throw Error(s(311));r.lastRenderedReducer=e;var a=Ue,c=a.baseQueue,d=r.pending;if(d!==null){if(c!==null){var m=c.next;c.next=d.next,d.next=m}a.baseQueue=c=d,r.pending=null}if(c!==null){d=c.next,a=a.baseState;var w=m=null,k=null,T=d;do{var M=T.lane;if((En&M)===M)k!==null&&(k=k.next={lane:0,action:T.action,hasEagerState:T.hasEagerState,eagerState:T.eagerState,next:null}),a=T.hasEagerState?T.eagerState:e(a,T.action);else{var z={lane:M,action:T.action,hasEagerState:T.hasEagerState,eagerState:T.eagerState,next:null};k===null?(w=k=z,m=a):k=k.next=z,Oe.lanes|=M,Cn|=M}T=T.next}while(T!==null&&T!==d);k===null?m=a:k.next=w,St(a,t.memoizedState)||(st=!0),t.memoizedState=a,t.baseState=m,t.baseQueue=k,r.lastRenderedState=a}if(e=r.interleaved,e!==null){c=e;do d=c.lane,Oe.lanes|=d,Cn|=d,c=c.next;while(c!==e)}else c===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function ya(e){var t=wt(),r=t.queue;if(r===null)throw Error(s(311));r.lastRenderedReducer=e;var a=r.dispatch,c=r.pending,d=t.memoizedState;if(c!==null){r.pending=null;var m=c=c.next;do d=e(d,m.action),m=m.next;while(m!==c);St(d,t.memoizedState)||(st=!0),t.memoizedState=d,t.baseQueue===null&&(t.baseState=d),r.lastRenderedState=d}return[d,a]}function Ec(){}function Cc(e,t){var r=Oe,a=wt(),c=t(),d=!St(a.memoizedState,c);if(d&&(a.memoizedState=c,st=!0),a=a.queue,wa(Tc.bind(null,r,a,e),[e]),a.getSnapshot!==t||d||Ve!==null&&Ve.memoizedState.tag&1){if(r.flags|=2048,fs(9,Pc.bind(null,r,a,c,t),void 0,null),We===null)throw Error(s(349));(En&30)!==0||Nc(r,t,c)}return c}function Nc(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Oe.updateQueue,t===null?(t={lastEffect:null,stores:null},Oe.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Pc(e,t,r,a){t.value=r,t.getSnapshot=a,Rc(t)&&Ac(e)}function Tc(e,t,r){return r(function(){Rc(t)&&Ac(e)})}function Rc(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!St(e,r)}catch{return!0}}function Ac(e){var t=Bt(e,1);t!==null&&Nt(t,e,1,-1)}function Oc(e){var t=Lt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ds,lastRenderedState:e},t.queue=e,e=e.dispatch=zp.bind(null,Oe,e),[t.memoizedState,e]}function fs(e,t,r,a){return e={tag:e,create:t,destroy:r,deps:a,next:null},t=Oe.updateQueue,t===null?(t={lastEffect:null,stores:null},Oe.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(a=r.next,r.next=e,e.next=a,t.lastEffect=e)),e}function Lc(){return wt().memoizedState}function di(e,t,r,a){var c=Lt();Oe.flags|=e,c.memoizedState=fs(1|t,r,void 0,a===void 0?null:a)}function fi(e,t,r,a){var c=wt();a=a===void 0?null:a;var d=void 0;if(Ue!==null){var m=Ue.memoizedState;if(d=m.destroy,a!==null&&pa(a,m.deps)){c.memoizedState=fs(t,r,d,a);return}}Oe.flags|=e,c.memoizedState=fs(1|t,r,d,a)}function Ic(e,t){return di(8390656,8,e,t)}function wa(e,t){return fi(2048,8,e,t)}function Dc(e,t){return fi(4,2,e,t)}function $c(e,t){return fi(4,4,e,t)}function Mc(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Uc(e,t,r){return r=r!=null?r.concat([e]):null,fi(4,4,Mc.bind(null,t,e),r)}function _a(){}function Fc(e,t){var r=wt();t=t===void 0?null:t;var a=r.memoizedState;return a!==null&&t!==null&&pa(t,a[1])?a[0]:(r.memoizedState=[e,t],e)}function zc(e,t){var r=wt();t=t===void 0?null:t;var a=r.memoizedState;return a!==null&&t!==null&&pa(t,a[1])?a[0]:(e=e(),r.memoizedState=[e,t],e)}function Bc(e,t,r){return(En&21)===0?(e.baseState&&(e.baseState=!1,st=!0),e.memoizedState=r):(St(r,t)||(r=pu(),Oe.lanes|=r,Cn|=r,e.baseState=!0),t)}function Up(e,t){var r=xe;xe=r!==0&&4>r?r:4,e(!0);var a=ha.transition;ha.transition={};try{e(!1),t()}finally{xe=r,ha.transition=a}}function Vc(){return wt().memoizedState}function Fp(e,t,r){var a=cn(e);if(r={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null},Wc(e))Hc(t,r);else if(r=pc(e,t,r,a),r!==null){var c=et();Nt(r,e,a,c),qc(r,t,a)}}function zp(e,t,r){var a=cn(e),c={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null};if(Wc(e))Hc(t,c);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=t.lastRenderedReducer,d!==null))try{var m=t.lastRenderedState,w=d(m,r);if(c.hasEagerState=!0,c.eagerState=w,St(w,m)){var k=t.interleaved;k===null?(c.next=c,ia(t)):(c.next=k.next,k.next=c),t.interleaved=c;return}}catch{}finally{}r=pc(e,t,c,a),r!==null&&(c=et(),Nt(r,e,a,c),qc(r,t,a))}}function Wc(e){var t=e.alternate;return e===Oe||t!==null&&t===Oe}function Hc(e,t){us=ci=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function qc(e,t,r){if((r&4194240)!==0){var a=t.lanes;a&=e.pendingLanes,r|=a,t.lanes=r,_o(e,r)}}var hi={readContext:yt,useCallback:Je,useContext:Je,useEffect:Je,useImperativeHandle:Je,useInsertionEffect:Je,useLayoutEffect:Je,useMemo:Je,useReducer:Je,useRef:Je,useState:Je,useDebugValue:Je,useDeferredValue:Je,useTransition:Je,useMutableSource:Je,useSyncExternalStore:Je,useId:Je,unstable_isNewReconciler:!1},Bp={readContext:yt,useCallback:function(e,t){return Lt().memoizedState=[e,t===void 0?null:t],e},useContext:yt,useEffect:Ic,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,di(4194308,4,Mc.bind(null,t,e),r)},useLayoutEffect:function(e,t){return di(4194308,4,e,t)},useInsertionEffect:function(e,t){return di(4,2,e,t)},useMemo:function(e,t){var r=Lt();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var a=Lt();return t=r!==void 0?r(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=Fp.bind(null,Oe,e),[a.memoizedState,e]},useRef:function(e){var t=Lt();return e={current:e},t.memoizedState=e},useState:Oc,useDebugValue:_a,useDeferredValue:function(e){return Lt().memoizedState=e},useTransition:function(){var e=Oc(!1),t=e[0];return e=Up.bind(null,e[1]),Lt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var a=Oe,c=Lt();if(Ne){if(r===void 0)throw Error(s(407));r=r()}else{if(r=t(),We===null)throw Error(s(349));(En&30)!==0||Nc(a,t,r)}c.memoizedState=r;var d={value:r,getSnapshot:t};return c.queue=d,Ic(Tc.bind(null,a,d,e),[e]),a.flags|=2048,fs(9,Pc.bind(null,a,d,r,t),void 0,null),r},useId:function(){var e=Lt(),t=We.identifierPrefix;if(Ne){var r=zt,a=Ft;r=(a&~(1<<32-kt(a)-1)).toString(32)+r,t=":"+t+"R"+r,r=cs++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=Mp++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Vp={readContext:yt,useCallback:Fc,useContext:yt,useEffect:wa,useImperativeHandle:Uc,useInsertionEffect:Dc,useLayoutEffect:$c,useMemo:zc,useReducer:va,useRef:Lc,useState:function(){return va(ds)},useDebugValue:_a,useDeferredValue:function(e){var t=wt();return Bc(t,Ue.memoizedState,e)},useTransition:function(){var e=va(ds)[0],t=wt().memoizedState;return[e,t]},useMutableSource:Ec,useSyncExternalStore:Cc,useId:Vc,unstable_isNewReconciler:!1},Wp={readContext:yt,useCallback:Fc,useContext:yt,useEffect:wa,useImperativeHandle:Uc,useInsertionEffect:Dc,useLayoutEffect:$c,useMemo:zc,useReducer:ya,useRef:Lc,useState:function(){return ya(ds)},useDebugValue:_a,useDeferredValue:function(e){var t=wt();return Ue===null?t.memoizedState=e:Bc(t,Ue.memoizedState,e)},useTransition:function(){var e=ya(ds)[0],t=wt().memoizedState;return[e,t]},useMutableSource:Ec,useSyncExternalStore:Cc,useId:Vc,unstable_isNewReconciler:!1};function ir(e,t){try{var r="",a=t;do r+=K(a),a=a.return;while(a);var c=r}catch(d){c=`
Error generating stack: `+d.message+`
`+d.stack}return{value:e,source:t,stack:c,digest:null}}function xa(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function ka(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Hp=typeof WeakMap=="function"?WeakMap:Map;function Kc(e,t,r){r=Vt(-1,r),r.tag=3,r.payload={element:null};var a=t.value;return r.callback=function(){_i||(_i=!0,$a=a),ka(e,t)},r}function Gc(e,t,r){r=Vt(-1,r),r.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var c=t.value;r.payload=function(){return a(c)},r.callback=function(){ka(e,t)}}var d=e.stateNode;return d!==null&&typeof d.componentDidCatch=="function"&&(r.callback=function(){ka(e,t),typeof a!="function"&&(ln===null?ln=new Set([this]):ln.add(this));var m=t.stack;this.componentDidCatch(t.value,{componentStack:m!==null?m:""})}),r}function Qc(e,t,r){var a=e.pingCache;if(a===null){a=e.pingCache=new Hp;var c=new Set;a.set(t,c)}else c=a.get(t),c===void 0&&(c=new Set,a.set(t,c));c.has(r)||(c.add(r),e=im.bind(null,e,t,r),t.then(e,e))}function Jc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Xc(e,t,r,a,c){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Vt(-1,1),t.tag=2,on(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=c,e)}var qp=q.ReactCurrentOwner,st=!1;function Ze(e,t,r,a){t.child=e===null?bc(t,null,r,a):rr(t,e.child,r,a)}function Yc(e,t,r,a,c){r=r.render;var d=t.ref;return nr(t,c),a=ma(e,t,r,a,d,c),r=ga(),e!==null&&!st?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,Wt(e,t,c)):(Ne&&r&&Jo(t),t.flags|=1,Ze(e,t,a,c),t.child)}function Zc(e,t,r,a,c){if(e===null){var d=r.type;return typeof d=="function"&&!Wa(d)&&d.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=d,ed(e,t,d,a,c)):(e=Ei(r.type,null,a,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(d=e.child,(e.lanes&c)===0){var m=d.memoizedProps;if(r=r.compare,r=r!==null?r:Yr,r(m,a)&&e.ref===t.ref)return Wt(e,t,c)}return t.flags|=1,e=fn(d,a),e.ref=t.ref,e.return=t,t.child=e}function ed(e,t,r,a,c){if(e!==null){var d=e.memoizedProps;if(Yr(d,a)&&e.ref===t.ref)if(st=!1,t.pendingProps=a=d,(e.lanes&c)!==0)(e.flags&131072)!==0&&(st=!0);else return t.lanes=e.lanes,Wt(e,t,c)}return Sa(e,t,r,a,c)}function td(e,t,r){var a=t.pendingProps,c=a.children,d=e!==null?e.memoizedState:null;if(a.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Se(ar,pt),pt|=r;else{if((r&1073741824)===0)return e=d!==null?d.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Se(ar,pt),pt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=d!==null?d.baseLanes:r,Se(ar,pt),pt|=a}else d!==null?(a=d.baseLanes|r,t.memoizedState=null):a=r,Se(ar,pt),pt|=a;return Ze(e,t,c,r),t.child}function nd(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Sa(e,t,r,a,c){var d=rt(r)?xn:Qe.current;return d=Xn(t,d),nr(t,c),r=ma(e,t,r,a,d,c),a=ga(),e!==null&&!st?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,Wt(e,t,c)):(Ne&&a&&Jo(t),t.flags|=1,Ze(e,t,r,c),t.child)}function rd(e,t,r,a,c){if(rt(r)){var d=!0;Xs(t)}else d=!1;if(nr(t,c),t.stateNode===null)mi(e,t),_c(t,r,a),la(t,r,a,c),a=!0;else if(e===null){var m=t.stateNode,w=t.memoizedProps;m.props=w;var k=m.context,T=r.contextType;typeof T=="object"&&T!==null?T=yt(T):(T=rt(r)?xn:Qe.current,T=Xn(t,T));var M=r.getDerivedStateFromProps,z=typeof M=="function"||typeof m.getSnapshotBeforeUpdate=="function";z||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(w!==a||k!==T)&&xc(t,m,a,T),sn=!1;var $=t.memoizedState;m.state=$,ii(t,a,m,c),k=t.memoizedState,w!==a||$!==k||nt.current||sn?(typeof M=="function"&&(aa(t,r,M,a),k=t.memoizedState),(w=sn||wc(t,r,w,a,$,k,T))?(z||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(t.flags|=4194308)):(typeof m.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=k),m.props=a,m.state=k,m.context=T,a=w):(typeof m.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{m=t.stateNode,mc(e,t),w=t.memoizedProps,T=t.type===t.elementType?w:jt(t.type,w),m.props=T,z=t.pendingProps,$=m.context,k=r.contextType,typeof k=="object"&&k!==null?k=yt(k):(k=rt(r)?xn:Qe.current,k=Xn(t,k));var J=r.getDerivedStateFromProps;(M=typeof J=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(w!==z||$!==k)&&xc(t,m,a,k),sn=!1,$=t.memoizedState,m.state=$,ii(t,a,m,c);var Y=t.memoizedState;w!==z||$!==Y||nt.current||sn?(typeof J=="function"&&(aa(t,r,J,a),Y=t.memoizedState),(T=sn||wc(t,r,T,a,$,Y,k)||!1)?(M||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(a,Y,k),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(a,Y,k)),typeof m.componentDidUpdate=="function"&&(t.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof m.componentDidUpdate!="function"||w===e.memoizedProps&&$===e.memoizedState||(t.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||w===e.memoizedProps&&$===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=Y),m.props=a,m.state=Y,m.context=k,a=T):(typeof m.componentDidUpdate!="function"||w===e.memoizedProps&&$===e.memoizedState||(t.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||w===e.memoizedProps&&$===e.memoizedState||(t.flags|=1024),a=!1)}return ba(e,t,r,a,d,c)}function ba(e,t,r,a,c,d){nd(e,t);var m=(t.flags&128)!==0;if(!a&&!m)return c&&ac(t,r,!1),Wt(e,t,d);a=t.stateNode,qp.current=t;var w=m&&typeof r.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,e!==null&&m?(t.child=rr(t,e.child,null,d),t.child=rr(t,null,w,d)):Ze(e,t,w,d),t.memoizedState=a.state,c&&ac(t,r,!0),t.child}function sd(e){var t=e.stateNode;t.pendingContext?ic(e,t.pendingContext,t.pendingContext!==t.context):t.context&&ic(e,t.context,!1),ua(e,t.containerInfo)}function id(e,t,r,a,c){return er(),ea(c),t.flags|=256,Ze(e,t,r,a),t.child}var ja={dehydrated:null,treeContext:null,retryLane:0};function Ea(e){return{baseLanes:e,cachePool:null,transitions:null}}function od(e,t,r){var a=t.pendingProps,c=Ae.current,d=!1,m=(t.flags&128)!==0,w;if((w=m)||(w=e!==null&&e.memoizedState===null?!1:(c&2)!==0),w?(d=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(c|=1),Se(Ae,c&1),e===null)return Zo(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(m=a.children,e=a.fallback,d?(a=t.mode,d=t.child,m={mode:"hidden",children:m},(a&1)===0&&d!==null?(d.childLanes=0,d.pendingProps=m):d=Ci(m,a,0,null),e=Rn(e,a,r,null),d.return=t,e.return=t,d.sibling=e,t.child=d,t.child.memoizedState=Ea(r),t.memoizedState=ja,e):Ca(t,m));if(c=e.memoizedState,c!==null&&(w=c.dehydrated,w!==null))return Kp(e,t,m,a,w,c,r);if(d){d=a.fallback,m=t.mode,c=e.child,w=c.sibling;var k={mode:"hidden",children:a.children};return(m&1)===0&&t.child!==c?(a=t.child,a.childLanes=0,a.pendingProps=k,t.deletions=null):(a=fn(c,k),a.subtreeFlags=c.subtreeFlags&14680064),w!==null?d=fn(w,d):(d=Rn(d,m,r,null),d.flags|=2),d.return=t,a.return=t,a.sibling=d,t.child=a,a=d,d=t.child,m=e.child.memoizedState,m=m===null?Ea(r):{baseLanes:m.baseLanes|r,cachePool:null,transitions:m.transitions},d.memoizedState=m,d.childLanes=e.childLanes&~r,t.memoizedState=ja,a}return d=e.child,e=d.sibling,a=fn(d,{mode:"visible",children:a.children}),(t.mode&1)===0&&(a.lanes=r),a.return=t,a.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=a,t.memoizedState=null,a}function Ca(e,t){return t=Ci({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function pi(e,t,r,a){return a!==null&&ea(a),rr(t,e.child,null,r),e=Ca(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Kp(e,t,r,a,c,d,m){if(r)return t.flags&256?(t.flags&=-257,a=xa(Error(s(422))),pi(e,t,m,a)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(d=a.fallback,c=t.mode,a=Ci({mode:"visible",children:a.children},c,0,null),d=Rn(d,c,m,null),d.flags|=2,a.return=t,d.return=t,a.sibling=d,t.child=a,(t.mode&1)!==0&&rr(t,e.child,null,m),t.child.memoizedState=Ea(m),t.memoizedState=ja,d);if((t.mode&1)===0)return pi(e,t,m,null);if(c.data==="$!"){if(a=c.nextSibling&&c.nextSibling.dataset,a)var w=a.dgst;return a=w,d=Error(s(419)),a=xa(d,a,void 0),pi(e,t,m,a)}if(w=(m&e.childLanes)!==0,st||w){if(a=We,a!==null){switch(m&-m){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=(c&(a.suspendedLanes|m))!==0?0:c,c!==0&&c!==d.retryLane&&(d.retryLane=c,Bt(e,c),Nt(a,e,c,-1))}return Va(),a=xa(Error(s(421))),pi(e,t,m,a)}return c.data==="$?"?(t.flags|=128,t.child=e.child,t=om.bind(null,e),c._reactRetry=t,null):(e=d.treeContext,ht=en(c.nextSibling),ft=t,Ne=!0,bt=null,e!==null&&(gt[vt++]=Ft,gt[vt++]=zt,gt[vt++]=kn,Ft=e.id,zt=e.overflow,kn=t),t=Ca(t,a.children),t.flags|=4096,t)}function ad(e,t,r){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),sa(e.return,t,r)}function Na(e,t,r,a,c){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:r,tailMode:c}:(d.isBackwards=t,d.rendering=null,d.renderingStartTime=0,d.last=a,d.tail=r,d.tailMode=c)}function ld(e,t,r){var a=t.pendingProps,c=a.revealOrder,d=a.tail;if(Ze(e,t,a.children,r),a=Ae.current,(a&2)!==0)a=a&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ad(e,r,t);else if(e.tag===19)ad(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(Se(Ae,a),(t.mode&1)===0)t.memoizedState=null;else switch(c){case"forwards":for(r=t.child,c=null;r!==null;)e=r.alternate,e!==null&&li(e)===null&&(c=r),r=r.sibling;r=c,r===null?(c=t.child,t.child=null):(c=r.sibling,r.sibling=null),Na(t,!1,c,r,d);break;case"backwards":for(r=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&li(e)===null){t.child=c;break}e=c.sibling,c.sibling=r,r=c,c=e}Na(t,!0,r,null,d);break;case"together":Na(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function mi(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wt(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Cn|=t.lanes,(r&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(s(153));if(t.child!==null){for(e=t.child,r=fn(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=fn(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function Gp(e,t,r){switch(t.tag){case 3:sd(t),er();break;case 5:jc(t);break;case 1:rt(t.type)&&Xs(t);break;case 4:ua(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,c=t.memoizedProps.value;Se(ni,a._currentValue),a._currentValue=c;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?(Se(Ae,Ae.current&1),t.flags|=128,null):(r&t.child.childLanes)!==0?od(e,t,r):(Se(Ae,Ae.current&1),e=Wt(e,t,r),e!==null?e.sibling:null);Se(Ae,Ae.current&1);break;case 19:if(a=(r&t.childLanes)!==0,(e.flags&128)!==0){if(a)return ld(e,t,r);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),Se(Ae,Ae.current),a)break;return null;case 22:case 23:return t.lanes=0,td(e,t,r)}return Wt(e,t,r)}var ud,Pa,cd,dd;ud=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},Pa=function(){},cd=function(e,t,r,a){var c=e.memoizedProps;if(c!==a){e=t.stateNode,jn(Ot.current);var d=null;switch(r){case"input":c=ro(e,c),a=ro(e,a),d=[];break;case"select":c=S({},c,{value:void 0}),a=S({},a,{value:void 0}),d=[];break;case"textarea":c=oo(e,c),a=oo(e,a),d=[];break;default:typeof c.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=Gs)}lo(r,a);var m;r=null;for(T in c)if(!a.hasOwnProperty(T)&&c.hasOwnProperty(T)&&c[T]!=null)if(T==="style"){var w=c[T];for(m in w)w.hasOwnProperty(m)&&(r||(r={}),r[m]="")}else T!=="dangerouslySetInnerHTML"&&T!=="children"&&T!=="suppressContentEditableWarning"&&T!=="suppressHydrationWarning"&&T!=="autoFocus"&&(l.hasOwnProperty(T)?d||(d=[]):(d=d||[]).push(T,null));for(T in a){var k=a[T];if(w=c?.[T],a.hasOwnProperty(T)&&k!==w&&(k!=null||w!=null))if(T==="style")if(w){for(m in w)!w.hasOwnProperty(m)||k&&k.hasOwnProperty(m)||(r||(r={}),r[m]="");for(m in k)k.hasOwnProperty(m)&&w[m]!==k[m]&&(r||(r={}),r[m]=k[m])}else r||(d||(d=[]),d.push(T,r)),r=k;else T==="dangerouslySetInnerHTML"?(k=k?k.__html:void 0,w=w?w.__html:void 0,k!=null&&w!==k&&(d=d||[]).push(T,k)):T==="children"?typeof k!="string"&&typeof k!="number"||(d=d||[]).push(T,""+k):T!=="suppressContentEditableWarning"&&T!=="suppressHydrationWarning"&&(l.hasOwnProperty(T)?(k!=null&&T==="onScroll"&&je("scroll",e),d||w===k||(d=[])):(d=d||[]).push(T,k))}r&&(d=d||[]).push("style",r);var T=d;(t.updateQueue=T)&&(t.flags|=4)}},dd=function(e,t,r,a){r!==a&&(t.flags|=4)};function hs(e,t){if(!Ne)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function Xe(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,a=0;if(t)for(var c=e.child;c!==null;)r|=c.lanes|c.childLanes,a|=c.subtreeFlags&14680064,a|=c.flags&14680064,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)r|=c.lanes|c.childLanes,a|=c.subtreeFlags,a|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=a,e.childLanes=r,t}function Qp(e,t,r){var a=t.pendingProps;switch(Xo(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xe(t),null;case 1:return rt(t.type)&&Js(),Xe(t),null;case 3:return a=t.stateNode,sr(),Ee(nt),Ee(Qe),fa(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(ti(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,bt!==null&&(Fa(bt),bt=null))),Pa(e,t),Xe(t),null;case 5:ca(t);var c=jn(ls.current);if(r=t.type,e!==null&&t.stateNode!=null)cd(e,t,r,a,c),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(s(166));return Xe(t),null}if(e=jn(Ot.current),ti(t)){a=t.stateNode,r=t.type;var d=t.memoizedProps;switch(a[At]=t,a[rs]=d,e=(t.mode&1)!==0,r){case"dialog":je("cancel",a),je("close",a);break;case"iframe":case"object":case"embed":je("load",a);break;case"video":case"audio":for(c=0;c<es.length;c++)je(es[c],a);break;case"source":je("error",a);break;case"img":case"image":case"link":je("error",a),je("load",a);break;case"details":je("toggle",a);break;case"input":Wl(a,d),je("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!d.multiple},je("invalid",a);break;case"textarea":Kl(a,d),je("invalid",a)}lo(r,d),c=null;for(var m in d)if(d.hasOwnProperty(m)){var w=d[m];m==="children"?typeof w=="string"?a.textContent!==w&&(d.suppressHydrationWarning!==!0&&Ks(a.textContent,w,e),c=["children",w]):typeof w=="number"&&a.textContent!==""+w&&(d.suppressHydrationWarning!==!0&&Ks(a.textContent,w,e),c=["children",""+w]):l.hasOwnProperty(m)&&w!=null&&m==="onScroll"&&je("scroll",a)}switch(r){case"input":$t(a),ql(a,d,!0);break;case"textarea":$t(a),Ql(a);break;case"select":case"option":break;default:typeof d.onClick=="function"&&(a.onclick=Gs)}a=c,t.updateQueue=a,a!==null&&(t.flags|=4)}else{m=c.nodeType===9?c:c.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Jl(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=m.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=m.createElement(r,{is:a.is}):(e=m.createElement(r),r==="select"&&(m=e,a.multiple?m.multiple=!0:a.size&&(m.size=a.size))):e=m.createElementNS(e,r),e[At]=t,e[rs]=a,ud(e,t,!1,!1),t.stateNode=e;e:{switch(m=uo(r,a),r){case"dialog":je("cancel",e),je("close",e),c=a;break;case"iframe":case"object":case"embed":je("load",e),c=a;break;case"video":case"audio":for(c=0;c<es.length;c++)je(es[c],e);c=a;break;case"source":je("error",e),c=a;break;case"img":case"image":case"link":je("error",e),je("load",e),c=a;break;case"details":je("toggle",e),c=a;break;case"input":Wl(e,a),c=ro(e,a),je("invalid",e);break;case"option":c=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},c=S({},a,{value:void 0}),je("invalid",e);break;case"textarea":Kl(e,a),c=oo(e,a),je("invalid",e);break;default:c=a}lo(r,c),w=c;for(d in w)if(w.hasOwnProperty(d)){var k=w[d];d==="style"?Zl(e,k):d==="dangerouslySetInnerHTML"?(k=k?k.__html:void 0,k!=null&&Xl(e,k)):d==="children"?typeof k=="string"?(r!=="textarea"||k!=="")&&Ir(e,k):typeof k=="number"&&Ir(e,""+k):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(l.hasOwnProperty(d)?k!=null&&d==="onScroll"&&je("scroll",e):k!=null&&I(e,d,k,m))}switch(r){case"input":$t(e),ql(e,a,!1);break;case"textarea":$t(e),Ql(e);break;case"option":a.value!=null&&e.setAttribute("value",""+se(a.value));break;case"select":e.multiple=!!a.multiple,d=a.value,d!=null?Un(e,!!a.multiple,d,!1):a.defaultValue!=null&&Un(e,!!a.multiple,a.defaultValue,!0);break;default:typeof c.onClick=="function"&&(e.onclick=Gs)}switch(r){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Xe(t),null;case 6:if(e&&t.stateNode!=null)dd(e,t,e.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(s(166));if(r=jn(ls.current),jn(Ot.current),ti(t)){if(a=t.stateNode,r=t.memoizedProps,a[At]=t,(d=a.nodeValue!==r)&&(e=ft,e!==null))switch(e.tag){case 3:Ks(a.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ks(a.nodeValue,r,(e.mode&1)!==0)}d&&(t.flags|=4)}else a=(r.nodeType===9?r:r.ownerDocument).createTextNode(a),a[At]=t,t.stateNode=a}return Xe(t),null;case 13:if(Ee(Ae),a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ne&&ht!==null&&(t.mode&1)!==0&&(t.flags&128)===0)hc(),er(),t.flags|=98560,d=!1;else if(d=ti(t),a!==null&&a.dehydrated!==null){if(e===null){if(!d)throw Error(s(318));if(d=t.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(s(317));d[At]=t}else er(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Xe(t),d=!1}else bt!==null&&(Fa(bt),bt=null),d=!0;if(!d)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=r,t):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(Ae.current&1)!==0?Fe===0&&(Fe=3):Va())),t.updateQueue!==null&&(t.flags|=4),Xe(t),null);case 4:return sr(),Pa(e,t),e===null&&ts(t.stateNode.containerInfo),Xe(t),null;case 10:return ra(t.type._context),Xe(t),null;case 17:return rt(t.type)&&Js(),Xe(t),null;case 19:if(Ee(Ae),d=t.memoizedState,d===null)return Xe(t),null;if(a=(t.flags&128)!==0,m=d.rendering,m===null)if(a)hs(d,!1);else{if(Fe!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(m=li(e),m!==null){for(t.flags|=128,hs(d,!1),a=m.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=r,r=t.child;r!==null;)d=r,e=a,d.flags&=14680066,m=d.alternate,m===null?(d.childLanes=0,d.lanes=e,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=m.childLanes,d.lanes=m.lanes,d.child=m.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=m.memoizedProps,d.memoizedState=m.memoizedState,d.updateQueue=m.updateQueue,d.type=m.type,e=m.dependencies,d.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Se(Ae,Ae.current&1|2),t.child}e=e.sibling}d.tail!==null&&De()>lr&&(t.flags|=128,a=!0,hs(d,!1),t.lanes=4194304)}else{if(!a)if(e=li(m),e!==null){if(t.flags|=128,a=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),hs(d,!0),d.tail===null&&d.tailMode==="hidden"&&!m.alternate&&!Ne)return Xe(t),null}else 2*De()-d.renderingStartTime>lr&&r!==1073741824&&(t.flags|=128,a=!0,hs(d,!1),t.lanes=4194304);d.isBackwards?(m.sibling=t.child,t.child=m):(r=d.last,r!==null?r.sibling=m:t.child=m,d.last=m)}return d.tail!==null?(t=d.tail,d.rendering=t,d.tail=t.sibling,d.renderingStartTime=De(),t.sibling=null,r=Ae.current,Se(Ae,a?r&1|2:r&1),t):(Xe(t),null);case 22:case 23:return Ba(),a=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(t.flags|=8192),a&&(t.mode&1)!==0?(pt&1073741824)!==0&&(Xe(t),t.subtreeFlags&6&&(t.flags|=8192)):Xe(t),null;case 24:return null;case 25:return null}throw Error(s(156,t.tag))}function Jp(e,t){switch(Xo(t),t.tag){case 1:return rt(t.type)&&Js(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return sr(),Ee(nt),Ee(Qe),fa(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return ca(t),null;case 13:if(Ee(Ae),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(s(340));er()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ee(Ae),null;case 4:return sr(),null;case 10:return ra(t.type._context),null;case 22:case 23:return Ba(),null;case 24:return null;default:return null}}var gi=!1,Ye=!1,Xp=typeof WeakSet=="function"?WeakSet:Set,X=null;function or(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(a){Le(e,t,a)}else r.current=null}function Ta(e,t,r){try{r()}catch(a){Le(e,t,a)}}var fd=!1;function Yp(e,t){if(Bo=Ds,e=Vu(),Lo(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var a=r.getSelection&&r.getSelection();if(a&&a.rangeCount!==0){r=a.anchorNode;var c=a.anchorOffset,d=a.focusNode;a=a.focusOffset;try{r.nodeType,d.nodeType}catch{r=null;break e}var m=0,w=-1,k=-1,T=0,M=0,z=e,$=null;t:for(;;){for(var J;z!==r||c!==0&&z.nodeType!==3||(w=m+c),z!==d||a!==0&&z.nodeType!==3||(k=m+a),z.nodeType===3&&(m+=z.nodeValue.length),(J=z.firstChild)!==null;)$=z,z=J;for(;;){if(z===e)break t;if($===r&&++T===c&&(w=m),$===d&&++M===a&&(k=m),(J=z.nextSibling)!==null)break;z=$,$=z.parentNode}z=J}r=w===-1||k===-1?null:{start:w,end:k}}else r=null}r=r||{start:0,end:0}}else r=null;for(Vo={focusedElem:e,selectionRange:r},Ds=!1,X=t;X!==null;)if(t=X,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,X=e;else for(;X!==null;){t=X;try{var Y=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(Y!==null){var Z=Y.memoizedProps,$e=Y.memoizedState,C=t.stateNode,j=C.getSnapshotBeforeUpdate(t.elementType===t.type?Z:jt(t.type,Z),$e);C.__reactInternalSnapshotBeforeUpdate=j}break;case 3:var N=t.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch(V){Le(t,t.return,V)}if(e=t.sibling,e!==null){e.return=t.return,X=e;break}X=t.return}return Y=fd,fd=!1,Y}function ps(e,t,r){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var c=a=a.next;do{if((c.tag&e)===e){var d=c.destroy;c.destroy=void 0,d!==void 0&&Ta(t,r,d)}c=c.next}while(c!==a)}}function vi(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var a=r.create;r.destroy=a()}r=r.next}while(r!==t)}}function Ra(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function hd(e){var t=e.alternate;t!==null&&(e.alternate=null,hd(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[At],delete t[rs],delete t[Ko],delete t[Lp],delete t[Ip])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function pd(e){return e.tag===5||e.tag===3||e.tag===4}function md(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||pd(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Aa(e,t,r){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Gs));else if(a!==4&&(e=e.child,e!==null))for(Aa(e,t,r),e=e.sibling;e!==null;)Aa(e,t,r),e=e.sibling}function Oa(e,t,r){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(Oa(e,t,r),e=e.sibling;e!==null;)Oa(e,t,r),e=e.sibling}var Ke=null,Et=!1;function an(e,t,r){for(r=r.child;r!==null;)gd(e,t,r),r=r.sibling}function gd(e,t,r){if(Rt&&typeof Rt.onCommitFiberUnmount=="function")try{Rt.onCommitFiberUnmount(Ts,r)}catch{}switch(r.tag){case 5:Ye||or(r,t);case 6:var a=Ke,c=Et;Ke=null,an(e,t,r),Ke=a,Et=c,Ke!==null&&(Et?(e=Ke,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Ke.removeChild(r.stateNode));break;case 18:Ke!==null&&(Et?(e=Ke,r=r.stateNode,e.nodeType===8?qo(e.parentNode,r):e.nodeType===1&&qo(e,r),qr(e)):qo(Ke,r.stateNode));break;case 4:a=Ke,c=Et,Ke=r.stateNode.containerInfo,Et=!0,an(e,t,r),Ke=a,Et=c;break;case 0:case 11:case 14:case 15:if(!Ye&&(a=r.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){c=a=a.next;do{var d=c,m=d.destroy;d=d.tag,m!==void 0&&((d&2)!==0||(d&4)!==0)&&Ta(r,t,m),c=c.next}while(c!==a)}an(e,t,r);break;case 1:if(!Ye&&(or(r,t),a=r.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=r.memoizedProps,a.state=r.memoizedState,a.componentWillUnmount()}catch(w){Le(r,t,w)}an(e,t,r);break;case 21:an(e,t,r);break;case 22:r.mode&1?(Ye=(a=Ye)||r.memoizedState!==null,an(e,t,r),Ye=a):an(e,t,r);break;default:an(e,t,r)}}function vd(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Xp),t.forEach(function(a){var c=am.bind(null,e,a);r.has(a)||(r.add(a),a.then(c,c))})}}function Ct(e,t){var r=t.deletions;if(r!==null)for(var a=0;a<r.length;a++){var c=r[a];try{var d=e,m=t,w=m;e:for(;w!==null;){switch(w.tag){case 5:Ke=w.stateNode,Et=!1;break e;case 3:Ke=w.stateNode.containerInfo,Et=!0;break e;case 4:Ke=w.stateNode.containerInfo,Et=!0;break e}w=w.return}if(Ke===null)throw Error(s(160));gd(d,m,c),Ke=null,Et=!1;var k=c.alternate;k!==null&&(k.return=null),c.return=null}catch(T){Le(c,t,T)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)yd(t,e),t=t.sibling}function yd(e,t){var r=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ct(t,e),It(e),a&4){try{ps(3,e,e.return),vi(3,e)}catch(Z){Le(e,e.return,Z)}try{ps(5,e,e.return)}catch(Z){Le(e,e.return,Z)}}break;case 1:Ct(t,e),It(e),a&512&&r!==null&&or(r,r.return);break;case 5:if(Ct(t,e),It(e),a&512&&r!==null&&or(r,r.return),e.flags&32){var c=e.stateNode;try{Ir(c,"")}catch(Z){Le(e,e.return,Z)}}if(a&4&&(c=e.stateNode,c!=null)){var d=e.memoizedProps,m=r!==null?r.memoizedProps:d,w=e.type,k=e.updateQueue;if(e.updateQueue=null,k!==null)try{w==="input"&&d.type==="radio"&&d.name!=null&&Hl(c,d),uo(w,m);var T=uo(w,d);for(m=0;m<k.length;m+=2){var M=k[m],z=k[m+1];M==="style"?Zl(c,z):M==="dangerouslySetInnerHTML"?Xl(c,z):M==="children"?Ir(c,z):I(c,M,z,T)}switch(w){case"input":so(c,d);break;case"textarea":Gl(c,d);break;case"select":var $=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!d.multiple;var J=d.value;J!=null?Un(c,!!d.multiple,J,!1):$!==!!d.multiple&&(d.defaultValue!=null?Un(c,!!d.multiple,d.defaultValue,!0):Un(c,!!d.multiple,d.multiple?[]:"",!1))}c[rs]=d}catch(Z){Le(e,e.return,Z)}}break;case 6:if(Ct(t,e),It(e),a&4){if(e.stateNode===null)throw Error(s(162));c=e.stateNode,d=e.memoizedProps;try{c.nodeValue=d}catch(Z){Le(e,e.return,Z)}}break;case 3:if(Ct(t,e),It(e),a&4&&r!==null&&r.memoizedState.isDehydrated)try{qr(t.containerInfo)}catch(Z){Le(e,e.return,Z)}break;case 4:Ct(t,e),It(e);break;case 13:Ct(t,e),It(e),c=e.child,c.flags&8192&&(d=c.memoizedState!==null,c.stateNode.isHidden=d,!d||c.alternate!==null&&c.alternate.memoizedState!==null||(Da=De())),a&4&&vd(e);break;case 22:if(M=r!==null&&r.memoizedState!==null,e.mode&1?(Ye=(T=Ye)||M,Ct(t,e),Ye=T):Ct(t,e),It(e),a&8192){if(T=e.memoizedState!==null,(e.stateNode.isHidden=T)&&!M&&(e.mode&1)!==0)for(X=e,M=e.child;M!==null;){for(z=X=M;X!==null;){switch($=X,J=$.child,$.tag){case 0:case 11:case 14:case 15:ps(4,$,$.return);break;case 1:or($,$.return);var Y=$.stateNode;if(typeof Y.componentWillUnmount=="function"){a=$,r=$.return;try{t=a,Y.props=t.memoizedProps,Y.state=t.memoizedState,Y.componentWillUnmount()}catch(Z){Le(a,r,Z)}}break;case 5:or($,$.return);break;case 22:if($.memoizedState!==null){xd(z);continue}}J!==null?(J.return=$,X=J):xd(z)}M=M.sibling}e:for(M=null,z=e;;){if(z.tag===5){if(M===null){M=z;try{c=z.stateNode,T?(d=c.style,typeof d.setProperty=="function"?d.setProperty("display","none","important"):d.display="none"):(w=z.stateNode,k=z.memoizedProps.style,m=k!=null&&k.hasOwnProperty("display")?k.display:null,w.style.display=Yl("display",m))}catch(Z){Le(e,e.return,Z)}}}else if(z.tag===6){if(M===null)try{z.stateNode.nodeValue=T?"":z.memoizedProps}catch(Z){Le(e,e.return,Z)}}else if((z.tag!==22&&z.tag!==23||z.memoizedState===null||z===e)&&z.child!==null){z.child.return=z,z=z.child;continue}if(z===e)break e;for(;z.sibling===null;){if(z.return===null||z.return===e)break e;M===z&&(M=null),z=z.return}M===z&&(M=null),z.sibling.return=z.return,z=z.sibling}}break;case 19:Ct(t,e),It(e),a&4&&vd(e);break;case 21:break;default:Ct(t,e),It(e)}}function It(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(pd(r)){var a=r;break e}r=r.return}throw Error(s(160))}switch(a.tag){case 5:var c=a.stateNode;a.flags&32&&(Ir(c,""),a.flags&=-33);var d=md(e);Oa(e,d,c);break;case 3:case 4:var m=a.stateNode.containerInfo,w=md(e);Aa(e,w,m);break;default:throw Error(s(161))}}catch(k){Le(e,e.return,k)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Zp(e,t,r){X=e,wd(e)}function wd(e,t,r){for(var a=(e.mode&1)!==0;X!==null;){var c=X,d=c.child;if(c.tag===22&&a){var m=c.memoizedState!==null||gi;if(!m){var w=c.alternate,k=w!==null&&w.memoizedState!==null||Ye;w=gi;var T=Ye;if(gi=m,(Ye=k)&&!T)for(X=c;X!==null;)m=X,k=m.child,m.tag===22&&m.memoizedState!==null?kd(c):k!==null?(k.return=m,X=k):kd(c);for(;d!==null;)X=d,wd(d),d=d.sibling;X=c,gi=w,Ye=T}_d(e)}else(c.subtreeFlags&8772)!==0&&d!==null?(d.return=c,X=d):_d(e)}}function _d(e){for(;X!==null;){var t=X;if((t.flags&8772)!==0){var r=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:Ye||vi(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!Ye)if(r===null)a.componentDidMount();else{var c=t.elementType===t.type?r.memoizedProps:jt(t.type,r.memoizedProps);a.componentDidUpdate(c,r.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var d=t.updateQueue;d!==null&&vc(t,d,a);break;case 3:var m=t.updateQueue;if(m!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}vc(t,m,r)}break;case 5:var w=t.stateNode;if(r===null&&t.flags&4){r=w;var k=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":k.autoFocus&&r.focus();break;case"img":k.src&&(r.src=k.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var T=t.alternate;if(T!==null){var M=T.memoizedState;if(M!==null){var z=M.dehydrated;z!==null&&qr(z)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(s(163))}Ye||t.flags&512&&Ra(t)}catch($){Le(t,t.return,$)}}if(t===e){X=null;break}if(r=t.sibling,r!==null){r.return=t.return,X=r;break}X=t.return}}function xd(e){for(;X!==null;){var t=X;if(t===e){X=null;break}var r=t.sibling;if(r!==null){r.return=t.return,X=r;break}X=t.return}}function kd(e){for(;X!==null;){var t=X;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{vi(4,t)}catch(k){Le(t,r,k)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var c=t.return;try{a.componentDidMount()}catch(k){Le(t,c,k)}}var d=t.return;try{Ra(t)}catch(k){Le(t,d,k)}break;case 5:var m=t.return;try{Ra(t)}catch(k){Le(t,m,k)}}}catch(k){Le(t,t.return,k)}if(t===e){X=null;break}var w=t.sibling;if(w!==null){w.return=t.return,X=w;break}X=t.return}}var em=Math.ceil,yi=q.ReactCurrentDispatcher,La=q.ReactCurrentOwner,_t=q.ReactCurrentBatchConfig,ge=0,We=null,Me=null,Ge=0,pt=0,ar=tn(0),Fe=0,ms=null,Cn=0,wi=0,Ia=0,gs=null,it=null,Da=0,lr=1/0,Ht=null,_i=!1,$a=null,ln=null,xi=!1,un=null,ki=0,vs=0,Ma=null,Si=-1,bi=0;function et(){return(ge&6)!==0?De():Si!==-1?Si:Si=De()}function cn(e){return(e.mode&1)===0?1:(ge&2)!==0&&Ge!==0?Ge&-Ge:$p.transition!==null?(bi===0&&(bi=pu()),bi):(e=xe,e!==0||(e=window.event,e=e===void 0?16:Su(e.type)),e)}function Nt(e,t,r,a){if(50<vs)throw vs=0,Ma=null,Error(s(185));zr(e,r,a),((ge&2)===0||e!==We)&&(e===We&&((ge&2)===0&&(wi|=r),Fe===4&&dn(e,Ge)),ot(e,a),r===1&&ge===0&&(t.mode&1)===0&&(lr=De()+500,Ys&&rn()))}function ot(e,t){var r=e.callbackNode;$h(e,t);var a=Os(e,e===We?Ge:0);if(a===0)r!==null&&du(r),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(r!=null&&du(r),t===1)e.tag===0?Dp(bd.bind(null,e)):lc(bd.bind(null,e)),Ap(function(){(ge&6)===0&&rn()}),r=null;else{switch(mu(a)){case 1:r=vo;break;case 4:r=fu;break;case 16:r=Ps;break;case 536870912:r=hu;break;default:r=Ps}r=Ad(r,Sd.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Sd(e,t){if(Si=-1,bi=0,(ge&6)!==0)throw Error(s(327));var r=e.callbackNode;if(ur()&&e.callbackNode!==r)return null;var a=Os(e,e===We?Ge:0);if(a===0)return null;if((a&30)!==0||(a&e.expiredLanes)!==0||t)t=ji(e,a);else{t=a;var c=ge;ge|=2;var d=Ed();(We!==e||Ge!==t)&&(Ht=null,lr=De()+500,Pn(e,t));do try{rm();break}catch(w){jd(e,w)}while(!0);na(),yi.current=d,ge=c,Me!==null?t=0:(We=null,Ge=0,t=Fe)}if(t!==0){if(t===2&&(c=yo(e),c!==0&&(a=c,t=Ua(e,c))),t===1)throw r=ms,Pn(e,0),dn(e,a),ot(e,De()),r;if(t===6)dn(e,a);else{if(c=e.current.alternate,(a&30)===0&&!tm(c)&&(t=ji(e,a),t===2&&(d=yo(e),d!==0&&(a=d,t=Ua(e,d))),t===1))throw r=ms,Pn(e,0),dn(e,a),ot(e,De()),r;switch(e.finishedWork=c,e.finishedLanes=a,t){case 0:case 1:throw Error(s(345));case 2:Tn(e,it,Ht);break;case 3:if(dn(e,a),(a&130023424)===a&&(t=Da+500-De(),10<t)){if(Os(e,0)!==0)break;if(c=e.suspendedLanes,(c&a)!==a){et(),e.pingedLanes|=e.suspendedLanes&c;break}e.timeoutHandle=Ho(Tn.bind(null,e,it,Ht),t);break}Tn(e,it,Ht);break;case 4:if(dn(e,a),(a&4194240)===a)break;for(t=e.eventTimes,c=-1;0<a;){var m=31-kt(a);d=1<<m,m=t[m],m>c&&(c=m),a&=~d}if(a=c,a=De()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*em(a/1960))-a,10<a){e.timeoutHandle=Ho(Tn.bind(null,e,it,Ht),a);break}Tn(e,it,Ht);break;case 5:Tn(e,it,Ht);break;default:throw Error(s(329))}}}return ot(e,De()),e.callbackNode===r?Sd.bind(null,e):null}function Ua(e,t){var r=gs;return e.current.memoizedState.isDehydrated&&(Pn(e,t).flags|=256),e=ji(e,t),e!==2&&(t=it,it=r,t!==null&&Fa(t)),e}function Fa(e){it===null?it=e:it.push.apply(it,e)}function tm(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var a=0;a<r.length;a++){var c=r[a],d=c.getSnapshot;c=c.value;try{if(!St(d(),c))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function dn(e,t){for(t&=~Ia,t&=~wi,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-kt(t),a=1<<r;e[r]=-1,t&=~a}}function bd(e){if((ge&6)!==0)throw Error(s(327));ur();var t=Os(e,0);if((t&1)===0)return ot(e,De()),null;var r=ji(e,t);if(e.tag!==0&&r===2){var a=yo(e);a!==0&&(t=a,r=Ua(e,a))}if(r===1)throw r=ms,Pn(e,0),dn(e,t),ot(e,De()),r;if(r===6)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Tn(e,it,Ht),ot(e,De()),null}function za(e,t){var r=ge;ge|=1;try{return e(t)}finally{ge=r,ge===0&&(lr=De()+500,Ys&&rn())}}function Nn(e){un!==null&&un.tag===0&&(ge&6)===0&&ur();var t=ge;ge|=1;var r=_t.transition,a=xe;try{if(_t.transition=null,xe=1,e)return e()}finally{xe=a,_t.transition=r,ge=t,(ge&6)===0&&rn()}}function Ba(){pt=ar.current,Ee(ar)}function Pn(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Rp(r)),Me!==null)for(r=Me.return;r!==null;){var a=r;switch(Xo(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&Js();break;case 3:sr(),Ee(nt),Ee(Qe),fa();break;case 5:ca(a);break;case 4:sr();break;case 13:Ee(Ae);break;case 19:Ee(Ae);break;case 10:ra(a.type._context);break;case 22:case 23:Ba()}r=r.return}if(We=e,Me=e=fn(e.current,null),Ge=pt=t,Fe=0,ms=null,Ia=wi=Cn=0,it=gs=null,bn!==null){for(t=0;t<bn.length;t++)if(r=bn[t],a=r.interleaved,a!==null){r.interleaved=null;var c=a.next,d=r.pending;if(d!==null){var m=d.next;d.next=c,a.next=m}r.pending=a}bn=null}return e}function jd(e,t){do{var r=Me;try{if(na(),ui.current=hi,ci){for(var a=Oe.memoizedState;a!==null;){var c=a.queue;c!==null&&(c.pending=null),a=a.next}ci=!1}if(En=0,Ve=Ue=Oe=null,us=!1,cs=0,La.current=null,r===null||r.return===null){Fe=1,ms=t,Me=null;break}e:{var d=e,m=r.return,w=r,k=t;if(t=Ge,w.flags|=32768,k!==null&&typeof k=="object"&&typeof k.then=="function"){var T=k,M=w,z=M.tag;if((M.mode&1)===0&&(z===0||z===11||z===15)){var $=M.alternate;$?(M.updateQueue=$.updateQueue,M.memoizedState=$.memoizedState,M.lanes=$.lanes):(M.updateQueue=null,M.memoizedState=null)}var J=Jc(m);if(J!==null){J.flags&=-257,Xc(J,m,w,d,t),J.mode&1&&Qc(d,T,t),t=J,k=T;var Y=t.updateQueue;if(Y===null){var Z=new Set;Z.add(k),t.updateQueue=Z}else Y.add(k);break e}else{if((t&1)===0){Qc(d,T,t),Va();break e}k=Error(s(426))}}else if(Ne&&w.mode&1){var $e=Jc(m);if($e!==null){($e.flags&65536)===0&&($e.flags|=256),Xc($e,m,w,d,t),ea(ir(k,w));break e}}d=k=ir(k,w),Fe!==4&&(Fe=2),gs===null?gs=[d]:gs.push(d),d=m;do{switch(d.tag){case 3:d.flags|=65536,t&=-t,d.lanes|=t;var C=Kc(d,k,t);gc(d,C);break e;case 1:w=k;var j=d.type,N=d.stateNode;if((d.flags&128)===0&&(typeof j.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(ln===null||!ln.has(N)))){d.flags|=65536,t&=-t,d.lanes|=t;var V=Gc(d,w,t);gc(d,V);break e}}d=d.return}while(d!==null)}Nd(r)}catch(ee){t=ee,Me===r&&r!==null&&(Me=r=r.return);continue}break}while(!0)}function Ed(){var e=yi.current;return yi.current=hi,e===null?hi:e}function Va(){(Fe===0||Fe===3||Fe===2)&&(Fe=4),We===null||(Cn&268435455)===0&&(wi&268435455)===0||dn(We,Ge)}function ji(e,t){var r=ge;ge|=2;var a=Ed();(We!==e||Ge!==t)&&(Ht=null,Pn(e,t));do try{nm();break}catch(c){jd(e,c)}while(!0);if(na(),ge=r,yi.current=a,Me!==null)throw Error(s(261));return We=null,Ge=0,Fe}function nm(){for(;Me!==null;)Cd(Me)}function rm(){for(;Me!==null&&!Nh();)Cd(Me)}function Cd(e){var t=Rd(e.alternate,e,pt);e.memoizedProps=e.pendingProps,t===null?Nd(e):Me=t,La.current=null}function Nd(e){var t=e;do{var r=t.alternate;if(e=t.return,(t.flags&32768)===0){if(r=Qp(r,t,pt),r!==null){Me=r;return}}else{if(r=Jp(r,t),r!==null){r.flags&=32767,Me=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Fe=6,Me=null;return}}if(t=t.sibling,t!==null){Me=t;return}Me=t=e}while(t!==null);Fe===0&&(Fe=5)}function Tn(e,t,r){var a=xe,c=_t.transition;try{_t.transition=null,xe=1,sm(e,t,r,a)}finally{_t.transition=c,xe=a}return null}function sm(e,t,r,a){do ur();while(un!==null);if((ge&6)!==0)throw Error(s(327));r=e.finishedWork;var c=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var d=r.lanes|r.childLanes;if(Mh(e,d),e===We&&(Me=We=null,Ge=0),(r.subtreeFlags&2064)===0&&(r.flags&2064)===0||xi||(xi=!0,Ad(Ps,function(){return ur(),null})),d=(r.flags&15990)!==0,(r.subtreeFlags&15990)!==0||d){d=_t.transition,_t.transition=null;var m=xe;xe=1;var w=ge;ge|=4,La.current=null,Yp(e,r),yd(r,e),bp(Vo),Ds=!!Bo,Vo=Bo=null,e.current=r,Zp(r),Ph(),ge=w,xe=m,_t.transition=d}else e.current=r;if(xi&&(xi=!1,un=e,ki=c),d=e.pendingLanes,d===0&&(ln=null),Ah(r.stateNode),ot(e,De()),t!==null)for(a=e.onRecoverableError,r=0;r<t.length;r++)c=t[r],a(c.value,{componentStack:c.stack,digest:c.digest});if(_i)throw _i=!1,e=$a,$a=null,e;return(ki&1)!==0&&e.tag!==0&&ur(),d=e.pendingLanes,(d&1)!==0?e===Ma?vs++:(vs=0,Ma=e):vs=0,rn(),null}function ur(){if(un!==null){var e=mu(ki),t=_t.transition,r=xe;try{if(_t.transition=null,xe=16>e?16:e,un===null)var a=!1;else{if(e=un,un=null,ki=0,(ge&6)!==0)throw Error(s(331));var c=ge;for(ge|=4,X=e.current;X!==null;){var d=X,m=d.child;if((X.flags&16)!==0){var w=d.deletions;if(w!==null){for(var k=0;k<w.length;k++){var T=w[k];for(X=T;X!==null;){var M=X;switch(M.tag){case 0:case 11:case 15:ps(8,M,d)}var z=M.child;if(z!==null)z.return=M,X=z;else for(;X!==null;){M=X;var $=M.sibling,J=M.return;if(hd(M),M===T){X=null;break}if($!==null){$.return=J,X=$;break}X=J}}}var Y=d.alternate;if(Y!==null){var Z=Y.child;if(Z!==null){Y.child=null;do{var $e=Z.sibling;Z.sibling=null,Z=$e}while(Z!==null)}}X=d}}if((d.subtreeFlags&2064)!==0&&m!==null)m.return=d,X=m;else e:for(;X!==null;){if(d=X,(d.flags&2048)!==0)switch(d.tag){case 0:case 11:case 15:ps(9,d,d.return)}var C=d.sibling;if(C!==null){C.return=d.return,X=C;break e}X=d.return}}var j=e.current;for(X=j;X!==null;){m=X;var N=m.child;if((m.subtreeFlags&2064)!==0&&N!==null)N.return=m,X=N;else e:for(m=j;X!==null;){if(w=X,(w.flags&2048)!==0)try{switch(w.tag){case 0:case 11:case 15:vi(9,w)}}catch(ee){Le(w,w.return,ee)}if(w===m){X=null;break e}var V=w.sibling;if(V!==null){V.return=w.return,X=V;break e}X=w.return}}if(ge=c,rn(),Rt&&typeof Rt.onPostCommitFiberRoot=="function")try{Rt.onPostCommitFiberRoot(Ts,e)}catch{}a=!0}return a}finally{xe=r,_t.transition=t}}return!1}function Pd(e,t,r){t=ir(r,t),t=Kc(e,t,1),e=on(e,t,1),t=et(),e!==null&&(zr(e,1,t),ot(e,t))}function Le(e,t,r){if(e.tag===3)Pd(e,e,r);else for(;t!==null;){if(t.tag===3){Pd(t,e,r);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(ln===null||!ln.has(a))){e=ir(r,e),e=Gc(t,e,1),t=on(t,e,1),e=et(),t!==null&&(zr(t,1,e),ot(t,e));break}}t=t.return}}function im(e,t,r){var a=e.pingCache;a!==null&&a.delete(t),t=et(),e.pingedLanes|=e.suspendedLanes&r,We===e&&(Ge&r)===r&&(Fe===4||Fe===3&&(Ge&130023424)===Ge&&500>De()-Da?Pn(e,0):Ia|=r),ot(e,t)}function Td(e,t){t===0&&((e.mode&1)===0?t=1:(t=As,As<<=1,(As&130023424)===0&&(As=4194304)));var r=et();e=Bt(e,t),e!==null&&(zr(e,t,r),ot(e,r))}function om(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Td(e,r)}function am(e,t){var r=0;switch(e.tag){case 13:var a=e.stateNode,c=e.memoizedState;c!==null&&(r=c.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(s(314))}a!==null&&a.delete(t),Td(e,r)}var Rd;Rd=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||nt.current)st=!0;else{if((e.lanes&r)===0&&(t.flags&128)===0)return st=!1,Gp(e,t,r);st=(e.flags&131072)!==0}else st=!1,Ne&&(t.flags&1048576)!==0&&uc(t,ei,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;mi(e,t),e=t.pendingProps;var c=Xn(t,Qe.current);nr(t,r),c=ma(null,t,a,e,c,r);var d=ga();return t.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,rt(a)?(d=!0,Xs(t)):d=!1,t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,oa(t),c.updater=oi,t.stateNode=c,c._reactInternals=t,la(t,a,e,r),t=ba(null,t,a,!0,d,r)):(t.tag=0,Ne&&d&&Jo(t),Ze(null,t,c,r),t=t.child),t;case 16:a=t.elementType;e:{switch(mi(e,t),e=t.pendingProps,c=a._init,a=c(a._payload),t.type=a,c=t.tag=um(a),e=jt(a,e),c){case 0:t=Sa(null,t,a,e,r);break e;case 1:t=rd(null,t,a,e,r);break e;case 11:t=Yc(null,t,a,e,r);break e;case 14:t=Zc(null,t,a,jt(a.type,e),r);break e}throw Error(s(306,a,""))}return t;case 0:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:jt(a,c),Sa(e,t,a,c,r);case 1:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:jt(a,c),rd(e,t,a,c,r);case 3:e:{if(sd(t),e===null)throw Error(s(387));a=t.pendingProps,d=t.memoizedState,c=d.element,mc(e,t),ii(t,a,null,r);var m=t.memoizedState;if(a=m.element,d.isDehydrated)if(d={element:a,isDehydrated:!1,cache:m.cache,pendingSuspenseBoundaries:m.pendingSuspenseBoundaries,transitions:m.transitions},t.updateQueue.baseState=d,t.memoizedState=d,t.flags&256){c=ir(Error(s(423)),t),t=id(e,t,a,r,c);break e}else if(a!==c){c=ir(Error(s(424)),t),t=id(e,t,a,r,c);break e}else for(ht=en(t.stateNode.containerInfo.firstChild),ft=t,Ne=!0,bt=null,r=bc(t,null,a,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(er(),a===c){t=Wt(e,t,r);break e}Ze(e,t,a,r)}t=t.child}return t;case 5:return jc(t),e===null&&Zo(t),a=t.type,c=t.pendingProps,d=e!==null?e.memoizedProps:null,m=c.children,Wo(a,c)?m=null:d!==null&&Wo(a,d)&&(t.flags|=32),nd(e,t),Ze(e,t,m,r),t.child;case 6:return e===null&&Zo(t),null;case 13:return od(e,t,r);case 4:return ua(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=rr(t,null,a,r):Ze(e,t,a,r),t.child;case 11:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:jt(a,c),Yc(e,t,a,c,r);case 7:return Ze(e,t,t.pendingProps,r),t.child;case 8:return Ze(e,t,t.pendingProps.children,r),t.child;case 12:return Ze(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(a=t.type._context,c=t.pendingProps,d=t.memoizedProps,m=c.value,Se(ni,a._currentValue),a._currentValue=m,d!==null)if(St(d.value,m)){if(d.children===c.children&&!nt.current){t=Wt(e,t,r);break e}}else for(d=t.child,d!==null&&(d.return=t);d!==null;){var w=d.dependencies;if(w!==null){m=d.child;for(var k=w.firstContext;k!==null;){if(k.context===a){if(d.tag===1){k=Vt(-1,r&-r),k.tag=2;var T=d.updateQueue;if(T!==null){T=T.shared;var M=T.pending;M===null?k.next=k:(k.next=M.next,M.next=k),T.pending=k}}d.lanes|=r,k=d.alternate,k!==null&&(k.lanes|=r),sa(d.return,r,t),w.lanes|=r;break}k=k.next}}else if(d.tag===10)m=d.type===t.type?null:d.child;else if(d.tag===18){if(m=d.return,m===null)throw Error(s(341));m.lanes|=r,w=m.alternate,w!==null&&(w.lanes|=r),sa(m,r,t),m=d.sibling}else m=d.child;if(m!==null)m.return=d;else for(m=d;m!==null;){if(m===t){m=null;break}if(d=m.sibling,d!==null){d.return=m.return,m=d;break}m=m.return}d=m}Ze(e,t,c.children,r),t=t.child}return t;case 9:return c=t.type,a=t.pendingProps.children,nr(t,r),c=yt(c),a=a(c),t.flags|=1,Ze(e,t,a,r),t.child;case 14:return a=t.type,c=jt(a,t.pendingProps),c=jt(a.type,c),Zc(e,t,a,c,r);case 15:return ed(e,t,t.type,t.pendingProps,r);case 17:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:jt(a,c),mi(e,t),t.tag=1,rt(a)?(e=!0,Xs(t)):e=!1,nr(t,r),_c(t,a,c),la(t,a,c,r),ba(null,t,a,!0,e,r);case 19:return ld(e,t,r);case 22:return td(e,t,r)}throw Error(s(156,t.tag))};function Ad(e,t){return cu(e,t)}function lm(e,t,r,a){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xt(e,t,r,a){return new lm(e,t,r,a)}function Wa(e){return e=e.prototype,!(!e||!e.isReactComponent)}function um(e){if(typeof e=="function")return Wa(e)?1:0;if(e!=null){if(e=e.$$typeof,e===H)return 11;if(e===ke)return 14}return 2}function fn(e,t){var r=e.alternate;return r===null?(r=xt(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Ei(e,t,r,a,c,d){var m=2;if(a=e,typeof e=="function")Wa(e)&&(m=1);else if(typeof e=="string")m=5;else e:switch(e){case F:return Rn(r.children,c,d,t);case te:m=8,c|=8;break;case oe:return e=xt(12,r,t,c|2),e.elementType=oe,e.lanes=d,e;case re:return e=xt(13,r,t,c),e.elementType=re,e.lanes=d,e;case _e:return e=xt(19,r,t,c),e.elementType=_e,e.lanes=d,e;case me:return Ci(r,c,d,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ye:m=10;break e;case Pe:m=9;break e;case H:m=11;break e;case ke:m=14;break e;case Te:m=16,a=null;break e}throw Error(s(130,e==null?e:typeof e,""))}return t=xt(m,r,t,c),t.elementType=e,t.type=a,t.lanes=d,t}function Rn(e,t,r,a){return e=xt(7,e,a,t),e.lanes=r,e}function Ci(e,t,r,a){return e=xt(22,e,a,t),e.elementType=me,e.lanes=r,e.stateNode={isHidden:!1},e}function Ha(e,t,r){return e=xt(6,e,null,t),e.lanes=r,e}function qa(e,t,r){return t=xt(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function cm(e,t,r,a,c){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wo(0),this.expirationTimes=wo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wo(0),this.identifierPrefix=a,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function Ka(e,t,r,a,c,d,m,w,k){return e=new cm(e,t,r,w,k),t===1?(t=1,d===!0&&(t|=8)):t=0,d=xt(3,null,null,t),e.current=d,d.stateNode=e,d.memoizedState={element:a,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},oa(d),e}function dm(e,t,r){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:L,key:a==null?null:""+a,children:e,containerInfo:t,implementation:r}}function Od(e){if(!e)return nn;e=e._reactInternals;e:{if(wn(e)!==e||e.tag!==1)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(rt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(s(171))}if(e.tag===1){var r=e.type;if(rt(r))return oc(e,r,t)}return t}function Ld(e,t,r,a,c,d,m,w,k){return e=Ka(r,a,!0,e,c,d,m,w,k),e.context=Od(null),r=e.current,a=et(),c=cn(r),d=Vt(a,c),d.callback=t??null,on(r,d,c),e.current.lanes=c,zr(e,c,a),ot(e,a),e}function Ni(e,t,r,a){var c=t.current,d=et(),m=cn(c);return r=Od(r),t.context===null?t.context=r:t.pendingContext=r,t=Vt(d,m),t.payload={element:e},a=a===void 0?null:a,a!==null&&(t.callback=a),e=on(c,t,m),e!==null&&(Nt(e,c,m,d),si(e,c,m)),m}function Pi(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Id(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Ga(e,t){Id(e,t),(e=e.alternate)&&Id(e,t)}function fm(){return null}var Dd=typeof reportError=="function"?reportError:function(e){console.error(e)};function Qa(e){this._internalRoot=e}Ti.prototype.render=Qa.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(s(409));Ni(e,t,null,null)},Ti.prototype.unmount=Qa.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Nn(function(){Ni(null,e,null,null)}),t[Mt]=null}};function Ti(e){this._internalRoot=e}Ti.prototype.unstable_scheduleHydration=function(e){if(e){var t=yu();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Xt.length&&t!==0&&t<Xt[r].priority;r++);Xt.splice(r,0,e),r===0&&xu(e)}};function Ja(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ri(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function $d(){}function hm(e,t,r,a,c){if(c){if(typeof a=="function"){var d=a;a=function(){var T=Pi(m);d.call(T)}}var m=Ld(t,a,e,0,null,!1,!1,"",$d);return e._reactRootContainer=m,e[Mt]=m.current,ts(e.nodeType===8?e.parentNode:e),Nn(),m}for(;c=e.lastChild;)e.removeChild(c);if(typeof a=="function"){var w=a;a=function(){var T=Pi(k);w.call(T)}}var k=Ka(e,0,!1,null,null,!1,!1,"",$d);return e._reactRootContainer=k,e[Mt]=k.current,ts(e.nodeType===8?e.parentNode:e),Nn(function(){Ni(t,k,r,a)}),k}function Ai(e,t,r,a,c){var d=r._reactRootContainer;if(d){var m=d;if(typeof c=="function"){var w=c;c=function(){var k=Pi(m);w.call(k)}}Ni(t,m,e,c)}else m=hm(r,t,e,c,a);return Pi(m)}gu=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Fr(t.pendingLanes);r!==0&&(_o(t,r|1),ot(t,De()),(ge&6)===0&&(lr=De()+500,rn()))}break;case 13:Nn(function(){var a=Bt(e,1);if(a!==null){var c=et();Nt(a,e,1,c)}}),Ga(e,1)}},xo=function(e){if(e.tag===13){var t=Bt(e,134217728);if(t!==null){var r=et();Nt(t,e,134217728,r)}Ga(e,134217728)}},vu=function(e){if(e.tag===13){var t=cn(e),r=Bt(e,t);if(r!==null){var a=et();Nt(r,e,t,a)}Ga(e,t)}},yu=function(){return xe},wu=function(e,t){var r=xe;try{return xe=e,t()}finally{xe=r}},ho=function(e,t,r){switch(t){case"input":if(so(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var a=r[t];if(a!==e&&a.form===e.form){var c=Qs(a);if(!c)throw Error(s(90));no(a),so(a,c)}}}break;case"textarea":Gl(e,r);break;case"select":t=r.value,t!=null&&Un(e,!!r.multiple,t,!1)}},ru=za,su=Nn;var pm={usingClientEntryPoint:!1,Events:[ss,Qn,Qs,tu,nu,za]},ys={findFiberByHostInstance:_n,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},mm={bundleType:ys.bundleType,version:ys.version,rendererPackageName:ys.rendererPackageName,rendererConfig:ys.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:q.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=lu(e),e===null?null:e.stateNode},findFiberByHostInstance:ys.findFiberByHostInstance||fm,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Oi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Oi.isDisabled&&Oi.supportsFiber)try{Ts=Oi.inject(mm),Rt=Oi}catch{}}return at.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pm,at.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ja(t))throw Error(s(200));return dm(e,t,null,r)},at.createRoot=function(e,t){if(!Ja(e))throw Error(s(299));var r=!1,a="",c=Dd;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(c=t.onRecoverableError)),t=Ka(e,1,!1,null,null,r,!1,a,c),e[Mt]=t.current,ts(e.nodeType===8?e.parentNode:e),new Qa(t)},at.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=lu(t),e=e===null?null:e.stateNode,e},at.flushSync=function(e){return Nn(e)},at.hydrate=function(e,t,r){if(!Ri(t))throw Error(s(200));return Ai(null,e,t,!0,r)},at.hydrateRoot=function(e,t,r){if(!Ja(e))throw Error(s(405));var a=r!=null&&r.hydratedSources||null,c=!1,d="",m=Dd;if(r!=null&&(r.unstable_strictMode===!0&&(c=!0),r.identifierPrefix!==void 0&&(d=r.identifierPrefix),r.onRecoverableError!==void 0&&(m=r.onRecoverableError)),t=Ld(t,null,e,1,r??null,c,!1,d,m),e[Mt]=t.current,ts(e),a)for(e=0;e<a.length;e++)r=a[e],c=r._getVersion,c=c(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,c]:t.mutableSourceEagerHydrationData.push(r,c);return new Ti(t)},at.render=function(e,t,r){if(!Ri(t))throw Error(s(200));return Ai(null,e,t,!1,r)},at.unmountComponentAtNode=function(e){if(!Ri(e))throw Error(s(40));return e._reactRootContainer?(Nn(function(){Ai(null,null,e,!1,function(){e._reactRootContainer=null,e[Mt]=null})}),!0):!1},at.unstable_batchedUpdates=za,at.unstable_renderSubtreeIntoContainer=function(e,t,r,a){if(!Ri(r))throw Error(s(200));if(e==null||e._reactInternals===void 0)throw Error(s(38));return Ai(e,t,r,!1,a)},at.version="18.2.0-next-9e3b772b8-20220608",at}var qd;function Em(){if(qd)return Za.exports;qd=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(n){console.error(n)}}return i(),Za.exports=jm(),Za.exports}var Kd;function Cm(){if(Kd)return Li;Kd=1;var i=Em();return Li.createRoot=i.createRoot,Li.hydrateRoot=i.hydrateRoot,Li}var Nm=Cm();const Pm=Pl(Nm);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tm=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Lf=(...i)=>i.filter((n,s,o)=>!!n&&n.trim()!==""&&o.indexOf(n)===s).join(" ").trim();/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Rm={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Am=E.forwardRef(({color:i="currentColor",size:n=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:l="",children:u,iconNode:f,...p},g)=>E.createElement("svg",{ref:g,...Rm,width:n,height:n,stroke:i,strokeWidth:o?Number(s)*24/Number(n):s,className:Lf("lucide",l),...p},[...f.map(([v,y])=>E.createElement(v,y)),...Array.isArray(u)?u:[u]]));/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=(i,n)=>{const s=E.forwardRef(({className:o,...l},u)=>E.createElement(Am,{ref:u,iconNode:n,className:Lf(`lucide-${Tm(i)}`,o),...l}));return s.displayName=`${i}`,s};/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const If=Ie("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Om=Ie("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lm=Ie("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Im=Ie("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dm=Ie("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $m=Ie("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mm=Ie("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fl=Ie("Film",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Um=Ie("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nr=Ie("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fm=Ie("Images",[["path",{d:"M18 22H4a2 2 0 0 1-2-2V6",key:"pblm9e"}],["path",{d:"m22 13-1.296-1.296a2.41 2.41 0 0 0-3.408 0L11 18",key:"nf6bnh"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}],["rect",{width:"16",height:"16",x:"6",y:"2",rx:"2",key:"12espp"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zm=Ie("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bm=Ie("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gd=Ie("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vm=Ie("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wm=Ie("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hm=Ie("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qm=Ie("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Km=Ie("SquarePlus",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dn=Ie("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gm=Ie("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qm=Ie("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Jm=i=>{let n;return i?n=i:typeof fetch>"u"?n=(...s)=>Ar(async()=>{const{default:o}=await Promise.resolve().then(()=>Or);return{default:o}},void 0).then(({default:o})=>o(...s)):n=fetch,(...s)=>n(...s)};class Rl extends Error{constructor(n,s="FunctionsError",o){super(n),this.name=s,this.context=o}}class Xm extends Rl{constructor(n){super("Failed to send a request to the Edge Function","FunctionsFetchError",n)}}class Qd extends Rl{constructor(n){super("Relay Error invoking the Edge Function","FunctionsRelayError",n)}}class Jd extends Rl{constructor(n){super("Edge Function returned a non-2xx status code","FunctionsHttpError",n)}}var hl;(function(i){i.Any="any",i.ApNortheast1="ap-northeast-1",i.ApNortheast2="ap-northeast-2",i.ApSouth1="ap-south-1",i.ApSoutheast1="ap-southeast-1",i.ApSoutheast2="ap-southeast-2",i.CaCentral1="ca-central-1",i.EuCentral1="eu-central-1",i.EuWest1="eu-west-1",i.EuWest2="eu-west-2",i.EuWest3="eu-west-3",i.SaEast1="sa-east-1",i.UsEast1="us-east-1",i.UsWest1="us-west-1",i.UsWest2="us-west-2"})(hl||(hl={}));var Ym=function(i,n,s,o){function l(u){return u instanceof s?u:new s(function(f){f(u)})}return new(s||(s=Promise))(function(u,f){function p(y){try{v(o.next(y))}catch(x){f(x)}}function g(y){try{v(o.throw(y))}catch(x){f(x)}}function v(y){y.done?u(y.value):l(y.value).then(p,g)}v((o=o.apply(i,n||[])).next())})};class Zm{constructor(n,{headers:s={},customFetch:o,region:l=hl.Any}={}){this.url=n,this.headers=s,this.region=l,this.fetch=Jm(o)}setAuth(n){this.headers.Authorization=`Bearer ${n}`}invoke(n,s={}){var o;return Ym(this,void 0,void 0,function*(){try{const{headers:l,method:u,body:f}=s;let p={},{region:g}=s;g||(g=this.region);const v=new URL(`${this.url}/${n}`);g&&g!=="any"&&(p["x-region"]=g,v.searchParams.set("forceFunctionRegion",g));let y;f&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)&&(typeof Blob<"u"&&f instanceof Blob||f instanceof ArrayBuffer?(p["Content-Type"]="application/octet-stream",y=f):typeof f=="string"?(p["Content-Type"]="text/plain",y=f):typeof FormData<"u"&&f instanceof FormData?y=f:(p["Content-Type"]="application/json",y=JSON.stringify(f)));const x=yield this.fetch(v.toString(),{method:u||"POST",headers:Object.assign(Object.assign(Object.assign({},p),this.headers),l),body:y}).catch(P=>{throw new Xm(P)}),_=x.headers.get("x-relay-error");if(_&&_==="true")throw new Qd(x);if(!x.ok)throw new Jd(x);let b=((o=x.headers.get("Content-Type"))!==null&&o!==void 0?o:"text/plain").split(";")[0].trim(),R;return b==="application/json"?R=yield x.json():b==="application/octet-stream"?R=yield x.blob():b==="text/event-stream"?R=x:b==="multipart/form-data"?R=yield x.formData():R=yield x.text(),{data:R,error:null,response:x}}catch(l){return{data:null,error:l,response:l instanceof Jd||l instanceof Qd?l.context:void 0}}})}}var qe={},cr={},dr={},fr={},hr={},pr={},eg=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Tr=eg();const tg=Tr.fetch,Df=Tr.fetch.bind(Tr),$f=Tr.Headers,ng=Tr.Request,rg=Tr.Response,Or=Object.freeze(Object.defineProperty({__proto__:null,Headers:$f,Request:ng,Response:rg,default:Df,fetch:tg},Symbol.toStringTag,{value:"Module"})),sg=wm(Or);var Ii={},Xd;function Mf(){if(Xd)return Ii;Xd=1,Object.defineProperty(Ii,"__esModule",{value:!0});class i extends Error{constructor(s){super(s.message),this.name="PostgrestError",this.details=s.details,this.hint=s.hint,this.code=s.code}}return Ii.default=i,Ii}var Yd;function Uf(){if(Yd)return pr;Yd=1;var i=pr&&pr.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(pr,"__esModule",{value:!0});const n=i(sg),s=i(Mf());class o{constructor(u){var f,p;this.shouldThrowOnError=!1,this.method=u.method,this.url=u.url,this.headers=new Headers(u.headers),this.schema=u.schema,this.body=u.body,this.shouldThrowOnError=(f=u.shouldThrowOnError)!==null&&f!==void 0?f:!1,this.signal=u.signal,this.isMaybeSingle=(p=u.isMaybeSingle)!==null&&p!==void 0?p:!1,u.fetch?this.fetch=u.fetch:typeof fetch>"u"?this.fetch=n.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(u,f){return this.headers=new Headers(this.headers),this.headers.set(u,f),this}then(u,f){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const p=this.fetch;let g=p(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async v=>{var y,x,_,b;let R=null,P=null,A=null,B=v.status,U=v.statusText;if(v.ok){if(this.method!=="HEAD"){const L=await v.text();L===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((y=this.headers.get("Accept"))===null||y===void 0)&&y.includes("application/vnd.pgrst.plan+text"))?P=L:P=JSON.parse(L))}const q=(x=this.headers.get("Prefer"))===null||x===void 0?void 0:x.match(/count=(exact|planned|estimated)/),W=(_=v.headers.get("content-range"))===null||_===void 0?void 0:_.split("/");q&&W&&W.length>1&&(A=parseInt(W[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(P)&&(P.length>1?(R={code:"PGRST116",details:`Results contain ${P.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},P=null,A=null,B=406,U="Not Acceptable"):P.length===1?P=P[0]:P=null)}else{const q=await v.text();try{R=JSON.parse(q),Array.isArray(R)&&v.status===404&&(P=[],R=null,B=200,U="OK")}catch{v.status===404&&q===""?(B=204,U="No Content"):R={message:q}}if(R&&this.isMaybeSingle&&(!((b=R?.details)===null||b===void 0)&&b.includes("0 rows"))&&(R=null,B=200,U="OK"),R&&this.shouldThrowOnError)throw new s.default(R)}return{error:R,data:P,count:A,status:B,statusText:U}});return this.shouldThrowOnError||(g=g.catch(v=>{var y,x,_;return{error:{message:`${(y=v?.name)!==null&&y!==void 0?y:"FetchError"}: ${v?.message}`,details:`${(x=v?.stack)!==null&&x!==void 0?x:""}`,hint:"",code:`${(_=v?.code)!==null&&_!==void 0?_:""}`},data:null,count:null,status:0,statusText:""}})),g.then(u,f)}returns(){return this}overrideTypes(){return this}}return pr.default=o,pr}var Zd;function Ff(){if(Zd)return hr;Zd=1;var i=hr&&hr.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(hr,"__esModule",{value:!0});const n=i(Uf());class s extends n.default{select(l){let u=!1;const f=(l??"*").split("").map(p=>/\s/.test(p)&&!u?"":(p==='"'&&(u=!u),p)).join("");return this.url.searchParams.set("select",f),this.headers.append("Prefer","return=representation"),this}order(l,{ascending:u=!0,nullsFirst:f,foreignTable:p,referencedTable:g=p}={}){const v=g?`${g}.order`:"order",y=this.url.searchParams.get(v);return this.url.searchParams.set(v,`${y?`${y},`:""}${l}.${u?"asc":"desc"}${f===void 0?"":f?".nullsfirst":".nullslast"}`),this}limit(l,{foreignTable:u,referencedTable:f=u}={}){const p=typeof f>"u"?"limit":`${f}.limit`;return this.url.searchParams.set(p,`${l}`),this}range(l,u,{foreignTable:f,referencedTable:p=f}={}){const g=typeof p>"u"?"offset":`${p}.offset`,v=typeof p>"u"?"limit":`${p}.limit`;return this.url.searchParams.set(g,`${l}`),this.url.searchParams.set(v,`${u-l+1}`),this}abortSignal(l){return this.signal=l,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:l=!1,verbose:u=!1,settings:f=!1,buffers:p=!1,wal:g=!1,format:v="text"}={}){var y;const x=[l?"analyze":null,u?"verbose":null,f?"settings":null,p?"buffers":null,g?"wal":null].filter(Boolean).join("|"),_=(y=this.headers.get("Accept"))!==null&&y!==void 0?y:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${v}; for="${_}"; options=${x};`),v==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(l){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${l}`),this}}return hr.default=s,hr}var ef;function Al(){if(ef)return fr;ef=1;var i=fr&&fr.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(fr,"__esModule",{value:!0});const n=i(Ff());class s extends n.default{eq(l,u){return this.url.searchParams.append(l,`eq.${u}`),this}neq(l,u){return this.url.searchParams.append(l,`neq.${u}`),this}gt(l,u){return this.url.searchParams.append(l,`gt.${u}`),this}gte(l,u){return this.url.searchParams.append(l,`gte.${u}`),this}lt(l,u){return this.url.searchParams.append(l,`lt.${u}`),this}lte(l,u){return this.url.searchParams.append(l,`lte.${u}`),this}like(l,u){return this.url.searchParams.append(l,`like.${u}`),this}likeAllOf(l,u){return this.url.searchParams.append(l,`like(all).{${u.join(",")}}`),this}likeAnyOf(l,u){return this.url.searchParams.append(l,`like(any).{${u.join(",")}}`),this}ilike(l,u){return this.url.searchParams.append(l,`ilike.${u}`),this}ilikeAllOf(l,u){return this.url.searchParams.append(l,`ilike(all).{${u.join(",")}}`),this}ilikeAnyOf(l,u){return this.url.searchParams.append(l,`ilike(any).{${u.join(",")}}`),this}is(l,u){return this.url.searchParams.append(l,`is.${u}`),this}in(l,u){const f=Array.from(new Set(u)).map(p=>typeof p=="string"&&new RegExp("[,()]").test(p)?`"${p}"`:`${p}`).join(",");return this.url.searchParams.append(l,`in.(${f})`),this}contains(l,u){return typeof u=="string"?this.url.searchParams.append(l,`cs.${u}`):Array.isArray(u)?this.url.searchParams.append(l,`cs.{${u.join(",")}}`):this.url.searchParams.append(l,`cs.${JSON.stringify(u)}`),this}containedBy(l,u){return typeof u=="string"?this.url.searchParams.append(l,`cd.${u}`):Array.isArray(u)?this.url.searchParams.append(l,`cd.{${u.join(",")}}`):this.url.searchParams.append(l,`cd.${JSON.stringify(u)}`),this}rangeGt(l,u){return this.url.searchParams.append(l,`sr.${u}`),this}rangeGte(l,u){return this.url.searchParams.append(l,`nxl.${u}`),this}rangeLt(l,u){return this.url.searchParams.append(l,`sl.${u}`),this}rangeLte(l,u){return this.url.searchParams.append(l,`nxr.${u}`),this}rangeAdjacent(l,u){return this.url.searchParams.append(l,`adj.${u}`),this}overlaps(l,u){return typeof u=="string"?this.url.searchParams.append(l,`ov.${u}`):this.url.searchParams.append(l,`ov.{${u.join(",")}}`),this}textSearch(l,u,{config:f,type:p}={}){let g="";p==="plain"?g="pl":p==="phrase"?g="ph":p==="websearch"&&(g="w");const v=f===void 0?"":`(${f})`;return this.url.searchParams.append(l,`${g}fts${v}.${u}`),this}match(l){return Object.entries(l).forEach(([u,f])=>{this.url.searchParams.append(u,`eq.${f}`)}),this}not(l,u,f){return this.url.searchParams.append(l,`not.${u}.${f}`),this}or(l,{foreignTable:u,referencedTable:f=u}={}){const p=f?`${f}.or`:"or";return this.url.searchParams.append(p,`(${l})`),this}filter(l,u,f){return this.url.searchParams.append(l,`${u}.${f}`),this}}return fr.default=s,fr}var tf;function zf(){if(tf)return dr;tf=1;var i=dr&&dr.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(dr,"__esModule",{value:!0});const n=i(Al());class s{constructor(l,{headers:u={},schema:f,fetch:p}){this.url=l,this.headers=new Headers(u),this.schema=f,this.fetch=p}select(l,{head:u=!1,count:f}={}){const p=u?"HEAD":"GET";let g=!1;const v=(l??"*").split("").map(y=>/\s/.test(y)&&!g?"":(y==='"'&&(g=!g),y)).join("");return this.url.searchParams.set("select",v),f&&this.headers.append("Prefer",`count=${f}`),new n.default({method:p,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(l,{count:u,defaultToNull:f=!0}={}){var p;const g="POST";if(u&&this.headers.append("Prefer",`count=${u}`),f||this.headers.append("Prefer","missing=default"),Array.isArray(l)){const v=l.reduce((y,x)=>y.concat(Object.keys(x)),[]);if(v.length>0){const y=[...new Set(v)].map(x=>`"${x}"`);this.url.searchParams.set("columns",y.join(","))}}return new n.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}upsert(l,{onConflict:u,ignoreDuplicates:f=!1,count:p,defaultToNull:g=!0}={}){var v;const y="POST";if(this.headers.append("Prefer",`resolution=${f?"ignore":"merge"}-duplicates`),u!==void 0&&this.url.searchParams.set("on_conflict",u),p&&this.headers.append("Prefer",`count=${p}`),g||this.headers.append("Prefer","missing=default"),Array.isArray(l)){const x=l.reduce((_,b)=>_.concat(Object.keys(b)),[]);if(x.length>0){const _=[...new Set(x)].map(b=>`"${b}"`);this.url.searchParams.set("columns",_.join(","))}}return new n.default({method:y,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:(v=this.fetch)!==null&&v!==void 0?v:fetch})}update(l,{count:u}={}){var f;const p="PATCH";return u&&this.headers.append("Prefer",`count=${u}`),new n.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}delete({count:l}={}){var u;const f="DELETE";return l&&this.headers.append("Prefer",`count=${l}`),new n.default({method:f,url:this.url,headers:this.headers,schema:this.schema,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}}return dr.default=s,dr}var nf;function ig(){if(nf)return cr;nf=1;var i=cr&&cr.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(cr,"__esModule",{value:!0});const n=i(zf()),s=i(Al());class o{constructor(u,{headers:f={},schema:p,fetch:g}={}){this.url=u,this.headers=new Headers(f),this.schemaName=p,this.fetch=g}from(u){const f=new URL(`${this.url}/${u}`);return new n.default(f,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(u){return new o(this.url,{headers:this.headers,schema:u,fetch:this.fetch})}rpc(u,f={},{head:p=!1,get:g=!1,count:v}={}){var y;let x;const _=new URL(`${this.url}/rpc/${u}`);let b;p||g?(x=p?"HEAD":"GET",Object.entries(f).filter(([P,A])=>A!==void 0).map(([P,A])=>[P,Array.isArray(A)?`{${A.join(",")}}`:`${A}`]).forEach(([P,A])=>{_.searchParams.append(P,A)})):(x="POST",b=f);const R=new Headers(this.headers);return v&&R.set("Prefer",`count=${v}`),new s.default({method:x,url:_,headers:R,schema:this.schemaName,body:b,fetch:(y=this.fetch)!==null&&y!==void 0?y:fetch})}}return cr.default=o,cr}var rf;function og(){if(rf)return qe;rf=1;var i=qe&&qe.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(qe,"__esModule",{value:!0}),qe.PostgrestError=qe.PostgrestBuilder=qe.PostgrestTransformBuilder=qe.PostgrestFilterBuilder=qe.PostgrestQueryBuilder=qe.PostgrestClient=void 0;const n=i(ig());qe.PostgrestClient=n.default;const s=i(zf());qe.PostgrestQueryBuilder=s.default;const o=i(Al());qe.PostgrestFilterBuilder=o.default;const l=i(Ff());qe.PostgrestTransformBuilder=l.default;const u=i(Uf());qe.PostgrestBuilder=u.default;const f=i(Mf());return qe.PostgrestError=f.default,qe.default={PostgrestClient:n.default,PostgrestQueryBuilder:s.default,PostgrestFilterBuilder:o.default,PostgrestTransformBuilder:l.default,PostgrestBuilder:u.default,PostgrestError:f.default},qe}var ag=og();const lg=Pl(ag),{PostgrestClient:ug,PostgrestQueryBuilder:z0,PostgrestFilterBuilder:B0,PostgrestTransformBuilder:V0,PostgrestBuilder:W0,PostgrestError:H0}=lg;class cg{static detectEnvironment(){var n;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((n=navigator.userAgent)===null||n===void 0)&&n.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const s=parseInt(process.versions.node.split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const n=this.detectEnvironment();if(n.constructor)return n.constructor;let s=n.error||"WebSocket not supported in this environment.";throw n.workaround&&(s+=`

Suggested solution: ${n.workaround}`),new Error(s)}static createWebSocket(n,s){const o=this.getWebSocketConstructor();return new o(n,s)}static isWebSocketSupported(){try{const n=this.detectEnvironment();return n.type==="native"||n.type==="ws"}catch{return!1}}}const dg="2.15.1",fg=`realtime-js/${dg}`,hg="1.0.0",pl=1e4,pg=1e3,mg=100;var xs;(function(i){i[i.connecting=0]="connecting",i[i.open=1]="open",i[i.closing=2]="closing",i[i.closed=3]="closed"})(xs||(xs={}));var ze;(function(i){i.closed="closed",i.errored="errored",i.joined="joined",i.joining="joining",i.leaving="leaving"})(ze||(ze={}));var Tt;(function(i){i.close="phx_close",i.error="phx_error",i.join="phx_join",i.reply="phx_reply",i.leave="phx_leave",i.access_token="access_token"})(Tt||(Tt={}));var ml;(function(i){i.websocket="websocket"})(ml||(ml={}));var In;(function(i){i.Connecting="connecting",i.Open="open",i.Closing="closing",i.Closed="closed"})(In||(In={}));class gg{constructor(){this.HEADER_LENGTH=1}decode(n,s){return n.constructor===ArrayBuffer?s(this._binaryDecode(n)):s(typeof n=="string"?JSON.parse(n):{})}_binaryDecode(n){const s=new DataView(n),o=new TextDecoder;return this._decodeBroadcast(n,s,o)}_decodeBroadcast(n,s,o){const l=s.getUint8(1),u=s.getUint8(2);let f=this.HEADER_LENGTH+2;const p=o.decode(n.slice(f,f+l));f=f+l;const g=o.decode(n.slice(f,f+u));f=f+u;const v=JSON.parse(o.decode(n.slice(f,n.byteLength)));return{ref:null,topic:p,event:g,payload:v}}}class Bf{constructor(n,s){this.callback=n,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=n,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var be;(function(i){i.abstime="abstime",i.bool="bool",i.date="date",i.daterange="daterange",i.float4="float4",i.float8="float8",i.int2="int2",i.int4="int4",i.int4range="int4range",i.int8="int8",i.int8range="int8range",i.json="json",i.jsonb="jsonb",i.money="money",i.numeric="numeric",i.oid="oid",i.reltime="reltime",i.text="text",i.time="time",i.timestamp="timestamp",i.timestamptz="timestamptz",i.timetz="timetz",i.tsrange="tsrange",i.tstzrange="tstzrange"})(be||(be={}));const sf=(i,n,s={})=>{var o;const l=(o=s.skipTypes)!==null&&o!==void 0?o:[];return Object.keys(n).reduce((u,f)=>(u[f]=vg(f,i,n,l),u),{})},vg=(i,n,s,o)=>{const l=n.find(p=>p.name===i),u=l?.type,f=s[i];return u&&!o.includes(u)?Vf(u,f):gl(f)},Vf=(i,n)=>{if(i.charAt(0)==="_"){const s=i.slice(1,i.length);return xg(n,s)}switch(i){case be.bool:return yg(n);case be.float4:case be.float8:case be.int2:case be.int4:case be.int8:case be.numeric:case be.oid:return wg(n);case be.json:case be.jsonb:return _g(n);case be.timestamp:return kg(n);case be.abstime:case be.date:case be.daterange:case be.int4range:case be.int8range:case be.money:case be.reltime:case be.text:case be.time:case be.timestamptz:case be.timetz:case be.tsrange:case be.tstzrange:return gl(n);default:return gl(n)}},gl=i=>i,yg=i=>{switch(i){case"t":return!0;case"f":return!1;default:return i}},wg=i=>{if(typeof i=="string"){const n=parseFloat(i);if(!Number.isNaN(n))return n}return i},_g=i=>{if(typeof i=="string")try{return JSON.parse(i)}catch(n){return console.log(`JSON parse error: ${n}`),i}return i},xg=(i,n)=>{if(typeof i!="string")return i;const s=i.length-1,o=i[s];if(i[0]==="{"&&o==="}"){let u;const f=i.slice(1,s);try{u=JSON.parse("["+f+"]")}catch{u=f?f.split(","):[]}return u.map(p=>Vf(n,p))}return i},kg=i=>typeof i=="string"?i.replace(" ","T"):i,Wf=i=>{let n=i;return n=n.replace(/^ws/i,"http"),n=n.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),n.replace(/\/+$/,"")+"/api/broadcast"};class nl{constructor(n,s,o={},l=pl){this.channel=n,this.event=s,this.payload=o,this.timeout=l,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(n){this.timeout=n,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(n){this.payload=Object.assign(Object.assign({},this.payload),n)}receive(n,s){var o;return this._hasReceived(n)&&s((o=this.receivedResp)===null||o===void 0?void 0:o.response),this.recHooks.push({status:n,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const n=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},n),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(n,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:n,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:n,response:s}){this.recHooks.filter(o=>o.status===n).forEach(o=>o.callback(s))}_hasReceived(n){return this.receivedResp&&this.receivedResp.status===n}}var of;(function(i){i.SYNC="sync",i.JOIN="join",i.LEAVE="leave"})(of||(of={}));class ks{constructor(n,s){this.channel=n,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const o=s?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(o.state,{},l=>{const{onJoin:u,onLeave:f,onSync:p}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ks.syncState(this.state,l,u,f),this.pendingDiffs.forEach(g=>{this.state=ks.syncDiff(this.state,g,u,f)}),this.pendingDiffs=[],p()}),this.channel._on(o.diff,{},l=>{const{onJoin:u,onLeave:f,onSync:p}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(l):(this.state=ks.syncDiff(this.state,l,u,f),p())}),this.onJoin((l,u,f)=>{this.channel._trigger("presence",{event:"join",key:l,currentPresences:u,newPresences:f})}),this.onLeave((l,u,f)=>{this.channel._trigger("presence",{event:"leave",key:l,currentPresences:u,leftPresences:f})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(n,s,o,l){const u=this.cloneDeep(n),f=this.transformState(s),p={},g={};return this.map(u,(v,y)=>{f[v]||(g[v]=y)}),this.map(f,(v,y)=>{const x=u[v];if(x){const _=y.map(A=>A.presence_ref),b=x.map(A=>A.presence_ref),R=y.filter(A=>b.indexOf(A.presence_ref)<0),P=x.filter(A=>_.indexOf(A.presence_ref)<0);R.length>0&&(p[v]=R),P.length>0&&(g[v]=P)}else p[v]=y}),this.syncDiff(u,{joins:p,leaves:g},o,l)}static syncDiff(n,s,o,l){const{joins:u,leaves:f}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return o||(o=()=>{}),l||(l=()=>{}),this.map(u,(p,g)=>{var v;const y=(v=n[p])!==null&&v!==void 0?v:[];if(n[p]=this.cloneDeep(g),y.length>0){const x=n[p].map(b=>b.presence_ref),_=y.filter(b=>x.indexOf(b.presence_ref)<0);n[p].unshift(..._)}o(p,y,g)}),this.map(f,(p,g)=>{let v=n[p];if(!v)return;const y=g.map(x=>x.presence_ref);v=v.filter(x=>y.indexOf(x.presence_ref)<0),n[p]=v,l(p,v,g),v.length===0&&delete n[p]}),n}static map(n,s){return Object.getOwnPropertyNames(n).map(o=>s(o,n[o]))}static transformState(n){return n=this.cloneDeep(n),Object.getOwnPropertyNames(n).reduce((s,o)=>{const l=n[o];return"metas"in l?s[o]=l.metas.map(u=>(u.presence_ref=u.phx_ref,delete u.phx_ref,delete u.phx_ref_prev,u)):s[o]=l,s},{})}static cloneDeep(n){return JSON.parse(JSON.stringify(n))}onJoin(n){this.caller.onJoin=n}onLeave(n){this.caller.onLeave=n}onSync(n){this.caller.onSync=n}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var af;(function(i){i.ALL="*",i.INSERT="INSERT",i.UPDATE="UPDATE",i.DELETE="DELETE"})(af||(af={}));var Ss;(function(i){i.BROADCAST="broadcast",i.PRESENCE="presence",i.POSTGRES_CHANGES="postgres_changes",i.SYSTEM="system"})(Ss||(Ss={}));var Kt;(function(i){i.SUBSCRIBED="SUBSCRIBED",i.TIMED_OUT="TIMED_OUT",i.CLOSED="CLOSED",i.CHANNEL_ERROR="CHANNEL_ERROR"})(Kt||(Kt={}));class Ol{constructor(n,s={config:{}},o){this.topic=n,this.params=s,this.socket=o,this.bindings={},this.state=ze.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=n.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new nl(this,Tt.join,this.params,this.timeout),this.rejoinTimer=new Bf(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ze.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ze.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=ze.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ze.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=ze.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Tt.reply,{},(l,u)=>{this._trigger(this._replyEventName(u),l)}),this.presence=new ks(this),this.broadcastEndpointURL=Wf(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(n,s=this.timeout){var o,l;if(this.socket.isConnected()||this.socket.connect(),this.state==ze.closed){const{config:{broadcast:u,presence:f,private:p}}=this.params,g=(l=(o=this.bindings.postgres_changes)===null||o===void 0?void 0:o.map(_=>_.filter))!==null&&l!==void 0?l:[],v=!!this.bindings[Ss.PRESENCE]&&this.bindings[Ss.PRESENCE].length>0,y={},x={broadcast:u,presence:Object.assign(Object.assign({},f),{enabled:v}),postgres_changes:g,private:p};this.socket.accessTokenValue&&(y.access_token=this.socket.accessTokenValue),this._onError(_=>n?.(Kt.CHANNEL_ERROR,_)),this._onClose(()=>n?.(Kt.CLOSED)),this.updateJoinPayload(Object.assign({config:x},y)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:_})=>{var b;if(this.socket.setAuth(),_===void 0){n?.(Kt.SUBSCRIBED);return}else{const R=this.bindings.postgres_changes,P=(b=R?.length)!==null&&b!==void 0?b:0,A=[];for(let B=0;B<P;B++){const U=R[B],{filter:{event:I,schema:q,table:W,filter:L}}=U,F=_&&_[B];if(F&&F.event===I&&F.schema===q&&F.table===W&&F.filter===L)A.push(Object.assign(Object.assign({},U),{id:F.id}));else{this.unsubscribe(),this.state=ze.errored,n?.(Kt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=A,n&&n(Kt.SUBSCRIBED);return}}).receive("error",_=>{this.state=ze.errored,n?.(Kt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(_).join(", ")||"error")))}).receive("timeout",()=>{n?.(Kt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(n,s={}){return await this.send({type:"presence",event:"track",payload:n},s.timeout||this.timeout)}async untrack(n={}){return await this.send({type:"presence",event:"untrack"},n)}on(n,s,o){return this.state===ze.joined&&n===Ss.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(n,s,o)}async send(n,s={}){var o,l;if(!this._canPush()&&n.type==="broadcast"){const{event:u,payload:f}=n,g={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:u,payload:f,private:this.private}]})};try{const v=await this._fetchWithTimeout(this.broadcastEndpointURL,g,(o=s.timeout)!==null&&o!==void 0?o:this.timeout);return await((l=v.body)===null||l===void 0?void 0:l.cancel()),v.ok?"ok":"error"}catch(v){return v.name==="AbortError"?"timed out":"error"}}else return new Promise(u=>{var f,p,g;const v=this._push(n.type,n,s.timeout||this.timeout);n.type==="broadcast"&&!(!((g=(p=(f=this.params)===null||f===void 0?void 0:f.config)===null||p===void 0?void 0:p.broadcast)===null||g===void 0)&&g.ack)&&u("ok"),v.receive("ok",()=>u("ok")),v.receive("error",()=>u("error")),v.receive("timeout",()=>u("timed out"))})}updateJoinPayload(n){this.joinPush.updatePayload(n)}unsubscribe(n=this.timeout){this.state=ze.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Tt.close,"leave",this._joinRef())};this.joinPush.destroy();let o=null;return new Promise(l=>{o=new nl(this,Tt.leave,{},n),o.receive("ok",()=>{s(),l("ok")}).receive("timeout",()=>{s(),l("timed out")}).receive("error",()=>{l("error")}),o.send(),this._canPush()||o.trigger("ok",{})}).finally(()=>{o?.destroy()})}teardown(){this.pushBuffer.forEach(n=>n.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ze.closed,this.bindings={}}async _fetchWithTimeout(n,s,o){const l=new AbortController,u=setTimeout(()=>l.abort(),o),f=await this.socket.fetch(n,Object.assign(Object.assign({},s),{signal:l.signal}));return clearTimeout(u),f}_push(n,s,o=this.timeout){if(!this.joinedOnce)throw`tried to push '${n}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let l=new nl(this,n,s,o);return this._canPush()?l.send():this._addToPushBuffer(l),l}_addToPushBuffer(n){if(n.startTimeout(),this.pushBuffer.push(n),this.pushBuffer.length>mg){const s=this.pushBuffer.shift();s&&(s.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${s.event}`,s.payload))}}_onMessage(n,s,o){return s}_isMember(n){return this.topic===n}_joinRef(){return this.joinPush.ref}_trigger(n,s,o){var l,u;const f=n.toLocaleLowerCase(),{close:p,error:g,leave:v,join:y}=Tt;if(o&&[p,g,v,y].indexOf(f)>=0&&o!==this._joinRef())return;let _=this._onMessage(f,s,o);if(s&&!_)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(f)?(l=this.bindings.postgres_changes)===null||l===void 0||l.filter(b=>{var R,P,A;return((R=b.filter)===null||R===void 0?void 0:R.event)==="*"||((A=(P=b.filter)===null||P===void 0?void 0:P.event)===null||A===void 0?void 0:A.toLocaleLowerCase())===f}).map(b=>b.callback(_,o)):(u=this.bindings[f])===null||u===void 0||u.filter(b=>{var R,P,A,B,U,I;if(["broadcast","presence","postgres_changes"].includes(f))if("id"in b){const q=b.id,W=(R=b.filter)===null||R===void 0?void 0:R.event;return q&&((P=s.ids)===null||P===void 0?void 0:P.includes(q))&&(W==="*"||W?.toLocaleLowerCase()===((A=s.data)===null||A===void 0?void 0:A.type.toLocaleLowerCase()))}else{const q=(U=(B=b?.filter)===null||B===void 0?void 0:B.event)===null||U===void 0?void 0:U.toLocaleLowerCase();return q==="*"||q===((I=s?.event)===null||I===void 0?void 0:I.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===f}).map(b=>{if(typeof _=="object"&&"ids"in _){const R=_.data,{schema:P,table:A,commit_timestamp:B,type:U,errors:I}=R;_=Object.assign(Object.assign({},{schema:P,table:A,commit_timestamp:B,eventType:U,new:{},old:{},errors:I}),this._getPayloadRecords(R))}b.callback(_,o)})}_isClosed(){return this.state===ze.closed}_isJoined(){return this.state===ze.joined}_isJoining(){return this.state===ze.joining}_isLeaving(){return this.state===ze.leaving}_replyEventName(n){return`chan_reply_${n}`}_on(n,s,o){const l=n.toLocaleLowerCase(),u={type:l,filter:s,callback:o};return this.bindings[l]?this.bindings[l].push(u):this.bindings[l]=[u],this}_off(n,s){const o=n.toLocaleLowerCase();return this.bindings[o]&&(this.bindings[o]=this.bindings[o].filter(l=>{var u;return!(((u=l.type)===null||u===void 0?void 0:u.toLocaleLowerCase())===o&&Ol.isEqual(l.filter,s))})),this}static isEqual(n,s){if(Object.keys(n).length!==Object.keys(s).length)return!1;for(const o in n)if(n[o]!==s[o])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(n){this._on(Tt.close,{},n)}_onError(n){this._on(Tt.error,{},s=>n(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(n=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ze.joining,this.joinPush.resend(n))}_getPayloadRecords(n){const s={new:{},old:{}};return(n.type==="INSERT"||n.type==="UPDATE")&&(s.new=sf(n.columns,n.record)),(n.type==="UPDATE"||n.type==="DELETE")&&(s.old=sf(n.columns,n.old_record)),s}}const lf=()=>{},Di={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Sg=[1e3,2e3,5e3,1e4],bg=1e4,jg=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Eg{constructor(n,s){var o;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=pl,this.transport=null,this.heartbeatIntervalMs=Di.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=lf,this.ref=0,this.reconnectTimer=null,this.logger=lf,this.conn=null,this.sendBuffer=[],this.serializer=new gg,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=l=>{let u;return l?u=l:typeof fetch>"u"?u=(...f)=>Ar(async()=>{const{default:p}=await Promise.resolve().then(()=>Or);return{default:p}},void 0).then(({default:p})=>p(...f)).catch(p=>{throw new Error(`Failed to load @supabase/node-fetch: ${p.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):u=fetch,(...f)=>u(...f)},!(!((o=s?.params)===null||o===void 0)&&o.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=s.params.apikey,this.endPoint=`${n}/${ml.websocket}`,this.httpEndpoint=Wf(n),this._initializeOptions(s),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(s?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=cg.createWebSocket(this.endpointURL())}catch(n){this._setConnectionState("disconnected");const s=n.message;throw s.includes("Node.js")?new Error(`${s}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${s}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:hg}))}disconnect(n,s){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const o=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(o),this._setConnectionState("disconnected")},n?this.conn.close(n,s??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(n){const s=await n.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const n=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),n}log(n,s,o){this.logger(n,s,o)}connectionState(){switch(this.conn&&this.conn.readyState){case xs.connecting:return In.Connecting;case xs.open:return In.Open;case xs.closing:return In.Closing;default:return In.Closed}}isConnected(){return this.connectionState()===In.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(n,s={config:{}}){const o=`realtime:${n}`,l=this.getChannels().find(u=>u.topic===o);if(l)return l;{const u=new Ol(`realtime:${n}`,s,this);return this.channels.push(u),u}}push(n){const{topic:s,event:o,payload:l,ref:u}=n,f=()=>{this.encode(n,p=>{var g;(g=this.conn)===null||g===void 0||g.send(p)})};this.log("push",`${s} ${o} (${u})`,l),this.isConnected()?f():this.sendBuffer.push(f)}async setAuth(n=null){this._authPromise=this._performAuth(n);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var n;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(n=this.conn)===null||n===void 0||n.close(pg,"heartbeat timeout"),setTimeout(()=>{var s;this.isConnected()||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout()},Di.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(n){this.heartbeatCallback=n}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(n=>n()),this.sendBuffer=[])}_makeRef(){let n=this.ref+1;return n===this.ref?this.ref=0:this.ref=n,this.ref.toString()}_leaveOpenTopic(n){let s=this.channels.find(o=>o.topic===n&&(o._isJoined()||o._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${n}"`),s.unsubscribe())}_remove(n){this.channels=this.channels.filter(s=>s.topic!==n.topic)}_onConnMessage(n){this.decode(n.data,s=>{s.topic==="phoenix"&&s.event==="phx_reply"&&this.heartbeatCallback(s.payload.status==="ok"?"ok":"error"),s.ref&&s.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:o,event:l,payload:u,ref:f}=s,p=f?`(${f})`:"",g=u.status||"";this.log("receive",`${g} ${o} ${l} ${p}`.trim(),u),this.channels.filter(v=>v._isMember(o)).forEach(v=>v._trigger(l,u,f)),this._triggerStateCallbacks("message",s)})}_clearTimer(n){var s;n==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):n==="reconnect"&&((s=this.reconnectTimer)===null||s===void 0||s.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=n=>this._onConnError(n),this.conn.onmessage=n=>this._onConnMessage(n),this.conn.onclose=n=>this._onConnClose(n))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(n=>n.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const n=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(n),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(n){var s;this._setConnectionState("disconnected"),this.log("transport","close",n),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout(),this._triggerStateCallbacks("close",n)}_onConnError(n){this._setConnectionState("disconnected"),this.log("transport",`${n}`),this._triggerChanError(),this._triggerStateCallbacks("error",n)}_triggerChanError(){this.channels.forEach(n=>n._trigger(Tt.error))}_appendParams(n,s){if(Object.keys(s).length===0)return n;const o=n.match(/\?/)?"&":"?",l=new URLSearchParams(s);return`${n}${o}${l}`}_workerObjectUrl(n){let s;if(n)s=n;else{const o=new Blob([jg],{type:"application/javascript"});s=URL.createObjectURL(o)}return s}_setConnectionState(n,s=!1){this._connectionState=n,n==="connecting"?this._wasManualDisconnect=!1:n==="disconnecting"&&(this._wasManualDisconnect=s)}async _performAuth(n=null){let s;n?s=n:this.accessToken?s=await this.accessToken():s=this.accessTokenValue,this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(o=>{const l={access_token:s,version:fg};s&&o.updateJoinPayload(l),o.joinedOnce&&o._isJoined()&&o._push(Tt.access_token,{access_token:s})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(n="general"){this.setAuth().catch(s=>{this.log("error",`error setting auth in ${n}`,s)})}_triggerStateCallbacks(n,s){try{this.stateChangeCallbacks[n].forEach(o=>{try{o(s)}catch(l){this.log("error",`error in ${n} callback`,l)}})}catch(o){this.log("error",`error triggering ${n} callbacks`,o)}}_setupReconnectionTimer(){this.reconnectTimer=new Bf(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Di.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(n){var s,o,l,u,f,p,g,v;if(this.transport=(s=n?.transport)!==null&&s!==void 0?s:null,this.timeout=(o=n?.timeout)!==null&&o!==void 0?o:pl,this.heartbeatIntervalMs=(l=n?.heartbeatIntervalMs)!==null&&l!==void 0?l:Di.HEARTBEAT_INTERVAL,this.worker=(u=n?.worker)!==null&&u!==void 0?u:!1,this.accessToken=(f=n?.accessToken)!==null&&f!==void 0?f:null,n?.params&&(this.params=n.params),n?.logger&&(this.logger=n.logger),(n?.logLevel||n?.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=n?.reconnectAfterMs)!==null&&p!==void 0?p:(y=>Sg[y-1]||bg),this.encode=(g=n?.encode)!==null&&g!==void 0?g:((y,x)=>x(JSON.stringify(y))),this.decode=(v=n?.decode)!==null&&v!==void 0?v:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=n?.workerUrl}}}class Ll extends Error{constructor(n){super(n),this.__isStorageError=!0,this.name="StorageError"}}function Be(i){return typeof i=="object"&&i!==null&&"__isStorageError"in i}class Cg extends Ll{constructor(n,s,o){super(n),this.name="StorageApiError",this.status=s,this.statusCode=o}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class vl extends Ll{constructor(n,s){super(n),this.name="StorageUnknownError",this.originalError=s}}var Ng=function(i,n,s,o){function l(u){return u instanceof s?u:new s(function(f){f(u)})}return new(s||(s=Promise))(function(u,f){function p(y){try{v(o.next(y))}catch(x){f(x)}}function g(y){try{v(o.throw(y))}catch(x){f(x)}}function v(y){y.done?u(y.value):l(y.value).then(p,g)}v((o=o.apply(i,n||[])).next())})};const Hf=i=>{let n;return i?n=i:typeof fetch>"u"?n=(...s)=>Ar(async()=>{const{default:o}=await Promise.resolve().then(()=>Or);return{default:o}},void 0).then(({default:o})=>o(...s)):n=fetch,(...s)=>n(...s)},Pg=()=>Ng(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ar(()=>Promise.resolve().then(()=>Or),void 0)).Response:Response}),yl=i=>{if(Array.isArray(i))return i.map(s=>yl(s));if(typeof i=="function"||i!==Object(i))return i;const n={};return Object.entries(i).forEach(([s,o])=>{const l=s.replace(/([-_][a-z])/gi,u=>u.toUpperCase().replace(/[-_]/g,""));n[l]=yl(o)}),n},Tg=i=>{if(typeof i!="object"||i===null)return!1;const n=Object.getPrototypeOf(i);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)};var $n=function(i,n,s,o){function l(u){return u instanceof s?u:new s(function(f){f(u)})}return new(s||(s=Promise))(function(u,f){function p(y){try{v(o.next(y))}catch(x){f(x)}}function g(y){try{v(o.throw(y))}catch(x){f(x)}}function v(y){y.done?u(y.value):l(y.value).then(p,g)}v((o=o.apply(i,n||[])).next())})};const rl=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),Rg=(i,n,s)=>$n(void 0,void 0,void 0,function*(){const o=yield Pg();i instanceof o&&!s?.noResolveJson?i.json().then(l=>{const u=i.status||500,f=l?.statusCode||u+"";n(new Cg(rl(l),u,f))}).catch(l=>{n(new vl(rl(l),l))}):n(new vl(rl(i),i))}),Ag=(i,n,s,o)=>{const l={method:i,headers:n?.headers||{}};return i==="GET"||!o?l:(Tg(o)?(l.headers=Object.assign({"Content-Type":"application/json"},n?.headers),l.body=JSON.stringify(o)):l.body=o,n?.duplex&&(l.duplex=n.duplex),Object.assign(Object.assign({},l),s))};function js(i,n,s,o,l,u){return $n(this,void 0,void 0,function*(){return new Promise((f,p)=>{i(s,Ag(n,o,l,u)).then(g=>{if(!g.ok)throw g;return o?.noResolveJson?g:g.json()}).then(g=>f(g)).catch(g=>Rg(g,p,o))})})}function Hi(i,n,s,o){return $n(this,void 0,void 0,function*(){return js(i,"GET",n,s,o)})}function Dt(i,n,s,o,l){return $n(this,void 0,void 0,function*(){return js(i,"POST",n,o,l,s)})}function wl(i,n,s,o,l){return $n(this,void 0,void 0,function*(){return js(i,"PUT",n,o,l,s)})}function Og(i,n,s,o){return $n(this,void 0,void 0,function*(){return js(i,"HEAD",n,Object.assign(Object.assign({},s),{noResolveJson:!0}),o)})}function qf(i,n,s,o,l){return $n(this,void 0,void 0,function*(){return js(i,"DELETE",n,o,l,s)})}var tt=function(i,n,s,o){function l(u){return u instanceof s?u:new s(function(f){f(u)})}return new(s||(s=Promise))(function(u,f){function p(y){try{v(o.next(y))}catch(x){f(x)}}function g(y){try{v(o.throw(y))}catch(x){f(x)}}function v(y){y.done?u(y.value):l(y.value).then(p,g)}v((o=o.apply(i,n||[])).next())})};const Lg={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},uf={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Ig{constructor(n,s={},o,l){this.url=n,this.headers=s,this.bucketId=o,this.fetch=Hf(l)}uploadOrUpdate(n,s,o,l){return tt(this,void 0,void 0,function*(){try{let u;const f=Object.assign(Object.assign({},uf),l);let p=Object.assign(Object.assign({},this.headers),n==="POST"&&{"x-upsert":String(f.upsert)});const g=f.metadata;typeof Blob<"u"&&o instanceof Blob?(u=new FormData,u.append("cacheControl",f.cacheControl),g&&u.append("metadata",this.encodeMetadata(g)),u.append("",o)):typeof FormData<"u"&&o instanceof FormData?(u=o,u.append("cacheControl",f.cacheControl),g&&u.append("metadata",this.encodeMetadata(g))):(u=o,p["cache-control"]=`max-age=${f.cacheControl}`,p["content-type"]=f.contentType,g&&(p["x-metadata"]=this.toBase64(this.encodeMetadata(g)))),l?.headers&&(p=Object.assign(Object.assign({},p),l.headers));const v=this._removeEmptyFolders(s),y=this._getFinalPath(v),x=yield(n=="PUT"?wl:Dt)(this.fetch,`${this.url}/object/${y}`,u,Object.assign({headers:p},f?.duplex?{duplex:f.duplex}:{}));return{data:{path:v,id:x.Id,fullPath:x.Key},error:null}}catch(u){if(Be(u))return{data:null,error:u};throw u}})}upload(n,s,o){return tt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",n,s,o)})}uploadToSignedUrl(n,s,o,l){return tt(this,void 0,void 0,function*(){const u=this._removeEmptyFolders(n),f=this._getFinalPath(u),p=new URL(this.url+`/object/upload/sign/${f}`);p.searchParams.set("token",s);try{let g;const v=Object.assign({upsert:uf.upsert},l),y=Object.assign(Object.assign({},this.headers),{"x-upsert":String(v.upsert)});typeof Blob<"u"&&o instanceof Blob?(g=new FormData,g.append("cacheControl",v.cacheControl),g.append("",o)):typeof FormData<"u"&&o instanceof FormData?(g=o,g.append("cacheControl",v.cacheControl)):(g=o,y["cache-control"]=`max-age=${v.cacheControl}`,y["content-type"]=v.contentType);const x=yield wl(this.fetch,p.toString(),g,{headers:y});return{data:{path:u,fullPath:x.Key},error:null}}catch(g){if(Be(g))return{data:null,error:g};throw g}})}createSignedUploadUrl(n,s){return tt(this,void 0,void 0,function*(){try{let o=this._getFinalPath(n);const l=Object.assign({},this.headers);s?.upsert&&(l["x-upsert"]="true");const u=yield Dt(this.fetch,`${this.url}/object/upload/sign/${o}`,{},{headers:l}),f=new URL(this.url+u.url),p=f.searchParams.get("token");if(!p)throw new Ll("No token returned by API");return{data:{signedUrl:f.toString(),path:n,token:p},error:null}}catch(o){if(Be(o))return{data:null,error:o};throw o}})}update(n,s,o){return tt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",n,s,o)})}move(n,s,o){return tt(this,void 0,void 0,function*(){try{return{data:yield Dt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:n,destinationKey:s,destinationBucket:o?.destinationBucket},{headers:this.headers}),error:null}}catch(l){if(Be(l))return{data:null,error:l};throw l}})}copy(n,s,o){return tt(this,void 0,void 0,function*(){try{return{data:{path:(yield Dt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:n,destinationKey:s,destinationBucket:o?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(l){if(Be(l))return{data:null,error:l};throw l}})}createSignedUrl(n,s,o){return tt(this,void 0,void 0,function*(){try{let l=this._getFinalPath(n),u=yield Dt(this.fetch,`${this.url}/object/sign/${l}`,Object.assign({expiresIn:s},o?.transform?{transform:o.transform}:{}),{headers:this.headers});const f=o?.download?`&download=${o.download===!0?"":o.download}`:"";return u={signedUrl:encodeURI(`${this.url}${u.signedURL}${f}`)},{data:u,error:null}}catch(l){if(Be(l))return{data:null,error:l};throw l}})}createSignedUrls(n,s,o){return tt(this,void 0,void 0,function*(){try{const l=yield Dt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:n},{headers:this.headers}),u=o?.download?`&download=${o.download===!0?"":o.download}`:"";return{data:l.map(f=>Object.assign(Object.assign({},f),{signedUrl:f.signedURL?encodeURI(`${this.url}${f.signedURL}${u}`):null})),error:null}}catch(l){if(Be(l))return{data:null,error:l};throw l}})}download(n,s){return tt(this,void 0,void 0,function*(){const l=typeof s?.transform<"u"?"render/image/authenticated":"object",u=this.transformOptsToQueryString(s?.transform||{}),f=u?`?${u}`:"";try{const p=this._getFinalPath(n);return{data:yield(yield Hi(this.fetch,`${this.url}/${l}/${p}${f}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(p){if(Be(p))return{data:null,error:p};throw p}})}info(n){return tt(this,void 0,void 0,function*(){const s=this._getFinalPath(n);try{const o=yield Hi(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:yl(o),error:null}}catch(o){if(Be(o))return{data:null,error:o};throw o}})}exists(n){return tt(this,void 0,void 0,function*(){const s=this._getFinalPath(n);try{return yield Og(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(o){if(Be(o)&&o instanceof vl){const l=o.originalError;if([400,404].includes(l?.status))return{data:!1,error:o}}throw o}})}getPublicUrl(n,s){const o=this._getFinalPath(n),l=[],u=s?.download?`download=${s.download===!0?"":s.download}`:"";u!==""&&l.push(u);const p=typeof s?.transform<"u"?"render/image":"object",g=this.transformOptsToQueryString(s?.transform||{});g!==""&&l.push(g);let v=l.join("&");return v!==""&&(v=`?${v}`),{data:{publicUrl:encodeURI(`${this.url}/${p}/public/${o}${v}`)}}}remove(n){return tt(this,void 0,void 0,function*(){try{return{data:yield qf(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:n},{headers:this.headers}),error:null}}catch(s){if(Be(s))return{data:null,error:s};throw s}})}list(n,s,o){return tt(this,void 0,void 0,function*(){try{const l=Object.assign(Object.assign(Object.assign({},Lg),s),{prefix:n||""});return{data:yield Dt(this.fetch,`${this.url}/object/list/${this.bucketId}`,l,{headers:this.headers},o),error:null}}catch(l){if(Be(l))return{data:null,error:l};throw l}})}listV2(n,s){return tt(this,void 0,void 0,function*(){try{const o=Object.assign({},n);return{data:yield Dt(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,o,{headers:this.headers},s),error:null}}catch(o){if(Be(o))return{data:null,error:o};throw o}})}encodeMetadata(n){return JSON.stringify(n)}toBase64(n){return typeof Buffer<"u"?Buffer.from(n).toString("base64"):btoa(n)}_getFinalPath(n){return`${this.bucketId}/${n.replace(/^\/+/,"")}`}_removeEmptyFolders(n){return n.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(n){const s=[];return n.width&&s.push(`width=${n.width}`),n.height&&s.push(`height=${n.height}`),n.resize&&s.push(`resize=${n.resize}`),n.format&&s.push(`format=${n.format}`),n.quality&&s.push(`quality=${n.quality}`),s.join("&")}}const Dg="2.11.0",$g={"X-Client-Info":`storage-js/${Dg}`};var mr=function(i,n,s,o){function l(u){return u instanceof s?u:new s(function(f){f(u)})}return new(s||(s=Promise))(function(u,f){function p(y){try{v(o.next(y))}catch(x){f(x)}}function g(y){try{v(o.throw(y))}catch(x){f(x)}}function v(y){y.done?u(y.value):l(y.value).then(p,g)}v((o=o.apply(i,n||[])).next())})};class Mg{constructor(n,s={},o,l){const u=new URL(n);l?.useNewHostname&&/supabase\.(co|in|red)$/.test(u.hostname)&&!u.hostname.includes("storage.supabase.")&&(u.hostname=u.hostname.replace("supabase.","storage.supabase.")),this.url=u.href,this.headers=Object.assign(Object.assign({},$g),s),this.fetch=Hf(o)}listBuckets(){return mr(this,void 0,void 0,function*(){try{return{data:yield Hi(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(n){if(Be(n))return{data:null,error:n};throw n}})}getBucket(n){return mr(this,void 0,void 0,function*(){try{return{data:yield Hi(this.fetch,`${this.url}/bucket/${n}`,{headers:this.headers}),error:null}}catch(s){if(Be(s))return{data:null,error:s};throw s}})}createBucket(n,s={public:!1}){return mr(this,void 0,void 0,function*(){try{return{data:yield Dt(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(Be(o))return{data:null,error:o};throw o}})}updateBucket(n,s){return mr(this,void 0,void 0,function*(){try{return{data:yield wl(this.fetch,`${this.url}/bucket/${n}`,{id:n,name:n,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(Be(o))return{data:null,error:o};throw o}})}emptyBucket(n){return mr(this,void 0,void 0,function*(){try{return{data:yield Dt(this.fetch,`${this.url}/bucket/${n}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(Be(s))return{data:null,error:s};throw s}})}deleteBucket(n){return mr(this,void 0,void 0,function*(){try{return{data:yield qf(this.fetch,`${this.url}/bucket/${n}`,{},{headers:this.headers}),error:null}}catch(s){if(Be(s))return{data:null,error:s};throw s}})}}class Ug extends Mg{constructor(n,s={},o,l){super(n,s,o,l)}from(n){return new Ig(this.url,this.headers,n,this.fetch)}}const Fg="2.56.0";let _s="";typeof Deno<"u"?_s="deno":typeof document<"u"?_s="web":typeof navigator<"u"&&navigator.product==="ReactNative"?_s="react-native":_s="node";const zg={"X-Client-Info":`supabase-js-${_s}/${Fg}`},Bg={headers:zg},Vg={schema:"public"},Wg={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Hg={};var qg=function(i,n,s,o){function l(u){return u instanceof s?u:new s(function(f){f(u)})}return new(s||(s=Promise))(function(u,f){function p(y){try{v(o.next(y))}catch(x){f(x)}}function g(y){try{v(o.throw(y))}catch(x){f(x)}}function v(y){y.done?u(y.value):l(y.value).then(p,g)}v((o=o.apply(i,n||[])).next())})};const Kg=i=>{let n;return i?n=i:typeof fetch>"u"?n=Df:n=fetch,(...s)=>n(...s)},Gg=()=>typeof Headers>"u"?$f:Headers,Qg=(i,n,s)=>{const o=Kg(s),l=Gg();return(u,f)=>qg(void 0,void 0,void 0,function*(){var p;const g=(p=yield n())!==null&&p!==void 0?p:i;let v=new l(f?.headers);return v.has("apikey")||v.set("apikey",i),v.has("Authorization")||v.set("Authorization",`Bearer ${g}`),o(u,Object.assign(Object.assign({},f),{headers:v}))})};var Jg=function(i,n,s,o){function l(u){return u instanceof s?u:new s(function(f){f(u)})}return new(s||(s=Promise))(function(u,f){function p(y){try{v(o.next(y))}catch(x){f(x)}}function g(y){try{v(o.throw(y))}catch(x){f(x)}}function v(y){y.done?u(y.value):l(y.value).then(p,g)}v((o=o.apply(i,n||[])).next())})};function Xg(i){return i.endsWith("/")?i:i+"/"}function Yg(i,n){var s,o;const{db:l,auth:u,realtime:f,global:p}=i,{db:g,auth:v,realtime:y,global:x}=n,_={db:Object.assign(Object.assign({},g),l),auth:Object.assign(Object.assign({},v),u),realtime:Object.assign(Object.assign({},y),f),storage:{},global:Object.assign(Object.assign(Object.assign({},x),p),{headers:Object.assign(Object.assign({},(s=x?.headers)!==null&&s!==void 0?s:{}),(o=p?.headers)!==null&&o!==void 0?o:{})}),accessToken:()=>Jg(this,void 0,void 0,function*(){return""})};return i.accessToken?_.accessToken=i.accessToken:delete _.accessToken,_}const Kf="2.71.1",br=30*1e3,_l=3,sl=_l*br,Zg="http://localhost:9999",ev="supabase.auth.token",tv={"X-Client-Info":`gotrue-js/${Kf}`},xl="X-Supabase-Api-Version",Gf={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},nv=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,rv=600*1e3;class Il extends Error{constructor(n,s,o){super(n),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=o}}function de(i){return typeof i=="object"&&i!==null&&"__isAuthError"in i}class sv extends Il{constructor(n,s,o){super(n,s,o),this.name="AuthApiError",this.status=s,this.code=o}}function iv(i){return de(i)&&i.name==="AuthApiError"}class Qf extends Il{constructor(n,s){super(n),this.name="AuthUnknownError",this.originalError=s}}class yn extends Il{constructor(n,s,o,l){super(n,o,l),this.name=s,this.status=o}}class mn extends yn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function ov(i){return de(i)&&i.name==="AuthSessionMissingError"}class $i extends yn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Mi extends yn{constructor(n){super(n,"AuthInvalidCredentialsError",400,void 0)}}class Ui extends yn{constructor(n,s=null){super(n,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function av(i){return de(i)&&i.name==="AuthImplicitGrantRedirectError"}class cf extends yn{constructor(n,s=null){super(n,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class kl extends yn{constructor(n,s){super(n,"AuthRetryableFetchError",s,void 0)}}function il(i){return de(i)&&i.name==="AuthRetryableFetchError"}class df extends yn{constructor(n,s,o){super(n,"AuthWeakPasswordError",s,"weak_password"),this.reasons=o}}class Sl extends yn{constructor(n){super(n,"AuthInvalidJwtError",400,"invalid_jwt")}}const qi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),ff=` 	
\r=`.split(""),lv=(()=>{const i=new Array(128);for(let n=0;n<i.length;n+=1)i[n]=-1;for(let n=0;n<ff.length;n+=1)i[ff[n].charCodeAt(0)]=-2;for(let n=0;n<qi.length;n+=1)i[qi[n].charCodeAt(0)]=n;return i})();function hf(i,n,s){if(i!==null)for(n.queue=n.queue<<8|i,n.queuedBits+=8;n.queuedBits>=6;){const o=n.queue>>n.queuedBits-6&63;s(qi[o]),n.queuedBits-=6}else if(n.queuedBits>0)for(n.queue=n.queue<<6-n.queuedBits,n.queuedBits=6;n.queuedBits>=6;){const o=n.queue>>n.queuedBits-6&63;s(qi[o]),n.queuedBits-=6}}function Jf(i,n,s){const o=lv[i];if(o>-1)for(n.queue=n.queue<<6|o,n.queuedBits+=6;n.queuedBits>=8;)s(n.queue>>n.queuedBits-8&255),n.queuedBits-=8;else{if(o===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(i)}"`)}}function pf(i){const n=[],s=f=>{n.push(String.fromCodePoint(f))},o={utf8seq:0,codepoint:0},l={queue:0,queuedBits:0},u=f=>{dv(f,o,s)};for(let f=0;f<i.length;f+=1)Jf(i.charCodeAt(f),l,u);return n.join("")}function uv(i,n){if(i<=127){n(i);return}else if(i<=2047){n(192|i>>6),n(128|i&63);return}else if(i<=65535){n(224|i>>12),n(128|i>>6&63),n(128|i&63);return}else if(i<=1114111){n(240|i>>18),n(128|i>>12&63),n(128|i>>6&63),n(128|i&63);return}throw new Error(`Unrecognized Unicode codepoint: ${i.toString(16)}`)}function cv(i,n){for(let s=0;s<i.length;s+=1){let o=i.charCodeAt(s);if(o>55295&&o<=56319){const l=(o-55296)*1024&65535;o=(i.charCodeAt(s+1)-56320&65535|l)+65536,s+=1}uv(o,n)}}function dv(i,n,s){if(n.utf8seq===0){if(i<=127){s(i);return}for(let o=1;o<6;o+=1)if((i>>7-o&1)===0){n.utf8seq=o;break}if(n.utf8seq===2)n.codepoint=i&31;else if(n.utf8seq===3)n.codepoint=i&15;else if(n.utf8seq===4)n.codepoint=i&7;else throw new Error("Invalid UTF-8 sequence");n.utf8seq-=1}else if(n.utf8seq>0){if(i<=127)throw new Error("Invalid UTF-8 sequence");n.codepoint=n.codepoint<<6|i&63,n.utf8seq-=1,n.utf8seq===0&&s(n.codepoint)}}function fv(i){const n=[],s={queue:0,queuedBits:0},o=l=>{n.push(l)};for(let l=0;l<i.length;l+=1)Jf(i.charCodeAt(l),s,o);return new Uint8Array(n)}function hv(i){const n=[];return cv(i,s=>n.push(s)),new Uint8Array(n)}function pv(i){const n=[],s={queue:0,queuedBits:0},o=l=>{n.push(l)};return i.forEach(l=>hf(l,s,o)),hf(null,s,o),n.join("")}function mv(i){return Math.round(Date.now()/1e3)+i}function gv(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(i){const n=Math.random()*16|0;return(i=="x"?n:n&3|8).toString(16)})}const Pt=()=>typeof window<"u"&&typeof document<"u",An={tested:!1,writable:!1},Xf=()=>{if(!Pt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(An.tested)return An.writable;const i=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(i,i),globalThis.localStorage.removeItem(i),An.tested=!0,An.writable=!0}catch{An.tested=!0,An.writable=!1}return An.writable};function vv(i){const n={},s=new URL(i);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((l,u)=>{n[u]=l})}catch{}return s.searchParams.forEach((o,l)=>{n[l]=o}),n}const Yf=i=>{let n;return i?n=i:typeof fetch>"u"?n=(...s)=>Ar(async()=>{const{default:o}=await Promise.resolve().then(()=>Or);return{default:o}},void 0).then(({default:o})=>o(...s)):n=fetch,(...s)=>n(...s)},yv=i=>typeof i=="object"&&i!==null&&"status"in i&&"ok"in i&&"json"in i&&typeof i.json=="function",jr=async(i,n,s)=>{await i.setItem(n,JSON.stringify(s))},On=async(i,n)=>{const s=await i.getItem(n);if(!s)return null;try{return JSON.parse(s)}catch{return s}},pn=async(i,n)=>{await i.removeItem(n)};class Yi{constructor(){this.promise=new Yi.promiseConstructor((n,s)=>{this.resolve=n,this.reject=s})}}Yi.promiseConstructor=Promise;function ol(i){const n=i.split(".");if(n.length!==3)throw new Sl("Invalid JWT structure");for(let o=0;o<n.length;o++)if(!nv.test(n[o]))throw new Sl("JWT not in base64url format");return{header:JSON.parse(pf(n[0])),payload:JSON.parse(pf(n[1])),signature:fv(n[2]),raw:{header:n[0],payload:n[1]}}}async function wv(i){return await new Promise(n=>{setTimeout(()=>n(null),i)})}function _v(i,n){return new Promise((o,l)=>{(async()=>{for(let u=0;u<1/0;u++)try{const f=await i(u);if(!n(u,null,f)){o(f);return}}catch(f){if(!n(u,f)){l(f);return}}})()})}function xv(i){return("0"+i.toString(16)).substr(-2)}function kv(){const n=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",o=s.length;let l="";for(let u=0;u<56;u++)l+=s.charAt(Math.floor(Math.random()*o));return l}return crypto.getRandomValues(n),Array.from(n,xv).join("")}async function Sv(i){const s=new TextEncoder().encode(i),o=await crypto.subtle.digest("SHA-256",s),l=new Uint8Array(o);return Array.from(l).map(u=>String.fromCharCode(u)).join("")}async function bv(i){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),i;const s=await Sv(i);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function gr(i,n,s=!1){const o=kv();let l=o;s&&(l+="/PASSWORD_RECOVERY"),await jr(i,`${n}-code-verifier`,l);const u=await bv(o);return[u,o===u?"plain":"s256"]}const jv=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Ev(i){const n=i.headers.get(xl);if(!n||!n.match(jv))return null;try{return new Date(`${n}T00:00:00.0Z`)}catch{return null}}function Cv(i){if(!i)throw new Error("Missing exp claim");const n=Math.floor(Date.now()/1e3);if(i<=n)throw new Error("JWT has expired")}function Nv(i){switch(i){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Pv=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function vr(i){if(!Pv.test(i))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function al(){const i={};return new Proxy(i,{get:(n,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const o=s.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(n,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(n,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function mf(i){return JSON.parse(JSON.stringify(i))}var Tv=function(i,n){var s={};for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&n.indexOf(o)<0&&(s[o]=i[o]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(i);l<o.length;l++)n.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(i,o[l])&&(s[o[l]]=i[o[l]]);return s};const Ln=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),Rv=[502,503,504];async function gf(i){var n;if(!yv(i))throw new kl(Ln(i),0);if(Rv.includes(i.status))throw new kl(Ln(i),i.status);let s;try{s=await i.json()}catch(u){throw new Qf(Ln(u),u)}let o;const l=Ev(i);if(l&&l.getTime()>=Gf["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?o=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(o=s.error_code),o){if(o==="weak_password")throw new df(Ln(s),i.status,((n=s.weak_password)===null||n===void 0?void 0:n.reasons)||[]);if(o==="session_not_found")throw new mn}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((u,f)=>u&&typeof f=="string",!0))throw new df(Ln(s),i.status,s.weak_password.reasons);throw new sv(Ln(s),i.status||500,o)}const Av=(i,n,s,o)=>{const l={method:i,headers:n?.headers||{}};return i==="GET"?l:(l.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},n?.headers),l.body=JSON.stringify(o),Object.assign(Object.assign({},l),s))};async function he(i,n,s,o){var l;const u=Object.assign({},o?.headers);u[xl]||(u[xl]=Gf["2024-01-01"].name),o?.jwt&&(u.Authorization=`Bearer ${o.jwt}`);const f=(l=o?.query)!==null&&l!==void 0?l:{};o?.redirectTo&&(f.redirect_to=o.redirectTo);const p=Object.keys(f).length?"?"+new URLSearchParams(f).toString():"",g=await Ov(i,n,s+p,{headers:u,noResolveJson:o?.noResolveJson},{},o?.body);return o?.xform?o?.xform(g):{data:Object.assign({},g),error:null}}async function Ov(i,n,s,o,l,u){const f=Av(n,o,l,u);let p;try{p=await i(s,Object.assign({},f))}catch(g){throw console.error(g),new kl(Ln(g),0)}if(p.ok||await gf(p),o?.noResolveJson)return p;try{return await p.json()}catch(g){await gf(g)}}function qt(i){var n;let s=null;$v(i)&&(s=Object.assign({},i),i.expires_at||(s.expires_at=mv(i.expires_in)));const o=(n=i.user)!==null&&n!==void 0?n:i;return{data:{session:s,user:o},error:null}}function vf(i){const n=qt(i);return!n.error&&i.weak_password&&typeof i.weak_password=="object"&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.message&&typeof i.weak_password.message=="string"&&i.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0)&&(n.data.weak_password=i.weak_password),n}function gn(i){var n;return{data:{user:(n=i.user)!==null&&n!==void 0?n:i},error:null}}function Lv(i){return{data:i,error:null}}function Iv(i){const{action_link:n,email_otp:s,hashed_token:o,redirect_to:l,verification_type:u}=i,f=Tv(i,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),p={action_link:n,email_otp:s,hashed_token:o,redirect_to:l,verification_type:u},g=Object.assign({},f);return{data:{properties:p,user:g},error:null}}function Dv(i){return i}function $v(i){return i.access_token&&i.refresh_token&&i.expires_in}const ll=["global","local","others"];var Mv=function(i,n){var s={};for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&n.indexOf(o)<0&&(s[o]=i[o]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(i);l<o.length;l++)n.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(i,o[l])&&(s[o[l]]=i[o[l]]);return s};class Uv{constructor({url:n="",headers:s={},fetch:o}){this.url=n,this.headers=s,this.fetch=Yf(o),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(n,s=ll[0]){if(ll.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ll.join(", ")}`);try{return await he(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:n,noResolveJson:!0}),{data:null,error:null}}catch(o){if(de(o))return{data:null,error:o};throw o}}async inviteUserByEmail(n,s={}){try{return await he(this.fetch,"POST",`${this.url}/invite`,{body:{email:n,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:gn})}catch(o){if(de(o))return{data:{user:null},error:o};throw o}}async generateLink(n){try{const{options:s}=n,o=Mv(n,["options"]),l=Object.assign(Object.assign({},o),s);return"newEmail"in o&&(l.new_email=o?.newEmail,delete l.newEmail),await he(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:l,headers:this.headers,xform:Iv,redirectTo:s?.redirectTo})}catch(s){if(de(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(n){try{return await he(this.fetch,"POST",`${this.url}/admin/users`,{body:n,headers:this.headers,xform:gn})}catch(s){if(de(s))return{data:{user:null},error:s};throw s}}async listUsers(n){var s,o,l,u,f,p,g;try{const v={nextPage:null,lastPage:0,total:0},y=await he(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(s=n?.page)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:"",per_page:(u=(l=n?.perPage)===null||l===void 0?void 0:l.toString())!==null&&u!==void 0?u:""},xform:Dv});if(y.error)throw y.error;const x=await y.json(),_=(f=y.headers.get("x-total-count"))!==null&&f!==void 0?f:0,b=(g=(p=y.headers.get("link"))===null||p===void 0?void 0:p.split(","))!==null&&g!==void 0?g:[];return b.length>0&&(b.forEach(R=>{const P=parseInt(R.split(";")[0].split("=")[1].substring(0,1)),A=JSON.parse(R.split(";")[1].split("=")[1]);v[`${A}Page`]=P}),v.total=parseInt(_)),{data:Object.assign(Object.assign({},x),v),error:null}}catch(v){if(de(v))return{data:{users:[]},error:v};throw v}}async getUserById(n){vr(n);try{return await he(this.fetch,"GET",`${this.url}/admin/users/${n}`,{headers:this.headers,xform:gn})}catch(s){if(de(s))return{data:{user:null},error:s};throw s}}async updateUserById(n,s){vr(n);try{return await he(this.fetch,"PUT",`${this.url}/admin/users/${n}`,{body:s,headers:this.headers,xform:gn})}catch(o){if(de(o))return{data:{user:null},error:o};throw o}}async deleteUser(n,s=!1){vr(n);try{return await he(this.fetch,"DELETE",`${this.url}/admin/users/${n}`,{headers:this.headers,body:{should_soft_delete:s},xform:gn})}catch(o){if(de(o))return{data:{user:null},error:o};throw o}}async _listFactors(n){vr(n.userId);try{const{data:s,error:o}=await he(this.fetch,"GET",`${this.url}/admin/users/${n.userId}/factors`,{headers:this.headers,xform:l=>({data:{factors:l},error:null})});return{data:s,error:o}}catch(s){if(de(s))return{data:null,error:s};throw s}}async _deleteFactor(n){vr(n.userId),vr(n.id);try{return{data:await he(this.fetch,"DELETE",`${this.url}/admin/users/${n.userId}/factors/${n.id}`,{headers:this.headers}),error:null}}catch(s){if(de(s))return{data:null,error:s};throw s}}}function yf(i={}){return{getItem:n=>i[n]||null,setItem:(n,s)=>{i[n]=s},removeItem:n=>{delete i[n]}}}function Fv(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const yr={debug:!!(globalThis&&Xf()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Zf extends Error{constructor(n){super(n),this.isAcquireTimeout=!0}}class zv extends Zf{}async function Bv(i,n,s){yr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",i,n);const o=new globalThis.AbortController;return n>0&&setTimeout(()=>{o.abort(),yr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",i)},n),await Promise.resolve().then(()=>globalThis.navigator.locks.request(i,n===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:o.signal},async l=>{if(l){yr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",i,l.name);try{return await s()}finally{yr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",i,l.name)}}else{if(n===0)throw yr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",i),new zv(`Acquiring an exclusive Navigator LockManager lock "${i}" immediately failed`);if(yr.debug)try{const u=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(u,null,"  "))}catch(u){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",u)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}Fv();const Vv={url:Zg,storageKey:ev,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:tv,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function wf(i,n,s){return await s()}const wr={};class bs{constructor(n){var s,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=bs.nextInstanceID,bs.nextInstanceID+=1,this.instanceID>0&&Pt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const l=Object.assign(Object.assign({},Vv),n);if(this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.persistSession=l.persistSession,this.storageKey=l.storageKey,this.autoRefreshToken=l.autoRefreshToken,this.admin=new Uv({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=Yf(l.fetch),this.lock=l.lock||wf,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,l.lock?this.lock=l.lock:Pt()&&(!((s=globalThis?.navigator)===null||s===void 0)&&s.locks)?this.lock=Bv:this.lock=wf,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(l.storage?this.storage=l.storage:Xf()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=yf(this.memoryStorage)),l.userStorage&&(this.userStorage=l.userStorage)):(this.memoryStorage={},this.storage=yf(this.memoryStorage)),Pt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(u){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",u)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",async u=>{this._debug("received broadcast notification from other tab or client",u),await this._notifyAllSubscribers(u.data.event,u.data.session,!1)})}this.initialize()}get jwks(){var n,s;return(s=(n=wr[this.storageKey])===null||n===void 0?void 0:n.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(n){wr[this.storageKey]=Object.assign(Object.assign({},wr[this.storageKey]),{jwks:n})}get jwks_cached_at(){var n,s;return(s=(n=wr[this.storageKey])===null||n===void 0?void 0:n.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(n){wr[this.storageKey]=Object.assign(Object.assign({},wr[this.storageKey]),{cachedAt:n})}_debug(...n){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Kf}) ${new Date().toISOString()}`,...n),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var n;try{const s=vv(window.location.href);let o="none";if(this._isImplicitGrantCallback(s)?o="implicit":await this._isPKCECallback(s)&&(o="pkce"),Pt()&&this.detectSessionInUrl&&o!=="none"){const{data:l,error:u}=await this._getSessionFromURL(s,o);if(u){if(this._debug("#_initialize()","error detecting session from URL",u),av(u)){const g=(n=u.details)===null||n===void 0?void 0:n.code;if(g==="identity_already_exists"||g==="identity_not_found"||g==="single_identity_not_deletable")return{error:u}}return await this._removeSession(),{error:u}}const{session:f,redirectType:p}=l;return this._debug("#_initialize()","detected session in URL",f,"redirect type",p),await this._saveSession(f),setTimeout(async()=>{p==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",f):await this._notifyAllSubscribers("SIGNED_IN",f)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return de(s)?{error:s}:{error:new Qf("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(n){var s,o,l;try{const u=await he(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(o=(s=n?.options)===null||s===void 0?void 0:s.data)!==null&&o!==void 0?o:{},gotrue_meta_security:{captcha_token:(l=n?.options)===null||l===void 0?void 0:l.captchaToken}},xform:qt}),{data:f,error:p}=u;if(p||!f)return{data:{user:null,session:null},error:p};const g=f.session,v=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",g)),{data:{user:v,session:g},error:null}}catch(u){if(de(u))return{data:{user:null,session:null},error:u};throw u}}async signUp(n){var s,o,l;try{let u;if("email"in n){const{email:y,password:x,options:_}=n;let b=null,R=null;this.flowType==="pkce"&&([b,R]=await gr(this.storage,this.storageKey)),u=await he(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:_?.emailRedirectTo,body:{email:y,password:x,data:(s=_?.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:_?.captchaToken},code_challenge:b,code_challenge_method:R},xform:qt})}else if("phone"in n){const{phone:y,password:x,options:_}=n;u=await he(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:y,password:x,data:(o=_?.data)!==null&&o!==void 0?o:{},channel:(l=_?.channel)!==null&&l!==void 0?l:"sms",gotrue_meta_security:{captcha_token:_?.captchaToken}},xform:qt})}else throw new Mi("You must provide either an email or phone number and a password");const{data:f,error:p}=u;if(p||!f)return{data:{user:null,session:null},error:p};const g=f.session,v=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",g)),{data:{user:v,session:g},error:null}}catch(u){if(de(u))return{data:{user:null,session:null},error:u};throw u}}async signInWithPassword(n){try{let s;if("email"in n){const{email:u,password:f,options:p}=n;s=await he(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:u,password:f,gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:vf})}else if("phone"in n){const{phone:u,password:f,options:p}=n;s=await he(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:u,password:f,gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:vf})}else throw new Mi("You must provide either an email or phone number and a password");const{data:o,error:l}=s;return l?{data:{user:null,session:null},error:l}:!o||!o.session||!o.user?{data:{user:null,session:null},error:new $i}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign({user:o.user,session:o.session},o.weak_password?{weakPassword:o.weak_password}:null),error:l})}catch(s){if(de(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(n){var s,o,l,u;return await this._handleProviderSignIn(n.provider,{redirectTo:(s=n.options)===null||s===void 0?void 0:s.redirectTo,scopes:(o=n.options)===null||o===void 0?void 0:o.scopes,queryParams:(l=n.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:(u=n.options)===null||u===void 0?void 0:u.skipBrowserRedirect})}async exchangeCodeForSession(n){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(n))}async signInWithWeb3(n){const{chain:s}=n;if(s==="solana")return await this.signInWithSolana(n);throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}async signInWithSolana(n){var s,o,l,u,f,p,g,v,y,x,_,b;let R,P;if("message"in n)R=n.message,P=n.signature;else{const{chain:A,wallet:B,statement:U,options:I}=n;let q;if(Pt())if(typeof B=="object")q=B;else{const L=window;if("solana"in L&&typeof L.solana=="object"&&("signIn"in L.solana&&typeof L.solana.signIn=="function"||"signMessage"in L.solana&&typeof L.solana.signMessage=="function"))q=L.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof B!="object"||!I?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");q=B}const W=new URL((s=I?.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in q&&q.signIn){const L=await q.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},I?.signInWithSolana),{version:"1",domain:W.host,uri:W.href}),U?{statement:U}:null));let F;if(Array.isArray(L)&&L[0]&&typeof L[0]=="object")F=L[0];else if(L&&typeof L=="object"&&"signedMessage"in L&&"signature"in L)F=L;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in F&&"signature"in F&&(typeof F.signedMessage=="string"||F.signedMessage instanceof Uint8Array)&&F.signature instanceof Uint8Array)R=typeof F.signedMessage=="string"?F.signedMessage:new TextDecoder().decode(F.signedMessage),P=F.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in q)||typeof q.signMessage!="function"||!("publicKey"in q)||typeof q!="object"||!q.publicKey||!("toBase58"in q.publicKey)||typeof q.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");R=[`${W.host} wants you to sign in with your Solana account:`,q.publicKey.toBase58(),...U?["",U,""]:[""],"Version: 1",`URI: ${W.href}`,`Issued At: ${(l=(o=I?.signInWithSolana)===null||o===void 0?void 0:o.issuedAt)!==null&&l!==void 0?l:new Date().toISOString()}`,...!((u=I?.signInWithSolana)===null||u===void 0)&&u.notBefore?[`Not Before: ${I.signInWithSolana.notBefore}`]:[],...!((f=I?.signInWithSolana)===null||f===void 0)&&f.expirationTime?[`Expiration Time: ${I.signInWithSolana.expirationTime}`]:[],...!((p=I?.signInWithSolana)===null||p===void 0)&&p.chainId?[`Chain ID: ${I.signInWithSolana.chainId}`]:[],...!((g=I?.signInWithSolana)===null||g===void 0)&&g.nonce?[`Nonce: ${I.signInWithSolana.nonce}`]:[],...!((v=I?.signInWithSolana)===null||v===void 0)&&v.requestId?[`Request ID: ${I.signInWithSolana.requestId}`]:[],...!((x=(y=I?.signInWithSolana)===null||y===void 0?void 0:y.resources)===null||x===void 0)&&x.length?["Resources",...I.signInWithSolana.resources.map(F=>`- ${F}`)]:[]].join(`
`);const L=await q.signMessage(new TextEncoder().encode(R),"utf8");if(!L||!(L instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");P=L}}try{const{data:A,error:B}=await he(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:R,signature:pv(P)},!((_=n.options)===null||_===void 0)&&_.captchaToken?{gotrue_meta_security:{captcha_token:(b=n.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:qt});if(B)throw B;return!A||!A.session||!A.user?{data:{user:null,session:null},error:new $i}:(A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("SIGNED_IN",A.session)),{data:Object.assign({},A),error:B})}catch(A){if(de(A))return{data:{user:null,session:null},error:A};throw A}}async _exchangeCodeForSession(n){const s=await On(this.storage,`${this.storageKey}-code-verifier`),[o,l]=(s??"").split("/");try{const{data:u,error:f}=await he(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:o},xform:qt});if(await pn(this.storage,`${this.storageKey}-code-verifier`),f)throw f;return!u||!u.session||!u.user?{data:{user:null,session:null,redirectType:null},error:new $i}:(u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),{data:Object.assign(Object.assign({},u),{redirectType:l??null}),error:f})}catch(u){if(de(u))return{data:{user:null,session:null,redirectType:null},error:u};throw u}}async signInWithIdToken(n){try{const{options:s,provider:o,token:l,access_token:u,nonce:f}=n,p=await he(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:o,id_token:l,access_token:u,nonce:f,gotrue_meta_security:{captcha_token:s?.captchaToken}},xform:qt}),{data:g,error:v}=p;return v?{data:{user:null,session:null},error:v}:!g||!g.session||!g.user?{data:{user:null,session:null},error:new $i}:(g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),{data:g,error:v})}catch(s){if(de(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(n){var s,o,l,u,f;try{if("email"in n){const{email:p,options:g}=n;let v=null,y=null;this.flowType==="pkce"&&([v,y]=await gr(this.storage,this.storageKey));const{error:x}=await he(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:p,data:(s=g?.data)!==null&&s!==void 0?s:{},create_user:(o=g?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:g?.captchaToken},code_challenge:v,code_challenge_method:y},redirectTo:g?.emailRedirectTo});return{data:{user:null,session:null},error:x}}if("phone"in n){const{phone:p,options:g}=n,{data:v,error:y}=await he(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:p,data:(l=g?.data)!==null&&l!==void 0?l:{},create_user:(u=g?.shouldCreateUser)!==null&&u!==void 0?u:!0,gotrue_meta_security:{captcha_token:g?.captchaToken},channel:(f=g?.channel)!==null&&f!==void 0?f:"sms"}});return{data:{user:null,session:null,messageId:v?.message_id},error:y}}throw new Mi("You must provide either an email or phone number.")}catch(p){if(de(p))return{data:{user:null,session:null},error:p};throw p}}async verifyOtp(n){var s,o;try{let l,u;"options"in n&&(l=(s=n.options)===null||s===void 0?void 0:s.redirectTo,u=(o=n.options)===null||o===void 0?void 0:o.captchaToken);const{data:f,error:p}=await he(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:u}}),redirectTo:l,xform:qt});if(p)throw p;if(!f)throw new Error("An error occurred on token verification.");const g=f.session,v=f.user;return g?.access_token&&(await this._saveSession(g),await this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",g)),{data:{user:v,session:g},error:null}}catch(l){if(de(l))return{data:{user:null,session:null},error:l};throw l}}async signInWithSSO(n){var s,o,l;try{let u=null,f=null;return this.flowType==="pkce"&&([u,f]=await gr(this.storage,this.storageKey)),await he(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(o=(s=n.options)===null||s===void 0?void 0:s.redirectTo)!==null&&o!==void 0?o:void 0}),!((l=n?.options)===null||l===void 0)&&l.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:u,code_challenge_method:f}),headers:this.headers,xform:Lv})}catch(u){if(de(u))return{data:null,error:u};throw u}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async n=>{const{data:{session:s},error:o}=n;if(o)throw o;if(!s)throw new mn;const{error:l}=await he(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:l}})}catch(n){if(de(n))return{data:{user:null,session:null},error:n};throw n}}async resend(n){try{const s=`${this.url}/resend`;if("email"in n){const{email:o,type:l,options:u}=n,{error:f}=await he(this.fetch,"POST",s,{headers:this.headers,body:{email:o,type:l,gotrue_meta_security:{captcha_token:u?.captchaToken}},redirectTo:u?.emailRedirectTo});return{data:{user:null,session:null},error:f}}else if("phone"in n){const{phone:o,type:l,options:u}=n,{data:f,error:p}=await he(this.fetch,"POST",s,{headers:this.headers,body:{phone:o,type:l,gotrue_meta_security:{captcha_token:u?.captchaToken}}});return{data:{user:null,session:null,messageId:f?.message_id},error:p}}throw new Mi("You must provide either an email or phone number and a type")}catch(s){if(de(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(n,s){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){const o=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),l=(async()=>(await o,await s()))();return this.pendingInLock.push((async()=>{try{await l}catch{}})()),l}return await this.lock(`lock:${this.storageKey}`,n,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const o=s();for(this.pendingInLock.push((async()=>{try{await o}catch{}})()),await o;this.pendingInLock.length;){const l=[...this.pendingInLock];await Promise.all(l),this.pendingInLock.splice(0,l.length)}return await o}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(n){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await n(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null;const s=await On(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?n=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!n)return{data:{session:null},error:null};const o=n.expires_at?n.expires_at*1e3-Date.now()<sl:!1;if(this._debug("#__loadSession()",`session has${o?"":" not"} expired`,"expires_at",n.expires_at),!o){if(this.userStorage){const f=await On(this.userStorage,this.storageKey+"-user");f?.user?n.user=f.user:n.user=al()}if(this.storage.isServer&&n.user){let f=this.suppressGetSessionWarning;n=new Proxy(n,{get:(g,v,y)=>(!f&&v==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),f=!0,this.suppressGetSessionWarning=!0),Reflect.get(g,v,y))})}return{data:{session:n},error:null}}const{session:l,error:u}=await this._callRefreshToken(n.refresh_token);return u?{data:{session:null},error:u}:{data:{session:l},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(n){return n?await this._getUser(n):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(n){try{return n?await he(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:gn}):await this._useSession(async s=>{var o,l,u;const{data:f,error:p}=s;if(p)throw p;return!(!((o=f.session)===null||o===void 0)&&o.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new mn}:await he(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(u=(l=f.session)===null||l===void 0?void 0:l.access_token)!==null&&u!==void 0?u:void 0,xform:gn})})}catch(s){if(de(s))return ov(s)&&(await this._removeSession(),await pn(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:s};throw s}}async updateUser(n,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(n,s))}async _updateUser(n,s={}){try{return await this._useSession(async o=>{const{data:l,error:u}=o;if(u)throw u;if(!l.session)throw new mn;const f=l.session;let p=null,g=null;this.flowType==="pkce"&&n.email!=null&&([p,g]=await gr(this.storage,this.storageKey));const{data:v,error:y}=await he(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s?.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:p,code_challenge_method:g}),jwt:f.access_token,xform:gn});if(y)throw y;return f.user=v.user,await this._saveSession(f),await this._notifyAllSubscribers("USER_UPDATED",f),{data:{user:f.user},error:null}})}catch(o){if(de(o))return{data:{user:null},error:o};throw o}}async setSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(n))}async _setSession(n){try{if(!n.access_token||!n.refresh_token)throw new mn;const s=Date.now()/1e3;let o=s,l=!0,u=null;const{payload:f}=ol(n.access_token);if(f.exp&&(o=f.exp,l=o<=s),l){const{session:p,error:g}=await this._callRefreshToken(n.refresh_token);if(g)return{data:{user:null,session:null},error:g};if(!p)return{data:{user:null,session:null},error:null};u=p}else{const{data:p,error:g}=await this._getUser(n.access_token);if(g)throw g;u={access_token:n.access_token,refresh_token:n.refresh_token,user:p.user,token_type:"bearer",expires_in:o-s,expires_at:o},await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)}return{data:{user:u.user,session:u},error:null}}catch(s){if(de(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(n))}async _refreshSession(n){try{return await this._useSession(async s=>{var o;if(!n){const{data:f,error:p}=s;if(p)throw p;n=(o=f.session)!==null&&o!==void 0?o:void 0}if(!n?.refresh_token)throw new mn;const{session:l,error:u}=await this._callRefreshToken(n.refresh_token);return u?{data:{user:null,session:null},error:u}:l?{data:{user:l.user,session:l},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(de(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(n,s){try{if(!Pt())throw new Ui("No browser detected.");if(n.error||n.error_description||n.error_code)throw new Ui(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new cf("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ui("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new cf("No code detected.");const{data:U,error:I}=await this._exchangeCodeForSession(n.code);if(I)throw I;const q=new URL(window.location.href);return q.searchParams.delete("code"),window.history.replaceState(window.history.state,"",q.toString()),{data:{session:U.session,redirectType:null},error:null}}const{provider_token:o,provider_refresh_token:l,access_token:u,refresh_token:f,expires_in:p,expires_at:g,token_type:v}=n;if(!u||!p||!f||!v)throw new Ui("No session defined in URL");const y=Math.round(Date.now()/1e3),x=parseInt(p);let _=y+x;g&&(_=parseInt(g));const b=_-y;b*1e3<=br&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${x}s`);const R=_-x;y-R>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",R,_,y):y-R<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",R,_,y);const{data:P,error:A}=await this._getUser(u);if(A)throw A;const B={provider_token:o,provider_refresh_token:l,access_token:u,expires_in:x,expires_at:_,refresh_token:f,token_type:v,user:P.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:B,redirectType:n.type},error:null}}catch(o){if(de(o))return{data:{session:null,redirectType:null},error:o};throw o}}_isImplicitGrantCallback(n){return!!(n.access_token||n.error_description)}async _isPKCECallback(n){const s=await On(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&s)}async signOut(n={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(n))}async _signOut({scope:n}={scope:"global"}){return await this._useSession(async s=>{var o;const{data:l,error:u}=s;if(u)return{error:u};const f=(o=l.session)===null||o===void 0?void 0:o.access_token;if(f){const{error:p}=await this.admin.signOut(f,n);if(p&&!(iv(p)&&(p.status===404||p.status===401||p.status===403)))return{error:p}}return n!=="others"&&(await this._removeSession(),await pn(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(n){const s=gv(),o={id:s,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,o),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:o}}}async _emitInitialSession(n){return await this._useSession(async s=>{var o,l;try{const{data:{session:u},error:f}=s;if(f)throw f;await((o=this.stateChangeEmitters.get(n))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",u)),this._debug("INITIAL_SESSION","callback id",n,"session",u)}catch(u){await((l=this.stateChangeEmitters.get(n))===null||l===void 0?void 0:l.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",n,"error",u),console.error(u)}})}async resetPasswordForEmail(n,s={}){let o=null,l=null;this.flowType==="pkce"&&([o,l]=await gr(this.storage,this.storageKey,!0));try{return await he(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:o,code_challenge_method:l,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(u){if(de(u))return{data:null,error:u};throw u}}async getUserIdentities(){var n;try{const{data:s,error:o}=await this.getUser();if(o)throw o;return{data:{identities:(n=s.user.identities)!==null&&n!==void 0?n:[]},error:null}}catch(s){if(de(s))return{data:null,error:s};throw s}}async linkIdentity(n){var s;try{const{data:o,error:l}=await this._useSession(async u=>{var f,p,g,v,y;const{data:x,error:_}=u;if(_)throw _;const b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(f=n.options)===null||f===void 0?void 0:f.redirectTo,scopes:(p=n.options)===null||p===void 0?void 0:p.scopes,queryParams:(g=n.options)===null||g===void 0?void 0:g.queryParams,skipBrowserRedirect:!0});return await he(this.fetch,"GET",b,{headers:this.headers,jwt:(y=(v=x.session)===null||v===void 0?void 0:v.access_token)!==null&&y!==void 0?y:void 0})});if(l)throw l;return Pt()&&!(!((s=n.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(o?.url),{data:{provider:n.provider,url:o?.url},error:null}}catch(o){if(de(o))return{data:{provider:n.provider,url:null},error:o};throw o}}async unlinkIdentity(n){try{return await this._useSession(async s=>{var o,l;const{data:u,error:f}=s;if(f)throw f;return await he(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(l=(o=u.session)===null||o===void 0?void 0:o.access_token)!==null&&l!==void 0?l:void 0})})}catch(s){if(de(s))return{data:null,error:s};throw s}}async _refreshAccessToken(n){const s=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(s,"begin");try{const o=Date.now();return await _v(async l=>(l>0&&await wv(200*Math.pow(2,l-1)),this._debug(s,"refreshing attempt",l),await he(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:qt})),(l,u)=>{const f=200*Math.pow(2,l);return u&&il(u)&&Date.now()+f-o<br})}catch(o){if(this._debug(s,"error",o),de(o))return{data:{session:null,user:null},error:o};throw o}finally{this._debug(s,"end")}}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}async _handleProviderSignIn(n,s){const o=await this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",s,"url",o),Pt()&&!s.skipBrowserRedirect&&window.location.assign(o),{data:{provider:n,url:o},error:null}}async _recoverAndRefresh(){var n,s;const o="#_recoverAndRefresh()";this._debug(o,"begin");try{const l=await On(this.storage,this.storageKey);if(l&&this.userStorage){let f=await On(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!f&&(f={user:l.user},await jr(this.userStorage,this.storageKey+"-user",f)),l.user=(n=f?.user)!==null&&n!==void 0?n:al()}else if(l&&!l.user&&!l.user){const f=await On(this.storage,this.storageKey+"-user");f&&f?.user?(l.user=f.user,await pn(this.storage,this.storageKey+"-user"),await jr(this.storage,this.storageKey,l)):l.user=al()}if(this._debug(o,"session from storage",l),!this._isValidSession(l)){this._debug(o,"session is not valid"),l!==null&&await this._removeSession();return}const u=((s=l.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<sl;if(this._debug(o,`session has${u?"":" not"} expired with margin of ${sl}s`),u){if(this.autoRefreshToken&&l.refresh_token){const{error:f}=await this._callRefreshToken(l.refresh_token);f&&(console.error(f),il(f)||(this._debug(o,"refresh failed with a non-retryable error, removing the session",f),await this._removeSession()))}}else if(l.user&&l.user.__isUserNotAvailableProxy===!0)try{const{data:f,error:p}=await this._getUser(l.access_token);!p&&f?.user?(l.user=f.user,await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)):this._debug(o,"could not get user data, skipping SIGNED_IN notification")}catch(f){console.error("Error getting user data:",f),this._debug(o,"error getting user data, skipping SIGNED_IN notification",f)}else await this._notifyAllSubscribers("SIGNED_IN",l)}catch(l){this._debug(o,"error",l),console.error(l);return}finally{this._debug(o,"end")}}async _callRefreshToken(n){var s,o;if(!n)throw new mn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const l=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(l,"begin");try{this.refreshingDeferred=new Yi;const{data:u,error:f}=await this._refreshAccessToken(n);if(f)throw f;if(!u.session)throw new mn;await this._saveSession(u.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",u.session);const p={session:u.session,error:null};return this.refreshingDeferred.resolve(p),p}catch(u){if(this._debug(l,"error",u),de(u)){const f={session:null,error:u};return il(u)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(f),f}throw(o=this.refreshingDeferred)===null||o===void 0||o.reject(u),u}finally{this.refreshingDeferred=null,this._debug(l,"end")}}async _notifyAllSubscribers(n,s,o=!0){const l=`#_notifyAllSubscribers(${n})`;this._debug(l,"begin",s,`broadcast = ${o}`);try{this.broadcastChannel&&o&&this.broadcastChannel.postMessage({event:n,session:s});const u=[],f=Array.from(this.stateChangeEmitters.values()).map(async p=>{try{await p.callback(n,s)}catch(g){u.push(g)}});if(await Promise.all(f),u.length>0){for(let p=0;p<u.length;p+=1)console.error(u[p]);throw u[0]}}finally{this._debug(l,"end")}}async _saveSession(n){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0;const s=Object.assign({},n),o=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!o&&s.user&&await jr(this.userStorage,this.storageKey+"-user",{user:s.user});const l=Object.assign({},s);delete l.user;const u=mf(l);await jr(this.storage,this.storageKey,u)}else{const l=mf(s);await jr(this.storage,this.storageKey,l)}}async _removeSession(){this._debug("#_removeSession()"),await pn(this.storage,this.storageKey),await pn(this.storage,this.storageKey+"-code-verifier"),await pn(this.storage,this.storageKey+"-user"),this.userStorage&&await pn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&Pt()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",n)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const n=setInterval(()=>this._autoRefreshTokenTick(),br);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const n=Date.now();try{return await this._useSession(async s=>{const{data:{session:o}}=s;if(!o||!o.refresh_token||!o.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const l=Math.floor((o.expires_at*1e3-n)/br);this._debug("#_autoRefreshTokenTick()",`access token expires in ${l} ticks, a tick lasts ${br}ms, refresh threshold is ${_l} ticks`),l<=_l&&await this._callRefreshToken(o.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(n){if(n.isAcquireTimeout||n instanceof Zf)this._debug("auto refresh token tick lock not available");else throw n}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Pt()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}}async _onVisibilityChanged(n){const s=`#_onVisibilityChanged(${n})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(n,s,o){const l=[`provider=${encodeURIComponent(s)}`];if(o?.redirectTo&&l.push(`redirect_to=${encodeURIComponent(o.redirectTo)}`),o?.scopes&&l.push(`scopes=${encodeURIComponent(o.scopes)}`),this.flowType==="pkce"){const[u,f]=await gr(this.storage,this.storageKey),p=new URLSearchParams({code_challenge:`${encodeURIComponent(u)}`,code_challenge_method:`${encodeURIComponent(f)}`});l.push(p.toString())}if(o?.queryParams){const u=new URLSearchParams(o.queryParams);l.push(u.toString())}return o?.skipBrowserRedirect&&l.push(`skip_http_redirect=${o.skipBrowserRedirect}`),`${n}?${l.join("&")}`}async _unenroll(n){try{return await this._useSession(async s=>{var o;const{data:l,error:u}=s;return u?{data:null,error:u}:await he(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(o=l?.session)===null||o===void 0?void 0:o.access_token})})}catch(s){if(de(s))return{data:null,error:s};throw s}}async _enroll(n){try{return await this._useSession(async s=>{var o,l;const{data:u,error:f}=s;if(f)return{data:null,error:f};const p=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:{issuer:n.issuer}),{data:g,error:v}=await he(this.fetch,"POST",`${this.url}/factors`,{body:p,headers:this.headers,jwt:(o=u?.session)===null||o===void 0?void 0:o.access_token});return v?{data:null,error:v}:(n.factorType==="totp"&&(!((l=g?.totp)===null||l===void 0)&&l.qr_code)&&(g.totp.qr_code=`data:image/svg+xml;utf-8,${g.totp.qr_code}`),{data:g,error:null})})}catch(s){if(de(s))return{data:null,error:s};throw s}}async _verify(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var o;const{data:l,error:u}=s;if(u)return{data:null,error:u};const{data:f,error:p}=await he(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:{code:n.code,challenge_id:n.challengeId},headers:this.headers,jwt:(o=l?.session)===null||o===void 0?void 0:o.access_token});return p?{data:null,error:p}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+f.expires_in},f)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",f),{data:f,error:p})})}catch(s){if(de(s))return{data:null,error:s};throw s}})}async _challenge(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var o;const{data:l,error:u}=s;return u?{data:null,error:u}:await he(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:{channel:n.channel},headers:this.headers,jwt:(o=l?.session)===null||o===void 0?void 0:o.access_token})})}catch(s){if(de(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(n){const{data:s,error:o}=await this._challenge({factorId:n.factorId});return o?{data:null,error:o}:await this._verify({factorId:n.factorId,challengeId:s.id,code:n.code})}async _listFactors(){const{data:{user:n},error:s}=await this.getUser();if(s)return{data:null,error:s};const o=n?.factors||[],l=o.filter(f=>f.factor_type==="totp"&&f.status==="verified"),u=o.filter(f=>f.factor_type==="phone"&&f.status==="verified");return{data:{all:o,totp:l,phone:u},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async n=>{var s,o;const{data:{session:l},error:u}=n;if(u)return{data:null,error:u};if(!l)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:f}=ol(l.access_token);let p=null;f.aal&&(p=f.aal);let g=p;((o=(s=l.user.factors)===null||s===void 0?void 0:s.filter(x=>x.status==="verified"))!==null&&o!==void 0?o:[]).length>0&&(g="aal2");const y=f.amr||[];return{data:{currentLevel:p,nextLevel:g,currentAuthenticationMethods:y},error:null}}))}async fetchJwk(n,s={keys:[]}){let o=s.keys.find(p=>p.kid===n);if(o)return o;const l=Date.now();if(o=this.jwks.keys.find(p=>p.kid===n),o&&this.jwks_cached_at+rv>l)return o;const{data:u,error:f}=await he(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(f)throw f;return!u.keys||u.keys.length===0||(this.jwks=u,this.jwks_cached_at=l,o=u.keys.find(p=>p.kid===n),!o)?null:o}async getClaims(n,s={}){try{let o=n;if(!o){const{data:b,error:R}=await this.getSession();if(R||!b.session)return{data:null,error:R};o=b.session.access_token}const{header:l,payload:u,signature:f,raw:{header:p,payload:g}}=ol(o);s?.allowExpired||Cv(u.exp);const v=!l.alg||l.alg.startsWith("HS")||!l.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(l.kid,s?.keys?{keys:s.keys}:s?.jwks);if(!v){const{error:b}=await this.getUser(o);if(b)throw b;return{data:{claims:u,header:l,signature:f},error:null}}const y=Nv(l.alg),x=await crypto.subtle.importKey("jwk",v,y,!0,["verify"]);if(!await crypto.subtle.verify(y,x,f,hv(`${p}.${g}`)))throw new Sl("Invalid JWT signature");return{data:{claims:u,header:l,signature:f},error:null}}catch(o){if(de(o))return{data:null,error:o};throw o}}}bs.nextInstanceID=0;const Wv=bs;class Hv extends Wv{constructor(n){super(n)}}var qv=function(i,n,s,o){function l(u){return u instanceof s?u:new s(function(f){f(u)})}return new(s||(s=Promise))(function(u,f){function p(y){try{v(o.next(y))}catch(x){f(x)}}function g(y){try{v(o.throw(y))}catch(x){f(x)}}function v(y){y.done?u(y.value):l(y.value).then(p,g)}v((o=o.apply(i,n||[])).next())})};class Kv{constructor(n,s,o){var l,u,f;if(this.supabaseUrl=n,this.supabaseKey=s,!n)throw new Error("supabaseUrl is required.");if(!s)throw new Error("supabaseKey is required.");const p=Xg(n),g=new URL(p);this.realtimeUrl=new URL("realtime/v1",g),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",g),this.storageUrl=new URL("storage/v1",g),this.functionsUrl=new URL("functions/v1",g);const v=`sb-${g.hostname.split(".")[0]}-auth-token`,y={db:Vg,realtime:Hg,auth:Object.assign(Object.assign({},Wg),{storageKey:v}),global:Bg},x=Yg(o??{},y);this.storageKey=(l=x.auth.storageKey)!==null&&l!==void 0?l:"",this.headers=(u=x.global.headers)!==null&&u!==void 0?u:{},x.accessToken?(this.accessToken=x.accessToken,this.auth=new Proxy({},{get:(_,b)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(b)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((f=x.auth)!==null&&f!==void 0?f:{},this.headers,x.global.fetch),this.fetch=Qg(s,this._getAccessToken.bind(this),x.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},x.realtime)),this.rest=new ug(new URL("rest/v1",g).href,{headers:this.headers,schema:x.db.schema,fetch:this.fetch}),this.storage=new Ug(this.storageUrl.href,this.headers,this.fetch,o?.storage),x.accessToken||this._listenForAuthEvents()}get functions(){return new Zm(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(n){return this.rest.from(n)}schema(n){return this.rest.schema(n)}rpc(n,s={},o={}){return this.rest.rpc(n,s,o)}channel(n,s={config:{}}){return this.realtime.channel(n,s)}getChannels(){return this.realtime.getChannels()}removeChannel(n){return this.realtime.removeChannel(n)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var n,s;return qv(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:o}=yield this.auth.getSession();return(s=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:n,persistSession:s,detectSessionInUrl:o,storage:l,storageKey:u,flowType:f,lock:p,debug:g},v,y){const x={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Hv({url:this.authUrl.href,headers:Object.assign(Object.assign({},x),v),storageKey:u,autoRefreshToken:n,persistSession:s,detectSessionInUrl:o,storage:l,flowType:f,lock:p,debug:g,fetch:y,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(n){return new Eg(this.realtimeUrl.href,Object.assign(Object.assign({},n),{params:Object.assign({apikey:this.supabaseKey},n?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,o)=>{this._handleTokenChanged(s,"CLIENT",o?.access_token)})}_handleTokenChanged(n,s,o){(n==="TOKEN_REFRESHED"||n==="SIGNED_IN")&&this.changedAccessToken!==o?this.changedAccessToken=o:n==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Gv=(i,n,s)=>new Kv(i,n,s);function Qv(){if(typeof window<"u"||typeof process>"u")return!1;const i=process.version;if(i==null)return!1;const n=i.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}Qv()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Jv="https://sfjwjkmwnowjbtpsnvvb.supabase.co",Xv="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNmandqa213bm93amJ0cHNudnZiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU4NjYzMDUsImV4cCI6MjA3MTQ0MjMwNX0.rtVW8C68p-thOmuJ1xcjAGu--gvAMppOD_0smyXbpuQ",ve=Gv(Jv,Xv,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}}),eh=E.createContext(null),Dl=()=>E.useContext(eh);function Yv({children:i}){const[n,s]=E.useState(null),[o,l]=E.useState(!0),[u,f]=E.useState(null);E.useEffect(()=>{let g=!0;const v=x=>{console.error("Auth error:",x),f(x.message||"Authentication failed")};ve.auth.getSession().then(({data:x,error:_})=>{_&&v(_),g&&(s(x?.session??null),f(null),l(!1))});const{data:y}=ve.auth.onAuthStateChange((x,_)=>{g&&(s(_??null),f(null),l(!1))});return()=>{g=!1,y?.subscription?.unsubscribe?.()}},[]);const p=E.useMemo(()=>({user:n?.user??null,session:n,loading:o,error:u,signOut:async()=>{f(null);const{error:g}=await ve.auth.signOut();g&&(console.error("signOut error:",g),f(g.message||"Sign out failed"))}}),[n,o,u]);return h.jsx(eh.Provider,{value:p,children:i})}function Zv(){const{user:i,signOut:n}=Dl(),[s,o]=E.useState(!1),l=E.useRef(null),u=i?.email||"Guest",f=E.useCallback(()=>{n(),o(!1)},[n]);return E.useEffect(()=>{const p=g=>{l.current&&!l.current.contains(g.target)&&o(!1)};return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[]),h.jsxs("div",{ref:l,className:"relative",children:[h.jsxs("button",{onClick:()=>o(p=>!p),className:"chip bg-app-surface hover:bg-app-muted border-app",title:"Account menu",children:[h.jsx("span",{className:"truncate max-w-[160px]",children:u}),h.jsx("svg",{className:"w-3.5 h-3.5 ml-1 text-app-muted",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:h.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),s&&h.jsxs("div",{className:"absolute right-0 mt-2 w-40 bg-white border border-app rounded-lg shadow-lg z-50",children:[h.jsx("div",{className:"px-3 py-2 border-b border-app text-sm text-app-muted",children:i?"Signed in":"Not signed in"}),i?h.jsx("button",{onClick:f,className:"w-full text-left px-3 py-2 text-sm text-red-600 hover:bg-app-muted transition",children:"Sign Out"}):h.jsx("div",{className:"px-3 py-2 text-sm text-app-body",children:"Please sign in"})]})]})}const ey=E.memo(function({mode:n="create",setMode:s=()=>{},onExportPNG:o=()=>{},onOpenMenu:l=()=>{},deckActions:u={},user:f=null,canPresent:p=!1,onStartPresent:g=()=>{},exportDisabled:v=!1,loading:y=!1}){const{openDeckManager:x=()=>{},openDeckPicker:_=()=>{},loadingDeck:b=!1}=u,R=E.useCallback(()=>{n==="present"?s("create"):p?g():alert("No posts to present. Add posts to your deck or open a saved deck first.")},[n,s,p,g]),P=E.useCallback(A=>{if(A==="present"&&!p){alert("No posts to present. Add posts to your deck or open a saved deck first.");return}s(A)},[s,p]);return h.jsx("header",{className:"border-b bg-white h-12",children:h.jsxs("div",{className:"container-tight h-full flex items-center gap-3",children:[h.jsx("button",{className:"p-2 rounded hover:bg-slate-100 -ml-2",onClick:l,"aria-label":"Menu","aria-expanded":"false","aria-controls":"app-menu-drawer",children:h.jsx(Bm,{className:"w-4 h-4"})}),h.jsxs("div",{className:"tabs",children:[h.jsx("button",{className:"tab","aria-selected":n==="create",onClick:()=>P("create"),children:"Create"}),h.jsx("button",{className:"tab","aria-selected":n==="present",onClick:R,title:n==="present"?"Exit present mode":p?"Start presenting":"No posts to present",children:"Present"})]}),h.jsx("div",{className:"flex-1"}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs("button",{className:"btn-outline hidden sm:inline-flex",onClick:x,disabled:b||y,title:b||y?"Loading...":"Open Deck Manager",children:[h.jsx(Um,{className:"w-4 h-4 mr-1"}),b||y?"Loading...":"Decks"]}),n==="create"&&h.jsxs("button",{className:"btn-outline hidden sm:inline-flex",onClick:_,disabled:b||y,title:b||y?"Loading...":"Save current post to a deck",children:[h.jsx(Km,{className:"w-4 h-4 mr-1"}),b||y?"Loading...":"Save to deck"]}),h.jsxs("button",{className:"btn-outline",onClick:o,title:v?"Waiting for images to load...":"Export PNG",disabled:v,children:[h.jsx(Nr,{className:"w-4 h-4 mr-1"}),"Export"]}),h.jsx("div",{className:"h-6 w-px bg-slate-200 mx-1"}),h.jsx(Zv,{})]})]})})}),_r={FB_NAME_MAX:100,IG_USERNAME_MAX:30,AVATAR_URL_MAX:500},th={URL_REGEX:/^https?:\/\/.+\..+$/,IG_USERNAME_REGEX:/^[a-zA-Z0-9._]{1,30}$/},_f=Object.freeze({fb_name:"",fb_avatar_url:"",ig_username:"",ig_avatar_url:"",verified:!1}),Fi=i=>typeof i=="string",xf=i=>{if(!i||typeof i!="string")return!0;try{const n=new URL(i);return th.URL_REGEX.test(i)}catch{return!1}},ty=i=>!i||typeof i!="string"?!0:th.IG_USERNAME_REGEX.test(i),Ki={fb_name:i=>!i||!i.trim()?"Facebook name is required":i.length>_r.FB_NAME_MAX?`Facebook name must be ${_r.FB_NAME_MAX} characters or less`:null,fb_avatar_url:i=>i&&!xf(i)?"Facebook avatar URL must be a valid URL":i&&i.length>_r.AVATAR_URL_MAX?"Facebook avatar URL is too long":null,ig_username:i=>i&&!ty(i)?"Instagram username can only contain letters, numbers, periods, and underscores":i&&i.length>_r.IG_USERNAME_MAX?`Instagram username must be ${_r.IG_USERNAME_MAX} characters or less`:null,ig_avatar_url:i=>i&&!xf(i)?"Instagram avatar URL must be a valid URL":i&&i.length>_r.AVATAR_URL_MAX?"Instagram avatar URL is too long":null,verified:i=>null};function Gi(i){const n={};let s=!1;Object.keys(Ki).forEach(u=>{const f=Ki[u](i[u]);f&&(n[u]=f,s=!0)});const o=i.fb_name&&i.fb_name.trim(),l=i.ig_username&&i.ig_username.trim();if(!o&&!l){const u="Either Facebook name or Instagram username is required";n.fb_name=n.fb_name||u,n.ig_username=n.ig_username||u,s=!0}return{isValid:!s,errors:n}}function Vi(i={}){return{fb_name:Fi(i.fb_name)?i.fb_name.trim():"",fb_avatar_url:Fi(i.fb_avatar_url)?i.fb_avatar_url.trim():"",ig_username:Fi(i.ig_username)?i.ig_username.trim().replace(/^@/,"").toLowerCase():"",ig_avatar_url:Fi(i.ig_avatar_url)?i.ig_avatar_url.trim():"",verified:!!i.verified}}function Wi(i){if(!i)return"Unknown Brand";const n=i.fb_name?.trim(),s=i.ig_username?.trim();return n||(s?`@${s}`:"Unnamed Brand")}function zi(i,n="facebook"){return i?n==="instagram"?i.ig_avatar_url||i.fb_avatar_url||"":i.fb_avatar_url||i.ig_avatar_url||"":""}function bl(i){if(!i)return"";const n=i.fb_name?.trim(),s=i.ig_username?.trim();return n&&s?`@${s}`:s?`@${s}`:n||""}function nh(i=null){const[n,s]=E.useState(()=>i?Vi(i):{..._f}),[o,l]=E.useState({}),[u,f]=E.useState({}),p=E.useCallback((b=null)=>{s(b?Vi(b):{..._f}),l({}),f({})},[]),g=E.useCallback((b,R)=>{if(s(P=>({...P,[b]:R})),u[b]){const P=Ki[b]?.(R);l(A=>({...A,[b]:P}))}},[u]),v=E.useCallback(b=>{f(P=>({...P,[b]:!0}));const R=Ki[b]?.(n[b]);l(P=>({...P,[b]:R}))},[n]),y=E.useCallback(()=>{const b=Gi(n);return l(b.errors),f({fb_name:!0,fb_avatar_url:!0,ig_username:!0,ig_avatar_url:!0,verified:!0}),b},[n]),x=E.useCallback(()=>Vi(n),[n]),_=E.useMemo(()=>Gi(n),[n]);return{form:n,errors:o,touched:u,isValid:_.isValid,resetForm:p,updateField:g,touchField:v,validateForm:y,getFormData:x}}function rh(i={}){const n=Vi(i);return{id:i.id??void 0,...n}}async function kf(i){if(!i)return[];if(!ve)throw new Error("Supabase client is undefined");const{data:n,error:s}=await ve.from("brands").select("*").eq("user_id",i).order("created_at",{ascending:!1});if(s)throw s;return n||[]}async function ny(i,n){if(!i)throw new Error("Missing userId");if(!ve)throw new Error("Supabase client is undefined");const s=rh(n),o=Gi(s);if(!o.isValid){const p=Object.values(o.errors)[0];throw new Error(p||"Invalid brand data")}const l={fb_name:s.fb_name,fb_avatar_url:s.fb_avatar_url,ig_username:s.ig_username,ig_avatar_url:s.ig_avatar_url,verified:s.verified,updated_at:new Date().toISOString()};if(s.id){const{data:p,error:g}=await ve.from("brands").update(l).eq("id",s.id).eq("user_id",i).select().single();if(g)throw g.code==="PGRST116"?new Error("Brand not found or access denied"):g;return p}const{data:u,error:f}=await ve.from("brands").insert([{user_id:i,...l,created_at:new Date().toISOString()}]).select().single();if(f)throw f.code==="23505"?new Error("A brand with this name already exists"):f;return u}async function ry(i,n){if(!i)throw new Error("Missing userId");if(!n)throw new Error("Missing brand id");if(!ve)throw new Error("Supabase client is undefined");const{error:s}=await ve.from("brands").delete().eq("id",n).eq("user_id",i);if(s)throw s;return!0}function $l(i){const[n,s]=E.useState([]),[o,l]=E.useState(!!i),[u,f]=E.useState(!1),[p,g]=E.useState("");E.useEffect(()=>{i||(s([]),g(""),l(!1))},[i]),E.useEffect(()=>{let _=!1;async function b(){try{if(l(!0),g(""),!i)return;const R=await kf(i);_||s(R)}catch(R){console.error("[useBrands] fetch error:",R),_||g(R.message||"Failed to load brands")}finally{_||l(!1)}}return b(),()=>{_=!0}},[i]),E.useEffect(()=>{if(!i)return;if(!ve?.channel){console.warn("[useBrands] Realtime channel not available. Skipping subscribe.");return}let _;try{_=ve.channel(`brands:${i}`).on("postgres_changes",{event:"*",schema:"public",table:"brands",filter:`user_id=eq.${i}`},b=>{if(b.eventType==="INSERT"){const R=b.new;s(P=>P.find(A=>A.id===R.id)?P:[R,...P])}else if(b.eventType==="UPDATE"){const R=b.new;s(P=>{const A=P.findIndex(U=>U.id===R.id);if(A===-1)return P;const B=P.slice();return B[A]=R,B})}else if(b.eventType==="DELETE"){const R=b.old;s(P=>P.filter(A=>A.id!==R.id))}}).subscribe()}catch(b){console.error("[useBrands] realtime subscribe error:",b)}return()=>{_&&ve.removeChannel(_)}},[i]);const v=E.useCallback(async _=>{if(!i)throw new Error("Not signed in");f(!0),g("");try{const b=rh(_),R=Gi(b);if(!R.isValid){const A=Object.values(R.errors)[0];throw new Error(A||"Invalid brand data")}const P=await ny(i,_);return s(A=>{const B=A.findIndex(I=>I.id===P.id);if(B===-1)return[P,...A];const U=A.slice();return U[B]=P,U}),P}catch(b){console.error("[useBrands] save error:",b);const R=b.message||"Failed to save brand";throw g(R),b}finally{f(!1)}},[i]),y=E.useCallback(async _=>{if(!i)throw new Error("Not signed in");if(!_)throw new Error("Brand ID is required");f(!0),g("");try{return await ry(i,_),s(b=>b.filter(R=>R.id!==_)),!0}catch(b){console.error("[useBrands] delete error:",b);const R=b.message||"Failed to delete brand";throw g(R),b}finally{f(!1)}},[i]),x=E.useCallback(async()=>{if(i){l(!0),g("");try{const _=await kf(i);s(_)}catch(_){console.error("[useBrands] reload error:",_);const b=_.message||"Failed to reload brands";g(b)}finally{l(!1)}}},[i]);return{brands:n,loading:o,saving:u,error:p,saveBrand:v,removeBrand:y,reload:x}}const sh=E.memo(function({form:n,errors:s={},touched:o={},onFieldChange:l,onFieldBlur:u,disabled:f=!1,showPreview:p=!0,compact:g=!1}){const v=g?"input text-sm":"input",y="text-xs text-app-muted",x=g?"space-y-2":"space-y-3";return h.jsxs("div",{className:x,children:[h.jsxs("div",{children:[h.jsx("label",{className:y,htmlFor:"brand_fb_name",children:"Facebook page name"}),h.jsx("input",{id:"brand_fb_name",className:v,placeholder:"e.g. Patagonia",value:n.fb_name||"",onChange:_=>l("fb_name",_.target.value),onBlur:()=>u?.("fb_name"),disabled:f,autoComplete:"organization"}),o.fb_name&&s.fb_name&&h.jsx("div",{className:"text-xs text-red-600 mt-1",children:s.fb_name})]}),h.jsxs("div",{children:[h.jsx("label",{className:y,htmlFor:"brand_fb_avatar",children:"Facebook avatar URL"}),h.jsx("input",{id:"brand_fb_avatar",className:v,placeholder:"https://...",value:n.fb_avatar_url||"",onChange:_=>l("fb_avatar_url",_.target.value),onBlur:()=>u?.("fb_avatar_url"),disabled:f,autoComplete:"url",type:"url"}),o.fb_avatar_url&&s.fb_avatar_url&&h.jsx("div",{className:"text-xs text-red-600 mt-1",children:s.fb_avatar_url})]}),h.jsxs("div",{children:[h.jsx("label",{className:y,htmlFor:"brand_ig_username",children:"Instagram username"}),h.jsx("input",{id:"brand_ig_username",className:v,placeholder:"e.g. patagonia",value:n.ig_username||"",onChange:_=>l("ig_username",_.target.value),onBlur:()=>u?.("ig_username"),disabled:f,autoComplete:"username"}),o.ig_username&&s.ig_username&&h.jsx("div",{className:"text-xs text-red-600 mt-1",children:s.ig_username})]}),h.jsxs("div",{children:[h.jsx("label",{className:y,htmlFor:"brand_ig_avatar",children:"Instagram avatar URL"}),h.jsx("input",{id:"brand_ig_avatar",className:v,placeholder:"https://...",value:n.ig_avatar_url||"",onChange:_=>l("ig_avatar_url",_.target.value),onBlur:()=>u?.("ig_avatar_url"),disabled:f,autoComplete:"url",type:"url"}),o.ig_avatar_url&&s.ig_avatar_url&&h.jsx("div",{className:"text-xs text-red-600 mt-1",children:s.ig_avatar_url})]}),h.jsxs("div",{children:[h.jsxs("label",{className:"flex items-center gap-2 text-sm cursor-pointer",children:[h.jsx("input",{type:"checkbox",checked:n.verified||!1,onChange:_=>l("verified",_.target.checked),onBlur:()=>u?.("verified"),disabled:f,className:"rounded"}),h.jsx("span",{children:"Verified account"})]}),o.verified&&s.verified&&h.jsx("div",{className:"text-xs text-red-600 mt-1",children:s.verified})]}),p&&h.jsxs("div",{className:"pt-2 border-t border-app-border",children:[h.jsx("div",{className:"text-xs text-app-muted mb-2",children:"Preview"}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden bg-app-muted flex items-center justify-center flex-shrink-0",children:n.fb_avatar_url||n.ig_avatar_url?h.jsx("img",{src:n.fb_avatar_url||n.ig_avatar_url,className:"w-full h-full object-cover",alt:"",onError:_=>{_.target.style.display="none"}}):h.jsx("div",{className:"text-xs text-app-muted",children:""})}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsxs("div",{className:"font-medium text-sm truncate",children:[n.fb_name||"Facebook name",n.verified?" ":""]}),h.jsxs("div",{className:"text-xs text-app-muted truncate",children:["@",n.ig_username||"instagram"]})]})]})]})]})}),ih=E.memo(function({brand:n,onEdit:s,onDelete:o,onToggleVerified:l,showActions:u=!0,showVerifiedToggle:f=!0,showInlineEdit:p=!1,compact:g=!1,disabled:v=!1,className:y=""}){const[x,_]=E.useState(!1),[b,R]=E.useState(!1),{form:P,errors:A,touched:B,isValid:U,resetForm:I,updateField:q,touchField:W,getFormData:L}=nh(n),F=E.useCallback(()=>{I(n),_(!0)},[I,n]),te=E.useCallback(()=>{_(!1),I()},[I]),oe=E.useCallback(async()=>{if(U){R(!0);try{const me=L();await s?.(n.id,me),_(!1)}catch(me){console.error("Save failed:",me)}finally{R(!1)}}},[U,L,s,n.id]),ye=E.useCallback(()=>{confirm("Delete this brand? This cannot be undone.")&&o?.(n.id)},[o,n.id]),Pe=E.useCallback(()=>{l?.(n)},[l,n]),H=E.useCallback(me=>{me.key==="Enter"&&U&&oe(),me.key==="Escape"&&te()},[oe,te,U]),re=g?`border border-app-border rounded-lg p-3 bg-white ${y}`:`card p-0 overflow-hidden ${y}`,_e=g?"w-8 h-8":"w-12 h-12",ke=g?"font-medium text-sm":"font-medium",Te="text-xs text-app-muted";return x&&p?h.jsx("div",{className:re,onKeyDown:H,children:h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("div",{className:"text-sm font-medium",children:"Edit Brand"}),h.jsx("div",{className:"text-xs text-app-muted",children:Wi(n)})]}),h.jsx(sh,{form:P,errors:A,touched:B,onFieldChange:q,onFieldBlur:W,disabled:b,showPreview:!1,compact:g}),h.jsxs("div",{className:"flex items-center justify-end gap-2 pt-2 border-t border-app-border",children:[h.jsxs("button",{className:"btn-outline text-sm",onClick:te,disabled:b,type:"button",children:[h.jsx(Qm,{className:"w-3 h-3 mr-1"}),"Cancel"]}),h.jsxs("button",{className:"btn text-sm",onClick:oe,disabled:!U||b,type:"button",children:[h.jsx(Hm,{className:"w-3 h-3 mr-1"}),b?"Saving...":"Save"]})]})]})}):h.jsx("div",{className:re,children:g?h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:`${_e} rounded-full bg-app-muted overflow-hidden flex items-center justify-center flex-shrink-0`,children:zi(n)?h.jsx("img",{src:zi(n),alt:"",className:"w-full h-full object-cover"}):h.jsx("div",{className:"text-xs text-app-muted",children:""})}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsxs("div",{className:`${ke} truncate`,children:[Wi(n),n.verified?" ":""]}),h.jsx("div",{className:`${Te} truncate`,children:bl(n)})]}),u&&h.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[p&&h.jsx("button",{className:"chip text-xs",onClick:F,disabled:v,title:"Edit brand",children:h.jsx(Gd,{className:"w-3 h-3"})}),h.jsx("button",{className:"chip text-xs hover:bg-red-50 hover:text-red-600",onClick:ye,disabled:v,title:"Delete brand",children:h.jsx(Dn,{className:"w-3 h-3"})})]})]}):h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"flex items-center gap-3 p-3 border-b",children:[h.jsx("div",{className:`${_e} rounded-full bg-app-muted overflow-hidden flex items-center justify-center flex-shrink-0`,children:zi(n)?h.jsx("img",{src:zi(n),alt:"",className:"w-full h-full object-cover"}):h.jsx("div",{className:"text-xs text-app-muted",children:""})}),h.jsxs("div",{className:"min-w-0 flex-1",children:[h.jsx("div",{className:`${ke} truncate`,children:Wi(n)}),h.jsx("div",{className:`${Te} truncate`,children:bl(n)}),n.created_at&&h.jsx("div",{className:"text-xs text-app-muted",children:new Date(n.created_at).toLocaleString()})]})]}),h.jsxs("div",{className:"p-3 space-y-3",children:[f&&h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("div",{className:"text-sm",children:"Verified"}),h.jsx("button",{className:`chip ${n.verified?"bg-green-50 border-green-200 text-green-700":"bg-app-muted"}`,onClick:Pe,disabled:v,title:"Toggle verified status",children:n.verified?h.jsxs(h.Fragment,{children:[h.jsx(Im,{className:"w-3 h-3 mr-1"}),"Verified"]}):h.jsxs(h.Fragment,{children:[h.jsx(Dm,{className:"w-3 h-3 mr-1"}),"Unverified"]})})]}),u&&h.jsxs("div",{className:"flex items-center justify-end gap-2 pt-2 border-t border-app-border",children:[p&&h.jsxs("button",{className:"chip",onClick:F,disabled:v,title:"Edit brand",children:[h.jsx(Gd,{className:"w-3 h-3 mr-1"}),"Edit"]}),h.jsxs("button",{className:"chip hover:bg-red-50 hover:text-red-600",onClick:ye,disabled:v,title:"Delete brand",children:[h.jsx(Dn,{className:"w-3 h-3 mr-1"}),"Delete"]})]})]})]})})}),ul=E.memo(function({kind:n="info",children:s}){const o=n==="error"?"bg-red-50 text-red-700 border-red-200":n==="success"?"bg-green-50 text-green-700 border-green-200":"bg-slate-50 text-slate-700 border-slate-200";return h.jsx("div",{className:`border rounded-lg px-3 py-2 text-sm ${o}`,children:s})}),sy=E.memo(function({user:n,open:s,onClose:o}){const l=n?.id||null;if(!s||!l)return null;const{brands:u,saveBrand:f,removeBrand:p,saving:g,error:v}=$l(l),{form:y,errors:x,touched:_,isValid:b,resetForm:R,updateField:P,touchField:A,validateForm:B,getFormData:U}=nh(),[I,q]=E.useState(""),[W,L]=E.useState(""),F=!!y.id;E.useEffect(()=>{s||(R(),q(""),L(""))},[s,R]);const te=E.useCallback(()=>{q(""),L("")},[]),oe=E.useCallback(()=>{R(),te()},[R,te]),ye=E.useCallback(re=>{R({...re,id:re.id}),te()},[R,te]),Pe=E.useCallback(async re=>{if(re.preventDefault(),te(),!l){q("You must be signed in.");return}if(!B().isValid){q("Please fix the errors above.");return}try{const ke=U(),Te=F?{...ke,id:y.id}:ke,me=await f(Te);L(F?"Brand updated.":"Brand created."),R({...me})}catch(ke){console.error("Save error:",ke),q(ke?.message||"Failed to save brand.")}},[l,B,U,F,y.id,f,te,R]),H=E.useCallback(async re=>{if(te(),!(!re||!confirm("Delete this brand? This cannot be undone.")))try{await p(re),y.id===re&&oe(),L("Brand deleted.")}catch(ke){console.error("Delete error:",ke),q(ke?.message||"Failed to delete brand.")}},[p,y.id,oe,te]);return h.jsxs("div",{className:"fixed inset-0 z-50",children:[h.jsx("button",{type:"button","aria-label":"Close",onClick:o,className:"absolute inset-0 bg-black/40"}),h.jsxs("div",{className:"absolute left-1/2 top-16 -translate-x-1/2 w-[min(960px,95vw)] max-h-[90vh] bg-white border rounded-2xl shadow-xl overflow-hidden flex flex-col",children:[h.jsxs("div",{className:"px-5 py-4 border-b flex items-center justify-between shrink-0",children:[h.jsx("div",{className:"font-semibold",children:"Brand Manager"}),h.jsx("button",{type:"button",onClick:o,className:"p-1 rounded hover:bg-slate-100","aria-label":"Close",children:h.jsx("svg",{className:"w-4 h-4 text-slate-600",viewBox:"0 0 24 24",stroke:"currentColor",fill:"none",children:h.jsx("path",{d:"M6 6l12 12M18 6l-12 12"})})})]}),h.jsxs("div",{className:"p-5 grid lg:grid-cols-2 gap-6 overflow-y-auto",children:[h.jsxs("form",{onSubmit:Pe,className:"space-y-3",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("div",{className:"text-sm font-medium",children:F?"Edit brand":"Add brand"}),F?h.jsxs("span",{className:"text-xs text-slate-500",children:["Editing: ",y.fb_name||(y.ig_username?`@${y.ig_username}`:"Unnamed")]}):null]}),v?h.jsx(ul,{kind:"error",children:v}):null,I?h.jsx(ul,{kind:"error",children:I}):null,W?h.jsx(ul,{kind:"success",children:W}):null,h.jsx(sh,{form:y,errors:x,touched:_,onFieldChange:P,onFieldBlur:A,disabled:g,showPreview:!0}),h.jsxs("div",{className:"flex items-center gap-2 pt-1",children:[h.jsx("button",{type:"submit",className:"btn",disabled:g||!b,children:g?"Saving...":F?"Save changes":"Save brand"}),h.jsx("button",{type:"button",className:"btn-outline",onClick:oe,disabled:g,children:F?"Cancel":"Clear"}),F&&y.id?h.jsx("button",{type:"button",className:"btn-outline text-red-600 border-red-200 ml-auto",onClick:()=>H(y.id),disabled:g,children:"Delete"}):null]})]}),h.jsxs("div",{className:"space-y-3",children:[h.jsx("div",{className:"text-sm font-medium",children:"Your brands"}),u.length===0?h.jsx("div",{className:"border rounded-xl p-4 text-sm text-slate-500",children:"No brands yet"}):h.jsx("ul",{className:"space-y-2",children:u.map(re=>h.jsxs("li",{children:[h.jsx(ih,{brand:re,onEdit:(_e,ke)=>f({...ke,id:_e}),onDelete:H,showActions:!0,showVerifiedToggle:!1,showInlineEdit:!1,compact:!0,disabled:g,className:"hover:bg-slate-50"}),h.jsx("div",{className:"mt-2 flex justify-end",children:h.jsx("button",{type:"button",className:"chip",onClick:()=>ye(re),disabled:g,children:"Edit in form above"})})]},re.id))}),h.jsx("div",{className:"text-xs text-slate-500",children:"Tip: Editing a brand here does not auto-update existing posts. Reselect the brand on a post to refresh its info."})]})]})]})]})}),oh=i=>{if(!i||typeof i!="string")throw new Error("Invalid user ID provided")},Zi=i=>{if(!i||typeof i!="string"&&typeof i!="number")throw new Error("Invalid deck ID provided")};async function Rr(i){oh(i);const{data:n,error:s}=await ve.from("decks").select("id, title, created_at").eq("user_id",i).order("created_at",{ascending:!1});if(s)throw s;return n||[]}async function Ml(i,n){if(oh(i),!n?.trim())throw new Error("Deck title is required");const{data:s,error:o}=await ve.from("decks").insert([{user_id:i,title:n.trim()}]).select("id, title, created_at").single();if(o)throw o;return s}async function ah(i){Zi(i);const{error:n}=await ve.from("decks").delete().eq("id",i);if(n)throw n;return!0}async function jl(i,n,s=null){if(Zi(i),!n||typeof n!="object")throw new Error("Invalid post data");let o=s;if(o==null){const{data:f,error:p}=await ve.from("deck_items").select("order_index").eq("deck_id",i).order("order_index",{ascending:!1}).limit(1).maybeSingle();if(p)throw p;o=f?f.order_index+1:0}const{data:l,error:u}=await ve.from("deck_items").insert([{deck_id:i,order_index:o,post_json:n}]).select("id, deck_id, order_index, post_json, created_at").single();if(u)throw u;return l}async function Pr(i){Zi(i);const{data:n,error:s}=await ve.from("deck_items").select("id, deck_id, order_index, post_json, created_at").eq("deck_id",i).order("order_index",{ascending:!0});if(s)throw s;return n||[]}async function iy(i){if(!i)throw new Error("Item ID is required");const{error:n}=await ve.from("deck_items").delete().eq("id",i);if(n)throw n;return!0}async function oy(i){return(await Pr(i)).map(s=>s.post_json)}let cl=new Map;function ay(i=32){const n=`token_${i}`;return cl.has(n)&&cl.get(n).length>0?cl.get(n).pop():crypto.getRandomValues(new Uint8Array(i)).reduce((s,o)=>s+o.toString(36),"").slice(0,i)}async function ly(i,{days:n=7}={}){Zi(i);const s=ay(32),o=n&&n>0?new Date(Date.now()+n*864e5).toISOString():null,{data:l,error:u}=await ve.from("deck_shares").insert([{deck_id:i,token:s,expires_at:o}]).select("token").single();if(u)throw u;return l.token}function uy({onOpenForPresent:i,onClose:n}){const{user:s}=Dl(),o=s?.id||s?.user?.id||null,[l,u]=E.useState(!0),[f,p]=E.useState([]),[g,v]=E.useState(""),[y,x]=E.useState(!1),[_,b]=E.useState(null);E.useEffect(()=>{let B=!0;return(async()=>{if(!o){u(!1);return}u(!0);try{const U=await Rr(o);B&&p(U)}catch(U){console.error(U)}finally{B&&u(!1)}})(),()=>{B=!1}},[o]);async function R(){const B=g.trim();if(!(!B||!o)){x(!0);try{const U=await Ml(o,B);p(I=>[U,...I]),v("")}catch(U){console.error(U),alert("Could not create deck")}finally{x(!1)}}}async function P(B){if(B&&confirm("Delete this deck?")){b(B);try{await ah(B),p(U=>U.filter(I=>I.id!==B))}catch(U){console.error(U),alert("Could not delete deck")}finally{b(null)}}}async function A(B){if(B){b(B);try{const U=await Pr(B);if(i){const I=U.map(q=>q.post_json);i({deckId:B,count:U.length,posts:I})}else{const I=await oy(B);alert(`Loaded deck with ${I.length} post(s). Wire onOpenForPresent to present it.`)}n?.()}catch(U){console.error(U),alert("Could not open deck")}finally{b(null)}}}return h.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[h.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:n}),h.jsxs("div",{className:"relative w-full max-w-xl rounded-2xl bg-white shadow-xl border",children:[h.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b",children:[h.jsx("h2",{className:"text-lg font-semibold",children:"Decks"}),h.jsx("button",{className:"px-2 py-1 text-sm rounded hover:bg-slate-100",onClick:n,children:"Close"})]}),h.jsxs("div",{className:"p-4 space-y-4",children:[h.jsxs("div",{className:"flex gap-2",children:[h.jsx("input",{className:"input flex-1",placeholder:"New deck title",value:g,onChange:B=>v(B.target.value),onKeyDown:B=>B.key==="Enter"&&R()}),h.jsx("button",{className:"btn",onClick:R,disabled:y||!g.trim(),children:y?"Creating...":"Create"})]}),l?h.jsx("div",{className:"text-sm text-slate-500",children:"Loading decks..."}):f.length===0?h.jsx("div",{className:"text-sm text-slate-500",children:"No decks yet"}):h.jsx("ul",{className:"space-y-2 max-h-80 overflow-auto pr-1",children:f.map(B=>{const U=_===B.id,I=new Date(B.created_at);return h.jsxs("li",{className:"border rounded-lg p-3 flex items-center justify-between hover:bg-slate-50",children:[h.jsxs("div",{className:"min-w-0",children:[h.jsx("div",{className:"font-medium truncate",children:B.title}),h.jsx("div",{className:"text-xs text-slate-500",children:isNaN(I.getTime())?"":I.toLocaleString()})]}),h.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[h.jsx("button",{className:"px-2 py-1 text-sm rounded border",onClick:()=>A(B.id),disabled:U,title:"Open for Present mode",children:U?"Opening...":"Open"}),h.jsx("button",{className:"px-2 py-1 text-sm rounded border",onClick:()=>P(B.id),disabled:U,title:"Delete deck",children:U?"...":"Delete"})]})]},B.id)})})]})]})]})}function cy(i){return h.jsx(uy,{...i})}const Sf=(...i)=>i.filter(Boolean).join(" ");function dy({topBarProps:i={},leftPanel:n=null,rightPreview:s=null,modals:o={},singleColumn:l=!1}){const{brandManagerOpen:u=!1,onCloseBrandManager:f=()=>{},deckManagerOpen:p=!1,onCloseDeckManager:g=()=>{},deckManagerOnOpenForPresent:v=null}=o,y=!!n,x=!!s,_=y&&x&&!l;return h.jsxs("div",{className:"app-shell",children:[h.jsx(ey,{...i}),h.jsx("main",{className:Sf(l?"mx-auto w-full max-w-screen-2xl px-4":"container-tight","py-4"),style:l?{maxWidth:"1536px"}:void 0,children:h.jsxs("div",{className:Sf("grid gap-4 w-full",_?"grid-cols-[minmax(320px,420px)_1fr]":"grid-cols-1"),children:[y?h.jsx("section",{"aria-label":"Primary",className:"min-w-0 w-full",children:n}):null,x?h.jsx("section",{"aria-label":"Live preview",className:"min-w-0 w-full",children:s}):null]})}),u?h.jsx(sy,{onClose:f}):null,p?h.jsx(cy,{onClose:g,onOpenForPresent:v}):null]})}const Qi=(...i)=>i.filter(Boolean).join(" ");function xr({title:i,children:n}){return h.jsxs("div",{className:"space-y-3",children:[h.jsx("div",{className:"label-strong",children:i}),h.jsx("div",{className:"space-y-3",children:n})]})}function bf({label:i,checked:n,onChange:s,name:o,value:l,id:u}){return h.jsxs("label",{className:Qi("px-3 py-2 rounded-lg border cursor-pointer select-none text-sm transition-colors",n?"bg-app-strong text-white border-app-strong":"bg-white hover:bg-slate-50 border-app-border"),htmlFor:u,children:[h.jsx("input",{id:u,name:o,value:l,type:"radio",className:"sr-only",checked:n,onChange:s}),i]})}function fy({platform:i,setPlatform:n}){return h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"flex gap-2",children:[h.jsxs("button",{className:Qi("btn-outline flex-1 flex items-center justify-center",i==="facebook"?"bg-blue-50 border-blue-300 text-blue-700":""),onClick:()=>n("facebook"),"aria-pressed":i==="facebook",children:[h.jsx("span",{className:"text-blue-600 mr-2 font-bold text-lg",children:"f"}),"Facebook"]}),h.jsxs("button",{className:Qi("btn-outline flex-1 flex items-center justify-center",i==="instagram"?"bg-pink-50 border-pink-300 text-pink-700":""),onClick:()=>n("instagram"),"aria-pressed":i==="instagram",children:[h.jsx("span",{className:"mr-2",children:""}),"Instagram"]})]}),h.jsx("div",{className:"text-xs text-app-muted",children:i==="instagram"?"Instagram posts are always square (1:1 aspect ratio)":"Facebook supports multiple aspect ratios - select one below in Media section"})]})}const hy=E.memo(function(n){const{user:s,post:o,update:l,onDrop:u,handleImageFiles:f,handleVideoFile:p,clearVideo:g,removeImageAt:v,deckActions:y={},openBrandManager:x}=n,{deck:_=[],loadFromDeck:b=()=>{},deleteFromDeck:R=()=>{},duplicateToDeck:P=()=>{},startPresentingDeck:A=()=>{},saveToDeck:B=()=>{},openDeckPicker:U=()=>{},addToDeck:I=()=>{},loadingDeck:q=!1}=y;if(!o)return null;const W=E.useRef(null),L=E.useRef(null),{brands:F}=$l(s?.id),te=E.useMemo(()=>o?.brandId??o?.brand?.id??null,[o?.brandId,o?.brand?.id]),oe=E.useMemo(()=>F.find(H=>H.id===te)||null,[F,te]),ye=E.useCallback(H=>{if(!H){l({brandId:null,brand:{id:null,name:"",username:"",profileSrc:"",verified:!1}});return}const re=o.platform==="facebook"?H.fb_avatar_url||"":H.ig_avatar_url||"";l({brandId:H.id,brand:{id:H.id,name:H.fb_name||"",username:H.ig_username||"",profileSrc:re,verified:!!H.verified}})},[o.platform,l]),Pe=E.useCallback(H=>{const re=F.find(_e=>_e.id===H)||null;ye(re)},[F,ye]);return h.jsxs("div",{className:"panel overflow-hidden flex flex-col h-full",children:[h.jsxs("div",{className:"panel-header flex items-center gap-2 flex-shrink-0",children:[h.jsx(qm,{className:"w-4 h-4 text-app-body"}),h.jsx("span",{className:"font-medium text-app-strong",children:"Controls"})]}),h.jsx("div",{className:"flex-1 overflow-auto bg-app-surface",style:{height:"calc(100vh - 12rem)"},children:h.jsxs("div",{className:"p-4 space-y-6",children:[h.jsx(xr,{title:"Platform",children:h.jsx(fy,{platform:o.platform||"facebook",setPlatform:E.useCallback(H=>l({platform:H}),[l])})}),h.jsx("div",{className:"border-t border-app-border"}),h.jsxs(xr,{title:"Brand",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs("select",{id:"brand_select",name:"brand_select",className:"select flex-1",value:te||"",onChange:H=>Pe(H.target.value||null),children:[h.jsx("option",{value:"",children:"Select a brand"}),F.map(H=>h.jsxs("option",{value:H.id,children:[H.fb_name||"FB name","  @",H.ig_username||"ig",H.verified?" ":""]},H.id))]}),h.jsx("button",{type:"button",className:"btn-outline flex-shrink-0",onClick:x,children:"Manage"})]}),oe&&h.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-lg",children:[h.jsx("div",{className:"w-10 h-10 rounded-full bg-app-muted overflow-hidden flex items-center justify-center flex-shrink-0",children:o.platform==="facebook"?oe?.fb_avatar_url?h.jsx("img",{src:oe.fb_avatar_url,className:"w-full h-full object-cover",alt:""}):h.jsx(Nr,{className:"w-5 h-5 text-app-muted"}):oe?.ig_avatar_url?h.jsx("img",{src:oe.ig_avatar_url,className:"w-full h-full object-cover",alt:""}):h.jsx(Nr,{className:"w-5 h-5 text-app-muted"})}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsxs("div",{className:"font-medium text-sm truncate",children:[o.platform==="facebook"?oe.fb_name||"Facebook Page":`@${oe.ig_username||"instagram"}`,oe.verified?" ":""]}),h.jsxs("div",{className:"text-xs text-app-muted",children:[o.platform==="facebook"?"Facebook":"Instagram","  ",o.platform==="facebook"?"Page":"Account"]})]})]})]}),h.jsx("div",{className:"border-t border-app-border"}),h.jsx(xr,{title:"Post copy",children:h.jsxs("div",{children:[h.jsx("label",{htmlFor:"post_caption",className:"sr-only",children:"Post caption"}),h.jsx("textarea",{id:"post_caption",name:"post_caption",className:"textarea",rows:5,value:o.caption||"",onChange:H=>l({caption:H.target.value}),placeholder:"Write your post copy here..."}),h.jsxs("div",{className:"text-xs text-app-muted text-right mt-1",children:[(o.caption||"").length," chars"]})]})}),h.jsx("div",{className:"border-t border-app-border"}),h.jsxs(xr,{title:"Media",children:[h.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(bf,{id:"type_images",name:"media_type",value:"images",label:"Images",checked:o.type!=="video",onChange:()=>{const re=(o.media?.length||0)>1?"carousel":"single";l({type:re,videoSrc:""})}}),h.jsx(bf,{id:"type_video",name:"media_type",value:"video",label:"Video",checked:o.type==="video",onChange:()=>l({type:"video"})})]}),h.jsx("div",{className:"flex items-center gap-3 text-sm",children:o.platform==="instagram"?h.jsxs("div",{className:"w-full",children:[h.jsx("label",{className:"block text-xs text-app-muted mb-2",children:"Instagram ad format"}),h.jsxs("select",{className:"select w-full text-sm",value:o.igAdFormat||"feed-1:1",onChange:H=>{const[re,_e]=H.target.value.split("-");l({igAdFormat:H.target.value,fbAspectRatio:_e,igAdType:re,isReel:re==="reels"})},children:[h.jsxs("optgroup",{label:" Feed Ads",children:[h.jsx("option",{value:"feed-1:1",children:"Feed - Square (1:1) - 10801080"}),h.jsx("option",{value:"feed-4:5",children:"Feed - Vertical (4:5) - 10801350"}),h.jsx("option",{value:"feed-16:9",children:"Feed Video - Landscape (16:9) - up to 60s"})]}),h.jsxs("optgroup",{label:" Stories & Reels",children:[h.jsx("option",{value:"story-9:16",children:"Story Ads - Vertical (9:16) - 10801920"}),h.jsx("option",{value:"reels-9:16",children:"Reels Ads - Vertical (9:16) - 10801920"})]}),h.jsxs("optgroup",{label:" Discovery",children:[h.jsx("option",{value:"explore-1:1",children:"Explore - Square (1:1) - 10801080"}),h.jsx("option",{value:"explore-4:5",children:"Explore - Vertical (4:5) - 10801350"})]}),h.jsxs("optgroup",{label:" Shopping",children:[h.jsx("option",{value:"shop-1:1",children:"Shop Ads - Square (1:1) - 10801080"}),h.jsx("option",{value:"carousel-1:1",children:"Carousel - Square (1:1) - 10801080"})]})]}),h.jsxs("div",{className:"text-xs text-app-muted mt-2",children:[o.igAdFormat==="feed-1:1"&&"Most flexible format, shows in main feed",o.igAdFormat==="feed-4:5"&&"Vertical format, takes up more feed space",o.igAdFormat==="feed-16:9"&&"Landscape video format, up to 60 seconds",o.igAdFormat==="story-9:16"&&"Full-screen vertical, up to 15s per card, best for swipe-up CTAs",o.igAdFormat==="reels-9:16"&&"Plays in Reels feed, feels native, up to 90 seconds",o.igAdFormat==="explore-1:1"&&"Shows in Explore grid when users browse",o.igAdFormat==="explore-4:5"&&"Vertical Explore format for more visual impact",o.igAdFormat==="shop-1:1"&&"Product-focused, connects directly to Instagram Shop",o.igAdFormat==="carousel-1:1"&&"Up to 10 cards, great for multiple products or features",!o.igAdFormat&&"Select an Instagram ad format to see specific notes"]})]}):h.jsxs("div",{className:"w-full",children:[h.jsx("label",{className:"block text-xs text-app-muted mb-2",children:"Facebook ad format"}),h.jsxs("select",{className:"select w-full text-sm",value:o.fbAdFormat||"feed-1:1",onChange:H=>{const[re,_e]=H.target.value.split("-");l({fbAdFormat:H.target.value,fbAspectRatio:_e,fbAdType:re})},children:[h.jsxs("optgroup",{label:" Feed Ads",children:[h.jsx("option",{value:"feed-1:1",children:"Feed - Square (1:1) - 10801080"}),h.jsx("option",{value:"feed-4:5",children:"Feed - Vertical (4:5) - 10801350"})]}),h.jsxs("optgroup",{label:" Video Ads",children:[h.jsx("option",{value:"video-4:5",children:"Video Feed - Vertical (4:5) - 10801350"}),h.jsx("option",{value:"video-16:9",children:"Video Feed - Landscape (16:9) - 1280720"}),h.jsx("option",{value:"instream-16:9",children:"In-stream Video - Landscape (16:9) - 1280720"})]}),h.jsxs("optgroup",{label:" Stories & Reels",children:[h.jsx("option",{value:"story-9:16",children:"Story Ads - Vertical (9:16) - 10801920"}),h.jsx("option",{value:"reels-9:16",children:"Reels Ads - Vertical (9:16) - 10801920"})]}),h.jsxs("optgroup",{label:" Shopping",children:[h.jsx("option",{value:"marketplace-1:1",children:"Marketplace - Square (1:1) - 10801080"}),h.jsx("option",{value:"carousel-1:1",children:"Carousel - Square (1:1) - 10801080"}),h.jsx("option",{value:"collection-1.91:1",children:"Collection Cover - Landscape (1.91:1) - 1200628"})]}),h.jsx("optgroup",{label:" Desktop",children:h.jsx("option",{value:"rightcolumn-1:1",children:"Right Column - Square (1:1) - 12001200"})})]}),h.jsxs("div",{className:"text-xs text-app-muted mt-2",children:[o.fbAdFormat==="feed-1:1"&&"High visibility feed placement with CTA buttons",o.fbAdFormat==="feed-4:5"&&"Vertical feed format, great for product ads",o.fbAdFormat==="video-4:5"&&"Auto-plays muted, short videos perform better",o.fbAdFormat==="video-16:9"&&"Landscape video format for feed placement",o.fbAdFormat==="instream-16:9"&&"Plays inside longer videos, skippable after 5s",o.fbAdFormat==="story-9:16"&&"Full-screen vertical, same as Instagram Stories",o.fbAdFormat==="reels-9:16"&&"Auto-plays in Reels feed, up to 90 seconds",o.fbAdFormat==="marketplace-1:1"&&"Targets users actively shopping",o.fbAdFormat==="carousel-1:1"&&"Up to 10 cards, great for product showcases",o.fbAdFormat==="collection-1.91:1"&&"Opens Instant Experience, optimized for shopping",o.fbAdFormat==="rightcolumn-1:1"&&"Desktop only, lower CTR but cheap impressions",!o.fbAdFormat&&"Select a Facebook ad format to see specific notes"]})]})})]}),h.jsxs("div",{onDragOver:H=>{H.preventDefault(),H.stopPropagation()},onDrop:u,className:"border-2 border-dashed border-app-border rounded-lg p-6 text-center bg-slate-50/50 hover:bg-slate-50 transition-colors",children:[h.jsx("p",{className:"text-sm text-app-body mb-3",children:"Drag files here, or"}),h.jsxs("div",{className:"flex items-center justify-center gap-2 flex-wrap",children:[h.jsxs("button",{className:"btn",onClick:()=>W.current?.click(),children:[h.jsx(Nr,{className:"w-4 h-4 mr-2"}),"Add images"]}),h.jsxs("button",{className:"btn-outline",onClick:()=>L.current?.click(),children:[h.jsx(Gm,{className:"w-4 h-4 mr-2"}),"Add video"]})]}),h.jsx("input",{id:"image_files",name:"image_files",ref:W,type:"file",accept:"image/*",multiple:!0,className:"sr-only",onChange:async H=>{H.target.files&&await f(H.target.files)}}),h.jsx("input",{id:"video_file",name:"video_file",ref:L,type:"file",accept:"video/mp4,video/webm,video/quicktime",className:"sr-only",onChange:async H=>{const re=H.target.files?.[0];re&&await p(re)}})]}),o.type!=="video"&&o.media?.length?h.jsx("div",{className:"grid grid-cols-5 gap-2",children:o.media.map((H,re)=>h.jsxs("div",{className:Qi("relative rounded-lg overflow-hidden border cursor-pointer transition-all",re===o.activeIndex?"ring-2 ring-brand-500 border-brand-500":"border-app-border hover:border-brand-300"),onClick:()=>l({activeIndex:re}),children:[h.jsx("img",{src:H,className:"w-full h-16 object-cover block",alt:""}),h.jsx("button",{className:"absolute top-1 right-1 bg-white/90 hover:bg-white rounded-full p-1 shadow-sm transition-colors",onClick:_e=>{_e.stopPropagation(),v(re)},title:"Remove",children:h.jsx(Dn,{className:"w-3 h-3"})})]},re))}):null,o.type==="video"&&o.videoSrc?h.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border border-app-border",children:[h.jsx("div",{className:"text-sm text-app-body",children:"Video loaded"}),h.jsxs("button",{className:"chip hover:bg-red-50 hover:text-red-600 transition-colors",onClick:g,children:[h.jsx(Dn,{className:"w-3 h-3 mr-1"}),"Remove video"]})]}):null,o.type!=="video"&&(o.media?.length||0)>0?h.jsxs("div",{children:[h.jsxs("label",{htmlFor:"image_headline",className:"block text-xs text-app-muted mb-2",children:["Headline for image ",o.activeIndex+1]}),h.jsx("input",{id:"image_headline",name:"image_headline",className:"input",placeholder:"Enter headline for this image",value:o.mediaMeta?.[o.activeIndex]?.headline||"",onChange:H=>{const re=(o.mediaMeta||[]).slice(),_e=o.activeIndex||0;re[_e]={...re[_e]||{},headline:H.target.value},l({mediaMeta:re})}})]}):null]}),h.jsx("div",{className:"border-t border-app-border"}),o.platform==="facebook"&&h.jsx(xr,{title:"Link preview (Facebook style)",children:h.jsxs("div",{className:"space-y-3",children:[h.jsx("input",{id:"link_headline",name:"link_headline",className:"input",placeholder:"Headline",value:o.link?.headline||"",onChange:H=>l({link:{...o.link||{},headline:H.target.value}})}),h.jsx("input",{id:"link_subhead",name:"link_subhead",className:"input",placeholder:"Subhead",value:o.link?.subhead||"",onChange:H=>l({link:{...o.link||{},subhead:H.target.value}})}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("input",{id:"link_url",name:"link_url",className:"input flex-1",placeholder:"Link URL",value:o.link?.url||"",onChange:H=>l({link:{...o.link||{},url:H.target.value}}),autoComplete:"url"}),h.jsx("select",{id:"link_cta",name:"link_cta",className:"select w-auto",value:o.link?.cta||"Learn More",onChange:H=>l({link:{...o.link||{},cta:H.target.value}}),children:["Learn More","Shop Now","Sign Up","Download","Book Now","Contact Us"].map(H=>h.jsx("option",{value:H,children:H},H))})]})]})}),o.platform==="facebook"&&h.jsx("div",{className:"border-t border-app-border"}),h.jsxs(xr,{title:"Deck (multiple posts)",children:[h.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[h.jsxs("button",{className:"btn",onClick:()=>U?.(),children:[h.jsx(Nr,{className:"w-4 h-4 mr-2"}),"Add this post to deck"]}),h.jsx("button",{className:"btn-outline",title:"Quick save with title prompt",onClick:()=>B?.(),children:"Quick save"}),_.length>0&&h.jsxs("button",{className:"btn-outline",onClick:()=>A(_[0]?.id),disabled:!_.length,children:[h.jsx(fl,{className:"w-4 h-4 mr-2"}),"Present deck"]})]}),_.length>0&&h.jsx("div",{className:"space-y-2 max-h-56 overflow-auto pr-1",children:_.map(H=>h.jsxs("div",{className:"flex items-center justify-between border border-app-border rounded-lg p-3 hover:bg-slate-50 transition-colors",children:[h.jsxs("div",{className:"text-sm min-w-0",children:[h.jsx("div",{className:"font-medium text-app-strong truncate",children:new Date(H.createdAt).toLocaleString()}),h.jsxs("div",{className:"text-xs text-app-muted truncate",children:[H.post?.brand?.name||"Brand","  ",H.post?.platform||"facebook"," "," ",H.post?.type||"single"]})]}),h.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[h.jsxs("button",{className:"chip text-xs",onClick:()=>b(H.id),children:[h.jsx(Mm,{className:"w-3 h-3 mr-1"}),"Load"]}),h.jsxs("button",{className:"chip text-xs",onClick:()=>P(H.id),children:[h.jsx($m,{className:"w-3 h-3 mr-1"}),"Duplicate"]}),h.jsxs("button",{className:"chip text-xs",onClick:()=>A(H.id),children:[h.jsx(fl,{className:"w-3 h-3 mr-1"}),"Start here"]}),h.jsxs("button",{className:"chip text-xs hover:bg-red-50 hover:text-red-600 transition-colors",onClick:()=>R(H.id),children:[h.jsx(Dn,{className:"w-3 h-3 mr-1"}),"Remove"]})]})]},H.id))})]})]})})]})}),El=["Learn More","Shop Now","Sign Up","Download","Book Now","Contact Us"],lh=["facebook","instagram"],uh=["single","carousel","video"],py=["1:1","4:5","9:16","16:9","1.91:1"],Cl=Object.freeze({id:null,name:"Your Brand",username:"yourbrand",profileSrc:"",verified:!1}),my=Object.freeze({headline:"",subhead:"",url:"",cta:El[0]}),Er=Object.freeze({likes:128,comments:24,shares:12,saves:9,views:10234}),ch=Object.freeze({id:null,platform:"facebook",type:"single",isReel:!1,caption:"Write your post copy here...",media:[],mediaMeta:[],videoSrc:"",muted:!0,playing:!1,activeIndex:0,fbAspectRatio:"1:1",fbAdFormat:"feed-1:1",fbAdType:"feed",igAdFormat:"feed-1:1",igAdType:"feed",link:{...my},brand:{...Cl},metrics:{...Er},brandId:null}),lt=i=>typeof i=="string",Ul=i=>Array.isArray(i),Fl=i=>i&&typeof i=="object",Cr=i=>Number.isFinite(i);function gy(i){return i&&typeof i=="object"&&lh.includes(i.platform)&&uh.includes(i.type)&&Ul(i.media)&&lt(i.caption)}function vy(i){return Ul(i)?i.filter(Boolean).slice(0,5):[]}function yy(i,n){const s=Ul(i)?i:[];return Array.from({length:n},(o,l)=>({headline:lt(s[l]?.headline)?s[l].headline:""}))}function wy(i,n){return Cr(i)?Math.max(0,Math.min(i,Math.max(0,n-1))):0}function _y(i){return py.includes(i.fbAspectRatio)?i.fbAspectRatio:i.fbSquare!==void 0?i.fbSquare?"1:1":"16:9":"1:1"}function xy(i){const n=Fl(i)?i:{};return{headline:lt(n.headline)?n.headline:"",subhead:lt(n.subhead)?n.subhead:"",url:lt(n.url)?n.url.trim():"",cta:El.includes(n.cta)?n.cta:El[0]}}function ky(i,n){const s=Fl(i)?i:{},o=(typeof n=="string"&&n.length?n:null)??(typeof s.id=="string"&&s.id.length?s.id:null);return{id:(typeof s.id=="string"&&s.id.length?s.id:null)??o,name:lt(s.name)?s.name:Cl.name,username:lt(s.username)?s.username:Cl.username,profileSrc:lt(s.profileSrc)?s.profileSrc:"",verified:!!s.verified}}function Sy(i){const n=Fl(i)?i:{};return{likes:Cr(n.likes)?n.likes:Er.likes,comments:Cr(n.comments)?n.comments:Er.comments,shares:Cr(n.shares)?n.shares:Er.shares,saves:Cr(n.saves)?n.saves:Er.saves,views:Cr(n.views)?n.views:Er.views}}function Ce(i){if(gy(i))return i;const n=i&&typeof i=="object"?i:{},s={...ch};return s.id=n.id??s.id,s.platform=lh.includes(n.platform)?n.platform:"facebook",s.type=uh.includes(n.type)?n.type:null,s.isReel=!!n.isReel,s.caption=lt(n.caption)?n.caption:s.caption,s.media=vy(n.media),s.mediaMeta=yy(n.mediaMeta,s.media.length),s.videoSrc=lt(n.videoSrc)?n.videoSrc:"",s.muted=n.muted??!0,s.playing=n.playing??!1,s.activeIndex=wy(n.activeIndex,s.media.length),s.fbAspectRatio=_y(n),s.fbAdFormat=lt(n.fbAdFormat)?n.fbAdFormat:"feed-1:1",s.fbAdType=lt(n.fbAdType)?n.fbAdType:"feed",s.igAdFormat=lt(n.igAdFormat)?n.igAdFormat:"feed-1:1",s.igAdType=lt(n.igAdType)?n.igAdType:"feed",s.link=xy(n.link),s.brand=ky(n.brand,n.brandId),s.brandId=s.brand.id,s.metrics=Sy(n.metrics),s.type||(s.type=s.videoSrc?"video":s.media.length>1?"carousel":"single"),s}function by(i){return E.useMemo(()=>Ce(i),[i])}function jy(i,n){if(i.match(/^[a-z]+:\/\//i))return i;if(i.match(/^\/\//))return window.location.protocol+i;if(i.match(/^[a-z]+:/i))return i;const s=document.implementation.createHTMLDocument(),o=s.createElement("base"),l=s.createElement("a");return s.head.appendChild(o),s.body.appendChild(l),n&&(o.href=n),l.href=i,l.href}const Ey=(()=>{let i=0;const n=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(i+=1,`u${n()}${i}`)})();function vn(i){const n=[];for(let s=0,o=i.length;s<o;s++)n.push(i[s]);return n}let kr=null;function dh(i={}){return kr||(i.includeStyleProperties?(kr=i.includeStyleProperties,kr):(kr=vn(window.getComputedStyle(document.documentElement)),kr))}function Ji(i,n){const o=(i.ownerDocument.defaultView||window).getComputedStyle(i).getPropertyValue(n);return o?parseFloat(o.replace("px","")):0}function Cy(i){const n=Ji(i,"border-left-width"),s=Ji(i,"border-right-width");return i.clientWidth+n+s}function Ny(i){const n=Ji(i,"border-top-width"),s=Ji(i,"border-bottom-width");return i.clientHeight+n+s}function fh(i,n={}){const s=n.width||Cy(i),o=n.height||Ny(i);return{width:s,height:o}}function Py(){let i,n;try{n=process}catch{}const s=n&&n.env?n.env.devicePixelRatio:null;return s&&(i=parseInt(s,10),Number.isNaN(i)&&(i=1)),i||window.devicePixelRatio||1}const mt=16384;function Ty(i){(i.width>mt||i.height>mt)&&(i.width>mt&&i.height>mt?i.width>i.height?(i.height*=mt/i.width,i.width=mt):(i.width*=mt/i.height,i.height=mt):i.width>mt?(i.height*=mt/i.width,i.width=mt):(i.width*=mt/i.height,i.height=mt))}function Xi(i){return new Promise((n,s)=>{const o=new Image;o.onload=()=>{o.decode().then(()=>{requestAnimationFrame(()=>n(o))})},o.onerror=s,o.crossOrigin="anonymous",o.decoding="async",o.src=i})}async function Ry(i){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(i)).then(encodeURIComponent).then(n=>`data:image/svg+xml;charset=utf-8,${n}`)}async function Ay(i,n,s){const o="http://www.w3.org/2000/svg",l=document.createElementNS(o,"svg"),u=document.createElementNS(o,"foreignObject");return l.setAttribute("width",`${n}`),l.setAttribute("height",`${s}`),l.setAttribute("viewBox",`0 0 ${n} ${s}`),u.setAttribute("width","100%"),u.setAttribute("height","100%"),u.setAttribute("x","0"),u.setAttribute("y","0"),u.setAttribute("externalResourcesRequired","true"),l.appendChild(u),u.appendChild(i),Ry(l)}const ut=(i,n)=>{if(i instanceof n)return!0;const s=Object.getPrototypeOf(i);return s===null?!1:s.constructor.name===n.name||ut(s,n)};function Oy(i){const n=i.getPropertyValue("content");return`${i.cssText} content: '${n.replace(/'|"/g,"")}';`}function Ly(i,n){return dh(n).map(s=>{const o=i.getPropertyValue(s),l=i.getPropertyPriority(s);return`${s}: ${o}${l?" !important":""};`}).join(" ")}function Iy(i,n,s,o){const l=`.${i}:${n}`,u=s.cssText?Oy(s):Ly(s,o);return document.createTextNode(`${l}{${u}}`)}function jf(i,n,s,o){const l=window.getComputedStyle(i,s),u=l.getPropertyValue("content");if(u===""||u==="none")return;const f=Ey();try{n.className=`${n.className} ${f}`}catch{return}const p=document.createElement("style");p.appendChild(Iy(f,s,l,o)),n.appendChild(p)}function Dy(i,n,s){jf(i,n,":before",s),jf(i,n,":after",s)}const Ef="application/font-woff",Cf="image/jpeg",$y={woff:Ef,woff2:Ef,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:Cf,jpeg:Cf,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function My(i){const n=/\.([^./]*?)$/g.exec(i);return n?n[1]:""}function zl(i){const n=My(i).toLowerCase();return $y[n]||""}function Uy(i){return i.split(/,/)[1]}function Nl(i){return i.search(/^(data:)/)!==-1}function Fy(i,n){return`data:${n};base64,${i}`}async function hh(i,n,s){const o=await fetch(i,n);if(o.status===404)throw new Error(`Resource "${o.url}" not found`);const l=await o.blob();return new Promise((u,f)=>{const p=new FileReader;p.onerror=f,p.onloadend=()=>{try{u(s({res:o,result:p.result}))}catch(g){f(g)}},p.readAsDataURL(l)})}const dl={};function zy(i,n,s){let o=i.replace(/\?.*/,"");return s&&(o=i),/ttf|otf|eot|woff2?/i.test(o)&&(o=o.replace(/.*\//,"")),n?`[${n}]${o}`:o}async function Bl(i,n,s){const o=zy(i,n,s.includeQueryParams);if(dl[o]!=null)return dl[o];s.cacheBust&&(i+=(/\?/.test(i)?"&":"?")+new Date().getTime());let l;try{const u=await hh(i,s.fetchRequestInit,({res:f,result:p})=>(n||(n=f.headers.get("Content-Type")||""),Uy(p)));l=Fy(u,n)}catch(u){l=s.imagePlaceholder||"";let f=`Failed to fetch resource: ${i}`;u&&(f=typeof u=="string"?u:u.message),f&&console.warn(f)}return dl[o]=l,l}async function By(i){const n=i.toDataURL();return n==="data:,"?i.cloneNode(!1):Xi(n)}async function Vy(i,n){if(i.currentSrc){const u=document.createElement("canvas"),f=u.getContext("2d");u.width=i.clientWidth,u.height=i.clientHeight,f?.drawImage(i,0,0,u.width,u.height);const p=u.toDataURL();return Xi(p)}const s=i.poster,o=zl(s),l=await Bl(s,o,n);return Xi(l)}async function Wy(i,n){var s;try{if(!((s=i?.contentDocument)===null||s===void 0)&&s.body)return await eo(i.contentDocument.body,n,!0)}catch{}return i.cloneNode(!1)}async function Hy(i,n){return ut(i,HTMLCanvasElement)?By(i):ut(i,HTMLVideoElement)?Vy(i,n):ut(i,HTMLIFrameElement)?Wy(i,n):i.cloneNode(ph(i))}const qy=i=>i.tagName!=null&&i.tagName.toUpperCase()==="SLOT",ph=i=>i.tagName!=null&&i.tagName.toUpperCase()==="SVG";async function Ky(i,n,s){var o,l;if(ph(n))return n;let u=[];return qy(i)&&i.assignedNodes?u=vn(i.assignedNodes()):ut(i,HTMLIFrameElement)&&(!((o=i.contentDocument)===null||o===void 0)&&o.body)?u=vn(i.contentDocument.body.childNodes):u=vn(((l=i.shadowRoot)!==null&&l!==void 0?l:i).childNodes),u.length===0||ut(i,HTMLVideoElement)||await u.reduce((f,p)=>f.then(()=>eo(p,s)).then(g=>{g&&n.appendChild(g)}),Promise.resolve()),n}function Gy(i,n,s){const o=n.style;if(!o)return;const l=window.getComputedStyle(i);l.cssText?(o.cssText=l.cssText,o.transformOrigin=l.transformOrigin):dh(s).forEach(u=>{let f=l.getPropertyValue(u);u==="font-size"&&f.endsWith("px")&&(f=`${Math.floor(parseFloat(f.substring(0,f.length-2)))-.1}px`),ut(i,HTMLIFrameElement)&&u==="display"&&f==="inline"&&(f="block"),u==="d"&&n.getAttribute("d")&&(f=`path(${n.getAttribute("d")})`),o.setProperty(u,f,l.getPropertyPriority(u))})}function Qy(i,n){ut(i,HTMLTextAreaElement)&&(n.innerHTML=i.value),ut(i,HTMLInputElement)&&n.setAttribute("value",i.value)}function Jy(i,n){if(ut(i,HTMLSelectElement)){const s=n,o=Array.from(s.children).find(l=>i.value===l.getAttribute("value"));o&&o.setAttribute("selected","")}}function Xy(i,n,s){return ut(n,Element)&&(Gy(i,n,s),Dy(i,n,s),Qy(i,n),Jy(i,n)),n}async function Yy(i,n){const s=i.querySelectorAll?i.querySelectorAll("use"):[];if(s.length===0)return i;const o={};for(let u=0;u<s.length;u++){const p=s[u].getAttribute("xlink:href");if(p){const g=i.querySelector(p),v=document.querySelector(p);!g&&v&&!o[p]&&(o[p]=await eo(v,n,!0))}}const l=Object.values(o);if(l.length){const u="http://www.w3.org/1999/xhtml",f=document.createElementNS(u,"svg");f.setAttribute("xmlns",u),f.style.position="absolute",f.style.width="0",f.style.height="0",f.style.overflow="hidden",f.style.display="none";const p=document.createElementNS(u,"defs");f.appendChild(p);for(let g=0;g<l.length;g++)p.appendChild(l[g]);i.appendChild(f)}return i}async function eo(i,n,s){return!s&&n.filter&&!n.filter(i)?null:Promise.resolve(i).then(o=>Hy(o,n)).then(o=>Ky(i,o,n)).then(o=>Xy(i,o,n)).then(o=>Yy(o,n))}const mh=/url\((['"]?)([^'"]+?)\1\)/g,Zy=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,e0=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function t0(i){const n=i.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${n})(['"]?\\))`,"g")}function n0(i){const n=[];return i.replace(mh,(s,o,l)=>(n.push(l),s)),n.filter(s=>!Nl(s))}async function r0(i,n,s,o,l){try{const u=s?jy(n,s):n,f=zl(n);let p;return l||(p=await Bl(u,f,o)),i.replace(t0(n),`$1${p}$3`)}catch{}return i}function s0(i,{preferredFontFormat:n}){return n?i.replace(e0,s=>{for(;;){const[o,,l]=Zy.exec(s)||[];if(!l)return"";if(l===n)return`src: ${o};`}}):i}function gh(i){return i.search(mh)!==-1}async function vh(i,n,s){if(!gh(i))return i;const o=s0(i,s);return n0(o).reduce((u,f)=>u.then(p=>r0(p,f,n,s)),Promise.resolve(o))}async function Sr(i,n,s){var o;const l=(o=n.style)===null||o===void 0?void 0:o.getPropertyValue(i);if(l){const u=await vh(l,null,s);return n.style.setProperty(i,u,n.style.getPropertyPriority(i)),!0}return!1}async function i0(i,n){await Sr("background",i,n)||await Sr("background-image",i,n),await Sr("mask",i,n)||await Sr("-webkit-mask",i,n)||await Sr("mask-image",i,n)||await Sr("-webkit-mask-image",i,n)}async function o0(i,n){const s=ut(i,HTMLImageElement);if(!(s&&!Nl(i.src))&&!(ut(i,SVGImageElement)&&!Nl(i.href.baseVal)))return;const o=s?i.src:i.href.baseVal,l=await Bl(o,zl(o),n);await new Promise((u,f)=>{i.onload=u,i.onerror=n.onImageErrorHandler?(...g)=>{try{u(n.onImageErrorHandler(...g))}catch(v){f(v)}}:f;const p=i;p.decode&&(p.decode=u),p.loading==="lazy"&&(p.loading="eager"),s?(i.srcset="",i.src=l):i.href.baseVal=l})}async function a0(i,n){const o=vn(i.childNodes).map(l=>yh(l,n));await Promise.all(o).then(()=>i)}async function yh(i,n){ut(i,Element)&&(await i0(i,n),await o0(i,n),await a0(i,n))}function l0(i,n){const{style:s}=i;n.backgroundColor&&(s.backgroundColor=n.backgroundColor),n.width&&(s.width=`${n.width}px`),n.height&&(s.height=`${n.height}px`);const o=n.style;return o!=null&&Object.keys(o).forEach(l=>{s[l]=o[l]}),i}const Nf={};async function Pf(i){let n=Nf[i];if(n!=null)return n;const o=await(await fetch(i)).text();return n={url:i,cssText:o},Nf[i]=n,n}async function Tf(i,n){let s=i.cssText;const o=/url\(["']?([^"')]+)["']?\)/g,u=(s.match(/url\([^)]+\)/g)||[]).map(async f=>{let p=f.replace(o,"$1");return p.startsWith("https://")||(p=new URL(p,i.url).href),hh(p,n.fetchRequestInit,({result:g})=>(s=s.replace(f,`url(${g})`),[f,g]))});return Promise.all(u).then(()=>s)}function Rf(i){if(i==null)return[];const n=[],s=/(\/\*[\s\S]*?\*\/)/gi;let o=i.replace(s,"");const l=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const g=l.exec(o);if(g===null)break;n.push(g[0])}o=o.replace(l,"");const u=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,f="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",p=new RegExp(f,"gi");for(;;){let g=u.exec(o);if(g===null){if(g=p.exec(o),g===null)break;u.lastIndex=p.lastIndex}else p.lastIndex=u.lastIndex;n.push(g[0])}return n}async function u0(i,n){const s=[],o=[];return i.forEach(l=>{if("cssRules"in l)try{vn(l.cssRules||[]).forEach((u,f)=>{if(u.type===CSSRule.IMPORT_RULE){let p=f+1;const g=u.href,v=Pf(g).then(y=>Tf(y,n)).then(y=>Rf(y).forEach(x=>{try{l.insertRule(x,x.startsWith("@import")?p+=1:l.cssRules.length)}catch(_){console.error("Error inserting rule from remote css",{rule:x,error:_})}})).catch(y=>{console.error("Error loading remote css",y.toString())});o.push(v)}})}catch(u){const f=i.find(p=>p.href==null)||document.styleSheets[0];l.href!=null&&o.push(Pf(l.href).then(p=>Tf(p,n)).then(p=>Rf(p).forEach(g=>{f.insertRule(g,f.cssRules.length)})).catch(p=>{console.error("Error loading remote stylesheet",p)})),console.error("Error inlining remote css file",u)}}),Promise.all(o).then(()=>(i.forEach(l=>{if("cssRules"in l)try{vn(l.cssRules||[]).forEach(u=>{s.push(u)})}catch(u){console.error(`Error while reading CSS rules from ${l.href}`,u)}}),s))}function c0(i){return i.filter(n=>n.type===CSSRule.FONT_FACE_RULE).filter(n=>gh(n.style.getPropertyValue("src")))}async function d0(i,n){if(i.ownerDocument==null)throw new Error("Provided element is not within a Document");const s=vn(i.ownerDocument.styleSheets),o=await u0(s,n);return c0(o)}function wh(i){return i.trim().replace(/["']/g,"")}function f0(i){const n=new Set;function s(o){(o.style.fontFamily||getComputedStyle(o).fontFamily).split(",").forEach(u=>{n.add(wh(u))}),Array.from(o.children).forEach(u=>{u instanceof HTMLElement&&s(u)})}return s(i),n}async function h0(i,n){const s=await d0(i,n),o=f0(i);return(await Promise.all(s.filter(u=>o.has(wh(u.style.fontFamily))).map(u=>{const f=u.parentStyleSheet?u.parentStyleSheet.href:null;return vh(u.cssText,f,n)}))).join(`
`)}async function p0(i,n){const s=n.fontEmbedCSS!=null?n.fontEmbedCSS:n.skipFonts?null:await h0(i,n);if(s){const o=document.createElement("style"),l=document.createTextNode(s);o.appendChild(l),i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o)}}async function m0(i,n={}){const{width:s,height:o}=fh(i,n),l=await eo(i,n,!0);return await p0(l,n),await yh(l,n),l0(l,n),await Ay(l,s,o)}async function g0(i,n={}){const{width:s,height:o}=fh(i,n),l=await m0(i,n),u=await Xi(l),f=document.createElement("canvas"),p=f.getContext("2d"),g=n.pixelRatio||Py(),v=n.canvasWidth||s,y=n.canvasHeight||o;return f.width=v*g,f.height=y*g,n.skipAutoScale||Ty(f),f.style.width=`${v}`,f.style.height=`${y}`,n.backgroundColor&&(p.fillStyle=n.backgroundColor,p.fillRect(0,0,f.width,f.height)),p.drawImage(u,0,0,f.width,f.height),f}async function v0(i,n={}){return(await g0(i,n)).toDataURL()}async function y0(i,n=8e3){const s=Array.from(i.querySelectorAll("img"));if(s.length===0)return;const o=s.filter(l=>!(l.complete&&l.naturalWidth>0));o.length!==0&&await new Promise(l=>{let u=0;const f=()=>{u+=1,u===o.length&&l()};setTimeout(()=>l(),n),o.forEach(p=>{const g=()=>{p.removeEventListener("load",g),f()},v=()=>{p.removeEventListener("error",v),f()};p.addEventListener("load",g),p.addEventListener("error",v)})})}function _h(){const[i,n]=E.useState(!1),[s,o]=E.useState(!1),l=E.useRef(null),u=E.useRef([]),f=E.useCallback(v=>{if(!v)return!1;const y=Array.from(v.querySelectorAll("img"));return y.length===0?!0:y.every(x=>x.complete&&x.naturalWidth>0)},[]),p=E.useCallback(v=>{if(u.current.forEach(x=>{try{x()}catch{}}),u.current=[],l.current=v,!v){o(!1);return}o(f(v)),Array.from(v.querySelectorAll("img")).forEach(x=>{const _=()=>o(f(v));x.addEventListener("load",_),x.addEventListener("error",_),u.current.push(()=>{x.removeEventListener("load",_),x.removeEventListener("error",_)})})},[f]),g=E.useCallback(async(v,y=`mockup-${Date.now()}.png`)=>{const x=v?.current||l.current;if(!(!x||i)){n(!0);try{await y0(x),await new Promise(R=>setTimeout(R,100));const _=await v0(x,{pixelRatio:2,cacheBust:!0,quality:1,backgroundColor:"#ffffff",style:{transform:"scale(1)",transformOrigin:"top left"}}),b=document.createElement("a");return b.href=_,b.download=y,document.body.appendChild(b),b.click(),document.body.removeChild(b),!0}catch(_){throw console.error("PNG export failed:",_),new Error(`Export failed: ${_.message}`)}finally{n(!1),o(f(l.current))}}},[i,f]);return{isExporting:i,imagesReady:s,exportAsPng:g,attachNode:p}}const Bi=(...i)=>i.filter(Boolean).join(" "),Vl=E.forwardRef(function({post:n,setPost:s,mode:o="create",saveAsPng:l,savingImg:u=!1,videoRef:f,clamp:p,showExport:g=!0},v){const y=E.useMemo(()=>Ce(n||{}),[n]),x=y.media?.length||0,_=y.activeIndex||0,b=y.platform==="instagram"?y.igAdFormat?y.igAdFormat.split("-")[1]:"1:1":y.fbAspectRatio||"1:1",P=E.useMemo(()=>oe=>{switch(oe){case"1:1":return"aspect-square";case"4:5":return"aspect-[4/5]";case"9:16":return"aspect-[9/16]";case"16:9":return"aspect-video";case"1.91:1":return"aspect-[1.91/1]";default:return"aspect-square"}},[])(b),A=E.useMemo(()=>{const oe=b==="9:16"||b==="4:5",ye=b==="16:9"||b==="1.91:1";return o==="present"?oe?{maxWidth:"min(400px, 85vw)",maxHeight:"85vh"}:ye?{maxWidth:"min(720px, 90vw)",maxHeight:"70vh"}:{maxWidth:"min(500px, 85vw)",maxHeight:"85vh"}:oe?{maxWidth:"min(320px, 75vw)",maxHeight:"75vh"}:ye?{maxWidth:"min(560px, 85vw)",maxHeight:"60vh"}:{maxWidth:"min(400px, 80vw)",maxHeight:"75vh"}},[b,o]),B=E.useMemo(()=>p?{width:"100%",maxWidth:`min(${p.maxPx||560}px, ${p.maxVmin||80}vmin)`}:{width:"100%",...A},[p,A]),{isExporting:U,imagesReady:I,exportAsPng:q,attachNode:W}=_h?.()||{isExporting:u,imagesReady:!0,exportAsPng:l,attachNode:null};E.useEffect(()=>{_>Math.max(0,x-1)&&s(oe=>({...Ce(oe),activeIndex:Math.max(0,x-1)}))},[_,x,s]);const L=E.useCallback(oe=>{s(ye=>{const Pe=Ce(ye),H=Pe.media?.length||0;if(H<2)return Pe;const re=oe==="prev"?((Pe.activeIndex||0)-1+H)%H:((Pe.activeIndex||0)+1)%H;return{...Pe,activeIndex:re}})},[s]),F=E.useCallback(()=>L("prev"),[L]),te=E.useCallback(()=>L("next"),[L]);return E.useEffect(()=>{if(o!=="present")return;const oe=ye=>{ye.key==="ArrowLeft"&&F(),ye.key==="ArrowRight"&&te()};return window.addEventListener("keydown",oe),()=>window.removeEventListener("keydown",oe)},[o,F,te]),E.useEffect(()=>{W&&v?.current&&W(v.current)},[W,v,y.media,y.videoSrc,y.platform,_]),h.jsxs("div",{className:Bi(y.platform==="instagram"?"ig-ui":"fb-ui","h-full flex flex-col"),children:[g?h.jsx("div",{className:"flex justify-end mb-2 flex-shrink-0",children:h.jsx("button",{className:Bi("btn-outline",(U||!I)&&"opacity-50 cursor-not-allowed"),disabled:U||!I,onClick:()=>q(v),title:I?"Export PNG":"Waiting for images to load...",children:U?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"w-4 h-4 mr-2 border-2 border-slate-500 border-t-transparent rounded-full animate-spin"}),"Exporting..."]}):I?"Export PNG":"Loading images..."})}):null,h.jsx("div",{className:"flex-1 flex items-center justify-center overflow-hidden p-2",children:h.jsx("div",{className:"w-full h-full flex items-center justify-center",children:h.jsx("div",{className:"mx-auto flex-shrink-0",style:B,children:h.jsxs("div",{ref:v,className:"card p-0 overflow-hidden w-full",children:[h.jsxs("div",{className:"flex items-center gap-3 p-3",children:[h.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-200 overflow-hidden shrink-0",children:y.brand?.profileSrc?h.jsx("img",{src:y.brand.profileSrc,alt:"",className:"w-full h-full object-cover",draggable:!1}):null}),h.jsxs("div",{className:"min-w-0",children:[h.jsxs("div",{className:"brand-name font-medium truncate",children:[y.brand?.name||y.brand?.username||"Brand",y.brand?.verified?h.jsx("span",{className:"ml-1 align-middle text-sky-500",children:""}):null]}),h.jsx("div",{className:"meta text-xs text-slate-500 truncate",children:y.platform==="instagram"?`@${y.brand?.username||"username"}`:"Facebook  Now"})]})]}),y.caption?h.jsx("div",{className:"px-3 pb-3",children:h.jsx("div",{className:"whitespace-pre-wrap text-sm",children:y.caption})}):null,h.jsx("div",{className:"w-full",children:h.jsxs("div",{className:Bi("relative border-t border-b bg-black/5",P),children:[y.type==="video"&&y.videoSrc?h.jsx("video",{ref:f,src:y.videoSrc,className:"absolute inset-0 w-full h-full object-cover",autoPlay:y.playing,muted:y.muted,loop:!0,playsInline:!0}):x>0?h.jsx("img",{src:y.media[_],alt:"",className:"absolute inset-0 w-full h-full object-cover",draggable:!1}):h.jsx("div",{className:"absolute inset-0 grid place-items-center text-sm text-slate-500",children:"Add media"}),y.type!=="video"&&x>0&&(y.mediaMeta?.[_]?.headline||"").trim()?h.jsx("div",{className:"absolute left-3 top-3 bg-white/90 px-2 py-1 rounded shadow text-sm",children:y.mediaMeta[_].headline}):null,y.type!=="video"&&x>1?h.jsxs("div",{className:"absolute inset-0 p-2 pointer-events-none",children:[h.jsxs("div",{className:"h-full flex items-center justify-between",children:[h.jsx("button",{type:"button",className:"pointer-events-auto w-8 h-8 rounded-full bg-white/90 ring-1 ring-black/10 flex items-center justify-center",onClick:F,"aria-label":"Previous",children:""}),h.jsx("button",{type:"button",className:"pointer-events-auto w-8 h-8 rounded-full bg-white/90 ring-1 ring-black/10 flex items-center justify-center",onClick:te,"aria-label":"Next",children:""})]}),h.jsx("div",{className:"pointer-events-none absolute bottom-2 left-0 right-0 flex justify-center gap-1",children:Array.from({length:x}).map((oe,ye)=>h.jsx("span",{className:Bi("inline-block w-1.5 h-1.5 rounded-full",ye===_?"bg-white shadow":"bg-white/60")},ye))})]}):null]})}),y.platform==="facebook"&&(y.link?.headline||y.link?.subhead||y.link?.url)?h.jsx("div",{className:"px-3 py-3",children:h.jsx("a",{href:y.link?.url||"#",className:"block border rounded-lg overflow-hidden hover:bg-slate-50 transition",onClick:oe=>oe.preventDefault(),children:h.jsxs("div",{className:"p-3",children:[h.jsx("div",{className:"link-headline font-medium truncate",children:y.link?.headline||"Link headline"}),h.jsx("div",{className:"link-subhead text-sm text-slate-600 truncate",children:y.link?.subhead||"Add a subhead"}),h.jsx("div",{className:"mt-2 text-xs text-slate-500 truncate",children:w0(y.link?.url)}),h.jsx("div",{className:"mt-3",children:h.jsx("span",{className:"cta inline-block px-3 py-1 rounded bg-slate-900 text-white text-sm",children:y.link?.cta||"Learn More"})})]})})}):null,h.jsx("div",{className:"px-3 py-2 border-t text-xs text-slate-500 flex items-center gap-4",children:["likes","comments","shares","saves","views"].map(oe=>y.metrics?.[oe]?h.jsxs("span",{children:[_0(oe)," ",x0(y.metrics[oe])]},oe):null)})]})})})}),h.jsx("style",{children:`
        .aspect-square { aspect-ratio: 1 / 1; }
        .aspect-video { aspect-ratio: 16 / 9; }
        .aspect-\\[4\\/5\\] { aspect-ratio: 4 / 5; }
        .aspect-\\[9\\/16\\] { aspect-ratio: 9 / 16; }
        .aspect-\\[1\\.91\\/1\\] { aspect-ratio: 1.91 / 1; }
      `})]})});function w0(i){if(!i)return"";try{return new URL(i).hostname.replace(/^www\./,"")}catch{return""}}function _0(i){switch(i){case"likes":return"Likes";case"comments":return"Comments";case"shares":return"Shares";case"saves":return"Saves";case"views":return"Views";default:return""}}function x0(i){try{const n=Number(i||0);return n>=1e6?`${(n/1e6).toFixed(1)}M`:n>=1e3?`${(n/1e3).toFixed(1)}k`:`${n}`}catch{return`${i}`}}function k0({open:i,onClose:n,onOpenDeckManager:s,onOpenBrandsPage:o}){return E.useEffect(()=>{if(!i)return;const l=u=>u.key==="Escape"&&n?.();return window.addEventListener("keydown",l),()=>window.removeEventListener("keydown",l)},[i,n]),i?h.jsxs("div",{id:"app-menu-drawer",className:"fixed inset-0 z-[100]",children:[h.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:n}),h.jsxs("aside",{role:"dialog","aria-modal":"true",className:`absolute left-0 top-0 h-full w-80 max-w-[85vw] bg-white shadow-xl border-r
                   transform transition-transform duration-200 ease-out translate-x-0`,children:[h.jsxs("div",{className:"flex items-center justify-between px-4 h-14 border-b",children:[h.jsx("div",{className:"font-medium",children:"Menu"}),h.jsx("button",{className:"btn-outline",onClick:n,"aria-label":"Close menu",children:"Close"})]}),h.jsxs("nav",{className:"p-3 space-y-1",children:[h.jsx("button",{className:"w-full text-left px-3 py-2 rounded hover:bg-slate-100",onClick:()=>{s?.(),n?.()},children:"Decks"}),h.jsx("button",{className:"w-full text-left px-3 py-2 rounded hover:bg-slate-100",onClick:()=>{o?.(),n?.()},children:"Brands"})]})]})]}):null}function S0({userId:i,open:n,onClose:s,onPick:o}){const[l,u]=E.useState(!1),[f,p]=E.useState(!1),[g,v]=E.useState([]),[y,x]=E.useState(null),[_,b]=E.useState(""),[R,P]=E.useState(!1);E.useEffect(()=>{if(!n)return;console.log("DeckPickerV3 mounted");let U=!0;return(async()=>{if(i){u(!0);try{const I=await Rr(i);if(!U)return;v(I),x(q=>q??(I?.[0]?.id?String(I[0].id):null))}catch(I){console.error(I),alert("Could not load decks.")}finally{U&&u(!1)}}})(),()=>{U=!1}},[n,i]);async function A(){const U=_.trim();if(U){if(!i){alert("Please sign in first.");return}P(!0);try{const I=await Ml(i,U),q=await Rr(i);v(q),x(String(I.id)),b("")}catch(I){console.error(I),alert("Could not create deck.")}finally{P(!1)}}}async function B(){if(!y){alert("Pick a deck first.");return}if(typeof o!="function"){alert("Save handler missing.");return}p(!0);try{await o(y),s?.()}catch(U){console.error(U),alert("Could not save to deck.")}finally{p(!1)}}return n?h.jsxs("div",{className:"fixed inset-0 z-[200]",id:"deck-picker-v3","data-version":"v3",style:{outline:"2px dashed #046BD9"},children:[h.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:s}),h.jsxs("div",{role:"dialog","aria-modal":"true",className:`absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2
                   w-[92vw] max-w-[560px] bg-white rounded-xl shadow-xl border`,children:[h.jsxs("div",{className:"flex items-center justify-between px-4 h-14 border-b",children:[h.jsx("div",{className:"font-medium",children:"Save to deck  v3"}),h.jsx("button",{className:"btn-outline",onClick:s,children:"Close"})]}),h.jsxs("div",{className:"p-4 space-y-4",children:[h.jsxs("div",{children:[h.jsx("div",{className:"label-strong mb-2",children:"Choose a deck"}),h.jsx("div",{className:"max-h-60 overflow-auto border rounded",children:l?h.jsx("div",{className:"p-3 text-sm text-app-muted",children:"Loading"}):g.length===0?h.jsx("div",{className:"p-3 text-sm text-app-muted",children:"No decks yet."}):h.jsx("ul",{className:"divide-y",children:g.map(U=>{const I=String(U.id),q=y===I;return h.jsx("li",{role:"radio","aria-checked":q,tabIndex:0,className:`outline-none ${q?"bg-slate-50":"hover:bg-slate-50"}`,onClick:()=>x(I),onKeyDown:W=>{(W.key==="Enter"||W.key===" ")&&(W.preventDefault(),x(I))},children:h.jsxs("div",{className:"flex items-center gap-3 px-3 py-2 cursor-pointer w-full",children:[h.jsx("span",{"aria-hidden":"true",className:"inline-block",style:{width:16,height:16,borderRadius:9999,border:`1px solid ${q?"var(--brand-500)":"var(--app-border)"}`,background:q?"var(--brand-500)":"white",boxShadow:q?"0 0 0 3px rgba(4,107,217,0.20)":"none",flex:"0 0 auto"}}),h.jsxs("div",{className:"min-w-0",children:[h.jsx("div",{className:"font-medium truncate",children:U.title}),h.jsx("div",{className:"text-xs text-app-muted",children:new Date(U.created_at).toLocaleString()})]})]})},I)})})})]}),h.jsxs("div",{children:[h.jsx("div",{className:"label-strong mb-2",children:"Or create a new deck"}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("input",{className:"input flex-1 min-w-0",placeholder:"Deck title",value:_,onChange:U=>b(U.target.value),onKeyDown:U=>{U.key==="Enter"&&A()}}),h.jsx("button",{className:"btn-outline",onClick:A,disabled:R||!_.trim(),children:R?"Creating":"Create"})]})]})]}),h.jsxs("div",{className:"px-4 py-3 border-t flex items-center justify-end gap-2",children:[h.jsx("button",{className:"btn-outline",onClick:s,children:"Cancel"}),h.jsx("button",{className:"btn",onClick:B,disabled:f||!y,children:f?"Saving":"Save here"})]})]})]}):null}function b0({open:i,onClose:n,post:s,onLoadToEditor:o}){if(!i)return null;const[l,u]=E.useState(()=>Ce(s||{})),f=E.useRef(null);return E.useEffect(()=>{u(Ce(s||{}))},[s]),h.jsxs("div",{className:"fixed inset-0 z-[300]",children:[h.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:n}),h.jsx("div",{className:"absolute inset-0 p-4 flex items-center justify-center",children:h.jsxs("div",{className:"w-[96vw] max-w-[1000px] max-h-[92vh] bg-white rounded-2xl shadow-xl border overflow-hidden flex flex-col",children:[h.jsxs("div",{className:"flex items-center justify-between px-4 h-14 border-b",children:[h.jsx("div",{className:"font-medium",children:"Post preview"}),h.jsxs("div",{className:"flex items-center gap-2",children:[typeof o=="function"?h.jsx("button",{className:"btn-outline",onClick:()=>o(l),children:"Load in editor"}):null,h.jsx("button",{className:"btn-outline",onClick:n,children:"Close"})]})]}),h.jsx("div",{className:"p-4 overflow-auto",children:h.jsx(Vl,{ref:f,post:l,setPost:u,mode:"present",clamp:{maxVmin:72,maxPx:560},showExport:!1,saveAsPng:()=>{},savingImg:!1})})]})})]})}const j0=(...i)=>i.filter(Boolean).join(" ");function E0({userId:i,currentPost:n,onBack:s,onPresent:o,onLoadToEditor:l}){const[u,f]=E.useState({decks:[],items:[],activeId:null,loading:{decks:!0,items:!1,operations:new Set},error:null}),[p,g]=E.useState(!1),[v,y]=E.useState(null),{decks:x,items:_,activeId:b,loading:R}=u,P=E.useMemo(()=>x.find(W=>String(W.id)===b)||null,[x,b]);E.useEffect(()=>{let W=!0;return(async()=>{if(!i){W&&f(F=>({...F,decks:[],loading:{...F.loading,decks:!1}}));return}try{const F=await Rr(i);if(!W)return;f(te=>({...te,decks:F,activeId:F.length&&!te.activeId?String(F[0].id):te.activeId,loading:{...te.loading,decks:!1},error:null}))}catch(F){console.error("Load decks error:",F),W&&f(te=>({...te,loading:{...te.loading,decks:!1},error:F.message}))}})(),()=>{W=!1}},[i]),E.useEffect(()=>{let W=!0;return(async()=>{if(!b){W&&f(F=>({...F,items:[]}));return}f(F=>({...F,loading:{...F.loading,items:!0}}));try{const F=await Pr(b);W&&f(te=>({...te,items:F,loading:{...te.loading,items:!1},error:null}))}catch(F){console.error("Load items error:",F),W&&f(te=>({...te,loading:{...te.loading,items:!1},error:F.message}))}})(),()=>{W=!1}},[b]);const A=E.useCallback(async()=>{if(!n||!b)return;const W="add-current";f(L=>({...L,loading:{...L.loading,operations:new Set(L.loading.operations).add(W)}}));try{await jl(b,Ce(n));const L=await Pr(b);f(F=>({...F,items:L,error:null}))}catch(L){console.error("Add current error:",L),alert("Could not add post.")}finally{f(L=>{const F=new Set(L.loading.operations);return F.delete(W),{...L,loading:{...L.loading,operations:F}}})}},[n,b]);async function B(W){if(W&&confirm("Delete this deck and all posts in it?"))try{await ah(W);const L=await Rr(i);setDecks(L),L.length?setActiveId(String(L[0].id)):(setActiveId(null),setItems([]))}catch(L){console.error(L),alert("Could not delete deck.")}}async function U(W){if(W)try{await iy(W);const L=await Pr(b);setItems(L)}catch(L){console.error(L),alert("Could not delete post.")}}async function I(){if(P)try{const W=await ly(P.id,{days:7}),L=`${window.location.origin}/s/${encodeURIComponent(W)}`;navigator.clipboard&&window.isSecureContext?(await navigator.clipboard.writeText(L),alert(`Share link copied to clipboard!

URL: ${L}

Note: Make sure your app has a route handler for /s/:token`)):prompt("Copy this share link:",L),console.log("Share link created:",L)}catch(W){console.error("Share link error:",W),alert(`Could not create share link. Error: ${W.message}`)}}function q(W){y(Ce(W||{})),g(!0)}return h.jsxs("div",{className:"panel w-full overflow-hidden flex flex-col",children:[h.jsxs("div",{className:"panel-header flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs("button",{className:"btn-outline",onClick:s,children:[h.jsx(If,{className:"w-4 h-4 mr-1"}),"Back"]}),h.jsx("div",{className:"font-medium text-app-strong",children:"Manage decks"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs("button",{className:"btn-outline",disabled:!P,onClick:()=>P&&o?.(P.id),title:"Start presentation from this deck",children:[h.jsx(Vm,{className:"w-4 h-4 mr-1"}),"Present"]}),h.jsxs("button",{className:"btn-outline",disabled:!P,onClick:I,title:"Create a public preview link (requires /s/:token route)",children:[h.jsx(zm,{className:"w-4 h-4 mr-1"}),"Share"]}),n&&h.jsxs("button",{className:"btn-outline",disabled:!P,onClick:A,title:"Add the current editor post to this deck",children:[h.jsx(Plus,{className:"w-4 h-4 mr-1"}),"Add current post"]}),h.jsxs("button",{className:"btn-outline",disabled:!P,onClick:()=>P&&B(P.id),title:"Delete this deck",children:[h.jsx(Dn,{className:"w-4 h-4 mr-1"}),"Delete deck"]})]})]}),h.jsx("div",{className:"bg-app-surface p-4",children:h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[h.jsxs("div",{className:"card p-0 overflow-hidden",children:[h.jsx("div",{className:"px-3 py-2 border-b text-xs uppercase tracking-wide label-strong",children:"Your decks"}),h.jsx("div",{className:"max-h-[60vh] overflow-auto",children:R.decks?h.jsx("div",{className:"p-3 text-sm text-app-muted",children:"Loading..."}):x.length===0?h.jsx("div",{className:"p-3 text-sm text-app-muted",children:"No decks yet"}):h.jsx("ul",{className:"divide-y",role:"radiogroup","aria-label":"Decks",children:x.map(W=>{const L=String(W.id),F=b===L;return h.jsx("li",{role:"radio","aria-checked":F,tabIndex:0,className:j0("px-3 py-2 cursor-pointer outline-none",F?"bg-slate-50":"hover:bg-slate-50"),onClick:()=>f(te=>({...te,activeId:L})),onKeyDown:te=>{(te.key==="Enter"||te.key===" ")&&(te.preventDefault(),f(oe=>({...oe,activeId:L})))},children:h.jsxs("div",{className:"flex items-center justify-between gap-3",children:[h.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[h.jsx("span",{"aria-hidden":"true",className:"inline-block",style:{width:16,height:16,borderRadius:9999,border:`1px solid ${F?"var(--brand-500)":"var(--app-border)"}`,background:F?"var(--brand-500)":"white",boxShadow:F?"0 0 0 3px rgba(4,107,217,0.20)":"none",flex:"0 0 auto"}}),h.jsxs("div",{className:"min-w-0",children:[h.jsx("div",{className:"font-medium truncate",children:W.title}),h.jsx("div",{className:"text-app-muted text-xs",children:new Date(W.created_at).toLocaleString()})]})]}),h.jsx("div",{className:"chip",children:W.count??""})]})},L)})})})]}),h.jsxs("div",{className:"md:col-span-2 card p-0 overflow-hidden",children:[h.jsx("div",{className:"px-3 py-2 border-b text-xs uppercase tracking-wide label-strong",children:P?P.title:"Deck items"}),R.items?h.jsx("div",{className:"p-4 text-sm text-app-muted",children:"Loading..."}):P?_.length===0?h.jsx("div",{className:"p-4 text-sm text-app-muted",children:'This deck has no posts. Create posts in the editor and use "Save to deck" to add them.'}):h.jsx("ul",{className:"p-3 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:_.map(W=>{const L=Ce(W.post_json||{}),F=L.type==="video"?"video":(L.media?.length||0)>1?"carousel":"single",te=F==="video"?fl:F==="carousel"?Fm:Nr,oe=L.type==="video"&&L.videoSrc?L.videoSrc:L.media?.[0]||"",ye=(L.brand?.name||L.brand?.username||"Post")+"  "+(L.platform||"facebook")+"  "+(L.type||"single");return h.jsxs("li",{className:"border border-app rounded-lg overflow-hidden cursor-pointer",onClick:()=>q(L),children:[h.jsxs("div",{className:"relative aspect-square bg-app-muted",children:[oe?L.type==="video"?h.jsx("video",{src:oe,className:"absolute inset-0 w-full h-full object-cover",muted:!0,playsInline:!0,preload:"metadata"}):h.jsx("img",{src:oe,className:"absolute inset-0 w-full h-full object-cover",alt:"",draggable:!1}):h.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-app-muted text-sm",children:"No media"}),h.jsxs("div",{className:"absolute right-2 top-2 bg-black/70 text-white rounded-full px-2 py-0.5 flex items-center gap-1",children:[h.jsx(te,{className:"w-4 h-4"}),F==="carousel"?h.jsx("span",{className:"text-xs",children:L.media?.length||0}):null]})]}),h.jsxs("div",{className:"p-2",children:[h.jsx("div",{className:"text-sm truncate",children:ye}),h.jsx("div",{className:"text-app-muted text-xs",children:new Date(W.created_at).toLocaleString()}),h.jsx("div",{className:"flex items-center justify-end gap-2 mt-2",children:h.jsxs("button",{className:"chip",onClick:Pe=>{Pe.stopPropagation(),U(W.id)},title:"Remove from deck",children:[h.jsx(Dn,{className:"w-3 h-3 mr-1"}),"Remove"]})})]})]},W.id)})}):h.jsx("div",{className:"p-4 text-sm text-app-muted",children:"Pick a deck"})]})]})}),h.jsx(b0,{open:p,onClose:()=>g(!1),post:v,onLoadToEditor:l})]})}const C0=E.memo(function({userId:n,onBack:s,onOpenBrandManager:o}){const{brands:l,saveBrand:u,removeBrand:f,loading:p,error:g}=$l(n),[v,y]=E.useState("");E.useEffect(()=>{g&&console.error("Brands loading error:",g)},[g]);const x=E.useCallback(async(P,A)=>{try{await u({...A,id:P})}catch(B){throw console.error("Edit failed:",B),alert("Could not save changes: "+(B.message||"Unknown error")),B}},[u]),_=E.useCallback(async P=>{try{await f(P)}catch(A){console.error("Delete failed:",A),alert("Could not delete brand: "+(A.message||"Unknown error"))}},[f]),b=E.useCallback(async P=>{try{const A={fb_name:P.fb_name,fb_avatar_url:P.fb_avatar_url,ig_username:P.ig_username,ig_avatar_url:P.ig_avatar_url,verified:!P.verified};await u({...A,id:P.id})}catch(A){console.error("Toggle verified failed:",A),alert("Could not update verification status: "+(A.message||"Unknown error"))}},[u]),R=E.useMemo(()=>{const P=v.trim().toLowerCase();return P?l.filter(A=>{const B=Wi(A).toLowerCase(),U=bl(A).toLowerCase(),I=(A.fb_name||"").toLowerCase(),q=(A.ig_username||"").toLowerCase();return B.includes(P)||U.includes(P)||I.includes(P)||q.includes(P)}):l},[l,v]);return h.jsxs("div",{className:"panel w-full overflow-hidden flex flex-col",children:[h.jsxs("div",{className:"panel-header flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs("button",{className:"btn-outline",onClick:s,children:[h.jsx(If,{className:"w-4 h-4 mr-1"}),"Back"]}),h.jsx("div",{className:"font-medium text-app-strong",children:"Manage brands"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("input",{className:"input",placeholder:"Search brands",value:v,onChange:P=>y(P.target.value)}),h.jsxs("button",{className:"btn",onClick:o,children:[h.jsx(Wm,{className:"w-4 h-4 mr-1"}),"New brand"]})]})]}),h.jsx("div",{className:"bg-app-surface p-4 w-full",children:p?h.jsx("div",{className:"text-sm text-app-muted",children:"Loading brands..."}):g?h.jsxs("div",{className:"text-sm text-red-600",children:["Error loading brands: ",g]}):R.length===0?h.jsx("div",{className:"text-sm text-app-muted",children:v?`No brands found matching "${v}"`:"No brands yet."}):h.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:R.map(P=>h.jsx(ih,{brand:P,onEdit:x,onDelete:_,onToggleVerified:b,showActions:!0,showVerifiedToggle:!0,showInlineEdit:!0,compact:!1,disabled:!1},P.id))})})]})}),N0=E.memo(function({posts:n=[],initialIndex:s=0,onClose:o,showPlatformTags:l=!0}){const[u,f]=E.useState(s),p=E.useMemo(()=>n[Math.min(u,n.length-1)]||{},[n,u]),g=by(p),v=E.useMemo(()=>{const _=g.platform||"facebook";return{platform:_,display:_==="instagram"?"Instagram":"Facebook",colorClass:_==="instagram"?"bg-gradient-to-r from-purple-500 via-pink-500 to-orange-400":"bg-blue-600"}},[g.platform]),y=E.useCallback(()=>{f(_=>n.length>0?(_-1+n.length)%n.length:0)},[n.length]),x=E.useCallback(()=>{f(_=>n.length>0?(_+1)%n.length:0)},[n.length]);return E.useEffect(()=>{if(!n.length)return;const _=b=>{b.key==="ArrowLeft"&&y(),b.key==="ArrowRight"&&x(),b.key==="Escape"&&o&&o()};return window.addEventListener("keydown",_),()=>window.removeEventListener("keydown",_)},[n.length,y,x,o]),n.length?h.jsxs("div",{className:"h-full flex flex-col items-center justify-center bg-app-surface p-4",children:[n.length>1&&h.jsxs("div",{className:"mb-2 text-sm text-app-muted",children:[u+1," / ",n.length]}),l&&h.jsx("div",{className:"mb-4",children:h.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-white text-xs font-medium ${v.colorClass}`,children:v.display})}),h.jsx("div",{className:"flex-1 flex items-center justify-center w-full max-w-none overflow-hidden px-4",children:h.jsx("div",{className:"w-full h-full flex items-center justify-center",children:h.jsx(Vl,{post:g,setPost:()=>{},mode:"present",clamp:null,showExport:!1})})}),n.length>1&&h.jsxs("div",{className:"flex items-center gap-2 mt-4",children:[h.jsxs("button",{className:"btn-outline flex items-center",onClick:y,title:"Previous post ()",children:[h.jsx(Om,{className:"w-4 h-4 mr-1"}),"Prev"]}),h.jsxs("button",{className:"btn flex items-center",onClick:x,title:"Next post ()",children:["Next",h.jsx(Lm,{className:"w-4 h-4 ml-1"})]})]}),o&&h.jsx("div",{className:"mt-2",children:h.jsx("button",{className:"btn-outline text-xs",onClick:o,title:"Exit present mode (Esc)",children:"Back to Editor"})})]}):h.jsx("div",{className:"h-full flex items-center justify-center",children:h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"text-app-muted mb-4",children:"No posts to present"}),o&&h.jsx("button",{className:"btn-outline",onClick:o,children:"Back to Editor"})]})})}),Af=()=>Math.random().toString(36).slice(2,10);function P0(){const[i,n]=E.useState(()=>Ce(ch)),[s,o]=E.useState([]),[l,u]=E.useState({mode:"create",page:"editor"}),[f,p]=E.useState({posts:[],currentIndex:0}),[g,v]=E.useState({menuOpen:!1,brandManagerOpen:!1,deckManagerOpen:!1,deckPickerOpen:!1}),y=E.useRef(null),x=E.useRef(null),{isExporting:_,imagesReady:b,exportAsPng:R,attachNode:P}=_h();E.useEffect(()=>{P(y.current)},[P]);const[A,B]=E.useState(null),U=E.useMemo(()=>A?{id:A}:null,[A]);E.useEffect(()=>{let O=!0;ve.auth.getUser().then(({data:Q})=>{O&&B(Q?.user?.id??null)});const{data:K}=ve.auth.onAuthStateChange((Q,ie)=>{O&&B(ie?.user?.id??null)});return()=>{O=!1,K?.subscription?.unsubscribe?.()}},[]);const I=E.useCallback(O=>{n(K=>{const Q=typeof O=="function"?O(Ce(K)):{...K,...O};return Ce(Q)})},[]),q=E.useCallback(async()=>{let O=A;if(!O){const{data:K}=await ve.auth.getUser();O=K?.user?.id??null,O&&B(O)}return O||(alert("Please sign in first."),null)},[A]),W=E.useCallback(O=>{u(K=>({...K,page:O}))},[]),L=E.useCallback(async O=>{const K=Array.from(O||[]).slice(0,5);if(!K.length)return;const Q=await Promise.all(K.map(ie=>new Promise((se,Re)=>{const ct=new FileReader;ct.onload=()=>se(ct.result),ct.onerror=Re,ct.readAsDataURL(ie)})));n(ie=>{const se=Ce(ie),Re=[...se.media||[],...Q].slice(0,5),ct=se.type==="video"?"single":Re.length>1?"carousel":"single",$t=Array.from({length:Re.length},(no,Mn)=>se.mediaMeta?.[Mn]||{headline:""});return Ce({...se,media:Re,mediaMeta:$t,type:ct,videoSrc:""})})},[]),F=E.useCallback(async O=>{if(!O)return;const K=await new Promise((Q,ie)=>{const se=new FileReader;se.onload=()=>Q(se.result),se.onerror=ie,se.readAsDataURL(O)});n(Q=>Ce({...Q,videoSrc:K,type:"video"}))},[]),te=E.useCallback(()=>{n(O=>Ce({...O,videoSrc:"",type:"single"}))},[]),oe=E.useCallback(O=>{n(K=>{const Q=Ce(K),ie=(Q.media||[]).slice();if(O<0||O>=ie.length)return Q;ie.splice(O,1);const se=(Q.mediaMeta||[]).slice();se.splice(O,1);const Re=ie.length>1?"carousel":"single",ct=Math.max(0,Math.min(Q.activeIndex||0,(ie.length||1)-1));return Ce({...Q,media:ie,mediaMeta:se,type:Q.type==="video"?"video":Re,activeIndex:ct})})},[]),ye=E.useCallback(async O=>{O.preventDefault(),O.stopPropagation();const K=O.dataTransfer;if(!K)return;const Q=[];let ie=null;for(const se of Array.from(K.files||[]))se.type.startsWith("image/")?Q.push(se):!ie&&se.type.startsWith("video/")&&(ie=se);Q.length&&await L(Q),ie&&await F(ie)},[L,F]),Pe=E.useCallback(O=>{const K={id:Af(),createdAt:Date.now(),post:Ce(O||i)};o(Q=>[K,...Q])},[i]),H=E.useCallback(O=>{o(K=>{const Q=K.find(se=>se.id===O);return Q?[{...Q,id:Af(),createdAt:Date.now()},...K]:K})},[]),re=E.useCallback(O=>{o(K=>{const Q=K.find(ie=>ie.id===O);return Q&&n(Ce(Q.post)),K})},[]),_e=E.useCallback(O=>{o(K=>K.filter(Q=>Q.id!==O))},[]),ke=E.useCallback(async O=>{try{const Q=(await Pr(O)).map(ie=>ie.post_json);p({posts:Q,currentIndex:0}),u({page:"editor",mode:"present"}),Q.length&&n(Ce(Q[0]))}catch(K){console.error(K),alert("Could not open deck.")}},[]),Te=E.useCallback(()=>{if(s.length===0){alert("Add some posts to your deck first to start presenting.");return}const O=s.map(K=>K.post);p({posts:O,currentIndex:0}),u(K=>({...K,mode:"present"})),O.length&&n(Ce(O[0]))},[s]),me=E.useCallback(()=>{u(O=>({...O,mode:"create"})),p({posts:[],currentIndex:0})},[]),G=E.useCallback(async({deckId:O}={})=>{const K=await q();if(!K)return;let Q=O||null;try{if(!Q){const se=(prompt("Save to which deck title? If it does not exist, it will be created.")||"").trim();if(!se)return;const ct=(await Rr(K)).find($t=>$t.title.toLowerCase()===se.toLowerCase());ct?Q=ct.id:Q=(await Ml(K,se)).id}const ie=Ce(i);await jl(Q,ie),alert("Saved to deck.")}catch(ie){console.error(ie),alert("Could not save to deck.")}},[i,q]),ae=E.useCallback(async()=>{await q()&&v(K=>({...K,deckPickerOpen:!0}))},[q]),S=E.useCallback(async O=>{try{const K=Ce(i);await jl(O,K),v(Q=>({...Q,deckPickerOpen:!1})),alert("Saved to deck.")}catch(K){console.error(K),alert("Could not save to deck.")}},[i]),D=E.useCallback(async()=>{try{await R(y)}catch{alert("PNG export failed. Check console for details.")}},[R]),ne=E.useMemo(()=>s.length>0,[s.length]),pe=E.useCallback(()=>{l.mode==="present"?me():Te()},[l.mode,me,Te]);return h.jsxs(E.Fragment,{children:[h.jsx(dy,{singleColumn:l.page==="decks"||l.page==="brands",topBarProps:{mode:l.mode,setMode:O=>u(K=>({...K,mode:O})),onExportPNG:D,user:U,onOpenMenu:()=>v(O=>({...O,menuOpen:!0})),openDeckManager:()=>W("decks"),openDeckPicker:ae,canPresent:ne,onStartPresent:pe,exportDisabled:!b||_},leftPanel:l.page==="decks"?h.jsx(E0,{userId:A,currentPost:null,onBack:()=>W("editor"),onPresent:ke}):l.page==="brands"?h.jsx(C0,{userId:A,onBack:()=>W("editor"),onOpenBrandManager:()=>v(O=>({...O,brandManagerOpen:!0}))}):l.mode==="present"?null:h.jsx(hy,{user:U,post:i,update:I,onDrop:ye,handleImageFiles:L,handleVideoFile:F,clearVideo:te,removeImageAt:oe,addToDeck:Pe,duplicateToDeck:H,deck:s,loadFromDeck:re,deleteFromDeck:_e,startPresentingDeck:Te,loadingDeck:!1,openBrandManager:()=>v(O=>({...O,brandManagerOpen:!0})),saveToDeck:G,openDeckPicker:ae}),rightPreview:l.page!=="editor"?null:l.mode==="present"?h.jsx(N0,{posts:f.posts,initialIndex:f.currentIndex,onClose:me,showPlatformTags:!0}):h.jsx(Vl,{ref:y,post:i,setPost:n,mode:l.mode,saveAsPng:D,savingImg:_,videoRef:x,showExport:!0}),modals:{brandManagerOpen:g.brandManagerOpen,onCloseBrandManager:()=>v(O=>({...O,brandManagerOpen:!1})),deckManagerOpen:g.deckManagerOpen,onCloseDeckManager:()=>v(O=>({...O,deckManagerOpen:!1})),deckManagerOnOpenForPresent:O=>{v(K=>({...K,deckManagerOpen:!1})),u(K=>({...K,mode:"present"})),O?.posts?.length&&(p({posts:O.posts,currentIndex:0}),n(Ce(O.posts[0])))}}}),h.jsx(k0,{open:g.menuOpen,onClose:()=>v(O=>({...O,menuOpen:!1})),onOpenDeckManager:()=>W("decks"),onOpenBrandsPage:()=>W("brands")}),h.jsx(S0,{userId:A,open:g.deckPickerOpen,onClose:()=>v(O=>({...O,deckPickerOpen:!1})),onPick:S})]})}function T0(){const[i,n]=E.useState(!1);async function s(){try{n(!0);const{error:o}=await ve.auth.signInWithOAuth({provider:"google",options:{redirectTo:window.location.origin}});if(o)throw o}catch(o){console.error("OAuth error:",o),alert("Sign-in failed. Check console."),n(!1)}}return h.jsx("div",{className:"min-h-screen flex items-center justify-center p-6",children:h.jsxs("div",{className:"panel max-w-sm w-full p-6 text-center",children:[h.jsx("h1",{className:"h2 mb-2",children:"Sign in"}),h.jsx("p",{className:"muted mb-6",children:"Use your Google account to continue."}),h.jsx("button",{className:"btn w-full",onClick:s,disabled:i,children:i?"Redirecting...":"Continue with Google"}),h.jsx("p",{className:"text-xs text-app-muted mt-3",children:"Redirect URL must match your Supabase Auth settings."})]})})}function R0({children:i}){const{user:n,loading:s}=Dl();return s?h.jsx("div",{className:"min-h-screen grid place-items-center",children:h.jsx("div",{className:"panel p-6",children:"Loading"})}):n?i:h.jsx(T0,{})}async function to(){const{data:{session:i}}=await ve.auth.getSession();return i?.user||null}async function A0(){const i=await to();if(!i)return null;const{data:n,error:s}=await ve.from("profiles").select("*").eq("id",i.id).single();if(s&&s.code!=="PGRST116")throw s;return n||null}async function O0(){const i=await to();if(!i)return null;const n={id:i.id,display_name:i.user_metadata?.full_name||i.user_metadata?.name||i.email?.split("@")[0]||"User",avatar_url:i.user_metadata?.avatar_url||null},{data:s,error:o}=await ve.from("profiles").upsert({...n,updated_at:new Date().toISOString()}).select("*").single();if(o)throw o;return s}async function L0({display_name:i,avatar_url:n}){const s=await to();if(!s)throw new Error("Not signed in");const{data:o,error:l}=await ve.from("profiles").update({display_name:i,avatar_url:n,updated_at:new Date().toISOString()}).eq("id",s.id).select("*").single();if(l)throw l;return o}async function I0(i){const n=await to();if(!n)throw new Error("Not signed in");const s=`${n.id}/${Date.now()}_${i.name}`,{error:o}=await ve.storage.from("avatars").upload(s,i,{cacheControl:"3600",upsert:!0,contentType:i.type});if(o)throw o;const{data:l}=ve.storage.from("avatars").getPublicUrl(s);return l.publicUrl}const D0=E.createContext(null);function $0({children:i}){const[n,s]=E.useState(null),[o,l]=E.useState(!0),[u,f]=E.useState(null),p=E.useRef(!1),g=E.useCallback(async _=>{if(!p.current){p.current=!0,l(!0),f(null);try{if(!(_?.user||null)){s(null);return}await O0();const R=await A0();s(R)}catch(b){console.error("Profile load error:",b),f(b.message||"Failed to load profile"),s(null)}finally{p.current=!1,l(!1)}}},[]);E.useEffect(()=>{let _=!0;(async()=>{const{data:{session:R}}=await ve.auth.getSession();_&&await g(R)})();const{data:b}=ve.auth.onAuthStateChange((R,P)=>{_&&g(P)});return()=>{_=!1,b?.subscription?.unsubscribe()}},[g]);const v=E.useCallback(async _=>{l(!0),f(null);try{const b=await L0(_);return s(b),b}catch(b){throw console.error("Profile save error:",b),f(b.message||"Failed to save profile"),b}finally{l(!1)}},[]),y=E.useCallback(async _=>{l(!0),f(null);try{const b=await I0(_);return await v({display_name:n?.display_name||"User",avatar_url:b})}catch(b){throw f(b.message||"Failed to upload avatar"),b}finally{l(!1)}},[n?.display_name,v]),x=E.useMemo(()=>({profile:n,loading:o,error:u,saveProfile:v,uploadAvatar:y}),[n,o,u,v,y]);return h.jsx(D0.Provider,{value:x,children:i})}const M0=Of.lazy(()=>Ar(()=>import("./ShareViewer-WNzWzUbv.js"),[])),U0=()=>{const[i,n]=E.useState(()=>window.location.pathname);return E.useEffect(()=>{const o=()=>n(window.location.pathname);return window.addEventListener("popstate",o),()=>window.removeEventListener("popstate",o)},[]),{shareToken:E.useMemo(()=>{const o=i.match(/^\/s\/([^/]+)\/?$/);return o?decodeURIComponent(o[1]):null},[i])}};function F0(){const{shareToken:i}=U0();return i?h.jsx(E.Suspense,{fallback:h.jsx("div",{className:"p-6 text-sm text-app-muted",children:"Loading"}),children:h.jsx(M0,{token:i})}):h.jsx(Yv,{children:h.jsx($0,{children:h.jsx(R0,{children:h.jsx(P0,{})})})})}Pm.createRoot(document.getElementById("root")).render(h.jsx(Of.StrictMode,{children:h.jsx(F0,{})}));export{Vl as R,Ce as e,h as j,E as r,ve as s};
